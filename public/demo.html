<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bero System SaaS - Demo</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Cairo', sans-serif; }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .company-alpha { background: linear-gradient(135deg, #3B82F6, #1E40AF); }
        .company-beta { background: linear-gradient(135deg, #10B981, #047857); }
        .company-gamma { background: linear-gradient(135deg, #8B5CF6, #5B21B6); }
        
        .slide-up {
            animation: slideUp 0.5s ease-out;
        }
        
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, createContext, useContext } = React;

        // ======================================
        // Security Utilities
        // ======================================
        const hashPassword = (password) => {
            let hash = 0;
            const str = password + 'BERO_SALT_KEY_2025';
            
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            
            return Math.abs(hash).toString(36);
        };

        // ======================================
        // SaaS Auth Context
        // ======================================
        const SaaSAuthContext = createContext();

        const useSaaSAuth = () => {
            const context = useContext(SaaSAuthContext);
            if (!context) {
                throw new Error('useSaaSAuth must be used within SaaSAuthProvider');
            }
            return context;
        };

        const SaaSAuthProvider = ({ children }) => {
            const [currentStep, setCurrentStep] = useState('company-select');
            const [selectedCompany, setSelectedCompany] = useState(null);
            const [loading, setLoading] = useState(false);

            const MOCK_COMPANIES = {
                'alpha': {
                    id: 1,
                    identifier: 'alpha',
                    name: 'Ø´Ø±ÙƒØ© Ø£Ù„ÙØ§ Ù„Ù„ØªØ¬Ø§Ø±Ø©',
                    primaryColor: '#3B82F6',
                    secondaryColor: '#1E40AF',
                    accentColor: '#DBEAFE',
                    displayName: 'Alpha Co.',
                    description: 'Ø´Ø±ÙƒØ© Ø±Ø§Ø¦Ø¯Ø© ÙÙŠ ØªØ¬Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©',
                    status: 'active',
                    plan: 'premium',
                    expiryDate: '2025-12-31'
                },
                'beta': {
                    id: 2,
                    identifier: 'beta',
                    name: 'Ø´Ø±ÙƒØ© Ø¨ÙŠØªØ§ Ù„Ù„ØµÙ†Ø§Ø¹Ø©',
                    primaryColor: '#10B981',
                    secondaryColor: '#047857',
                    accentColor: '#D1FAE5',
                    displayName: 'Beta Industries',
                    description: 'Ø´Ø±ÙƒØ© ØµÙ†Ø§Ø¹ÙŠØ© Ù…ØªØ®ØµØµØ© ÙÙŠ Ø§Ù„Ù…Ø¹Ø¯Ø§Øª',
                    status: 'active',
                    plan: 'standard',
                    expiryDate: '2025-08-15'
                },
                'gamma': {
                    id: 3,
                    identifier: 'gamma',
                    name: 'Ø´Ø±ÙƒØ© Ø¬Ø§Ù…Ø§ Ù„Ù„Ø®Ø¯Ù…Ø§Øª',
                    primaryColor: '#8B5CF6',
                    secondaryColor: '#5B21B6',
                    accentColor: '#EDE9FE',
                    displayName: 'Gamma Services',
                    description: 'Ù…Ø²ÙˆØ¯ Ø­Ù„ÙˆÙ„ Ø®Ø¯Ù…Ø§Øª Ù…ØªÙƒØ§Ù…Ù„Ø©',
                    status: 'trial',
                    plan: 'trial',
                    expiryDate: '2025-02-15'
                }
            };

            const validateCompanyId = async (companyIdentifier) => {
                setLoading(true);
                
                try {
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    const company = MOCK_COMPANIES[companyIdentifier.toLowerCase()];
                    
                    if (!company) {
                        return { success: false, message: 'Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ© ØºÙŠØ± ØµØ­ÙŠØ­' };
                    }
                    
                    return { success: true, company, message: 'ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¤Ø³Ø³Ø© Ø¨Ù†Ø¬Ø§Ø­' };
                    
                } catch (error) {
                    return { success: false, message: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ©' };
                } finally {
                    setLoading(false);
                }
            };

            const proceedToCompanyLoad = async (companyIdentifier) => {
                const result = await validateCompanyId(companyIdentifier);
                
                if (result.success) {
                    setSelectedCompany(result.company);
                    setCurrentStep('company-load');
                    setTimeout(() => {
                        setCurrentStep('password-input');
                    }, 2000);
                    return { success: true, company: result.company };
                } else {
                    return result;
                }
            };

            const resetAuth = () => {
                setCurrentStep('company-select');
                setSelectedCompany(null);
            };

            const value = {
                currentStep,
                selectedCompany,
                loading,
                proceedToCompanyLoad,
                resetAuth,
                mockCompanies: MOCK_COMPANIES
            };

            return (
                <SaaSAuthContext.Provider value={value}>
                    {children}
                </SaaSAuthContext.Provider>
            );
        };

        // ======================================
        // Company Select Step
        // ======================================
        const CompanySelectStep = () => {
            const { proceedToCompanyLoad, mockCompanies } = useSaaSAuth();
            const [companyId, setCompanyId] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (!companyId.trim()) {
                    setError('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ©');
                    return;
                }

                setLoading(true);
                setError('');

                const result = await proceedToCompanyLoad(companyId);
                
                if (!result.success) {
                    setError(result.message);
                }
                
                setLoading(false);
            };

            const handleQuickTest = async (company) => {
                setLoading(true);
                setCompanyId(company);
                const result = await proceedToCompanyLoad(company);
                setLoading(false);
            };

            return (
                <div className="min-h-screen gradient-bg flex items-center justify-center p-4">
                    <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md slide-up">
                        <div className="text-center mb-8">
                            <div className="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i className="fas fa-building text-blue-600 text-2xl"></i>
                            </div>
                            <h1 className="text-3xl font-bold text-gray-800 mb-2">Bero System</h1>
                            <p className="text-gray-600">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹Ø§Øª - SaaS</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ©
                                </label>
                                <input
                                    type="text"
                                    value={companyId}
                                    onChange={(e) => setCompanyId(e.target.value)}
                                    placeholder="Ø£Ø¯Ø®Ù„ Ù…Ø¹Ø±Ù Ø§Ù„Ø´Ø±ÙƒØ© (Ù…Ø«Ù„: alpha)"
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    disabled={loading}
                                />
                            </div>

                            {error && (
                                <div className="bg-red-50 border border-red-200 rounded-lg p-3">
                                    <p className="text-red-600 text-sm">{error}</p>
                                </div>
                            )}

                            <button
                                type="submit"
                                disabled={loading}
                                className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"
                            >
                                {loading ? (
                                    <i className="fas fa-spinner loading-spinner ml-2"></i>
                                ) : (
                                    <i className="fas fa-arrow-right ml-2"></i>
                                )}
                                {loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...' : 'Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©'}
                            </button>
                        </form>

                        <div className="mt-6">
                            <p className="text-sm text-gray-500 text-center mb-4">Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹:</p>
                            <div className="grid grid-cols-3 gap-2">
                                {Object.entries(mockCompanies).map(([id, company]) => (
                                    <button
                                        key={id}
                                        onClick={() => handleQuickTest(id)}
                                        disabled={loading}
                                        className={`px-3 py-2 text-xs font-medium rounded-lg transition-colors ${
                                            id === 'alpha' ? 'bg-blue-100 text-blue-700 hover:bg-blue-200' :
                                            id === 'beta' ? 'bg-green-100 text-green-700 hover:bg-green-200' :
                                            'bg-purple-100 text-purple-700 hover:bg-purple-200'
                                        } disabled:opacity-50`}
                                    >
                                        {id}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="mt-6 text-center">
                            <p className="text-xs text-gray-500">
                                Ø§Ù„Ù…Ø¤Ø³Ø³Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: alpha, beta, gamma
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // ======================================
        // Company Load Step
        // ======================================
        const CompanyLoadStep = () => {
            const { selectedCompany } = useSaaSAuth();

            if (!selectedCompany) return null;

            return (
                <div 
                    className="min-h-screen flex items-center justify-center p-4"
                    style={{
                        background: `linear-gradient(135deg, ${selectedCompany.accentColor}, ${selectedCompany.secondaryColor}20, ${selectedCompany.primaryColor}15)`
                    }}
                >
                    <div className="bg-white rounded-2xl shadow-2xl p-8 text-center max-w-md slide-up">
                        <div className="mb-6">
                            <div 
                                className="w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center text-white text-2xl font-bold"
                                style={{ backgroundColor: selectedCompany.primaryColor }}
                            >
                                {selectedCompany.displayName.charAt(0)}
                            </div>
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">{selectedCompany.name}</h2>
                            <p className="text-gray-600">{selectedCompany.displayName}</p>
                        </div>

                        <div className="mb-6">
                            <i className="fas fa-spinner loading-spinner text-3xl" style={{ color: selectedCompany.primaryColor }}></i>
                        </div>

                        <p className="text-gray-600">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ø¤Ø³Ø³Ø©...</p>
                        
                        <div className="mt-4">
                            <div 
                                className="h-2 rounded-full bg-gray-200 overflow-hidden"
                            >
                                <div 
                                    className="h-full transition-all duration-3000"
                                    style={{ 
                                        backgroundColor: selectedCompany.primaryColor,
                                        width: '100%'
                                    }}
                                ></div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // ======================================
        // Password Input Step
        // ======================================
        const PasswordInputStep = () => {
            const { selectedCompany, resetAuth } = useSaaSAuth();
            const [password, setPassword] = useState('');
            const [loading, setLoading] = useState(false);
            const [message, setMessage] = useState('');

            const handleSubmit = async (e) => {
                e.preventDefault();
                
                if (!password.trim()) {
                    setMessage('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±');
                    return;
                }

                setLoading(true);
                
                try {
                    // Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (admin123)
                    if (password === 'admin123') {
                        setMessage('âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!');
                        setTimeout(() => {
                            alert(`Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ${selectedCompany.name}!`);
                            resetAuth();
                        }, 1000);
                    } else {
                        setMessage('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
                    }
                } catch (error) {
                    setMessage('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„');
                } finally {
                    setLoading(false);
                }
            };

            const handleBack = () => {
                resetAuth();
            };

            if (!selectedCompany) return null;

            return (
                <div 
                    className="min-h-screen flex items-center justify-center p-4"
                    style={{
                        background: `linear-gradient(135deg, ${selectedCompany.accentColor}, ${selectedCompany.secondaryColor}20, ${selectedCompany.primaryColor}15)`
                    }}
                >
                    <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md slide-up">
                        <div className="text-center mb-8">
                            <div 
                                className="w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center text-white text-xl font-bold"
                                style={{ backgroundColor: selectedCompany.primaryColor }}
                            >
                                {selectedCompany.displayName.charAt(0)}
                            </div>
                            <h1 className="text-2xl font-bold text-gray-800 mb-2">{selectedCompany.name}</h1>
                            <p className="text-gray-600">Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div>
                                <label className="block text-sm font-medium text-gray-700 mb-2">
                                    ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                                    className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    disabled={loading}
                                />
                            </div>

                            {message && (
                                <div className={`p-3 rounded-lg text-sm ${
                                    message.includes('âœ…') ? 'bg-green-50 text-green-700 border border-green-200' :
                                    message.includes('âŒ') ? 'bg-red-50 text-red-700 border border-red-200' :
                                    'bg-blue-50 text-blue-700 border border-blue-200'
                                }`}>
                                    {message}
                                </div>
                            )}

                            <div className="flex space-x-3">
                                <button
                                    type="button"
                                    onClick={handleBack}
                                    disabled={loading}
                                    className="flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors disabled:opacity-50"
                                >
                                    Ø±Ø¬ÙˆØ¹
                                </button>
                                <button
                                    type="submit"
                                    disabled={loading}
                                    className="flex-1 text-white py-3 px-4 rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center"
                                    style={{ backgroundColor: selectedCompany.primaryColor }}
                                >
                                    {loading ? (
                                        <i className="fas fa-spinner loading-spinner ml-2"></i>
                                    ) : (
                                        <i className="fas fa-sign-in-alt ml-2"></i>
                                    )}
                                    {loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...' : 'Ø¯Ø®ÙˆÙ„'}
                                </button>
                            </div>
                        </form>

                        <div className="mt-6 text-center">
                            <p className="text-xs text-gray-500">
                                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©: <strong>admin123</strong>
                            </p>
                        </div>
                    </div>
                </div>
            );
        };

        // ======================================
        // Main App Component
        // ======================================
        const App = () => {
            const { currentStep } = useSaaSAuth();

            return (
                <div>
                    {currentStep === 'company-select' && <CompanySelectStep />}
                    {currentStep === 'company-load' && <CompanyLoadStep />}
                    {currentStep === 'password-input' && <PasswordInputStep />}
                </div>
            );
        };

        // ======================================
        // Root Render
        // ======================================
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(
            <SaaSAuthProvider>
                <App />
            </SaaSAuthProvider>
        );
    </script>

    <script>
        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ console Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
        console.log(`
ğŸ‰ Bero System SaaS Demo Ø¬Ø§Ù‡Ø²!

ğŸ’¡ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±:
â€¢ Ø§Ø®ØªØ± Ø´Ø±ÙƒØ©: alpha, beta, Ø£Ùˆ gamma
â€¢ Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: admin123
â€¢ Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø³Ø±ÙŠØ¹Ø©

ğŸ“Š Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:
â€¢ Alpha Co. (Ø£Ø²Ø±Ù‚) - Ø´Ø±ÙƒØ© ØªØ¬Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ©
â€¢ Beta Industries (Ø£Ø®Ø¶Ø±) - Ø´Ø±ÙƒØ© ØµÙ†Ø§Ø¹ÙŠØ©  
â€¢ Gamma Services (Ø¨Ù†ÙØ³Ø¬ÙŠ) - Ø®Ø¯Ù…Ø§Øª Ù…ØªÙƒØ§Ù…Ù„Ø©

ğŸ”§ Try: ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… F12 Ù„ÙØªØ­ Console ÙˆØ§Ù„ØªÙØ§Ø¹Ù„ Ù…Ø¹ Ø§Ù„Ù†Ø¸Ø§Ù…
`);

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠÙŠÙ† ÙÙŠ localStorage
        window.addEventListener('DOMContentLoaded', () => {
            const defaultUsers = [
                { username: 'alpha_admin', password: 'admin123', company: 'alpha' },
                { username: 'beta_admin', password: 'admin123', company: 'beta' },
                { username: 'gamma_admin', password: 'admin123', company: 'gamma' }
            ];
            
            localStorage.setItem('bero_demo_users', JSON.stringify(defaultUsers));
            console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠÙŠÙ† Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±');
        });
    </script>
</body>
</html>