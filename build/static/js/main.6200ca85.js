/*! For license information please see main.6200ca85.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var a=s(43),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var a,n={},c=null,d=null;for(a in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,a)&&!o.hasOwnProperty(a)&&(n[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===n[a]&&(n[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},202:(e,t)=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),m=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function f(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||h}function b(){}function v(e,t,s){this.props=e,this.context=t,this.refs=g,this.updater=s||h}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=f.prototype;var j=v.prototype=new b;j.constructor=v,p(j,f.prototype),j.isPureReactComponent=!0;var y=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,a){var r,n={},l=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(l=""+t.key),t)N.call(t,r)&&!S.hasOwnProperty(r)&&(n[r]=t[r]);var o=arguments.length-2;if(1===o)n.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];n.children=c}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===n[r]&&(n[r]=o[r]);return{$$typeof:s,type:e,key:l,ref:i,props:n,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var I=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,r,n,l){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return l=l(o=e),e=""===n?"."+D(o,0):n,y(l)?(r="",null!=e&&(r=e.replace(I,"$&/")+"/"),_(l,t,r,"",function(e){return e})):null!=l&&(C(l)&&(l=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(l,r+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(I,"$&/")+"/")+e)),t.push(l)),1;if(o=0,n=""===n?".":n+":",y(e))for(var c=0;c<e.length;c++){var d=n+D(i=e[c],c);o+=_(i,t,r,d,l)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(i=e.next()).done;)o+=_(i=i.value,t,r,d=n+D(i,c++),l);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function L(e,t,s){if(null==e)return e;var a=[],r=0;return _(e,a,"","",function(e){return t.call(s,e,r++)}),a}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},P={transition:null},T={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:w};function z(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,s){L(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=f,t.Fragment=r,t.Profiler=l,t.PureComponent=v,t.StrictMode=n,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=z,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),n=e.key,l=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(l=t.ref,i=w.current),void 0!==t.key&&(n=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:s,type:e.type,key:n,ref:l,props:r,_owner:i}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:x,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=z,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,s){return M.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,s){return M.current.useReducer(e,t,s)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return M.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,r=e[a];if(!(0<n(r,t)))break e;e[a]=t,e[s]=r,s=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,r=e.length,l=r>>>1;a<l;){var i=2*(a+1)-1,o=e[i],c=i+1,d=e[c];if(0>n(o,s))c<r&&0>n(d,o)?(e[a]=d,e[c]=s,a=c):(e[a]=o,e[i]=s,a=i);else{if(!(c<r&&0>n(d,s)))break e;e[a]=d,e[c]=s,a=c}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],x=1,u=null,m=3,h=!1,p=!1,g=!1,f="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var t=a(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,s(c,t)}t=a(d)}}function y(e){if(g=!1,j(e),!p)if(null!==a(c))p=!0,P(N);else{var t=a(d);null!==t&&T(y,t.startTime-e)}}function N(e,s){p=!1,g&&(g=!1,b(C),C=-1),h=!0;var n=m;try{for(j(s),u=a(c);null!==u&&(!(u.expirationTime>s)||e&&!_());){var l=u.callback;if("function"===typeof l){u.callback=null,m=u.priorityLevel;var i=l(u.expirationTime<=s);s=t.unstable_now(),"function"===typeof i?u.callback=i:u===a(c)&&r(c),j(s)}else r(c);u=a(c)}if(null!==u)var o=!0;else{var x=a(d);null!==x&&T(y,x.startTime-s),o=!1}return o}finally{u=null,m=n,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,S=!1,k=null,C=-1,I=5,D=-1;function _(){return!(t.unstable_now()-D<I)}function L(){if(null!==k){var e=t.unstable_now();D=e;var s=!0;try{s=k(!0,e)}finally{s?w():(S=!1,k=null)}}else S=!1}if("function"===typeof v)w=function(){v(L)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,M=E.port2;E.port1.onmessage=L,w=function(){M.postMessage(null)}}else w=function(){f(L,0)};function P(e){k=e,S||(S=!0,w())}function T(e,s){C=f(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,P(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,r,n){var l=t.unstable_now();switch("object"===typeof n&&null!==n?n="number"===typeof(n=n.delay)&&0<n?l+n:l:n=l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:x++,callback:r,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,s(d,e),null===a(c)&&e===a(d)&&(g?(b(C),C=-1):g=!0,T(y,n-l))):(e.sortIndex=i,s(c,e),p||h||(p=!0,P(N))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},391:(e,t,s)=>{var a=s(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},426:(e,t,s)=>{s.r(t),s.d(t,{checkPasswordStrength:()=>l,default:()=>o,generateId:()=>n,hashPassword:()=>a,sanitizeInput:()=>i,verifyPassword:()=>r});const a=e=>{let t=0;const s=e+"BERO_SALT_KEY_2025";for(let a=0;a<s.length;a++){t=(t<<5)-t+s.charCodeAt(a),t&=t}return Math.abs(t).toString(36)},r=(e,t)=>a(e)===t,n=()=>Date.now()+Math.random().toString(36).substr(2,9),l=e=>{const t={score:0,feedback:[]};return e.length<6?(t.feedback.push("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0642\u0635\u064a\u0631\u0629 \u062c\u062f\u0627\u064b (\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 6 \u0623\u062d\u0631\u0641)"),t):(e.length>=6&&(t.score+=1),e.length>=8&&(t.score+=1),/[a-z]/.test(e)&&(t.score+=1),/[A-Z]/.test(e)&&(t.score+=1),/[0-9]/.test(e)&&(t.score+=1),/[^a-zA-Z0-9]/.test(e)&&(t.score+=1),t.score<=2?(t.level="weak",t.label="\u0636\u0639\u064a\u0641\u0629",t.color="red"):t.score<=4?(t.level="medium",t.label="\u0645\u062a\u0648\u0633\u0637\u0629",t.color="orange"):(t.level="strong",t.label="\u0642\u0648\u064a\u0629",t.color="green"),t)},i=e=>"string"!==typeof e?e:e.trim().replace(/[<>]/g,""),o={hashPassword:a,verifyPassword:r,generateId:n,checkPasswordStrength:l,sanitizeInput:i}},579:(e,t,s)=>{e.exports=s(153)},730:(e,t,s)=>{var a=s(43),r=s(853);function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,i={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(i[e]=t,e=0;e<t.length;e++)l.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),x=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function p(e,t,s,a,r,n,l){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=l}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var f=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,s,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,a){if(null===t||"undefined"===typeof t||function(e,t,s,a){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,a))return!0;if(a)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,r,a)&&(s=null),a||null===r?function(e){return!!x.call(h,e)||!x.call(m,e)&&(u.test(e)?h[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):r.mustUseProperty?e[r.propertyName]=null===s?3!==r.type&&"":s:(t=r.attributeName,a=r.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(r=r.type)||4===r&&!0===s?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(f,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),I=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var O,A=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var R=!1;function V(e,t){if(!e||R)return"";R=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),n=a.stack.split("\n"),l=r.length-1,i=n.length-1;1<=l&&0<=i&&r[l]!==n[i];)i--;for(;1<=l&&0<=i;l--,i--)if(r[l]!==n[i]){if(1!==l||1!==i)do{if(l--,0>--i||r[l]!==n[i]){var o="\n"+r[l].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=l&&0<=i);break}}}finally{R=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case k:return"Profiler";case S:return"StrictMode";case _:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return q(e(t))}catch(s){}}return null}function Q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function U(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var r=s.get,n=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=W(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var s=t.checked;return A({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function G(e,t){var s=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){Y(e,t);var s=H(t.value),a=t.type;if(null!=s)"number"===a?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&K(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,a){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&a&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,r=0;r<e.length;r++){if(e[r].value===s)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(n(91));return A({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(n(92));if(te(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function ne(e,t){var s=H(t.value),a=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=a&&(e.defaultValue=""+a)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,xe=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,s,a){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function ue(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function pe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),r=pe(s,t[s],a);"float"===s&&(s="cssFloat"),a?e.setProperty(s,r):e[s]=r}}Object.keys(me).forEach(function(e){he.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var fe=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(n(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(n(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(n(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,Se=null;function ke(e){if(e=br(e)){if("function"!==typeof Ne)throw Error(n(280));var t=e.stateNode;t&&(t=jr(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?Se?Se.push(e):Se=[e]:we=e}function Ie(){if(we){var e=we,t=Se;if(Se=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function De(e,t){return e(t)}function _e(){}var Le=!1;function Ee(e,t,s){if(Le)return e(t,s);Le=!0;try{return De(e,t,s)}finally{Le=!1,(null!==we||null!==Se)&&(_e(),Ie())}}function Me(e,t){var s=e.stateNode;if(null===s)return null;var a=jr(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(n(231,t,typeof s));return s}var Pe=!1;if(d)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(de){Pe=!1}function ze(e,t,s,a,r,n,l,i,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var Oe=!1,Ae=null,Fe=!1,Re=null,Ve={onError:function(e){Oe=!0,Ae=e}};function Be(e,t,s,a,r,n,l,i,o){Oe=!1,Ae=null,ze.apply(Ve,arguments)}function qe(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(n(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(n(188));return t!==e?null:e}for(var s=e,a=t;;){var r=s.return;if(null===r)break;var l=r.alternate;if(null===l){if(null!==(a=r.return)){s=a;continue}break}if(r.child===l.child){for(l=r.child;l;){if(l===s)return He(r),e;if(l===a)return He(r),t;l=l.sibling}throw Error(n(188))}if(s.return!==a.return)s=r,a=l;else{for(var i=!1,o=r.child;o;){if(o===s){i=!0,s=r,a=l;break}if(o===a){i=!0,a=r,s=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===s){i=!0,s=l,a=r;break}if(o===a){i=!0,a=l,s=r;break}o=o.sibling}if(!i)throw Error(n(189))}}if(s.alternate!==a)throw Error(n(190))}if(3!==s.tag)throw Error(n(188));return s.stateNode.current===s?e:t}(e))?Ue(e):null}function Ue(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ue(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,$e=r.unstable_shouldYield,Ge=r.unstable_requestPaint,Ye=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,st=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,nt=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(it(e)/ot|0)|0},it=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function xt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var s=e.pendingLanes;if(0===s)return 0;var a=0,r=e.suspendedLanes,n=e.pingedLanes,l=268435455&s;if(0!==l){var i=l&~r;0!==i?a=xt(i):0!==(n&=l)&&(a=xt(n))}else 0!==(l=s&~r)?a=xt(l):0!==n&&(a=xt(n));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(n=t&-t)||16===r&&0!==(4194240&n)))return t;if(0!==(4&a)&&(a|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(s=31-lt(t)),a|=e[s],t&=~r;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ht(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function ft(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=s}function bt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-lt(s),r=1<<a;r&t|e[a]&t&&(e[a]|=t),s&=~r}}var vt=0;function jt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var yt,Nt,wt,St,kt,Ct=!1,It=[],Dt=null,_t=null,Lt=null,Et=new Map,Mt=new Map,Pt=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zt(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Ot(e,t,s,a,r,n){return null===e||e.nativeEvent!==n?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:n,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&Nt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function At(e){var t=fr(e.target);if(null!==t){var s=qe(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Qe(s)))return e.blockedOn=t,void kt(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=br(s))&&Nt(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);je=a,s.target.dispatchEvent(a),je=null,t.shift()}return!0}function Rt(e,t,s){Ft(e)&&s.delete(t)}function Vt(){Ct=!1,null!==Dt&&Ft(Dt)&&(Dt=null),null!==_t&&Ft(_t)&&(_t=null),null!==Lt&&Ft(Lt)&&(Lt=null),Et.forEach(Rt),Mt.forEach(Rt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return Bt(t,e)}if(0<It.length){Bt(It[0],e);for(var s=1;s<It.length;s++){var a=It[s];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Dt&&Bt(Dt,e),null!==_t&&Bt(_t,e),null!==Lt&&Bt(Lt,e),Et.forEach(t),Mt.forEach(t),s=0;s<Pt.length;s++)(a=Pt[s]).blockedOn===e&&(a.blockedOn=null);for(;0<Pt.length&&null===(s=Pt[0]).blockedOn;)At(s),null===s.blockedOn&&Pt.shift()}var Qt=j.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,s,a){var r=vt,n=Qt.transition;Qt.transition=null;try{vt=1,Xt(e,t,s,a)}finally{vt=r,Qt.transition=n}}function Ut(e,t,s,a){var r=vt,n=Qt.transition;Qt.transition=null;try{vt=4,Xt(e,t,s,a)}finally{vt=r,Qt.transition=n}}function Xt(e,t,s,a){if(Ht){var r=$t(e,t,s,a);if(null===r)Qa(e,t,a,Kt,s),zt(e,a);else if(function(e,t,s,a,r){switch(t){case"focusin":return Dt=Ot(Dt,e,t,s,a,r),!0;case"dragenter":return _t=Ot(_t,e,t,s,a,r),!0;case"mouseover":return Lt=Ot(Lt,e,t,s,a,r),!0;case"pointerover":var n=r.pointerId;return Et.set(n,Ot(Et.get(n)||null,e,t,s,a,r)),!0;case"gotpointercapture":return n=r.pointerId,Mt.set(n,Ot(Mt.get(n)||null,e,t,s,a,r)),!0}return!1}(r,e,t,s,a))a.stopPropagation();else if(zt(e,a),4&t&&-1<Tt.indexOf(e)){for(;null!==r;){var n=br(r);if(null!==n&&yt(n),null===(n=$t(e,t,s,a))&&Qa(e,t,a,Kt,s),n===r)break;r=n}null!==r&&a.stopPropagation()}else Qa(e,t,a,null,s)}}var Kt=null;function $t(e,t,s,a){if(Kt=null,null!==(e=fr(e=ye(a))))if(null===(t=qe(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Qe(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case st:return 16;case at:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function es(){if(Zt)return Zt;var e,t,s=Jt,a=s.length,r="value"in Yt?Yt.value:Yt.textContent,n=r.length;for(e=0;e<a&&s[e]===r[e];e++);var l=a-e;for(t=1;t<=l&&s[a-t]===r[n-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function ts(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ss(){return!0}function as(){return!1}function rs(e){function t(t,s,a,r,n){for(var l in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=r,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(l)&&(t=e[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ss:as,this.isPropagationStopped=as,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ss)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ss)},persist:function(){},isPersistent:ss}),t}var ns,ls,is,os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=rs(os),ds=A({},os,{view:0,detail:0}),xs=rs(ds),us=A({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ss,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==is&&(is&&"mousemove"===e.type?(ns=e.screenX-is.screenX,ls=e.screenY-is.screenY):ls=ns=0,is=e),ns)},movementY:function(e){return"movementY"in e?e.movementY:ls}}),ms=rs(us),hs=rs(A({},us,{dataTransfer:0})),ps=rs(A({},ds,{relatedTarget:0})),gs=rs(A({},os,{animationName:0,elapsedTime:0,pseudoElement:0})),fs=A({},os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bs=rs(fs),vs=rs(A({},os,{data:0})),js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ys={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ns={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ns[e])&&!!t[e]}function Ss(){return ws}var ks=A({},ds,{key:function(e){if(e.key){var t=js[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ts(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ys[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ss,charCode:function(e){return"keypress"===e.type?ts(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ts(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=rs(ks),Is=rs(A({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ds=rs(A({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ss})),_s=rs(A({},os,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ls=A({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Es=rs(Ls),Ms=[9,13,27,32],Ps=d&&"CompositionEvent"in window,Ts=null;d&&"documentMode"in document&&(Ts=document.documentMode);var zs=d&&"TextEvent"in window&&!Ts,Os=d&&(!Ps||Ts&&8<Ts&&11>=Ts),As=String.fromCharCode(32),Fs=!1;function Rs(e,t){switch(e){case"keyup":return-1!==Ms.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bs=!1;var qs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qs[e.type]:"textarea"===t}function Hs(e,t,s,a){Ce(a),0<(t=Wa(t,"onChange")).length&&(s=new cs("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Ws=null,Us=null;function Xs(e){Aa(e,0)}function Ks(e){if(X(vr(e)))return e}function $s(e,t){if("change"===e)return t}var Gs=!1;if(d){var Ys;if(d){var Js="oninput"in document;if(!Js){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),Js="function"===typeof Zs.oninput}Ys=Js}else Ys=!1;Gs=Ys&&(!document.documentMode||9<document.documentMode)}function ea(){Ws&&(Ws.detachEvent("onpropertychange",ta),Us=Ws=null)}function ta(e){if("value"===e.propertyName&&Ks(Us)){var t=[];Hs(t,Us,e,ye(e)),Ee(Xs,t)}}function sa(e,t,s){"focusin"===e?(ea(),Us=s,(Ws=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ks(Us)}function ra(e,t){if("click"===e)return Ks(t)}function na(e,t){if("input"===e||"change"===e)return Ks(t)}var la="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ia(e,t){if(la(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var r=s[a];if(!x.call(t,r)||!la(e[r],t[r]))return!1}return!0}function oa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,t){var s,a=oa(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oa(a)}}function da(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?da(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xa(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(a){s=!1}if(!s)break;t=K((e=t.contentWindow).document)}return t}function ua(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ma(e){var t=xa(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&da(s.ownerDocument.documentElement,s)){if(null!==a&&ua(s))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=s.textContent.length,n=Math.min(a.start,r);a=void 0===a.end?n:Math.min(a.end,r),!e.extend&&n>a&&(r=a,a=n,n=r),r=ca(s,n);var l=ca(s,a);r&&l&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),n>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ha=d&&"documentMode"in document&&11>=document.documentMode,pa=null,ga=null,fa=null,ba=!1;function va(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;ba||null==pa||pa!==K(a)||("selectionStart"in(a=pa)&&ua(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},fa&&ia(fa,a)||(fa=a,0<(a=Wa(ga,"onSelect")).length&&(t=new cs("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=pa)))}function ja(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ya={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},Na={},wa={};function Sa(e){if(Na[e])return Na[e];if(!ya[e])return e;var t,s=ya[e];for(t in s)if(s.hasOwnProperty(t)&&t in wa)return Na[e]=s[t];return e}d&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);var ka=Sa("animationend"),Ca=Sa("animationiteration"),Ia=Sa("animationstart"),Da=Sa("transitionend"),_a=new Map,La="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(e,t){_a.set(e,t),o(t,[e])}for(var Ma=0;Ma<La.length;Ma++){var Pa=La[Ma];Ea(Pa.toLowerCase(),"on"+(Pa[0].toUpperCase()+Pa.slice(1)))}Ea(ka,"onAnimationEnd"),Ea(Ca,"onAnimationIteration"),Ea(Ia,"onAnimationStart"),Ea("dblclick","onDoubleClick"),Ea("focusin","onFocus"),Ea("focusout","onBlur"),Ea(Da,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),za=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Oa(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,r,l,i,o,c){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(n(198));var d=Ae;Oe=!1,Ae=null,Fe||(Fe=!0,Re=d)}}(a,t,void 0,e),e.currentTarget=null}function Aa(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],r=a.event;a=a.listeners;e:{var n=void 0;if(t)for(var l=a.length-1;0<=l;l--){var i=a[l],o=i.instance,c=i.currentTarget;if(i=i.listener,o!==n&&r.isPropagationStopped())break e;Oa(r,i,c),n=o}else for(l=0;l<a.length;l++){if(o=(i=a[l]).instance,c=i.currentTarget,i=i.listener,o!==n&&r.isPropagationStopped())break e;Oa(r,i,c),n=o}}}if(Fe)throw e=Re,Fe=!1,Re=null,e}function Fa(e,t){var s=t[hr];void 0===s&&(s=t[hr]=new Set);var a=e+"__bubble";s.has(a)||(qa(t,e,2,!1),s.add(a))}function Ra(e,t,s){var a=0;t&&(a|=4),qa(s,e,a,t)}var Va="_reactListening"+Math.random().toString(36).slice(2);function Ba(e){if(!e[Va]){e[Va]=!0,l.forEach(function(t){"selectionchange"!==t&&(za.has(t)||Ra(t,!1,e),Ra(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Va]||(t[Va]=!0,Ra("selectionchange",!1,t))}}function qa(e,t,s,a){switch(Gt(t)){case 1:var r=Wt;break;case 4:r=Ut;break;default:r=Xt}s=r.bind(null,t,s,e),r=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):void 0!==r?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function Qa(e,t,s,a,r){var n=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var l=a.tag;if(3===l||4===l){var i=a.stateNode.containerInfo;if(i===r||8===i.nodeType&&i.parentNode===r)break;if(4===l)for(l=a.return;null!==l;){var o=l.tag;if((3===o||4===o)&&((o=l.stateNode.containerInfo)===r||8===o.nodeType&&o.parentNode===r))return;l=l.return}for(;null!==i;){if(null===(l=fr(i)))return;if(5===(o=l.tag)||6===o){a=n=l;continue e}i=i.parentNode}}a=a.return}Ee(function(){var a=n,r=ye(s),l=[];e:{var i=_a.get(e);if(void 0!==i){var o=cs,c=e;switch(e){case"keypress":if(0===ts(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":c="focus",o=ps;break;case"focusout":c="blur",o=ps;break;case"beforeblur":case"afterblur":o=ps;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=hs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Ds;break;case ka:case Ca:case Ia:o=gs;break;case Da:o=_s;break;case"scroll":o=xs;break;case"wheel":o=Es;break;case"copy":case"cut":case"paste":o=bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Is}var d=0!==(4&t),x=!d&&"scroll"===e,u=d?null!==i?i+"Capture":null:i;d=[];for(var m,h=a;null!==h;){var p=(m=h).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==u&&(null!=(p=Me(h,u))&&d.push(Ha(h,p,m)))),x)break;h=h.return}0<d.length&&(i=new o(i,c,null,s,r),l.push({event:i,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===je||!(c=s.relatedTarget||s.fromElement)||!fr(c)&&!c[mr])&&(o||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=a,null!==(c=(c=s.relatedTarget||s.toElement)?fr(c):null)&&(c!==(x=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=a),o!==c)){if(d=ms,p="onMouseLeave",u="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(d=Is,p="onPointerLeave",u="onPointerEnter",h="pointer"),x=null==o?i:vr(o),m=null==c?i:vr(c),(i=new d(p,h+"leave",o,s,r)).target=x,i.relatedTarget=m,p=null,fr(r)===a&&((d=new d(u,h+"enter",c,s,r)).target=m,d.relatedTarget=x,p=d),x=p,o&&c)e:{for(u=c,h=0,m=d=o;m;m=Ua(m))h++;for(m=0,p=u;p;p=Ua(p))m++;for(;0<h-m;)d=Ua(d),h--;for(;0<m-h;)u=Ua(u),m--;for(;h--;){if(d===u||null!==u&&d===u.alternate)break e;d=Ua(d),u=Ua(u)}d=null}else d=null;null!==o&&Xa(l,i,o,d,!1),null!==c&&null!==x&&Xa(l,x,c,d,!0)}if("select"===(o=(i=a?vr(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===o&&"file"===i.type)var g=$s;else if(Qs(i))if(Gs)g=na;else{g=aa;var f=sa}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=ra);switch(g&&(g=g(e,a))?Hs(l,g,s,r):(f&&f(e,i,a),"focusout"===e&&(f=i._wrapperState)&&f.controlled&&"number"===i.type&&ee(i,"number",i.value)),f=a?vr(a):window,e){case"focusin":(Qs(f)||"true"===f.contentEditable)&&(pa=f,ga=a,fa=null);break;case"focusout":fa=ga=pa=null;break;case"mousedown":ba=!0;break;case"contextmenu":case"mouseup":case"dragend":ba=!1,va(l,s,r);break;case"selectionchange":if(ha)break;case"keydown":case"keyup":va(l,s,r)}var b;if(Ps)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Bs?Rs(e,s)&&(v="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(v="onCompositionStart");v&&(Os&&"ko"!==s.locale&&(Bs||"onCompositionStart"!==v?"onCompositionEnd"===v&&Bs&&(b=es()):(Jt="value"in(Yt=r)?Yt.value:Yt.textContent,Bs=!0)),0<(f=Wa(a,v)).length&&(v=new vs(v,e,null,s,r),l.push({event:v,listeners:f}),b?v.data=b:null!==(b=Vs(s))&&(v.data=b))),(b=zs?function(e,t){switch(e){case"compositionend":return Vs(t);case"keypress":return 32!==t.which?null:(Fs=!0,As);case"textInput":return(e=t.data)===As&&Fs?null:e;default:return null}}(e,s):function(e,t){if(Bs)return"compositionend"===e||!Ps&&Rs(e,t)?(e=es(),Zt=Jt=Yt=null,Bs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Os&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(a=Wa(a,"onBeforeInput")).length&&(r=new vs("onBeforeInput","beforeinput",null,s,r),l.push({event:r,listeners:a}),r.data=b))}Aa(l,t)})}function Ha(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Wa(e,t){for(var s=t+"Capture",a=[];null!==e;){var r=e,n=r.stateNode;5===r.tag&&null!==n&&(r=n,null!=(n=Me(e,s))&&a.unshift(Ha(e,n,r)),null!=(n=Me(e,t))&&a.push(Ha(e,n,r))),e=e.return}return a}function Ua(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xa(e,t,s,a,r){for(var n=t._reactName,l=[];null!==s&&s!==a;){var i=s,o=i.alternate,c=i.stateNode;if(null!==o&&o===a)break;5===i.tag&&null!==c&&(i=c,r?null!=(o=Me(s,n))&&l.unshift(Ha(s,o,i)):r||null!=(o=Me(s,n))&&l.push(Ha(s,o,i))),s=s.return}0!==l.length&&e.push({event:t,listeners:l})}var Ka=/\r\n?/g,$a=/\u0000|\uFFFD/g;function Ga(e){return("string"===typeof e?e:""+e).replace(Ka,"\n").replace($a,"")}function Ya(e,t,s){if(t=Ga(t),Ga(e)!==t&&s)throw Error(n(425))}function Ja(){}var Za=null,er=null;function tr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,ar="function"===typeof clearTimeout?clearTimeout:void 0,rr="function"===typeof Promise?Promise:void 0,nr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rr?function(e){return rr.resolve(null).then(e).catch(lr)}:sr;function lr(e){setTimeout(function(){throw e})}function ir(e,t){var s=t,a=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&8===r.nodeType)if("/$"===(s=r.data)){if(0===a)return e.removeChild(r),void qt(t);a--}else"$"!==s&&"$?"!==s&&"$!"!==s||a++;s=r}while(s);qt(t)}function or(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),xr="__reactFiber$"+dr,ur="__reactProps$"+dr,mr="__reactContainer$"+dr,hr="__reactEvents$"+dr,pr="__reactListeners$"+dr,gr="__reactHandles$"+dr;function fr(e){var t=e[xr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[mr]||s[xr]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=cr(e);null!==e;){if(s=e[xr])return s;e=cr(e)}return t}s=(e=s).parentNode}return null}function br(e){return!(e=e[xr]||e[mr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(n(33))}function jr(e){return e[ur]||null}var yr=[],Nr=-1;function wr(e){return{current:e}}function Sr(e){0>Nr||(e.current=yr[Nr],yr[Nr]=null,Nr--)}function kr(e,t){Nr++,yr[Nr]=e.current,e.current=t}var Cr={},Ir=wr(Cr),Dr=wr(!1),_r=Cr;function Lr(e,t){var s=e.type.contextTypes;if(!s)return Cr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,n={};for(r in s)n[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Er(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){Sr(Dr),Sr(Ir)}function Pr(e,t,s){if(Ir.current!==Cr)throw Error(n(168));kr(Ir,t),kr(Dr,s)}function Tr(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return s;for(var r in a=a.getChildContext())if(!(r in t))throw Error(n(108,Q(e)||"Unknown",r));return A({},s,a)}function zr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,_r=Ir.current,kr(Ir,e),kr(Dr,Dr.current),!0}function Or(e,t,s){var a=e.stateNode;if(!a)throw Error(n(169));s?(e=Tr(e,t,_r),a.__reactInternalMemoizedMergedChildContext=e,Sr(Dr),Sr(Ir),kr(Ir,e)):Sr(Dr),kr(Dr,s)}var Ar=null,Fr=!1,Rr=!1;function Vr(e){null===Ar?Ar=[e]:Ar.push(e)}function Br(){if(!Rr&&null!==Ar){Rr=!0;var e=0,t=vt;try{var s=Ar;for(vt=1;e<s.length;e++){var a=s[e];do{a=a(!0)}while(null!==a)}Ar=null,Fr=!1}catch(r){throw null!==Ar&&(Ar=Ar.slice(e+1)),Xe(Ze,Br),r}finally{vt=t,Rr=!1}}return null}var qr=[],Qr=0,Hr=null,Wr=0,Ur=[],Xr=0,Kr=null,$r=1,Gr="";function Yr(e,t){qr[Qr++]=Wr,qr[Qr++]=Hr,Hr=e,Wr=t}function Jr(e,t,s){Ur[Xr++]=$r,Ur[Xr++]=Gr,Ur[Xr++]=Kr,Kr=e;var a=$r;e=Gr;var r=32-lt(a)-1;a&=~(1<<r),s+=1;var n=32-lt(t)+r;if(30<n){var l=r-r%5;n=(a&(1<<l)-1).toString(32),a>>=l,r-=l,$r=1<<32-lt(t)+r|s<<r|a,Gr=n+e}else $r=1<<n|s<<r|a,Gr=e}function Zr(e){null!==e.return&&(Yr(e,1),Jr(e,1,0))}function en(e){for(;e===Hr;)Hr=qr[--Qr],qr[Qr]=null,Wr=qr[--Qr],qr[Qr]=null;for(;e===Kr;)Kr=Ur[--Xr],Ur[Xr]=null,Gr=Ur[--Xr],Ur[Xr]=null,$r=Ur[--Xr],Ur[Xr]=null}var tn=null,sn=null,an=!1,rn=null;function nn(e,t){var s=Ec(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function ln(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,tn=e,sn=or(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,tn=e,sn=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==Kr?{id:$r,overflow:Gr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=Ec(18,null,null,0)).stateNode=t,s.return=e,e.child=s,tn=e,sn=null,!0);default:return!1}}function on(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cn(e){if(an){var t=sn;if(t){var s=t;if(!ln(e,t)){if(on(e))throw Error(n(418));t=or(s.nextSibling);var a=tn;t&&ln(e,t)?nn(a,s):(e.flags=-4097&e.flags|2,an=!1,tn=e)}}else{if(on(e))throw Error(n(418));e.flags=-4097&e.flags|2,an=!1,tn=e}}}function dn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tn=e}function xn(e){if(e!==tn)return!1;if(!an)return dn(e),an=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tr(e.type,e.memoizedProps)),t&&(t=sn)){if(on(e))throw un(),Error(n(418));for(;t;)nn(e,t),t=or(t.nextSibling)}if(dn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){sn=or(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}sn=null}}else sn=tn?or(e.stateNode.nextSibling):null;return!0}function un(){for(var e=sn;e;)e=or(e.nextSibling)}function mn(){sn=tn=null,an=!1}function hn(e){null===rn?rn=[e]:rn.push(e)}var pn=j.ReactCurrentBatchConfig;function gn(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(n(309));var a=s.stateNode}if(!a)throw Error(n(147,e));var r=a,l=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===l?t.ref:(t=function(e){var t=r.refs;null===e?delete t[l]:t[l]=e},t._stringRef=l,t)}if("string"!==typeof e)throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function fn(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bn(e){return(0,e._init)(e._payload)}function vn(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function l(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=2,s):a:(t.flags|=2,s):(t.flags|=1048576,s)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=Ac(s,e.mode,a)).return=e,t):((t=r(t,s)).return=e,t)}function c(e,t,s,a){var n=s.type;return n===w?x(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===n||"object"===typeof n&&null!==n&&n.$$typeof===M&&bn(n)===t.type)?((a=r(t,s.props)).ref=gn(e,t,s),a.return=e,a):((a=Tc(s.type,s.key,s.props,null,e.mode,a)).ref=gn(e,t,s),a.return=e,a)}function d(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Fc(s,e.mode,a)).return=e,t):((t=r(t,s.children||[])).return=e,t)}function x(e,t,s,a,n){return null===t||7!==t.tag?((t=zc(s,e.mode,a,n)).return=e,t):((t=r(t,s)).return=e,t)}function u(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return(s=Tc(t.type,t.key,t.props,null,e.mode,s)).ref=gn(e,null,t),s.return=e,s;case N:return(t=Fc(t,e.mode,s)).return=e,t;case M:return u(e,(0,t._init)(t._payload),s)}if(te(t)||z(t))return(t=zc(t,e.mode,s,null)).return=e,t;fn(e,t)}return null}function m(e,t,s,a){var r=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==r?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case y:return s.key===r?c(e,t,s,a):null;case N:return s.key===r?d(e,t,s,a):null;case M:return m(e,t,(r=s._init)(s._payload),a)}if(te(s)||z(s))return null!==r?null:x(e,t,s,a,null);fn(e,s)}return null}function h(e,t,s,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(s)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case y:return c(t,e=e.get(null===a.key?s:a.key)||null,a,r);case N:return d(t,e=e.get(null===a.key?s:a.key)||null,a,r);case M:return h(e,t,s,(0,a._init)(a._payload),r)}if(te(a)||z(a))return x(t,e=e.get(s)||null,a,r,null);fn(t,a)}return null}function p(r,n,i,o){for(var c=null,d=null,x=n,p=n=0,g=null;null!==x&&p<i.length;p++){x.index>p?(g=x,x=null):g=x.sibling;var f=m(r,x,i[p],o);if(null===f){null===x&&(x=g);break}e&&x&&null===f.alternate&&t(r,x),n=l(f,n,p),null===d?c=f:d.sibling=f,d=f,x=g}if(p===i.length)return s(r,x),an&&Yr(r,p),c;if(null===x){for(;p<i.length;p++)null!==(x=u(r,i[p],o))&&(n=l(x,n,p),null===d?c=x:d.sibling=x,d=x);return an&&Yr(r,p),c}for(x=a(r,x);p<i.length;p++)null!==(g=h(x,r,p,i[p],o))&&(e&&null!==g.alternate&&x.delete(null===g.key?p:g.key),n=l(g,n,p),null===d?c=g:d.sibling=g,d=g);return e&&x.forEach(function(e){return t(r,e)}),an&&Yr(r,p),c}function g(r,i,o,c){var d=z(o);if("function"!==typeof d)throw Error(n(150));if(null==(o=d.call(o)))throw Error(n(151));for(var x=d=null,p=i,g=i=0,f=null,b=o.next();null!==p&&!b.done;g++,b=o.next()){p.index>g?(f=p,p=null):f=p.sibling;var v=m(r,p,b.value,c);if(null===v){null===p&&(p=f);break}e&&p&&null===v.alternate&&t(r,p),i=l(v,i,g),null===x?d=v:x.sibling=v,x=v,p=f}if(b.done)return s(r,p),an&&Yr(r,g),d;if(null===p){for(;!b.done;g++,b=o.next())null!==(b=u(r,b.value,c))&&(i=l(b,i,g),null===x?d=b:x.sibling=b,x=b);return an&&Yr(r,g),d}for(p=a(r,p);!b.done;g++,b=o.next())null!==(b=h(p,r,g,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),i=l(b,i,g),null===x?d=b:x.sibling=b,x=b);return e&&p.forEach(function(e){return t(r,e)}),an&&Yr(r,g),d}return function e(a,n,l,o){if("object"===typeof l&&null!==l&&l.type===w&&null===l.key&&(l=l.props.children),"object"===typeof l&&null!==l){switch(l.$$typeof){case y:e:{for(var c=l.key,d=n;null!==d;){if(d.key===c){if((c=l.type)===w){if(7===d.tag){s(a,d.sibling),(n=r(d,l.props.children)).return=a,a=n;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&bn(c)===d.type){s(a,d.sibling),(n=r(d,l.props)).ref=gn(a,d,l),n.return=a,a=n;break e}s(a,d);break}t(a,d),d=d.sibling}l.type===w?((n=zc(l.props.children,a.mode,o,l.key)).return=a,a=n):((o=Tc(l.type,l.key,l.props,null,a.mode,o)).ref=gn(a,n,l),o.return=a,a=o)}return i(a);case N:e:{for(d=l.key;null!==n;){if(n.key===d){if(4===n.tag&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){s(a,n.sibling),(n=r(n,l.children||[])).return=a,a=n;break e}s(a,n);break}t(a,n),n=n.sibling}(n=Fc(l,a.mode,o)).return=a,a=n}return i(a);case M:return e(a,n,(d=l._init)(l._payload),o)}if(te(l))return p(a,n,l,o);if(z(l))return g(a,n,l,o);fn(a,l)}return"string"===typeof l&&""!==l||"number"===typeof l?(l=""+l,null!==n&&6===n.tag?(s(a,n.sibling),(n=r(n,l)).return=a,a=n):(s(a,n),(n=Ac(l,a.mode,o)).return=a,a=n),i(a)):s(a,n)}}var jn=vn(!0),yn=vn(!1),Nn=wr(null),wn=null,Sn=null,kn=null;function Cn(){kn=Sn=wn=null}function In(e){var t=Nn.current;Sr(Nn),e._currentValue=t}function Dn(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function _n(e,t){wn=e,kn=Sn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bi=!0),e.firstContext=null)}function Ln(e){var t=e._currentValue;if(kn!==e)if(e={context:e,memoizedValue:t,next:null},null===Sn){if(null===wn)throw Error(n(308));Sn=e,wn.dependencies={lanes:0,firstContext:e}}else Sn=Sn.next=e;return t}var En=null;function Mn(e){null===En?En=[e]:En.push(e)}function Pn(e,t,s,a){var r=t.interleaved;return null===r?(s.next=s,Mn(t)):(s.next=r.next,r.next=s),t.interleaved=s,Tn(e,a)}function Tn(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var zn=!1;function On(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function An(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Do)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Tn(e,s)}return null===(r=a.interleaved)?(t.next=t,Mn(a)):(t.next=r.next,r.next=t),a.interleaved=t,Tn(e,s)}function Vn(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,bt(e,s)}}function Bn(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var r=null,n=null;if(null!==(s=s.firstBaseUpdate)){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===n?r=n=l:n=n.next=l,s=s.next}while(null!==s);null===n?r=n=t:n=n.next=t}else r=n=t;return s={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:n,shared:a.shared,effects:a.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function qn(e,t,s,a){var r=e.updateQueue;zn=!1;var n=r.firstBaseUpdate,l=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var o=i,c=o.next;o.next=null,null===l?n=c:l.next=c,l=o;var d=e.alternate;null!==d&&((i=(d=d.updateQueue).lastBaseUpdate)!==l&&(null===i?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=o))}if(null!==n){var x=r.baseState;for(l=0,d=c=o=null,i=n;;){var u=i.lane,m=i.eventTime;if((a&u)===u){null!==d&&(d=d.next={eventTime:m,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,p=i;switch(u=t,m=s,p.tag){case 1:if("function"===typeof(h=p.payload)){x=h.call(m,x,u);break e}x=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(u="function"===typeof(h=p.payload)?h.call(m,x,u):h)||void 0===u)break e;x=A({},x,u);break e;case 2:zn=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(u=r.effects)?r.effects=[i]:u.push(i))}else m={eventTime:m,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===d?(c=d=m,o=x):d=d.next=m,l|=u;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(u=i).next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}if(null===d&&(o=x),r.baseState=o,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{l|=r.lane,r=r.next}while(r!==t)}else null===n&&(r.shared.lanes=0);Oo|=l,e.lanes=l,e.memoizedState=x}}function Qn(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=s,"function"!==typeof r)throw Error(n(191,r));r.call(a)}}}var Hn={},Wn=wr(Hn),Un=wr(Hn),Xn=wr(Hn);function Kn(e){if(e===Hn)throw Error(n(174));return e}function $n(e,t){switch(kr(Xn,t),kr(Un,e),kr(Wn,Hn),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sr(Wn),kr(Wn,t)}function Gn(){Sr(Wn),Sr(Un),Sr(Xn)}function Yn(e){Kn(Xn.current);var t=Kn(Wn.current),s=oe(t,e.type);t!==s&&(kr(Un,e),kr(Wn,s))}function Jn(e){Un.current===e&&(Sr(Wn),Sr(Un))}var Zn=wr(0);function el(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tl=[];function sl(){for(var e=0;e<tl.length;e++)tl[e]._workInProgressVersionPrimary=null;tl.length=0}var al=j.ReactCurrentDispatcher,rl=j.ReactCurrentBatchConfig,nl=0,ll=null,il=null,ol=null,cl=!1,dl=!1,xl=0,ul=0;function ml(){throw Error(n(321))}function hl(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!la(e[s],t[s]))return!1;return!0}function pl(e,t,s,a,r,l){if(nl=l,ll=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,al.current=null===e||null===e.memoizedState?Jl:Zl,e=s(a,r),dl){l=0;do{if(dl=!1,xl=0,25<=l)throw Error(n(301));l+=1,ol=il=null,t.updateQueue=null,al.current=ei,e=s(a,r)}while(dl)}if(al.current=Yl,t=null!==il&&null!==il.next,nl=0,ol=il=ll=null,cl=!1,t)throw Error(n(300));return e}function gl(){var e=0!==xl;return xl=0,e}function fl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ol?ll.memoizedState=ol=e:ol=ol.next=e,ol}function bl(){if(null===il){var e=ll.alternate;e=null!==e?e.memoizedState:null}else e=il.next;var t=null===ol?ll.memoizedState:ol.next;if(null!==t)ol=t,il=e;else{if(null===e)throw Error(n(310));e={memoizedState:(il=e).memoizedState,baseState:il.baseState,baseQueue:il.baseQueue,queue:il.queue,next:null},null===ol?ll.memoizedState=ol=e:ol=ol.next=e}return ol}function vl(e,t){return"function"===typeof t?t(e):t}function jl(e){var t=bl(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var a=il,r=a.baseQueue,l=s.pending;if(null!==l){if(null!==r){var i=r.next;r.next=l.next,l.next=i}a.baseQueue=r=l,s.pending=null}if(null!==r){l=r.next,a=a.baseState;var o=i=null,c=null,d=l;do{var x=d.lane;if((nl&x)===x)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var u={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=u,i=a):c=c.next=u,ll.lanes|=x,Oo|=x}d=d.next}while(null!==d&&d!==l);null===c?i=a:c.next=o,la(a,t.memoizedState)||(bi=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=c,s.lastRenderedState=a}if(null!==(e=s.interleaved)){r=e;do{l=r.lane,ll.lanes|=l,Oo|=l,r=r.next}while(r!==e)}else null===r&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function yl(e){var t=bl(),s=t.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=e;var a=s.dispatch,r=s.pending,l=t.memoizedState;if(null!==r){s.pending=null;var i=r=r.next;do{l=e(l,i.action),i=i.next}while(i!==r);la(l,t.memoizedState)||(bi=!0),t.memoizedState=l,null===t.baseQueue&&(t.baseState=l),s.lastRenderedState=l}return[l,a]}function Nl(){}function wl(e,t){var s=ll,a=bl(),r=t(),l=!la(a.memoizedState,r);if(l&&(a.memoizedState=r,bi=!0),a=a.queue,zl(Cl.bind(null,s,a,e),[e]),a.getSnapshot!==t||l||null!==ol&&1&ol.memoizedState.tag){if(s.flags|=2048,Ll(9,kl.bind(null,s,a,r,t),void 0,null),null===_o)throw Error(n(349));0!==(30&nl)||Sl(s,t,r)}return r}function Sl(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function kl(e,t,s,a){t.value=s,t.getSnapshot=a,Il(t)&&Dl(e)}function Cl(e,t,s){return s(function(){Il(t)&&Dl(e)})}function Il(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!la(e,s)}catch(a){return!0}}function Dl(e){var t=Tn(e,1);null!==t&&sc(t,e,1,-1)}function _l(e){var t=fl();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vl,lastRenderedState:e},t.queue=e,e=e.dispatch=Xl.bind(null,ll,e),[t.memoizedState,e]}function Ll(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},null===(t=ll.updateQueue)?(t={lastEffect:null,stores:null},ll.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function El(){return bl().memoizedState}function Ml(e,t,s,a){var r=fl();ll.flags|=e,r.memoizedState=Ll(1|t,s,void 0,void 0===a?null:a)}function Pl(e,t,s,a){var r=bl();a=void 0===a?null:a;var n=void 0;if(null!==il){var l=il.memoizedState;if(n=l.destroy,null!==a&&hl(a,l.deps))return void(r.memoizedState=Ll(t,s,n,a))}ll.flags|=e,r.memoizedState=Ll(1|t,s,n,a)}function Tl(e,t){return Ml(8390656,8,e,t)}function zl(e,t){return Pl(2048,8,e,t)}function Ol(e,t){return Pl(4,2,e,t)}function Al(e,t){return Pl(4,4,e,t)}function Fl(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Rl(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Pl(4,4,Fl.bind(null,t,e),s)}function Vl(){}function Bl(e,t){var s=bl();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&hl(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function ql(e,t){var s=bl();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&hl(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Ql(e,t,s){return 0===(21&nl)?(e.baseState&&(e.baseState=!1,bi=!0),e.memoizedState=s):(la(s,t)||(s=pt(),ll.lanes|=s,Oo|=s,e.baseState=!0),t)}function Hl(e,t){var s=vt;vt=0!==s&&4>s?s:4,e(!0);var a=rl.transition;rl.transition={};try{e(!1),t()}finally{vt=s,rl.transition=a}}function Wl(){return bl().memoizedState}function Ul(e,t,s){var a=tc(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Kl(e))$l(t,s);else if(null!==(s=Pn(e,t,s,a))){sc(s,e,a,ec()),Gl(s,t,a)}}function Xl(e,t,s){var a=tc(e),r={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Kl(e))$l(t,r);else{var n=e.alternate;if(0===e.lanes&&(null===n||0===n.lanes)&&null!==(n=t.lastRenderedReducer))try{var l=t.lastRenderedState,i=n(l,s);if(r.hasEagerState=!0,r.eagerState=i,la(i,l)){var o=t.interleaved;return null===o?(r.next=r,Mn(t)):(r.next=o.next,o.next=r),void(t.interleaved=r)}}catch(c){}null!==(s=Pn(e,t,r,a))&&(sc(s,e,a,r=ec()),Gl(s,t,a))}}function Kl(e){var t=e.alternate;return e===ll||null!==t&&t===ll}function $l(e,t){dl=cl=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Gl(e,t,s){if(0!==(4194240&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,bt(e,s)}}var Yl={readContext:Ln,useCallback:ml,useContext:ml,useEffect:ml,useImperativeHandle:ml,useInsertionEffect:ml,useLayoutEffect:ml,useMemo:ml,useReducer:ml,useRef:ml,useState:ml,useDebugValue:ml,useDeferredValue:ml,useTransition:ml,useMutableSource:ml,useSyncExternalStore:ml,useId:ml,unstable_isNewReconciler:!1},Jl={readContext:Ln,useCallback:function(e,t){return fl().memoizedState=[e,void 0===t?null:t],e},useContext:Ln,useEffect:Tl,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Ml(4194308,4,Fl.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ml(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ml(4,2,e,t)},useMemo:function(e,t){var s=fl();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=fl();return t=void 0!==s?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Ul.bind(null,ll,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},fl().memoizedState=e},useState:_l,useDebugValue:Vl,useDeferredValue:function(e){return fl().memoizedState=e},useTransition:function(){var e=_l(!1),t=e[0];return e=Hl.bind(null,e[1]),fl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=ll,r=fl();if(an){if(void 0===s)throw Error(n(407));s=s()}else{if(s=t(),null===_o)throw Error(n(349));0!==(30&nl)||Sl(a,t,s)}r.memoizedState=s;var l={value:s,getSnapshot:t};return r.queue=l,Tl(Cl.bind(null,a,l,e),[e]),a.flags|=2048,Ll(9,kl.bind(null,a,l,s,t),void 0,null),s},useId:function(){var e=fl(),t=_o.identifierPrefix;if(an){var s=Gr;t=":"+t+"R"+(s=($r&~(1<<32-lt($r)-1)).toString(32)+s),0<(s=xl++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=ul++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zl={readContext:Ln,useCallback:Bl,useContext:Ln,useEffect:zl,useImperativeHandle:Rl,useInsertionEffect:Ol,useLayoutEffect:Al,useMemo:ql,useReducer:jl,useRef:El,useState:function(){return jl(vl)},useDebugValue:Vl,useDeferredValue:function(e){return Ql(bl(),il.memoizedState,e)},useTransition:function(){return[jl(vl)[0],bl().memoizedState]},useMutableSource:Nl,useSyncExternalStore:wl,useId:Wl,unstable_isNewReconciler:!1},ei={readContext:Ln,useCallback:Bl,useContext:Ln,useEffect:zl,useImperativeHandle:Rl,useInsertionEffect:Ol,useLayoutEffect:Al,useMemo:ql,useReducer:yl,useRef:El,useState:function(){return yl(vl)},useDebugValue:Vl,useDeferredValue:function(e){var t=bl();return null===il?t.memoizedState=e:Ql(t,il.memoizedState,e)},useTransition:function(){return[yl(vl)[0],bl().memoizedState]},useMutableSource:Nl,useSyncExternalStore:wl,useId:Wl,unstable_isNewReconciler:!1};function ti(e,t){if(e&&e.defaultProps){for(var s in t=A({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function si(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:A({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var ai={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=ec(),r=tc(e),n=Fn(a,r);n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=Rn(e,n,r))&&(sc(t,e,r,a),Vn(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=ec(),r=tc(e),n=Fn(a,r);n.tag=1,n.payload=t,void 0!==s&&null!==s&&(n.callback=s),null!==(t=Rn(e,n,r))&&(sc(t,e,r,a),Vn(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=ec(),a=tc(e),r=Fn(s,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Rn(e,r,a))&&(sc(t,e,a,s),Vn(t,e,a))}};function ri(e,t,s,a,r,n,l){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,n,l):!t.prototype||!t.prototype.isPureReactComponent||(!ia(s,a)||!ia(r,n))}function ni(e,t,s){var a=!1,r=Cr,n=t.contextType;return"object"===typeof n&&null!==n?n=Ln(n):(r=Er(t)?_r:Ir.current,n=(a=null!==(a=t.contextTypes)&&void 0!==a)?Lr(e,r):Cr),t=new t(s,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ai,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=n),t}function li(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&ai.enqueueReplaceState(t,t.state,null)}function ii(e,t,s,a){var r=e.stateNode;r.props=s,r.state=e.memoizedState,r.refs={},On(e);var n=t.contextType;"object"===typeof n&&null!==n?r.context=Ln(n):(n=Er(t)?_r:Ir.current,r.context=Lr(e,n)),r.state=e.memoizedState,"function"===typeof(n=t.getDerivedStateFromProps)&&(si(e,t,n,s),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ai.enqueueReplaceState(r,r.state,null),qn(e,s,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function oi(e,t){try{var s="",a=t;do{s+=B(a),a=a.return}while(a);var r=s}catch(n){r="\nError generating stack: "+n.message+"\n"+n.stack}return{value:e,source:t,stack:r,digest:null}}function ci(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function di(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var xi="function"===typeof WeakMap?WeakMap:Map;function ui(e,t,s){(s=Fn(-1,s)).tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Ho||(Ho=!0,Wo=a),di(0,t)},s}function mi(e,t,s){(s=Fn(-1,s)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;s.payload=function(){return a(r)},s.callback=function(){di(0,t)}}var n=e.stateNode;return null!==n&&"function"===typeof n.componentDidCatch&&(s.callback=function(){di(0,t),"function"!==typeof a&&(null===Uo?Uo=new Set([this]):Uo.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function hi(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new xi;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(s)||(r.add(s),e=kc.bind(null,e,t,s),t.then(e,e))}function pi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gi(e,t,s,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Fn(-1,1)).tag=2,Rn(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var fi=j.ReactCurrentOwner,bi=!1;function vi(e,t,s,a){t.child=null===e?yn(t,null,s,a):jn(t,e.child,s,a)}function ji(e,t,s,a,r){s=s.render;var n=t.ref;return _n(t,r),a=pl(e,t,s,a,n,r),s=gl(),null===e||bi?(an&&s&&Zr(t),t.flags|=1,vi(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qi(e,t,r))}function yi(e,t,s,a,r){if(null===e){var n=s.type;return"function"!==typeof n||Mc(n)||void 0!==n.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Tc(s.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=n,Ni(e,t,n,a,r))}if(n=e.child,0===(e.lanes&r)){var l=n.memoizedProps;if((s=null!==(s=s.compare)?s:ia)(l,a)&&e.ref===t.ref)return Qi(e,t,r)}return t.flags|=1,(e=Pc(n,a)).ref=t.ref,e.return=t,t.child=e}function Ni(e,t,s,a,r){if(null!==e){var n=e.memoizedProps;if(ia(n,a)&&e.ref===t.ref){if(bi=!1,t.pendingProps=a=n,0===(e.lanes&r))return t.lanes=e.lanes,Qi(e,t,r);0!==(131072&e.flags)&&(bi=!0)}}return ki(e,t,s,a,r)}function wi(e,t,s){var a=t.pendingProps,r=a.children,n=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Po,Mo),Mo|=s;else{if(0===(1073741824&s))return e=null!==n?n.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(Po,Mo),Mo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==n?n.baseLanes:s,kr(Po,Mo),Mo|=a}else null!==n?(a=n.baseLanes|s,t.memoizedState=null):a=s,kr(Po,Mo),Mo|=a;return vi(e,t,r,s),t.child}function Si(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function ki(e,t,s,a,r){var n=Er(s)?_r:Ir.current;return n=Lr(t,n),_n(t,r),s=pl(e,t,s,a,n,r),a=gl(),null===e||bi?(an&&a&&Zr(t),t.flags|=1,vi(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Qi(e,t,r))}function Ci(e,t,s,a,r){if(Er(s)){var n=!0;zr(t)}else n=!1;if(_n(t,r),null===t.stateNode)qi(e,t),ni(t,s,a),ii(t,s,a,r),a=!0;else if(null===e){var l=t.stateNode,i=t.memoizedProps;l.props=i;var o=l.context,c=s.contextType;"object"===typeof c&&null!==c?c=Ln(c):c=Lr(t,c=Er(s)?_r:Ir.current);var d=s.getDerivedStateFromProps,x="function"===typeof d||"function"===typeof l.getSnapshotBeforeUpdate;x||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==a||o!==c)&&li(t,l,a,c),zn=!1;var u=t.memoizedState;l.state=u,qn(t,a,l,r),o=t.memoizedState,i!==a||u!==o||Dr.current||zn?("function"===typeof d&&(si(t,s,d,a),o=t.memoizedState),(i=zn||ri(t,s,i,a,u,o,c))?(x||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(t.flags|=4194308)):("function"===typeof l.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),l.props=a,l.state=o,l.context=c,a=i):("function"===typeof l.componentDidMount&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,An(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:ti(t.type,i),l.props=c,x=t.pendingProps,u=l.context,"object"===typeof(o=s.contextType)&&null!==o?o=Ln(o):o=Lr(t,o=Er(s)?_r:Ir.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(i!==x||u!==o)&&li(t,l,a,o),zn=!1,u=t.memoizedState,l.state=u,qn(t,a,l,r);var h=t.memoizedState;i!==x||u!==h||Dr.current||zn?("function"===typeof m&&(si(t,s,m,a),h=t.memoizedState),(c=zn||ri(t,s,c,a,u,h,o)||!1)?(d||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(a,h,o),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(a,h,o)),"function"===typeof l.componentDidUpdate&&(t.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),l.props=a,l.state=h,l.context=o,a=c):("function"!==typeof l.componentDidUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||i===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),a=!1)}return Ii(e,t,s,a,n,r)}function Ii(e,t,s,a,r,n){Si(e,t);var l=0!==(128&t.flags);if(!a&&!l)return r&&Or(t,s,!1),Qi(e,t,n);a=t.stateNode,fi.current=t;var i=l&&"function"!==typeof s.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&l?(t.child=jn(t,e.child,null,n),t.child=jn(t,null,i,n)):vi(e,t,i,n),t.memoizedState=a.state,r&&Or(t,s,!0),t.child}function Di(e){var t=e.stateNode;t.pendingContext?Pr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pr(0,t.context,!1),$n(e,t.containerInfo)}function _i(e,t,s,a,r){return mn(),hn(r),t.flags|=256,vi(e,t,s,a),t.child}var Li,Ei,Mi,Pi,Ti={dehydrated:null,treeContext:null,retryLane:0};function zi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Oi(e,t,s){var a,r=t.pendingProps,l=Zn.current,i=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&l)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(l|=1),kr(Zn,1&l),null===e)return cn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=Oc(o,r,0,null),e=zc(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=zi(s),t.memoizedState=Ti,e):Ai(t,o));if(null!==(l=e.memoizedState)&&null!==(a=l.dehydrated))return function(e,t,s,a,r,l,i){if(s)return 256&t.flags?(t.flags&=-257,Fi(e,t,i,a=ci(Error(n(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=a.fallback,r=t.mode,a=Oc({mode:"visible",children:a.children},r,0,null),(l=zc(l,r,i,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,0!==(1&t.mode)&&jn(t,e.child,null,i),t.child.memoizedState=zi(i),t.memoizedState=Ti,l);if(0===(1&t.mode))return Fi(e,t,i,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var o=a.dgst;return a=o,Fi(e,t,i,a=ci(l=Error(n(419)),a,void 0))}if(o=0!==(i&e.childLanes),bi||o){if(null!==(a=_o)){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|i))?0:r)&&r!==l.retryLane&&(l.retryLane=r,Tn(e,r),sc(a,e,r,-1))}return pc(),Fi(e,t,i,a=ci(Error(n(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),r._reactRetry=t,null):(e=l.treeContext,sn=or(r.nextSibling),tn=t,an=!0,rn=null,null!==e&&(Ur[Xr++]=$r,Ur[Xr++]=Gr,Ur[Xr++]=Kr,$r=e.id,Gr=e.overflow,Kr=t),t=Ai(t,a.children),t.flags|=4096,t)}(e,t,o,r,a,l,s);if(i){i=r.fallback,o=t.mode,a=(l=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&o)&&t.child!==l?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Pc(l,c)).subtreeFlags=14680064&l.subtreeFlags,null!==a?i=Pc(a,i):(i=zc(i,o,s,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=null===(o=e.child.memoizedState)?zi(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=Ti,r}return e=(i=e.child).sibling,r=Pc(i,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=s),r.return=t,r.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function Ai(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fi(e,t,s,a){return null!==a&&hn(a),jn(t,e.child,null,s),(e=Ai(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ri(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Dn(e.return,t,s)}function Vi(e,t,s,a,r){var n=e.memoizedState;null===n?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:r}:(n.isBackwards=t,n.rendering=null,n.renderingStartTime=0,n.last=a,n.tail=s,n.tailMode=r)}function Bi(e,t,s){var a=t.pendingProps,r=a.revealOrder,n=a.tail;if(vi(e,t,a.children,s),0!==(2&(a=Zn.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ri(e,s,t);else if(19===e.tag)Ri(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(kr(Zn,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(s=t.child,r=null;null!==s;)null!==(e=s.alternate)&&null===el(e)&&(r=s),s=s.sibling;null===(s=r)?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Vi(t,!1,r,s,n);break;case"backwards":for(s=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===el(e)){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Vi(t,!0,s,null,n);break;case"together":Vi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qi(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qi(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Oo|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(s=Pc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Pc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Hi(e,t){if(!an)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wi(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Ui(e,t,s){var a=t.pendingProps;switch(en(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:case 17:return Er(t.type)&&Mr(),Wi(t),null;case 3:return a=t.stateNode,Gn(),Sr(Dr),Sr(Ir),sl(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(xn(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rn&&(lc(rn),rn=null))),Ei(e,t),Wi(t),null;case 5:Jn(t);var r=Kn(Xn.current);if(s=t.type,null!==e&&null!=t.stateNode)Mi(e,t,s,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(n(166));return Wi(t),null}if(e=Kn(Wn.current),xn(t)){a=t.stateNode,s=t.type;var l=t.memoizedProps;switch(a[xr]=t,a[ur]=l,e=0!==(1&t.mode),s){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(r=0;r<Ta.length;r++)Fa(Ta[r],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":G(a,l),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!l.multiple},Fa("invalid",a);break;case"textarea":re(a,l),Fa("invalid",a)}for(var o in be(s,l),r=null,l)if(l.hasOwnProperty(o)){var c=l[o];"children"===o?"string"===typeof c?a.textContent!==c&&(!0!==l.suppressHydrationWarning&&Ya(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==l.suppressHydrationWarning&&Ya(a.textContent,c,e),r=["children",""+c]):i.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fa("scroll",a)}switch(s){case"input":U(a),Z(a,l,!0);break;case"textarea":U(a),le(a);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(a.onclick=Ja)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),"select"===s&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[xr]=t,e[ur]=a,Li(e,t,!1,!1),t.stateNode=e;e:{switch(o=ve(s,a),s){case"dialog":Fa("cancel",e),Fa("close",e),r=a;break;case"iframe":case"object":case"embed":Fa("load",e),r=a;break;case"video":case"audio":for(r=0;r<Ta.length;r++)Fa(Ta[r],e);r=a;break;case"source":Fa("error",e),r=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),r=a;break;case"details":Fa("toggle",e),r=a;break;case"input":G(e,a),r=$(e,a),Fa("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=A({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Fa("invalid",e)}for(l in be(s,r),c=r)if(c.hasOwnProperty(l)){var d=c[l];"style"===l?ge(e,d):"dangerouslySetInnerHTML"===l?null!=(d=d?d.__html:void 0)&&xe(e,d):"children"===l?"string"===typeof d?("textarea"!==s||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(i.hasOwnProperty(l)?null!=d&&"onScroll"===l&&Fa("scroll",e):null!=d&&v(e,l,d,o))}switch(s){case"input":U(e),Z(e,a,!1);break;case"textarea":U(e),le(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(l=a.value)?se(e,!!a.multiple,l,!1):null!=a.defaultValue&&se(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Ja)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&null!=t.stateNode)Pi(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(n(166));if(s=Kn(Xn.current),Kn(Wn.current),xn(t)){if(a=t.stateNode,s=t.memoizedProps,a[xr]=t,(l=a.nodeValue!==s)&&null!==(e=tn))switch(e.tag){case 3:Ya(a.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ya(a.nodeValue,s,0!==(1&e.mode))}l&&(t.flags|=4)}else(a=(9===s.nodeType?s:s.ownerDocument).createTextNode(a))[xr]=t,t.stateNode=a}return Wi(t),null;case 13:if(Sr(Zn),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(an&&null!==sn&&0!==(1&t.mode)&&0===(128&t.flags))un(),mn(),t.flags|=98560,l=!1;else if(l=xn(t),null!==a&&null!==a.dehydrated){if(null===e){if(!l)throw Error(n(318));if(!(l=null!==(l=t.memoizedState)?l.dehydrated:null))throw Error(n(317));l[xr]=t}else mn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wi(t),l=!1}else null!==rn&&(lc(rn),rn=null),l=!0;if(!l)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zn.current)?0===To&&(To=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wi(t),null);case 4:return Gn(),Ei(e,t),null===e&&Ba(t.stateNode.containerInfo),Wi(t),null;case 10:return In(t.type._context),Wi(t),null;case 19:if(Sr(Zn),null===(l=t.memoizedState))return Wi(t),null;if(a=0!==(128&t.flags),null===(o=l.rendering))if(a)Hi(l,!1);else{if(0!==To||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=el(e))){for(t.flags|=128,Hi(l,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;null!==s;)e=a,(l=s).flags&=14680066,null===(o=l.alternate)?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,l.type=o.type,e=o.dependencies,l.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return kr(Zn,1&Zn.current|2),t.child}e=e.sibling}null!==l.tail&&Ye()>qo&&(t.flags|=128,a=!0,Hi(l,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=el(o))){if(t.flags|=128,a=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Hi(l,!0),null===l.tail&&"hidden"===l.tailMode&&!o.alternate&&!an)return Wi(t),null}else 2*Ye()-l.renderingStartTime>qo&&1073741824!==s&&(t.flags|=128,a=!0,Hi(l,!1),t.lanes=4194304);l.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=l.last)?s.sibling=o:t.child=o,l.last=o)}return null!==l.tail?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ye(),t.sibling=null,s=Zn.current,kr(Zn,a?1&s|2:1&s),t):(Wi(t),null);case 22:case 23:return xc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Mo)&&(Wi(t),6&t.subtreeFlags&&(t.flags|=8192)):Wi(t),null;case 24:case 25:return null}throw Error(n(156,t.tag))}function Xi(e,t){switch(en(t),t.tag){case 1:return Er(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Gn(),Sr(Dr),Sr(Ir),sl(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jn(t),null;case 13:if(Sr(Zn),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));mn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sr(Zn),null;case 4:return Gn(),null;case 10:return In(t.type._context),null;case 22:case 23:return xc(),null;default:return null}}Li=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Ei=function(){},Mi=function(e,t,s,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,Kn(Wn.current);var n,l=null;switch(s){case"input":r=$(e,r),a=$(e,a),l=[];break;case"select":r=A({},r,{value:void 0}),a=A({},a,{value:void 0}),l=[];break;case"textarea":r=ae(e,r),a=ae(e,a),l=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Ja)}for(d in be(s,a),s=null,r)if(!a.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var o=r[d];for(n in o)o.hasOwnProperty(n)&&(s||(s={}),s[n]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(i.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in a){var c=a[d];if(o=null!=r?r[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(n in o)!o.hasOwnProperty(n)||c&&c.hasOwnProperty(n)||(s||(s={}),s[n]="");for(n in c)c.hasOwnProperty(n)&&o[n]!==c[n]&&(s||(s={}),s[n]=c[n])}else s||(l||(l=[]),l.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(l=l||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(l=l||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(i.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}s&&(l=l||[]).push("style",s);var d=l;(t.updateQueue=d)&&(t.flags|=4)}},Pi=function(e,t,s,a){s!==a&&(t.flags|=4)};var Ki=!1,$i=!1,Gi="function"===typeof WeakSet?WeakSet:Set,Yi=null;function Ji(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(a){Sc(e,t,a)}else s.current=null}function Zi(e,t,s){try{s()}catch(a){Sc(e,t,a)}}var eo=!1;function to(e,t,s){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,void 0!==n&&Zi(t,s,n)}r=r.next}while(r!==a)}}function so(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function ao(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function ro(e){var t=e.alternate;null!==t&&(e.alternate=null,ro(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[xr],delete t[ur],delete t[hr],delete t[pr],delete t[gr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function no(e){return 5===e.tag||3===e.tag||4===e.tag}function lo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||no(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function io(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=Ja));else if(4!==a&&null!==(e=e.child))for(io(e,t,s),e=e.sibling;null!==e;)io(e,t,s),e=e.sibling}function oo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&null!==(e=e.child))for(oo(e,t,s),e=e.sibling;null!==e;)oo(e,t,s),e=e.sibling}var co=null,xo=!1;function uo(e,t,s){for(s=s.child;null!==s;)mo(e,t,s),s=s.sibling}function mo(e,t,s){if(nt&&"function"===typeof nt.onCommitFiberUnmount)try{nt.onCommitFiberUnmount(rt,s)}catch(i){}switch(s.tag){case 5:$i||Ji(s,t);case 6:var a=co,r=xo;co=null,uo(e,t,s),xo=r,null!==(co=a)&&(xo?(e=co,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):co.removeChild(s.stateNode));break;case 18:null!==co&&(xo?(e=co,s=s.stateNode,8===e.nodeType?ir(e.parentNode,s):1===e.nodeType&&ir(e,s),qt(e)):ir(co,s.stateNode));break;case 4:a=co,r=xo,co=s.stateNode.containerInfo,xo=!0,uo(e,t,s),co=a,xo=r;break;case 0:case 11:case 14:case 15:if(!$i&&(null!==(a=s.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var n=r,l=n.destroy;n=n.tag,void 0!==l&&(0!==(2&n)||0!==(4&n))&&Zi(s,t,l),r=r.next}while(r!==a)}uo(e,t,s);break;case 1:if(!$i&&(Ji(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(i){Sc(s,t,i)}uo(e,t,s);break;case 21:uo(e,t,s);break;case 22:1&s.mode?($i=(a=$i)||null!==s.memoizedState,uo(e,t,s),$i=a):uo(e,t,s);break;default:uo(e,t,s)}}function ho(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new Gi),t.forEach(function(t){var a=Dc.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}}function po(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var r=s[a];try{var l=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,xo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,xo=!0;break e}o=o.return}if(null===co)throw Error(n(160));mo(l,i,r),co=null,xo=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Sc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)go(t,e),t=t.sibling}function go(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(po(t,e),fo(e),4&a){try{to(3,e,e.return),so(3,e)}catch(g){Sc(e,e.return,g)}try{to(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:po(t,e),fo(e),512&a&&null!==s&&Ji(s,s.return);break;case 5:if(po(t,e),fo(e),512&a&&null!==s&&Ji(s,s.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(g){Sc(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var l=e.memoizedProps,i=null!==s?s.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===l.type&&null!=l.name&&Y(r,l),ve(o,i);var d=ve(o,l);for(i=0;i<c.length;i+=2){var x=c[i],u=c[i+1];"style"===x?ge(r,u):"dangerouslySetInnerHTML"===x?xe(r,u):"children"===x?ue(r,u):v(r,x,u,d)}switch(o){case"input":J(r,l);break;case"textarea":ne(r,l);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!l.multiple;var h=l.value;null!=h?se(r,!!l.multiple,h,!1):m!==!!l.multiple&&(null!=l.defaultValue?se(r,!!l.multiple,l.defaultValue,!0):se(r,!!l.multiple,l.multiple?[]:"",!1))}r[ur]=l}catch(g){Sc(e,e.return,g)}}break;case 6:if(po(t,e),fo(e),4&a){if(null===e.stateNode)throw Error(n(162));r=e.stateNode,l=e.memoizedProps;try{r.nodeValue=l}catch(g){Sc(e,e.return,g)}}break;case 3:if(po(t,e),fo(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:po(t,e),fo(e);break;case 13:po(t,e),fo(e),8192&(r=e.child).flags&&(l=null!==r.memoizedState,r.stateNode.isHidden=l,!l||null!==r.alternate&&null!==r.alternate.memoizedState||(Bo=Ye())),4&a&&ho(e);break;case 22:if(x=null!==s&&null!==s.memoizedState,1&e.mode?($i=(d=$i)||x,po(t,e),$i=d):po(t,e),fo(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!x&&0!==(1&e.mode))for(Yi=e,x=e.child;null!==x;){for(u=Yi=x;null!==Yi;){switch(h=(m=Yi).child,m.tag){case 0:case 11:case 14:case 15:to(4,m,m.return);break;case 1:Ji(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){a=m,s=m.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Sc(a,s,g)}}break;case 5:Ji(m,m.return);break;case 22:if(null!==m.memoizedState){yo(u);continue}}null!==h?(h.return=m,Yi=h):yo(u)}x=x.sibling}e:for(x=null,u=e;;){if(5===u.tag){if(null===x){x=u;try{r=u.stateNode,d?"function"===typeof(l=r.style).setProperty?l.setProperty("display","none","important"):l.display="none":(o=u.stateNode,i=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=pe("display",i))}catch(g){Sc(e,e.return,g)}}}else if(6===u.tag){if(null===x)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==u.tag&&23!==u.tag||null===u.memoizedState||u===e)&&null!==u.child){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;null===u.sibling;){if(null===u.return||u.return===e)break e;x===u&&(x=null),u=u.return}x===u&&(x=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:po(t,e),fo(e),4&a&&ho(e);case 21:}}function fo(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(no(s)){var a=s;break e}s=s.return}throw Error(n(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(ue(r,""),a.flags&=-33),oo(e,lo(e),r);break;case 3:case 4:var l=a.stateNode.containerInfo;io(e,lo(e),l);break;default:throw Error(n(161))}}catch(i){Sc(e,e.return,i)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bo(e,t,s){Yi=e,vo(e,t,s)}function vo(e,t,s){for(var a=0!==(1&e.mode);null!==Yi;){var r=Yi,n=r.child;if(22===r.tag&&a){var l=null!==r.memoizedState||Ki;if(!l){var i=r.alternate,o=null!==i&&null!==i.memoizedState||$i;i=Ki;var c=$i;if(Ki=l,($i=o)&&!c)for(Yi=r;null!==Yi;)o=(l=Yi).child,22===l.tag&&null!==l.memoizedState?No(r):null!==o?(o.return=l,Yi=o):No(r);for(;null!==n;)Yi=n,vo(n,t,s),n=n.sibling;Yi=r,Ki=i,$i=c}jo(e)}else 0!==(8772&r.subtreeFlags)&&null!==n?(n.return=r,Yi=n):jo(e)}}function jo(e){for(;null!==Yi;){var t=Yi;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$i||so(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!$i)if(null===s)a.componentDidMount();else{var r=t.elementType===t.type?s.memoizedProps:ti(t.type,s.memoizedProps);a.componentDidUpdate(r,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;null!==l&&Qn(t,l,a);break;case 3:var i=t.updateQueue;if(null!==i){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Qn(t,i,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var x=d.memoizedState;if(null!==x){var u=x.dehydrated;null!==u&&qt(u)}}}break;default:throw Error(n(163))}$i||512&t.flags&&ao(t)}catch(m){Sc(t,t.return,m)}}if(t===e){Yi=null;break}if(null!==(s=t.sibling)){s.return=t.return,Yi=s;break}Yi=t.return}}function yo(e){for(;null!==Yi;){var t=Yi;if(t===e){Yi=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Yi=s;break}Yi=t.return}}function No(e){for(;null!==Yi;){var t=Yi;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{so(4,t)}catch(o){Sc(t,s,o)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(o){Sc(t,r,o)}}var n=t.return;try{ao(t)}catch(o){Sc(t,n,o)}break;case 5:var l=t.return;try{ao(t)}catch(o){Sc(t,l,o)}}}catch(o){Sc(t,t.return,o)}if(t===e){Yi=null;break}var i=t.sibling;if(null!==i){i.return=t.return,Yi=i;break}Yi=t.return}}var wo,So=Math.ceil,ko=j.ReactCurrentDispatcher,Co=j.ReactCurrentOwner,Io=j.ReactCurrentBatchConfig,Do=0,_o=null,Lo=null,Eo=0,Mo=0,Po=wr(0),To=0,zo=null,Oo=0,Ao=0,Fo=0,Ro=null,Vo=null,Bo=0,qo=1/0,Qo=null,Ho=!1,Wo=null,Uo=null,Xo=!1,Ko=null,$o=0,Go=0,Yo=null,Jo=-1,Zo=0;function ec(){return 0!==(6&Do)?Ye():-1!==Jo?Jo:Jo=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Do)&&0!==Eo?Eo&-Eo:null!==pn.transition?(0===Zo&&(Zo=pt()),Zo):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function sc(e,t,s,a){if(50<Go)throw Go=0,Yo=null,Error(n(185));ft(e,s,a),0!==(2&Do)&&e===_o||(e===_o&&(0===(2&Do)&&(Ao|=s),4===To&&ic(e,Eo)),ac(e,a),1===s&&0===Do&&0===(1&t.mode)&&(qo=Ye()+500,Fr&&Br()))}function ac(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,n=e.pendingLanes;0<n;){var l=31-lt(n),i=1<<l,o=r[l];-1===o?0!==(i&s)&&0===(i&a)||(r[l]=mt(i,t)):o<=t&&(e.expiredLanes|=i),n&=~i}}(e,t);var a=ut(e,e===_o?Eo:0);if(0===a)null!==s&&Ke(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=s&&Ke(s),1===t)0===e.tag?function(e){Fr=!0,Vr(e)}(oc.bind(null,e)):Vr(oc.bind(null,e)),nr(function(){0===(6&Do)&&Br()}),s=null;else{switch(jt(a)){case 1:s=Ze;break;case 4:s=et;break;case 16:default:s=tt;break;case 536870912:s=at}s=_c(s,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function rc(e,t){if(Jo=-1,Zo=0,0!==(6&Do))throw Error(n(327));var s=e.callbackNode;if(Nc()&&e.callbackNode!==s)return null;var a=ut(e,e===_o?Eo:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=Do;Do|=2;var l=hc();for(_o===e&&Eo===t||(Qo=null,qo=Ye()+500,uc(e,t));;)try{bc();break}catch(o){mc(e,o)}Cn(),ko.current=l,Do=r,null!==Lo?t=0:(_o=null,Eo=0,t=To)}if(0!==t){if(2===t&&(0!==(r=ht(e))&&(a=r,t=nc(e,r))),1===t)throw s=zo,uc(e,0),ic(e,a),ac(e,Ye()),s;if(6===t)ic(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var a=0;a<s.length;a++){var r=s[a],n=r.getSnapshot;r=r.value;try{if(!la(n(),r))return!1}catch(i){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(l=ht(e))&&(a=l,t=nc(e,l))),1===t))throw s=zo,uc(e,0),ic(e,a),ac(e,Ye()),s;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(n(345));case 2:case 5:yc(e,Vo,Qo);break;case 3:if(ic(e,a),(130023424&a)===a&&10<(t=Bo+500-Ye())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(yc.bind(null,e,Vo,Qo),t);break}yc(e,Vo,Qo);break;case 4:if(ic(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var i=31-lt(a);l=1<<i,(i=t[i])>r&&(r=i),a&=~l}if(a=r,10<(a=(120>(a=Ye()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*So(a/1960))-a)){e.timeoutHandle=sr(yc.bind(null,e,Vo,Qo),a);break}yc(e,Vo,Qo);break;default:throw Error(n(329))}}}return ac(e,Ye()),e.callbackNode===s?rc.bind(null,e):null}function nc(e,t){var s=Ro;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Vo,Vo=s,null!==t&&lc(t)),e}function lc(e){null===Vo?Vo=e:Vo.push.apply(Vo,e)}function ic(e,t){for(t&=~Fo,t&=~Ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-lt(t),a=1<<s;e[s]=-1,t&=~a}}function oc(e){if(0!==(6&Do))throw Error(n(327));Nc();var t=ut(e,0);if(0===(1&t))return ac(e,Ye()),null;var s=gc(e,t);if(0!==e.tag&&2===s){var a=ht(e);0!==a&&(t=a,s=nc(e,a))}if(1===s)throw s=zo,uc(e,0),ic(e,t),ac(e,Ye()),s;if(6===s)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,yc(e,Vo,Qo),ac(e,Ye()),null}function cc(e,t){var s=Do;Do|=1;try{return e(t)}finally{0===(Do=s)&&(qo=Ye()+500,Fr&&Br())}}function dc(e){null!==Ko&&0===Ko.tag&&0===(6&Do)&&Nc();var t=Do;Do|=1;var s=Io.transition,a=vt;try{if(Io.transition=null,vt=1,e)return e()}finally{vt=a,Io.transition=s,0===(6&(Do=t))&&Br()}}function xc(){Mo=Po.current,Sr(Po)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,ar(s)),null!==Lo)for(s=Lo.return;null!==s;){var a=s;switch(en(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Mr();break;case 3:Gn(),Sr(Dr),Sr(Ir),sl();break;case 5:Jn(a);break;case 4:Gn();break;case 13:case 19:Sr(Zn);break;case 10:In(a.type._context);break;case 22:case 23:xc()}s=s.return}if(_o=e,Lo=e=Pc(e.current,null),Eo=Mo=t,To=0,zo=null,Fo=Ao=Oo=0,Vo=Ro=null,null!==En){for(t=0;t<En.length;t++)if(null!==(a=(s=En[t]).interleaved)){s.interleaved=null;var r=a.next,n=s.pending;if(null!==n){var l=n.next;n.next=r,a.next=l}s.pending=a}En=null}return e}function mc(e,t){for(;;){var s=Lo;try{if(Cn(),al.current=Yl,cl){for(var a=ll.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}cl=!1}if(nl=0,ol=il=ll=null,dl=!1,xl=0,Co.current=null,null===s||null===s.return){To=1,zo=t,Lo=null;break}e:{var l=e,i=s.return,o=s,c=t;if(t=Eo,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,x=o,u=x.tag;if(0===(1&x.mode)&&(0===u||11===u||15===u)){var m=x.alternate;m?(x.updateQueue=m.updateQueue,x.memoizedState=m.memoizedState,x.lanes=m.lanes):(x.updateQueue=null,x.memoizedState=null)}var h=pi(i);if(null!==h){h.flags&=-257,gi(h,i,o,0,t),1&h.mode&&hi(l,d,t),c=d;var p=(t=h).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){hi(l,d,t),pc();break e}c=Error(n(426))}else if(an&&1&o.mode){var f=pi(i);if(null!==f){0===(65536&f.flags)&&(f.flags|=256),gi(f,i,o,0,t),hn(oi(c,o));break e}}l=c=oi(c,o),4!==To&&(To=2),null===Ro?Ro=[l]:Ro.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,Bn(l,ui(0,c,t));break e;case 1:o=c;var b=l.type,v=l.stateNode;if(0===(128&l.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Uo||!Uo.has(v)))){l.flags|=65536,t&=-t,l.lanes|=t,Bn(l,mi(l,o,t));break e}}l=l.return}while(null!==l)}jc(s)}catch(j){t=j,Lo===s&&null!==s&&(Lo=s=s.return);continue}break}}function hc(){var e=ko.current;return ko.current=Yl,null===e?Yl:e}function pc(){0!==To&&3!==To&&2!==To||(To=4),null===_o||0===(268435455&Oo)&&0===(268435455&Ao)||ic(_o,Eo)}function gc(e,t){var s=Do;Do|=2;var a=hc();for(_o===e&&Eo===t||(Qo=null,uc(e,t));;)try{fc();break}catch(r){mc(e,r)}if(Cn(),Do=s,ko.current=a,null!==Lo)throw Error(n(261));return _o=null,Eo=0,To}function fc(){for(;null!==Lo;)vc(Lo)}function bc(){for(;null!==Lo&&!$e();)vc(Lo)}function vc(e){var t=wo(e.alternate,e,Mo);e.memoizedProps=e.pendingProps,null===t?jc(e):Lo=t,Co.current=null}function jc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=Ui(s,t,Mo)))return void(Lo=s)}else{if(null!==(s=Xi(s,t)))return s.flags&=32767,void(Lo=s);if(null===e)return To=6,void(Lo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Lo=t);Lo=t=e}while(null!==t);0===To&&(To=5)}function yc(e,t,s){var a=vt,r=Io.transition;try{Io.transition=null,vt=1,function(e,t,s,a){do{Nc()}while(null!==Ko);if(0!==(6&Do))throw Error(n(327));s=e.finishedWork;var r=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var r=31-lt(s),n=1<<r;t[r]=0,a[r]=-1,e[r]=-1,s&=~n}}(e,l),e===_o&&(Lo=_o=null,Eo=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||Xo||(Xo=!0,_c(tt,function(){return Nc(),null})),l=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||l){l=Io.transition,Io.transition=null;var i=vt;vt=1;var o=Do;Do|=4,Co.current=null,function(e,t){if(Za=Ht,ua(e=xa())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var r=a.anchorOffset,l=a.focusNode;a=a.focusOffset;try{s.nodeType,l.nodeType}catch(y){s=null;break e}var i=0,o=-1,c=-1,d=0,x=0,u=e,m=null;t:for(;;){for(var h;u!==s||0!==r&&3!==u.nodeType||(o=i+r),u!==l||0!==a&&3!==u.nodeType||(c=i+a),3===u.nodeType&&(i+=u.nodeValue.length),null!==(h=u.firstChild);)m=u,u=h;for(;;){if(u===e)break t;if(m===s&&++d===r&&(o=i),m===l&&++x===a&&(c=i),null!==(h=u.nextSibling))break;m=(u=m).parentNode}u=h}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(er={focusedElem:e,selectionRange:s},Ht=!1,Yi=t;null!==Yi;)if(e=(t=Yi).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yi=e;else for(;null!==Yi;){t=Yi;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,f=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ti(t.type,g),f);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var j=t.stateNode.containerInfo;1===j.nodeType?j.textContent="":9===j.nodeType&&j.documentElement&&j.removeChild(j.documentElement);break;default:throw Error(n(163))}}catch(y){Sc(t,t.return,y)}if(null!==(e=t.sibling)){e.return=t.return,Yi=e;break}Yi=t.return}p=eo,eo=!1}(e,s),go(s,e),ma(er),Ht=!!Za,er=Za=null,e.current=s,bo(s,e,r),Ge(),Do=o,vt=i,Io.transition=l}else e.current=s;if(Xo&&(Xo=!1,Ko=e,$o=r),l=e.pendingLanes,0===l&&(Uo=null),function(e){if(nt&&"function"===typeof nt.onCommitFiberRoot)try{nt.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),ac(e,Ye()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)r=t[s],a(r.value,{componentStack:r.stack,digest:r.digest});if(Ho)throw Ho=!1,e=Wo,Wo=null,e;0!==(1&$o)&&0!==e.tag&&Nc(),l=e.pendingLanes,0!==(1&l)?e===Yo?Go++:(Go=0,Yo=e):Go=0,Br()}(e,t,s,a)}finally{Io.transition=r,vt=a}return null}function Nc(){if(null!==Ko){var e=jt($o),t=Io.transition,s=vt;try{if(Io.transition=null,vt=16>e?16:e,null===Ko)var a=!1;else{if(e=Ko,Ko=null,$o=0,0!==(6&Do))throw Error(n(331));var r=Do;for(Do|=4,Yi=e.current;null!==Yi;){var l=Yi,i=l.child;if(0!==(16&Yi.flags)){var o=l.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Yi=d;null!==Yi;){var x=Yi;switch(x.tag){case 0:case 11:case 15:to(8,x,l)}var u=x.child;if(null!==u)u.return=x,Yi=u;else for(;null!==Yi;){var m=(x=Yi).sibling,h=x.return;if(ro(x),x===d){Yi=null;break}if(null!==m){m.return=h,Yi=m;break}Yi=h}}}var p=l.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var f=g.sibling;g.sibling=null,g=f}while(null!==g)}}Yi=l}}if(0!==(2064&l.subtreeFlags)&&null!==i)i.return=l,Yi=i;else e:for(;null!==Yi;){if(0!==(2048&(l=Yi).flags))switch(l.tag){case 0:case 11:case 15:to(9,l,l.return)}var b=l.sibling;if(null!==b){b.return=l.return,Yi=b;break e}Yi=l.return}}var v=e.current;for(Yi=v;null!==Yi;){var j=(i=Yi).child;if(0!==(2064&i.subtreeFlags)&&null!==j)j.return=i,Yi=j;else e:for(i=v;null!==Yi;){if(0!==(2048&(o=Yi).flags))try{switch(o.tag){case 0:case 11:case 15:so(9,o)}}catch(N){Sc(o,o.return,N)}if(o===i){Yi=null;break e}var y=o.sibling;if(null!==y){y.return=o.return,Yi=y;break e}Yi=o.return}}if(Do=r,Br(),nt&&"function"===typeof nt.onPostCommitFiberRoot)try{nt.onPostCommitFiberRoot(rt,e)}catch(N){}a=!0}return a}finally{vt=s,Io.transition=t}}return!1}function wc(e,t,s){e=Rn(e,t=ui(0,t=oi(s,t),1),1),t=ec(),null!==e&&(ft(e,1,t),ac(e,t))}function Sc(e,t,s){if(3===e.tag)wc(e,e,s);else for(;null!==t;){if(3===t.tag){wc(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Uo||!Uo.has(a))){t=Rn(t,e=mi(t,e=oi(s,e),1),1),e=ec(),null!==t&&(ft(t,1,e),ac(t,e));break}}t=t.return}}function kc(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&s,_o===e&&(Eo&s)===s&&(4===To||3===To&&(130023424&Eo)===Eo&&500>Ye()-Bo?uc(e,0):Fo|=s),ac(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=ec();null!==(e=Tn(e,t))&&(ft(e,t,s),ac(e,s))}function Ic(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Cc(e,s)}function Dc(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(s=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(n(314))}null!==a&&a.delete(t),Cc(e,s)}function _c(e,t){return Xe(e,t)}function Lc(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,s,a){return new Lc(e,t,s,a)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var s=e.alternate;return null===s?((s=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Tc(e,t,s,a,r,l){var i=2;if(a=e,"function"===typeof e)Mc(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case w:return zc(s.children,r,l,t);case S:i=8,r|=8;break;case k:return(e=Ec(12,s,t,2|r)).elementType=k,e.lanes=l,e;case _:return(e=Ec(13,s,t,r)).elementType=_,e.lanes=l,e;case L:return(e=Ec(19,s,t,r)).elementType=L,e.lanes=l,e;case P:return Oc(s,r,l,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:i=10;break e;case I:i=9;break e;case D:i=11;break e;case E:i=14;break e;case M:i=16,a=null;break e}throw Error(n(130,null==e?e:typeof e,""))}return(t=Ec(i,s,t,r)).elementType=e,t.type=a,t.lanes=l,t}function zc(e,t,s,a){return(e=Ec(7,e,a,t)).lanes=s,e}function Oc(e,t,s,a){return(e=Ec(22,e,a,t)).elementType=P,e.lanes=s,e.stateNode={isHidden:!1},e}function Ac(e,t,s){return(e=Ec(6,e,null,t)).lanes=s,e}function Fc(e,t,s){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Rc(e,t,s,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,s,a,r,n,l,i,o){return e=new Rc(e,t,s,i,o),1===t?(t=1,!0===n&&(t|=8)):t=0,n=Ec(3,null,null,t),e.current=n,n.stateNode=e,n.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},On(n),e}function Bc(e){if(!e)return Cr;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(n(171))}if(1===e.tag){var s=e.type;if(Er(s))return Tr(e,s,t)}return t}function qc(e,t,s,a,r,n,l,i,o){return(e=Vc(s,a,!0,e,0,n,0,i,o)).context=Bc(null),s=e.current,(n=Fn(a=ec(),r=tc(s))).callback=void 0!==t&&null!==t?t:null,Rn(s,n,r),e.current.lanes=r,ft(e,r,a),ac(e,a),e}function Qc(e,t,s,a){var r=t.current,n=ec(),l=tc(r);return s=Bc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Fn(n,l)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Rn(r,t,l))&&(sc(e,r,l,n),Vn(e,r,l)),l}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function Uc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}wo=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Dr.current)bi=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return bi=!1,function(e,t,s){switch(t.tag){case 3:Di(t),mn();break;case 5:Yn(t);break;case 1:Er(t.type)&&zr(t);break;case 4:$n(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;kr(Nn,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(kr(Zn,1&Zn.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Oi(e,t,s):(kr(Zn,1&Zn.current),null!==(e=Qi(e,t,s))?e.sibling:null);kr(Zn,1&Zn.current);break;case 19:if(a=0!==(s&t.childLanes),0!==(128&e.flags)){if(a)return Bi(e,t,s);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),kr(Zn,Zn.current),a)break;return null;case 22:case 23:return t.lanes=0,wi(e,t,s)}return Qi(e,t,s)}(e,t,s);bi=0!==(131072&e.flags)}else bi=!1,an&&0!==(1048576&t.flags)&&Jr(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;qi(e,t),e=t.pendingProps;var r=Lr(t,Ir.current);_n(t,s),r=pl(null,t,a,e,r,s);var l=gl();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Er(a)?(l=!0,zr(t)):l=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,On(t),r.updater=ai,t.stateNode=r,r._reactInternals=t,ii(t,a,e,s),t=Ii(null,t,a,!0,l,s)):(t.tag=0,an&&l&&Zr(t),vi(null,t,r,s),t=t.child),t;case 16:a=t.elementType;e:{switch(qi(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===D)return 11;if(e===E)return 14}return 2}(a),e=ti(a,e),r){case 0:t=ki(null,t,a,e,s);break e;case 1:t=Ci(null,t,a,e,s);break e;case 11:t=ji(null,t,a,e,s);break e;case 14:t=yi(null,t,a,ti(a.type,e),s);break e}throw Error(n(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,ki(e,t,a,r=t.elementType===a?r:ti(a,r),s);case 1:return a=t.type,r=t.pendingProps,Ci(e,t,a,r=t.elementType===a?r:ti(a,r),s);case 3:e:{if(Di(t),null===e)throw Error(n(387));a=t.pendingProps,r=(l=t.memoizedState).element,An(e,t),qn(t,a,null,s);var i=t.memoizedState;if(a=i.element,l.isDehydrated){if(l={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,256&t.flags){t=_i(e,t,a,s,r=oi(Error(n(423)),t));break e}if(a!==r){t=_i(e,t,a,s,r=oi(Error(n(424)),t));break e}for(sn=or(t.stateNode.containerInfo.firstChild),tn=t,an=!0,rn=null,s=yn(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(mn(),a===r){t=Qi(e,t,s);break e}vi(e,t,a,s)}t=t.child}return t;case 5:return Yn(t),null===e&&cn(t),a=t.type,r=t.pendingProps,l=null!==e?e.memoizedProps:null,i=r.children,tr(a,r)?i=null:null!==l&&tr(a,l)&&(t.flags|=32),Si(e,t),vi(e,t,i,s),t.child;case 6:return null===e&&cn(t),null;case 13:return Oi(e,t,s);case 4:return $n(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=jn(t,null,a,s):vi(e,t,a,s),t.child;case 11:return a=t.type,r=t.pendingProps,ji(e,t,a,r=t.elementType===a?r:ti(a,r),s);case 7:return vi(e,t,t.pendingProps,s),t.child;case 8:case 12:return vi(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,l=t.memoizedProps,i=r.value,kr(Nn,a._currentValue),a._currentValue=i,null!==l)if(la(l.value,i)){if(l.children===r.children&&!Dr.current){t=Qi(e,t,s);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var o=l.dependencies;if(null!==o){i=l.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===l.tag){(c=Fn(-1,s&-s)).tag=2;var d=l.updateQueue;if(null!==d){var x=(d=d.shared).pending;null===x?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}l.lanes|=s,null!==(c=l.alternate)&&(c.lanes|=s),Dn(l.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===l.tag)i=l.type===t.type?null:l.child;else if(18===l.tag){if(null===(i=l.return))throw Error(n(341));i.lanes|=s,null!==(o=i.alternate)&&(o.lanes|=s),Dn(i,s,t),i=l.sibling}else i=l.child;if(null!==i)i.return=l;else for(i=l;null!==i;){if(i===t){i=null;break}if(null!==(l=i.sibling)){l.return=i.return,i=l;break}i=i.return}l=i}vi(e,t,r.children,s),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,_n(t,s),a=a(r=Ln(r)),t.flags|=1,vi(e,t,a,s),t.child;case 14:return r=ti(a=t.type,t.pendingProps),yi(e,t,a,r=ti(a.type,r),s);case 15:return Ni(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:ti(a,r),qi(e,t),t.tag=1,Er(a)?(e=!0,zr(t)):e=!1,_n(t,s),ni(t,a,r),ii(t,a,r,s),Ii(null,t,a,!0,e,s);case 19:return Bi(e,t,s);case 22:return wi(e,t,s)}throw Error(n(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Gc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,s,a,r){var n=s._reactRootContainer;if(n){var l=n;if("function"===typeof r){var i=r;r=function(){var e=Hc(l);i.call(e)}}Qc(t,l,e,r)}else l=function(e,t,s,a,r){if(r){if("function"===typeof a){var n=a;a=function(){var e=Hc(l);n.call(e)}}var l=qc(t,a,e,0,null,!1,0,"",Jc);return e._reactRootContainer=l,e[mr]=l.current,Ba(8===e.nodeType?e.parentNode:e),dc(),l}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var i=a;a=function(){var e=Hc(o);i.call(e)}}var o=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=o,e[mr]=o.current,Ba(8===e.nodeType?e.parentNode:e),dc(function(){Qc(t,o,s,a)}),o}(s,t,e,r,a);return Hc(l)}$c.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));Qc(e,t,null,null)},$c.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Qc(null,e,null,null)}),t[mr]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Pt.length&&0!==t&&t<Pt[s].priority;s++);Pt.splice(s,0,e),0===s&&At(e)}},yt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=xt(t.pendingLanes);0!==s&&(bt(t,1|s),ac(t,Ye()),0===(6&Do)&&(qo=Ye()+500,Br()))}break;case 13:dc(function(){var t=Tn(e,1);if(null!==t){var s=ec();sc(t,e,1,s)}}),Uc(e,1)}},Nt=function(e){if(13===e.tag){var t=Tn(e,134217728);if(null!==t)sc(t,e,134217728,ec());Uc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),s=Tn(e,t);if(null!==s)sc(s,e,t,ec());Uc(e,t)}},St=function(){return vt},kt=function(e,t){var s=vt;try{return vt=e,t()}finally{vt=s}},Ne=function(e,t,s){switch(t){case"input":if(J(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var r=jr(a);if(!r)throw Error(n(90));X(a),J(a,r)}}}break;case"textarea":ne(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},De=cc,_e=dc;var ed={usingClientEntryPoint:!1,Events:[br,vr,jr,Ce,Ie,cc]},td={findFiberByHostInstance:fr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{rt=ad.inject(sd),nt=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Gc(t))throw Error(n(200));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!Gc(e))throw Error(n(299));var s=!1,a="",r=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,s,0,a,r),e[mr]=t.current,Ba(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,s){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!Gc(e))throw Error(n(405));var a=null!=s&&s.hydratedSources||null,r=!1,l="",i=Xc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(r=!0),void 0!==s.identifierPrefix&&(l=s.identifierPrefix),void 0!==s.onRecoverableError&&(i=s.onRecoverableError)),t=qc(t,null,e,1,null!=s?s:null,r,0,l,i),e[mr]=t.current,Ba(e),a)for(e=0;e<a.length;e++)r=(r=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,r]:t.mutableSourceEagerHydrationData.push(s,r);return new $c(t)},t.render=function(e,t,s){if(!Yc(t))throw Error(n(200));return Zc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(n(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!Yc(s))throw Error(n(200));if(null==e||void 0===e._reactInternals)throw Error(n(38));return Zc(e,t,s,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,s)=>{e.exports=s(234)},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var n=Object.create(null);s.r(n);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&a;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>l[e]=()=>a[e]);return l.default=()=>a,s.d(n,l),n}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a,r=s(43),n=s.t(r,2),l=s(391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const o="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(s){}}}function x(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,s,a){return void 0===s&&(s=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:s,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function h(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function p(e,t,s,r){void 0===r&&(r={});let{window:n=document.defaultView,v5Compat:l=!1}=r,d=n.history,h=a.Pop,p=null,g=f();function f(){return(d.state||{idx:null}).idx}function b(){h=a.Pop;let e=f(),t=null==e?null:e-g;g=e,p&&p({action:h,location:j.location,delta:t})}function v(e){let t="null"!==n.location.origin?n.location.origin:n.location.href,s="string"===typeof e?e:m(e);return s=s.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==g&&(g=0,d.replaceState(i({},d.state,{idx:g}),""));let j={get action(){return h},get location(){return e(n,d)},listen(e){if(p)throw new Error("A history only accepts one active listener");return n.addEventListener(o,b),p=e,()=>{n.removeEventListener(o,b),p=null}},createHref:e=>t(n,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){h=a.Push;let r=u(j.location,e,t);s&&s(r,e),g=f()+1;let i=x(r,g),o=j.createHref(r);try{d.pushState(i,"",o)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;n.location.assign(o)}l&&p&&p({action:h,location:j.location,delta:1})},replace:function(e,t){h=a.Replace;let r=u(j.location,e,t);s&&s(r,e),g=f();let n=x(r,g),i=j.createHref(r);d.replaceState(n,"",i),l&&p&&p({action:h,location:j.location,delta:0})},go:e=>d.go(e)};return j}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function f(e,t,s){return void 0===s&&(s="/"),b(e,t,s,!1)}function b(e,t,s,a){let r=M(("string"===typeof t?h(t):t).pathname||"/",s);if(null==r)return null;let n=v(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(n);let l=null;for(let i=0;null==l&&i<n.length;++i){let e=E(r);l=_(n[i],e,a)}return l}function v(e,t,s,a){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===a&&(a="");let r=(e,r,n)=>{let l={relativePath:void 0===n?e.path||"":n,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};l.relativePath.startsWith("/")&&(c(l.relativePath.startsWith(a),'Absolute route path "'+l.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),l.relativePath=l.relativePath.slice(a.length));let i=A([a,l.relativePath]),o=s.concat(l);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+i+'".'),v(e.children,t,o,i)),(null!=e.path||e.index)&&t.push({path:i,score:D(i,e.index),routesMeta:o})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let a of j(e.path))r(e,t,a);else r(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,r=s.endsWith("?"),n=s.replace(/\?$/,"");if(0===a.length)return r?[n,""]:[n];let l=j(a.join("/")),i=[];return i.push(...l.map(e=>""===e?n:[n,e].join("/"))),r&&i.push(...l),i.map(t=>e.startsWith("/")&&""===t?"/":t)}const y=/^:[\w-]+$/,N=3,w=2,S=1,k=10,C=-2,I=e=>"*"===e;function D(e,t){let s=e.split("/"),a=s.length;return s.some(I)&&(a+=C),t&&(a+=w),s.filter(e=>!I(e)).reduce((e,t)=>e+(y.test(t)?N:""===t?S:k),a)}function _(e,t,s){void 0===s&&(s=!1);let{routesMeta:a}=e,r={},n="/",l=[];for(let i=0;i<a.length;++i){let e=a[i],o=i===a.length-1,c="/"===n?t:t.slice(n.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),x=e.route;if(!d&&o&&s&&!a[a.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),l.push({params:r,pathname:A([n,d.pathname]),pathnameBase:F(A([n,d.pathnameBase])),route:x}),"/"!==d.pathnameBase&&(n=A([n,d.pathnameBase]))}return l}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let n=new RegExp(r,t?void 0:"i");return[n,a]}(e.path,e.caseSensitive,e.end),r=t.match(s);if(!r)return null;let n=r[0],l=n.replace(/(.)\/+$/,"$1"),i=r.slice(1);return{params:a.reduce((e,t,s)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=i[s]||"";l=n.slice(0,n.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[s];return e[a]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:n,pathnameBase:l,pattern:e}}function E(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}function P(e,t,s,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function T(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function z(e,t){let s=T(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function O(e,t,s,a){let r;void 0===a&&(a=!1),"string"===typeof e?r=h(e):(r=i({},e),c(!r.pathname||!r.pathname.includes("?"),P("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),P("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),P("#","search","hash",r)));let n,l=""===e||""===r.pathname,o=l?"/":r.pathname;if(null==o)n=s;else{let e=t.length-1;if(!a&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}n=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:s,search:a="",hash:r=""}="string"===typeof e?h(e):e,n=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:n,search:R(a),hash:V(r)}}(r,n),x=o&&"/"!==o&&o.endsWith("/"),u=(l||"."===o)&&s.endsWith("/");return d.pathname.endsWith("/")||!x&&!u||(d.pathname+="/"),d}const A=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",V=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],Q=(new Set(q),["get",...q]);new Set(Q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},H.apply(this,arguments)}const W=r.createContext(null);const U=r.createContext(null);const X=r.createContext(null);const K=r.createContext(null);const $=r.createContext({outlet:null,matches:[],isDataRoute:!1});const G=r.createContext(null);function Y(){return null!=r.useContext(K)}function J(){return Y()||c(!1),r.useContext(K).location}function Z(e){r.useContext(X).static||r.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=r.useContext($);return e?function(){let{router:e}=xe(ce.UseNavigateStable),t=me(de.UseNavigateStable),s=r.useRef(!1);return Z(()=>{s.current=!0}),r.useCallback(function(a,r){void 0===r&&(r={}),s.current&&("number"===typeof a?e.navigate(a):e.navigate(a,H({fromRouteId:t},r)))},[e,t])}():function(){Y()||c(!1);let e=r.useContext(W),{basename:t,future:s,navigator:a}=r.useContext(X),{matches:n}=r.useContext($),{pathname:l}=J(),i=JSON.stringify(z(n,s.v7_relativeSplatPath)),o=r.useRef(!1);return Z(()=>{o.current=!0}),r.useCallback(function(s,r){if(void 0===r&&(r={}),!o.current)return;if("number"===typeof s)return void a.go(s);let n=O(s,JSON.parse(i),l,"path"===r.relative);null==e&&"/"!==t&&(n.pathname="/"===n.pathname?t:A([t,n.pathname])),(r.replace?a.replace:a.push)(n,r.state,r)},[t,a,i,l,e])}()}function te(){let{matches:e}=r.useContext($),t=e[e.length-1];return t?t.params:{}}function se(e,t){let{relative:s}=void 0===t?{}:t,{future:a}=r.useContext(X),{matches:n}=r.useContext($),{pathname:l}=J(),i=JSON.stringify(z(n,a.v7_relativeSplatPath));return r.useMemo(()=>O(e,JSON.parse(i),l,"path"===s),[e,i,l,s])}function ae(e,t,s,n){Y()||c(!1);let{navigator:l}=r.useContext(X),{matches:i}=r.useContext($),o=i[i.length-1],d=o?o.params:{},x=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,m=J();if(t){var p;let e="string"===typeof t?h(t):t;"/"===x||(null==(p=e.pathname)?void 0:p.startsWith(x))||c(!1),u=e}else u=m;let g=u.pathname||"/",b=g;if("/"!==x){let e=x.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=f(e,{pathname:b});let j=oe(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:A([x,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?x:A([x,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,s,n);return t&&j?r.createElement(K.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:a.Pop}},j):j}function re(){let e=function(){var e;let t=r.useContext(G),s=ue(de.UseRouteError),a=me(de.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[a]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),s?r.createElement("pre",{style:n},s):null,null)}const ne=r.createElement(re,null);class le extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement($.Provider,{value:this.props.routeContext},r.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:s,children:a}=e,n=r.useContext(W);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),r.createElement($.Provider,{value:t},a)}function oe(e,t,s,a){var n;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===a&&(a=null),null==e){var l;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(l=a)&&l.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let i=e,o=null==(n=s)?void 0:n.errors;if(null!=o){let e=i.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||c(!1),i=i.slice(0,Math.min(i.length,e+1))}let d=!1,x=-1;if(s&&a&&a.v7_partialHydration)for(let r=0;r<i.length;r++){let e=i[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(x=r),e.route.id){let{loaderData:t,errors:a}=s,r=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||r){d=!0,i=x>=0?i.slice(0,x+1):[i[0]];break}}}return i.reduceRight((e,a,n)=>{let l,c=!1,u=null,m=null;var h;s&&(l=o&&a.route.id?o[a.route.id]:void 0,u=a.route.errorElement||ne,d&&(x<0&&0===n?(h="route-fallback",!1||he[h]||(he[h]=!0),c=!0,m=null):x===n&&(c=!0,m=a.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,n+1)),g=()=>{let t;return t=l?u:c?m:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(ie,{match:a,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(a.route.ErrorBoundary||a.route.errorElement||0===n)?r.createElement(le,{location:s.location,revalidation:s.revalidation,component:u,error:l,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function xe(e){let t=r.useContext(W);return t||c(!1),t}function ue(e){let t=r.useContext(U);return t||c(!1),t}function me(e){let t=function(){let e=r.useContext($);return e||c(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||c(!1),s.route.id}const he={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function ge(e){let{to:t,replace:s,state:a,relative:n}=e;Y()||c(!1);let{future:l,static:i}=r.useContext(X),{matches:o}=r.useContext($),{pathname:d}=J(),x=ee(),u=O(t,z(o,l.v7_relativeSplatPath),d,"path"===n),m=JSON.stringify(u);return r.useEffect(()=>x(JSON.parse(m),{replace:s,state:a,relative:n}),[x,m,n,s,a]),null}function fe(e){c(!1)}function be(e){let{basename:t="/",children:s=null,location:n,navigationType:l=a.Pop,navigator:i,static:o=!1,future:d}=e;Y()&&c(!1);let x=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:x,navigator:i,static:o,future:H({v7_relativeSplatPath:!1},d)}),[x,d,i,o]);"string"===typeof n&&(n=h(n));let{pathname:m="/",search:p="",hash:g="",state:f=null,key:b="default"}=n,v=r.useMemo(()=>{let e=M(m,x);return null==e?null:{location:{pathname:e,search:p,hash:g,state:f,key:b},navigationType:l}},[x,m,p,g,f,b,l]);return null==v?null:r.createElement(X.Provider,{value:u},r.createElement(K.Provider,{children:s,value:v}))}function ve(e){let{children:t,location:s}=e;return ae(je(t),s)}new Promise(()=>{});r.Component;function je(e,t){void 0===t&&(t=[]);let s=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let n=[...t,a];if(e.type===r.Fragment)return void s.push.apply(s,je(e.props.children,n));e.type!==fe&&c(!1),e.props.index&&e.props.children&&c(!1);let l={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(l.children=je(e.props.children,n)),s.push(l)}),s}var ye=s(950),Ne=s.t(ye,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},we.apply(this,arguments)}function Se(e,t){if(null==e)return{};var s,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)s=n[a],t.indexOf(s)>=0||(r[s]=e[s]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ce=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Ln){}const Ie=r.createContext({isTransitioning:!1});new Map;const De=n.startTransition;Ne.flushSync,n.useId;function _e(e){let{basename:t,children:s,future:a,window:n}=e,l=r.useRef();var i;null==l.current&&(l.current=(void 0===(i={window:n,v5Compat:!0})&&(i={}),p(function(e,t){let{pathname:s,search:a,hash:r}=e.location;return u("",{pathname:s,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,i)));let o=l.current,[c,d]=r.useState({action:o.action,location:o.location}),{v7_startTransition:x}=a||{},h=r.useCallback(e=>{x&&De?De(()=>d(e)):d(e)},[d,x]);return r.useLayoutEffect(()=>o.listen(h),[o,h]),r.useEffect(()=>pe(a),[a]),r.createElement(be,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:a})}const Le="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Me=r.forwardRef(function(e,t){let s,{onClick:a,relative:n,reloadDocument:l,replace:i,state:o,target:d,to:x,preventScrollReset:u,viewTransition:h}=e,p=Se(e,ke),{basename:g}=r.useContext(X),f=!1;if("string"===typeof x&&Ee.test(x)&&(s=x,Le))try{let e=new URL(window.location.href),t=x.startsWith("//")?new URL(e.protocol+x):new URL(x),s=M(t.pathname,g);t.origin===e.origin&&null!=s?x=s+t.search+t.hash:f=!0}catch(Ln){}let b=function(e,t){let{relative:s}=void 0===t?{}:t;Y()||c(!1);let{basename:a,navigator:n}=r.useContext(X),{hash:l,pathname:i,search:o}=se(e,{relative:s}),d=i;return"/"!==a&&(d="/"===i?a:A([a,i])),n.createHref({pathname:d,search:o,hash:l})}(x,{relative:n}),v=function(e,t){let{target:s,replace:a,state:n,preventScrollReset:l,relative:i,viewTransition:o}=void 0===t?{}:t,c=ee(),d=J(),x=se(e,{relative:i});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==a?a:m(d)===m(x);c(e,{replace:s,state:n,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,x,a,n,s,e,l,i,o])}(x,{replace:i,state:o,target:d,preventScrollReset:u,relative:n,viewTransition:h});return r.createElement("a",we({},p,{href:s||b,onClick:f||l?a:function(e){a&&a(e),e.defaultPrevented||v(e)},ref:t,target:d}))});const Pe=r.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:a=!1,className:n="",end:l=!1,style:i,to:o,viewTransition:d,children:x}=e,u=Se(e,Ce),m=se(o,{relative:u.relative}),h=J(),p=r.useContext(U),{navigator:g,basename:f}=r.useContext(X),b=null!=p&&function(e,t){void 0===t&&(t={});let s=r.useContext(Ie);null==s&&c(!1);let{basename:a}=Oe(Te.useViewTransitionState),n=se(e,{relative:t.relative});if(!s.isTransitioning)return!1;let l=M(s.currentLocation.pathname,a)||s.currentLocation.pathname,i=M(s.nextLocation.pathname,a)||s.nextLocation.pathname;return null!=L(n.pathname,i)||null!=L(n.pathname,l)}(m)&&!0===d,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,j=h.pathname,y=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;a||(j=j.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&f&&(y=M(y,f)||y);const N="/"!==v&&v.endsWith("/")?v.length-1:v.length;let w,S=j===v||!l&&j.startsWith(v)&&"/"===j.charAt(N),k=null!=y&&(y===v||!l&&y.startsWith(v)&&"/"===y.charAt(v.length)),C={isActive:S,isPending:k,isTransitioning:b},I=S?s:void 0;w="function"===typeof n?n(C):[n,S?"active":null,k?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let D="function"===typeof i?i(C):i;return r.createElement(Me,we({},u,{"aria-current":I,className:w,ref:t,style:D,to:o,viewTransition:d}),"function"===typeof x?x(C):x)});var Te,ze;function Oe(e){let t=r.useContext(W);return t||c(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ze||(ze={}));function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function Fe(e){var t=function(e,t){if("object"!=Ae(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=Ae(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ae(t)?t:t+""}function Re(e,t,s){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ve(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function Be(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(s),!0).forEach(function(t){Re(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ve(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var qe=s(426),Qe=s(579);const He=(0,r.createContext)(),We=()=>{const e=(0,r.useContext)(He);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Ue=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=localStorage.getItem("bero_user");if(e)try{const t=JSON.parse(e);n(t),i(!0)}catch(t){console.error("\u062e\u0637\u0623 \u0641\u064a \u0642\u0631\u0627\u0621\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:",t),localStorage.removeItem("bero_user")}c(!1)},[]);const d=(0,r.useCallback)(()=>{try{const t=localStorage.getItem("bero_system_settings");if(t){var e;return(null===(e=JSON.parse(t).permissions)||void 0===e?void 0:e.matrix)||j()}}catch(t){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0645\u0635\u0641\u0648\u0641\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a:",t)}return j()},[]),x=(0,r.useCallback)(e=>{if(!a)return!1;if("admin"===a.role)return!0;const t=d()[e];return!!t&&(t.roles&&t.roles.includes(a.role))},[a,d]),u=(0,r.useCallback)(e=>!!a&&e.some(e=>x(e)),[a,x]),m=(0,r.useCallback)(e=>!!a&&e.every(e=>x(e)),[a,x]),h=(0,r.useCallback)((e,t)=>{if(!a)return!1;const s="".concat(e,".").concat(t);return x(s)},[a,x]),p=(0,r.useCallback)(()=>!!a&&("admin"===a.role||"manager"===a.role),[a]),g=(0,r.useCallback)(()=>"admin"===(null===a||void 0===a?void 0:a.role),[a]),f=(0,r.useCallback)(e=>{if(!a)return!1;return["manage_settings","system_settings","manage_users","edit_user","delete_user","add_user","user_permissions","system_backup","system_integrations"].includes(e)?"admin"===a.role:x(e)},[a,x]),b=(0,r.useCallback)(()=>"manager"===(null===a||void 0===a?void 0:a.role),[a]),v=(0,r.useCallback)(e=>({admin:"\u0645\u062f\u064a\u0631 \u0639\u0627\u0645",manager:"\u0645\u062f\u064a\u0631",user:"\u0645\u0633\u062a\u062e\u062f\u0645",viewer:"\u0645\u0631\u0627\u0642\u0628"}[e]||e),[]),j=(0,r.useCallback)(()=>({"inventory.view":{roles:["admin","manager","user"],description:"\u0639\u0631\u0636 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"},"inventory.add":{roles:["admin","manager"],description:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c\u0627\u062a"},"inventory.edit":{roles:["admin","manager"],description:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"},"inventory.delete":{roles:["admin"],description:"\u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"},"transactions.view":{roles:["admin","manager","user"],description:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"},"transactions.add":{roles:["admin","manager","user"],description:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0627\u0645\u0644\u0627\u062a"},"transactions.edit":{roles:["admin","manager"],description:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"},"transactions.delete":{roles:["admin"],description:"\u062d\u0630\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"},"contacts.view":{roles:["admin","manager","user"],description:"\u062c\u0647\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644"},"contacts.add":{roles:["admin","manager"],description:"\u0625\u0636\u0627\u0641\u0629 \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644"},"contacts.edit":{roles:["admin","manager"],description:"\u062a\u0639\u062f\u064a\u0644 \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644"},"contacts.delete":{roles:["admin"],description:"\u062d\u0630\u0641 \u062c\u0647\u0627\u062a \u0627\u062a\u0635\u0627\u0644"},"finance.view":{roles:["admin","manager"],description:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"},"finance.edit":{roles:["admin"],description:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629"},"reports.view":{roles:["admin","manager","user","viewer"],description:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"},"reports.export":{roles:["admin","manager"],description:"\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"},"system.settings":{roles:["admin"],description:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645"},"system.users":{roles:["admin"],description:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"},"system.permissions":{roles:["admin"],description:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"},"system.backup":{roles:["admin"],description:"\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a"}}),[]),y={user:a,isAuthenticated:l,loading:o,login:async(e,t)=>{try{if(!e||!t)return{success:!1,message:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0648\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"};const r=localStorage.getItem("bero_system_users");let l=[];if(r)try{l=JSON.parse(r)}catch(a){console.error("\u062e\u0637\u0623 \u0641\u064a \u0642\u0631\u0627\u0621\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646:",a),l=[]}if(0===l.length){const{hashPassword:e}=s(426);l=[{id:1,username:"admin",password:e("admin123"),name:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645",email:"admin@berosystem.com",phone:"+20 XXX XXX XXXX",role:"admin",status:"active",createdAt:(new Date).toISOString()}],localStorage.setItem("bero_system_users",JSON.stringify(l))}const o=l.find(t=>t.username===e);if(!o)return{success:!1,message:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f"};if("inactive"===o.status)return{success:!1,message:"\u0647\u0630\u0627 \u0627\u0644\u062d\u0633\u0627\u0628 \u063a\u064a\u0631 \u0646\u0634\u0637. \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u0645\u062f\u064a\u0631"};const{hashPassword:c}=s(426);let d=!1;if(d=(0,qe.verifyPassword)(t,o.password),!d&&t===o.password){d=!0,o.password=c(t);const e=l.map(e=>e.id===o.id?o:e);localStorage.setItem("bero_system_users",JSON.stringify(e)),console.log("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u062a\u0634\u0641\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631")}if(!d)return{success:!1,message:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629"};const x={id:o.id,username:o.username,name:o.name,role:o.role,email:o.email,phone:o.phone,loginAt:(new Date).toISOString()};n(x),i(!0),localStorage.setItem("bero_user",JSON.stringify(x));const u=l.map(e=>e.id===o.id?Be(Be({},e),{},{lastLogin:(new Date).toISOString()}):e);return localStorage.setItem("bero_system_users",JSON.stringify(u)),{success:!0,message:"\u0645\u0631\u062d\u0628\u0627\u064b ".concat(o.name)}}catch(a){return console.error("Login error:",a),{success:!1,message:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"}}},logout:()=>{n(null),i(!1),localStorage.removeItem("bero_user")},updateUser:e=>{const t=Be(Be({},a),e);n(t),localStorage.setItem("bero_user",JSON.stringify(t))},hasPermission:x,hasAnyPermission:u,hasAllPermissions:m,hasSectionPermission:h,hasAdminPermission:f,canEdit:p,isAdmin:g,isManager:b,getRoleDisplayName:v,getPermissionsMatrix:d,currentRole:(null===a||void 0===a?void 0:a.role)||"viewer",roleDisplayName:v((null===a||void 0===a?void 0:a.role)||"viewer"),isAuthenticatedUser:Boolean(a),isActiveUser:"inactive"!==(null===a||void 0===a?void 0:a.status)};return(0,Qe.jsx)(He.Provider,{value:y,children:t})},Xe=(0,r.createContext)(),Ke=()=>{const e=(0,r.useContext)(Xe);if(!e)throw new Error("useNotification must be used within NotificationProvider");return e},$e=e=>{let{children:t}=e;const[s,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(0),i=(0,r.useCallback)(e=>{const t=Be({id:Date.now(),timestamp:(new Date).toISOString(),read:!1},e);a(e=>[t,...e]),l(e=>e+1);const s=localStorage.getItem("bero_notifications"),r=s?JSON.parse(s):[];r.unshift(t),localStorage.setItem("bero_notifications",JSON.stringify(r.slice(0,100)))},[]),o=(0,r.useCallback)(e=>{i({type:"success",title:"\u0646\u062c\u0627\u062d",message:e,icon:"success"})},[i]),c=(0,r.useCallback)(e=>{i({type:"error",title:"\u062e\u0637\u0623",message:e,icon:"error"})},[i]),d=(0,r.useCallback)(e=>{i({type:"warning",title:"\u062a\u062d\u0630\u064a\u0631",message:e,icon:"warning"})},[i]),x=(0,r.useCallback)(e=>{i({type:"info",title:"\u0645\u0639\u0644\u0648\u0645\u0629",message:e,icon:"info"})},[i]),u=(0,r.useCallback)(e=>{a(t=>t.map(t=>t.id===e?Be(Be({},t),{},{read:!0}):t)),l(e=>Math.max(0,e-1))},[]),m=(0,r.useCallback)(()=>{a(e=>e.map(e=>Be(Be({},e),{},{read:!0}))),l(0)},[]),h=(0,r.useCallback)(e=>{a(t=>{const s=t.find(t=>t.id===e);return s&&!s.read&&l(e=>Math.max(0,e-1)),t.filter(t=>t.id!==e)})},[]),p=(0,r.useCallback)(()=>{a([]),l(0),localStorage.removeItem("bero_notifications")},[]),g={notifications:s,unreadCount:n,addNotification:i,showSuccess:o,showError:c,showWarning:d,showInfo:x,markAsRead:u,markAllAsRead:m,removeNotification:h,clearAll:p};return(0,Qe.jsx)(Xe.Provider,{value:g,style:{zIndex:1e3},children:t})},Ge=(0,r.createContext)(),Ye=()=>{const e=(0,r.useContext)(Ge);if(!e)throw new Error("useData must be used within DataProvider");return e},Je=e=>{let{children:t}=e;const[s,a]=(0,r.useState)([]),[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[v,j]=(0,r.useState)([]),[y,N]=(0,r.useState)([]),[w,S]=(0,r.useState)([]),[k,C]=(0,r.useState)(0),[I,D]=(0,r.useState)([]),[_,L]=(0,r.useState)([]),[E,M]=(0,r.useState)([]),[P,T]=(0,r.useState)([]),[z,O]=(0,r.useState)([]),[A,F]=(0,r.useState)([]),[R,V]=(0,r.useState)([]),[B,q]=(0,r.useState)([]),[Q,H]=(0,r.useState)([]),[W,U]=(0,r.useState)([]),[X,K]=(0,r.useState)([]),[$,G]=(0,r.useState)([]),[Y,J]=(0,r.useState)([]),[Z,ee]=(0,r.useState)([]),[te,se]=(0,r.useState)([]),[ae,re]=(0,r.useState)([]),[ne,le]=(0,r.useState)([]),[ie,oe]=(0,r.useState)([]),[ce,de]=(0,r.useState)([]),[xe,ue]=(0,r.useState)([]),[me,he]=(0,r.useState)([]),[pe,ge]=(0,r.useState)([]),[fe,be]=(0,r.useState)([]),[ve,je]=(0,r.useState)([]),[ye,Ne]=(0,r.useState)([]),[we,Se]=(0,r.useState)([]),[ke,Ce]=(0,r.useState)([]),[Ie,De]=(0,r.useState)([]),[_e,Le]=(0,r.useState)([]),[Ee,Me]=(0,r.useState)([]),[Pe,Te]=(0,r.useState)([]),[ze,Oe]=(0,r.useState)([]),[Ae,Fe]=(0,r.useState)([]),[Re,Ve]=(0,r.useState)([]),[qe,He]=(0,r.useState)([]),[We,Ue]=(0,r.useState)([]),[Xe,Ke]=(0,r.useState)([]),[$e,Ye]=(0,r.useState)([]),[Je,Ze]=(0,r.useState)([]),[et,tt]=(0,r.useState)([]);(0,r.useEffect)(()=>{st()},[]);const st=()=>{const e=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const a=localStorage.getItem(e);if(a)try{t(JSON.parse(a))}catch(r){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 ".concat(e,":"),r),t(s)}};e("bero_warehouses",a),e("bero_products",l),e("bero_categories",o),e("bero_purchases",d),e("bero_purchase_invoices",u),e("bero_purchase_returns",h),e("bero_sales",g),e("bero_sales_invoices",b),e("bero_sales_returns",j),e("bero_suppliers",N),e("bero_customers",S),e("bero_treasury_balance",C,0),e("bero_cash_receipts",D),e("bero_cash_disbursements",L),e("bero_transfers",M),e("bero_accounts",T),e("bero_journal_entries",O),e("bero_employees",F),e("bero_departments",V),e("bero_positions",q),e("bero_attendance",H),e("bero_leave_types",U),e("bero_employee_leaves",K),e("bero_employee_leave_balances",G),e("bero_salary_components",J),e("bero_payroll_periods",ee),e("bero_payroll_details",se),e("bero_performance_metrics",re),e("bero_performance_reviews",le),e("bero_production_orders",oe),e("bero_bom_items",de),e("bero_production_operations",ue),e("bero_work_centers",he),e("bero_production_plans",ge),e("bero_material_consumption",be),e("bero_production_waste",je),e("bero_quality_controls",Ne),e("bero_production_kpis",Se),e("bero_fixed_assets",Ce),e("bero_asset_categories",De),e("bero_asset_locations",Le),e("bero_depreciation_methods",Me),e("bero_depreciation_schedules",Te),e("bero_depreciation_entries",Oe),e("bero_maintenance_schedules",Fe),e("bero_maintenance_records",Ve),e("bero_maintenance_costs",He),e("bero_asset_inventory",Ue),e("bero_asset_valuations",Ke),e("bero_asset_disposals",Ye),e("bero_asset_transfers",Ze),e("bero_asset_acquisitions",tt)},at=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},rt=e=>{const t=Be(Be({id:Date.now(),date:(new Date).toISOString()},e),{},{type:"receipt",status:"completed"}),s=[t,...I];D(s),at("bero_cash_receipts",s);const a=k+parseFloat(e.amount);return C(a),at("bero_treasury_balance",a),t},nt=e=>{const t=I.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=k-parseFloat(t.amount);if(s<0)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644: \u0633\u064a\u0624\u062f\u064a \u0630\u0644\u0643 \u0625\u0644\u0649 \u0631\u0635\u064a\u062f \u0633\u0627\u0644\u0628 \u0641\u064a \u0627\u0644\u062e\u0632\u064a\u0646\u0629");C(s),at("bero_treasury_balance",s);const a=I.filter(t=>t.id!==e);D(a),at("bero_cash_receipts",a)},lt=e=>{if(k<parseFloat(e.amount))throw new Error("\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0648\u0641\u0631 \u0641\u064a \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064d");const t=Be(Be({id:Date.now(),date:(new Date).toISOString()},e),{},{type:"disbursement",status:"completed"}),s=[t,..._];L(s),at("bero_cash_disbursements",s);const a=k-parseFloat(e.amount);return C(a),at("bero_treasury_balance",a),t},it=e=>{const t=_.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=k+parseFloat(t.amount);C(s),at("bero_treasury_balance",s);const a=_.filter(t=>t.id!==e);L(a),at("bero_cash_disbursements",a)},ot=e=>{let t=0;return f.forEach(s=>{s.customerId===e&&(t+=parseFloat(s.total||0))}),v.forEach(s=>{const a=f.find(e=>e.id===s.invoiceId);a&&a.customerId===e&&(t-=parseFloat(s.totalAmount||0))}),I.forEach(s=>{"customer"===s.fromType&&s.fromId===e&&(t-=parseFloat(s.amount||0))}),t},ct=e=>{let t=0;return x.forEach(s=>{s.supplierId===e&&(t+=parseFloat(s.total||0))}),m.forEach(s=>{const a=x.find(e=>e.id===s.invoiceId);a&&a.supplierId===e&&(t-=parseFloat(s.totalAmount||0))}),_.forEach(s=>{"supplier"===s.toType&&s.toId===e&&(t-=parseFloat(s.amount||0))}),t},dt=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"debit";const a=y.findIndex(t=>t.id===e);if(-1!==a){const e=y[a].balance||0,r="debit"===s?e+t:e-t,n=[...y];n[a]=Be(Be({},n[a]),{},{balance:r}),N(n),at("bero_suppliers",n)}},xt=e=>{const t=[...P];e.forEach(e=>{const s=t.findIndex(t=>t.id===e.accountId);if(-1!==s){const a=t[s];let r=a.balance||0;e.debit&&e.debit>0&&("debit"===a.nature?r+=e.debit:r-=e.debit),e.credit&&e.credit>0&&("credit"===a.nature?r+=e.credit:r-=e.credit),t[s]=Be(Be({},a),{},{balance:r,updatedAt:(new Date).toISOString(),updatedBy:1})}}),T(t),at("bero_accounts",t)},ut=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=[];z.forEach(r=>{t&&new Date(r.date)<new Date(t)||s&&new Date(r.date)>new Date(s)||r.entries.forEach(t=>{t.accountId===e&&a.push({id:r.id,entryNumber:r.entryNumber,date:r.date,description:r.description,reference:r.reference,debit:t.debit||0,credit:t.credit||0,balance:0,runningBalance:0})})}),a.sort((e,t)=>e.date!==t.date?new Date(t.date)-new Date(e.date):t.entryNumber-e.entryNumber);let r=0;const n=P.find(t=>t.id===e),l=!n||"debit"===n.nature;return a.forEach(e=>{r+=l?e.debit-e.credit:e.credit-e.debit,e.runningBalance=r}),a},mt=()=>{const e=(new Date).getFullYear().toString().slice(-2),t=A.find(t=>t.employeeNumber&&t.employeeNumber.startsWith(e));let s=1;if(t){s=parseInt(t.employeeNumber.slice(-3))+1}return"".concat(e).concat(s.toString().padStart(3,"0"))},ht={warehouses:s,products:n,categories:i,purchases:c,purchaseInvoices:x,purchaseReturns:m,sales:p,salesInvoices:f,salesReturns:v,suppliers:y,customers:w,treasuryBalance:k,cashReceipts:I,cashDisbursements:_,transfers:E,addWarehouse:e=>{const t=Be({id:Date.now()},e),r=[...s,t];return a(r),at("bero_warehouses",r),t},updateWarehouse:(e,t)=>{const r=s.map(s=>s.id===e?Be(Be({},s),t):s);a(r),at("bero_warehouses",r)},deleteWarehouse:e=>{const t=s.filter(t=>t.id!==e);a(t),at("bero_warehouses",t)},addCategory:e=>{const t=Be({id:Date.now(),createdAt:(new Date).toISOString()},e),s=[...i,t];return o(s),at("bero_categories",s),t},updateCategory:(e,t)=>{const s=i.map(s=>s.id===e?Be(Be({},s),t):s);o(s),at("bero_categories",s)},deleteCategory:e=>{const t=i.filter(t=>t.id!==e);o(t),at("bero_categories",t)},addProduct:e=>{const t=Be({id:Date.now()},e),s=[...n,t];return l(s),at("bero_products",s),t},updateProduct:(e,t)=>{const s=n.map(s=>s.id===e?Be(Be({},s),t):s);l(s),at("bero_products",s)},deleteProduct:e=>{const t=n.filter(t=>t.id!==e);l(t),at("bero_products",t)},addSupplier:e=>{const t=Be({id:Date.now()},e),s=[...y,t];return N(s),at("bero_suppliers",s),t},updateSupplier:(e,t)=>{const s=y.map(s=>s.id===e?Be(Be({},s),t):s);N(s),at("bero_suppliers",s)},deleteSupplier:e=>{const t=y.filter(t=>t.id!==e);N(t),at("bero_suppliers",t)},addCustomer:e=>{const t=Be({id:Date.now()},e),s=[...w,t];return S(s),at("bero_customers",s),t},updateCustomer:(e,t)=>{const s=w.map(s=>s.id===e?Be(Be({},s),t):s);S(s),at("bero_customers",s)},deleteCustomer:e=>{const t=w.filter(t=>t.id!==e);S(t),at("bero_customers",t)},addPurchaseInvoice:e=>{const t=e.items.map(e=>{const t=n.find(t=>t.id===parseInt(e.productId));return Be(Be({},e),{},{productName:(null===t||void 0===t?void 0:t.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}),s=Be(Be({id:Date.now(),date:(new Date).toISOString()},e),{},{items:t,supplierId:parseInt(e.supplierId),paid:"cash"===e.paymentType?e.total:0,remaining:"cash"===e.paymentType?0:e.total});if("cash"===e.paymentType){if(k<e.total)throw new Error("\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0648\u0641\u0631 \u0641\u064a \u0627\u0644\u062e\u0632\u064a\u0646\u0629 (".concat(k.toFixed(2),") \u063a\u064a\u0631 \u0643\u0627\u0641\u064d \u0644\u0644\u0641\u0627\u062a\u0648\u0631\u0629 (").concat(e.total.toFixed(2),")"));const t=k-e.total;C(t),at("bero_treasury_balance",t);const a={amount:e.total,toType:"supplier",toId:e.supplierId,description:"\u0634\u0631\u0627\u0621 \u0646\u0642\u062f\u064a \u0645\u0646 \u0627\u0644\u0645\u0648\u0631\u062f - \u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(s.id),reference:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(s.id),type:"purchase_payment"};lt(a)}const a=[...x,s];if(u(a),at("bero_purchase_invoices",a),e.items&&Array.isArray(e.items)){const t=[...n];e.items.forEach(e=>{const s=t.findIndex(t=>t.id===parseInt(e.productId));if(-1!==s){const a=parseInt(e.quantity)||0,r=parseInt(e.subQuantity)||0;if(a<0||r<0)throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0629 \u0644\u0644\u0645\u0646\u062a\u062c: ".concat(t[s].name));t[s]=Be(Be({},t[s]),{},{mainQuantity:(t[s].mainQuantity||0)+a,subQuantity:(t[s].subQuantity||0)+r})}}),l(t),at("bero_products",t)}return dt(s.supplierId,s.total,"debit"),s},updatePurchaseInvoice:(e,t)=>{const s=x.find(t=>t.id===e);if(!s)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");if(s.items&&Array.isArray(s.items)){const e=[...n];s.items.forEach(t=>{const s=e.findIndex(e=>e.id===parseInt(t.productId));if(-1!==s){const a=parseInt(t.quantity)||0,r=parseInt(t.subQuantity)||0,n=(e[s].mainQuantity||0)-a,l=(e[s].subQuantity||0)-r;if(n<0||l<0)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629 \u0644\u0644\u0645\u0646\u062a\u062c ".concat(e[s].name));e[s]=Be(Be({},e[s]),{},{mainQuantity:n,subQuantity:l})}}),l(e),at("bero_products",e)}const a=x.map(s=>s.id===e?Be(Be({},s),t):s);if(u(a),at("bero_purchase_invoices",a),t.items&&Array.isArray(t.items)){const e=[...n];t.items.forEach(t=>{const s=e.findIndex(e=>e.id===parseInt(t.productId));if(-1!==s){const a=parseInt(t.quantity)||0,r=parseInt(t.subQuantity)||0;e[s]=Be(Be({},e[s]),{},{mainQuantity:(e[s].mainQuantity||0)+a,subQuantity:(e[s].subQuantity||0)+r})}}),l(e),at("bero_products",e)}},deletePurchaseInvoice:e=>{const t=x.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");if(m.some(t=>t.invoiceId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: \u062a\u0648\u062c\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647\u0627");if("cash"===t.paymentType){const s=k+t.total;C(s),at("bero_treasury_balance",s);const a=_.find(t=>{var s;return null===(s=t.description)||void 0===s?void 0:s.includes("\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(e))});a&&it(a.id)}if(dt(t.supplierId,t.total,"credit"),t.items&&Array.isArray(t.items)){const e=[...n];t.items.forEach(t=>{const s=e.findIndex(e=>e.id===parseInt(t.productId));if(-1!==s){const a=parseInt(t.quantity)||0,r=parseInt(t.subQuantity)||0,n=(e[s].mainQuantity||0)-a,l=(e[s].subQuantity||0)-r;if(n<0||l<0)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: \u0633\u064a\u0624\u062f\u064a \u0630\u0644\u0643 \u0625\u0644\u0649 \u0643\u0645\u064a\u0629 \u0633\u0627\u0644\u0628\u0629 \u0644\u0644\u0645\u0646\u062a\u062c ".concat(e[s].name));e[s]=Be(Be({},e[s]),{},{mainQuantity:n,subQuantity:l})}}),l(e),at("bero_products",e)}const s=x.filter(t=>t.id!==e);u(s),at("bero_purchase_invoices",s)},addPurchaseReturn:e=>{const{invoiceId:t,items:s,reason:a,notes:r}=e,i=x.find(e=>e.id===t);if(!i)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");let o=0;const c=[...n];s.forEach(e=>{const s=n.find(t=>t.id===parseInt(e.productId));if(!s)throw new Error("\u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0631\u0642\u0645 ".concat(e.productId," \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"));const a=i.items.find(t=>t.productId===e.productId);if(!a)throw new Error("\u0627\u0644\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629");const r=m.filter(e=>e.invoiceId===t&&"cancelled"!==e.status);let l=0,d=0;r.forEach(t=>{const s=t.items.find(t=>t.productId===e.productId);s&&(l+=s.quantity||0,d+=s.subQuantity||0)});const x=a.quantity||0,u=a.subQuantity||0,h=e.quantity||0,p=e.subQuantity||0;if(h>x-l||p>u-d)throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629 \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0627\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c: ".concat(s.name));const g=c.findIndex(t=>t.id===parseInt(e.productId));if(-1!==g){const e=(c[g].mainQuantity||0)-h,t=(c[g].subQuantity||0)-p;if(e<0||t<0)throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629 \u0644\u0644\u0645\u0646\u062a\u062c: ".concat(s.name));c[g]=Be(Be({},c[g]),{},{mainQuantity:e,subQuantity:t})}const f=(e.quantity||0)*(a.price||0)+(e.subQuantity||0)*(a.subPrice||0);o+=f});const d={id:Date.now(),invoiceId:t,date:(new Date).toISOString(),items:s,reason:a,notes:r,totalAmount:o,status:"completed"};if("cash"===i.paymentType){const e=k+o;C(e),at("bero_treasury_balance",e);const s={amount:o,fromType:"supplier",fromId:i.supplierId,description:"\u0645\u0631\u062a\u062c\u0639 \u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0646\u0642\u062f\u064a\u0629 - \u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(t),reference:"\u0645\u0631\u062a\u062c\u0639 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(d.id),type:"purchase_return"};rt(s)}dt(i.supplierId,o,"credit");const p=[d,...m];h(p),at("bero_purchase_returns",p),l(c),at("bero_products",c);const g=x.map(e=>e.id===t?Be(Be({},e),{},{hasReturns:!0}):e);return u(g),at("bero_purchase_invoices",g),d},deletePurchaseReturn:e=>{const t=m.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=x.find(e=>e.id===t.invoiceId);if(!s)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");if("cash"===s.paymentType){const s=k-t.totalAmount;if(s<0)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0631\u062a\u062c\u0639: \u0633\u064a\u0624\u062f\u064a \u0625\u0644\u0649 \u0631\u0635\u064a\u062f \u0633\u0627\u0644\u0628 \u0641\u064a \u0627\u0644\u062e\u0632\u064a\u0646\u0629");C(s),at("bero_treasury_balance",s);const a=I.find(t=>{var s;return null===(s=t.description)||void 0===s?void 0:s.includes("\u0645\u0631\u062a\u062c\u0639 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(e))});a&&nt(a.id)}dt(s.supplierId,t.totalAmount,"debit");const a=[...n];t.items.forEach(e=>{const t=a.findIndex(t=>t.id===parseInt(e.productId));if(-1!==t){const s=e.quantity||0,r=e.subQuantity||0;a[t]=Be(Be({},a[t]),{},{mainQuantity:(a[t].mainQuantity||0)+s,subQuantity:(a[t].subQuantity||0)+r})}}),l(a),at("bero_products",a);const r=m.filter(t=>t.id!==e);h(r),at("bero_purchase_returns",r)},addSalesInvoice:e=>{if(e.items&&Array.isArray(e.items))for(const l of e.items){const e=n.find(e=>e.id===parseInt(l.productId));if(!e)throw new Error("\u0627\u0644\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const t=parseInt(l.quantity)||0,s=parseInt(l.subQuantity)||0,a=e.mainQuantity||0,r=e.subQuantity||0;if(t>a)throw new Error('\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629 \u0644\u0644\u0645\u0646\u062a\u062c "'.concat(e.name,'".\n')+"\u0627\u0644\u0645\u062a\u0648\u0641\u0631: ".concat(a,"\u060c \u0627\u0644\u0645\u0637\u0644\u0648\u0628: ").concat(t));if(s>r)throw new Error('\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0631\u0639\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629 \u0644\u0644\u0645\u0646\u062a\u062c "'.concat(e.name,'".\n')+"\u0627\u0644\u0645\u062a\u0648\u0641\u0631: ".concat(r,"\u060c \u0627\u0644\u0645\u0637\u0644\u0648\u0628: ").concat(s))}const t=e.items.map(e=>{const t=n.find(t=>t.id===parseInt(e.productId));return Be(Be({},e),{},{productName:(null===t||void 0===t?void 0:t.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}),s=Be(Be({id:Date.now(),date:(new Date).toISOString()},e),{},{items:t,customerId:parseInt(e.customerId)});if(e.items&&Array.isArray(e.items)){const t=[...n];e.items.forEach(e=>{const s=t.findIndex(t=>t.id===parseInt(e.productId));if(-1!==s){const a=parseInt(e.quantity)||0,r=parseInt(e.subQuantity)||0,n=(t[s].mainQuantity||0)-a,l=(t[s].subQuantity||0)-r;if(n<0||l<0)throw new Error("\u062e\u0637\u0623: \u0627\u0644\u0643\u0645\u064a\u0629 \u0623\u0635\u0628\u062d\u062a \u0633\u0627\u0644\u0628\u0629 \u0644\u0644\u0645\u0646\u062a\u062c ".concat(t[s].name));t[s]=Be(Be({},t[s]),{},{mainQuantity:n,subQuantity:l})}}),l(t),at("bero_products",t)}if("cash"===e.paymentType){const e={amount:s.total,fromType:"customer",fromId:s.customerId,description:"\u0645\u0628\u064a\u0639\u0627\u062a \u0646\u0642\u062f\u064a\u0629 - \u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(s.id),reference:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(s.id),type:"sales_payment"};try{const t=rt(e);console.log("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0625\u064a\u0635\u0627\u0644 \u0627\u0633\u062a\u0644\u0627\u0645 \u0646\u0642\u062f\u064a:",t)}catch(i){throw console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0646\u0642\u062f\u064a:",i),new Error("\u0641\u0634\u0644 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629: ".concat(i.message))}}"deferred"===e.paymentType||e.paymentType;const a=Be(Be({},s),{},{paymentStatus:"cash"===e.paymentType?"paid":"pending",paid:"cash"===e.paymentType?s.total:0,remaining:"cash"===e.paymentType?0:s.total}),r=[...f,a];return b(r),at("bero_sales_invoices",r),a},deleteSalesInvoice:e=>{const t=f.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");if(v.some(t=>t.invoiceId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: \u062a\u0648\u062c\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647\u0627");if("cash"===t.paymentType){const s=e.toString(),r=parseInt(t.customerId);console.log("\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0644\u0644\u0641\u0627\u062a\u0648\u0631\u0629:",{invoiceId:e,invoiceIdStr:s,customerId:t.customerId,customerIdNum:r,paymentType:t.paymentType});const n=I.filter(e=>"customer"===e.fromType&&"sales_payment"===e.type&&(e.fromId===r||e.fromId===t.customerId));console.log("\u0627\u0644\u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0645\u062d\u062a\u0645\u0644\u0629:",n);const l=n.find(t=>t.reference==="\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(s)||t.reference==="\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(e)||t.description.includes("\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(s))||t.description.includes("\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(e)));if(console.log("\u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0627\u0644\u0645\u0648\u062c\u0648\u062f:",l),l)try{console.log("\u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637:",l.id);const e=I.filter(e=>e.id!==l.id);D(e),at("bero_cash_receipts",e);const t=parseFloat(l.amount)||0,s=k-t;C(s),at("bero_treasury_balance",s),console.log("\u2705 \u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0648\u0639\u0643\u0633 \u0627\u0644\u0645\u0628\u0644\u063a \u0645\u0646 \u0627\u0644\u062e\u0632\u064a\u0646\u0629:",{receiptId:l.id,amount:t,oldBalance:k,newBalance:s})}catch(a){throw console.error("\u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637:",a),new Error("\u0641\u0634\u0644 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629: ".concat(a.message))}else console.warn("\u26a0\ufe0f \u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0625\u064a\u0635\u0627\u0644 \u0645\u0631\u062a\u0628\u0637 \u0644\u0644\u0641\u0627\u062a\u0648\u0631\u0629:",e)}if("deferred"===t.paymentType||t.paymentType,t.items&&Array.isArray(t.items)){const e=[...n];t.items.forEach(t=>{const s=e.findIndex(e=>e.id===parseInt(t.productId));if(-1!==s){const a=parseInt(t.quantity)||0,r=parseInt(t.subQuantity)||0;e[s]=Be(Be({},e[s]),{},{mainQuantity:(e[s].mainQuantity||0)+a,subQuantity:(e[s].subQuantity||0)+r})}}),l(e),at("bero_products",e)}const s=f.filter(t=>t.id!==e);b(s),at("bero_sales_invoices",s)},addSalesReturn:e=>{const{invoiceId:t,items:s,reason:a,notes:r}=e,i=f.find(e=>e.id===t);if(!i)throw new Error("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");let o=0;const c=[...n];s.forEach(e=>{const s=i.items.find(t=>t.productId===e.productId);if(!s)throw new Error("\u0627\u0644\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629");const a=v.filter(e=>e.invoiceId===t&&"cancelled"!==e.status);let r=0,n=0;a.forEach(t=>{const s=t.items.find(t=>t.productId===e.productId);s&&(r+=s.quantity||0,n+=s.subQuantity||0)});const l=parseInt(s.quantity)||0,d=parseInt(s.subQuantity)||0,x=e.quantity||0,u=e.subQuantity||0;if(x>l-r||u>d-n)throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629 \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0627\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c");const m=c.findIndex(t=>t.id===parseInt(e.productId));-1!==m&&(c[m]=Be(Be({},c[m]),{},{mainQuantity:(c[m].mainQuantity||0)+x,subQuantity:(c[m].subQuantity||0)+u}));const h=x*(s.price||0)+u*(s.subPrice||0);o+=h});const d={id:Date.now(),invoiceId:t,date:(new Date).toISOString(),items:s,reason:a,notes:r,totalAmount:o,status:"completed"};if("cash"===i.paymentType){const e=t.toString(),s=parseInt(i.customerId);console.log("\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0641\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a:",{invoiceId:t,customerId:i.customerId});const a=I.filter(e=>"customer"===e.fromType&&"sales_payment"===e.type&&(e.fromId===s||e.fromId===i.customerId)).find(s=>s.reference==="\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(e)||s.reference==="\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(t)||s.description.includes("\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(e))||s.description.includes("\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 ".concat(t)));if(a)try{console.log("\u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0641\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a:",a.id);const e=I.filter(e=>e.id!==a.id);D(e),at("bero_cash_receipts",e);const t=k-o;C(t),at("bero_treasury_balance",t),console.log("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637 \u0648\u0639\u0643\u0633 \u0627\u0644\u0645\u0628\u0644\u063a \u0645\u0646 \u0627\u0644\u062e\u0632\u064a\u0646\u0629")}catch(m){throw console.error("\u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0631\u062a\u0628\u0637:",m),new Error("\u0641\u0634\u0644 \u0641\u064a \u0645\u0639\u0627\u0644\u062c\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0627\u0644\u0645\u0627\u0644\u064a: ".concat(m.message))}}if("deferred"===i.paymentType||"partial"===i.paymentType){const e=f.map(e=>{if(e.id===t){const t=e.remaining||e.total||0;return Be(Be({},e),{},{remaining:Math.max(0,t-o)})}return e});b(e),at("bero_sales_invoices",e)}const x=[d,...v];j(x),at("bero_sales_returns",x),l(c),at("bero_products",c);const u=f.map(e=>e.id===t?Be(Be({},e),{},{hasReturns:!0}):e);return b(u),at("bero_sales_invoices",u),d},deleteSalesReturn:e=>{const t=v.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=[...n];t.items.forEach(e=>{const t=s.findIndex(t=>t.id===parseInt(e.productId));if(-1!==t){const a=e.quantity||0,r=e.subQuantity||0;s[t]=Be(Be({},s[t]),{},{mainQuantity:(s[t].mainQuantity||0)-a,subQuantity:(s[t].subQuantity||0)-r})}}),l(s),at("bero_products",s);const a=v.filter(t=>t.id!==e);j(a),at("bero_sales_returns",a)},addCashReceipt:rt,updateCashReceipt:(e,t)=>{const s=I.find(t=>t.id===e);if(!s)throw new Error("\u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");let a=k-parseFloat(s.amount);a+=parseFloat(t.amount||s.amount),C(a),at("bero_treasury_balance",a);const r=I.map(s=>s.id===e?Be(Be({},s),t):s);D(r),at("bero_cash_receipts",r)},deleteCashReceipt:nt,addCashDisbursement:lt,updateCashDisbursement:(e,t)=>{const s=_.find(t=>t.id===e);if(!s)throw new Error("\u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");let a=k+parseFloat(s.amount);if(a-=parseFloat(t.amount||s.amount),a<0)throw new Error("\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0648\u0641\u0631 \u0641\u064a \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064d \u0644\u0644\u062a\u062d\u062f\u064a\u062b");C(a),at("bero_treasury_balance",a);const r=_.map(s=>s.id===e?Be(Be({},s),t):s);L(r),at("bero_cash_disbursements",r)},deleteCashDisbursement:it,getCustomerBalance:ot,getSupplierBalance:ct,updateSupplierBalance:dt,getAllCustomerBalances:()=>w.map(e=>Be(Be({},e),{},{balance:ot(e.id)})).filter(e=>0!==e.balance),getAllSupplierBalances:()=>y.map(e=>Be(Be({},e),{},{balance:ct(e.id)})).filter(e=>0!==e.balance),transferProduct:e=>{const{productId:t,fromWarehouseId:s,toWarehouseId:a,quantity:r,subQuantity:i,notes:o}=e,c=n.find(e=>e.id===t&&e.warehouseId===s);if(!c)throw new Error("\u0627\u0644\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u0627\u0644\u0645\u062e\u0632\u0646 \u0627\u0644\u0645\u0635\u062f\u0631");if((c.mainQuantity||0)<(r||0))throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629");if((c.subQuantity||0)<(i||0))throw new Error("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0631\u0639\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u063a\u064a\u0631 \u0643\u0627\u0641\u064a\u0629");const d=n.find(e=>e.name===c.name&&e.category===c.category&&e.warehouseId===a);let x;if(d)x=n.map(e=>e.id===c.id?Be(Be({},e),{},{mainQuantity:(e.mainQuantity||0)-(r||0),subQuantity:(e.subQuantity||0)-(i||0)}):e.id===d.id?Be(Be({},e),{},{mainQuantity:(e.mainQuantity||0)+(r||0),subQuantity:(e.subQuantity||0)+(i||0)}):e);else{const e=Be(Be({},c),{},{id:Date.now(),warehouseId:a,mainQuantity:r||0,subQuantity:i||0,createdAt:(new Date).toISOString()});x=n.map(e=>e.id===c.id?Be(Be({},e),{},{mainQuantity:(e.mainQuantity||0)-(r||0),subQuantity:(e.subQuantity||0)-(i||0)}):e),x.push(e)}x=x.filter(e=>(e.mainQuantity||0)>0||(e.subQuantity||0)>0),l(x),at("bero_products",x);const u={id:Date.now(),date:(new Date).toISOString(),productId:t,productName:c.name,fromWarehouseId:s,toWarehouseId:a,quantity:r||0,subQuantity:i||0,notes:o},m=[u,...E];return M(m),at("bero_transfers",m),u},addEmployee:e=>{const t=Be(Be({id:Date.now(),employeeNumber:mt()},e),{},{createdAt:(new Date).toISOString(),createdBy:1,status:"active"}),s=[...A,t];return F(s),at("bero_employees",s),t},updateEmployee:(e,t)=>{const s=A.findIndex(t=>t.id===e);if(-1===s)throw new Error("\u0627\u0644\u0645\u0648\u0638\u0641 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const a=[...A];return a[s]=Be(Be(Be({},a[s]),t),{},{updatedAt:(new Date).toISOString(),updatedBy:1}),F(a),at("bero_employees",a),a[s]},deleteEmployee:e=>{if(-1===A.findIndex(t=>t.id===e))throw new Error("\u0627\u0644\u0645\u0648\u0638\u0641 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const t=A.filter(t=>t.id!==e);F(t),at("bero_employees",t)},getEmployeeProfile:e=>{const t=A.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0645\u0648\u0638\u0641 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=$.find(t=>t.employeeId===e),a=Q.filter(t=>{const s=new Date(t.date),a=new Date;return t.employeeId===e&&s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()});return Be(Be({},t),{},{leaveBalance:s||null,currentMonthAttendance:a,totalWorkingHours:a.reduce((e,t)=>e+(t.workingHours||0),0)})},addDepartment:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),createdBy:1}),s=[...R,t];return V(s),at("bero_departments",s),t},updateDepartment:(e,t)=>{const s=R.findIndex(t=>t.id===e);if(-1===s)throw new Error("\u0627\u0644\u0642\u0633\u0645 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const a=[...R];return a[s]=Be(Be(Be({},a[s]),t),{},{updatedAt:(new Date).toISOString(),updatedBy:1}),V(a),at("bero_departments",a),a[s]},deleteDepartment:e=>{if(A.filter(t=>t.departmentId===e).length>0)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0642\u0633\u0645 \u0644\u0648\u062c\u0648\u062f \u0645\u0648\u0638\u0641\u064a\u0646 \u0645\u0631\u062a\u0628\u0637\u064a\u0646 \u0628\u0647");const t=R.filter(t=>t.id!==e);V(t),at("bero_departments",t)},checkIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const s=(new Date).toISOString().split("T")[0];if(Q.find(t=>t.employeeId===e&&t.date.startsWith(s)&&!t.checkOutTime))throw new Error("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0645\u0633\u0628\u0642\u0627\u064b \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645");const a=(new Date).toISOString(),r={id:Date.now(),employeeId:e,date:s,checkInTime:a,location:t,status:"present"},n=[...Q,r];return H(n),at("bero_attendance",n),r},checkOut:e=>{const t=(new Date).toISOString().split("T")[0],s=Q.find(s=>s.employeeId===e&&s.date.startsWith(t)&&!s.checkOutTime);if(!s)throw new Error("\u0644\u0645 \u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0644\u0647\u0630\u0627 \u0627\u0644\u064a\u0648\u0645");const a=new Date,r=(a-new Date(s.checkInTime))/36e5,n=Be(Be({},s),{},{checkOutTime:a.toISOString(),workingHours:r,overtimeHours:Math.max(0,r-8)}),l=Q.map(e=>e.id===s.id?n:e);return H(l),at("bero_attendance",l),n},getAttendanceReport:(e,t,s)=>{let a=Q;e&&(a=a.filter(t=>t.employeeId===e)),t&&(a=a.filter(e=>e.date>=t)),s&&(a=a.filter(e=>e.date<=s));const r=a.length,n=a.filter(e=>"present"===e.status).length,l=r-n,i=a.reduce((e,t)=>e+(t.workingHours||0),0),o=a.reduce((e,t)=>e+(t.overtimeHours||0),0);return{records:a,summary:{totalDays:r,presentDays:n,absentDays:l,attendanceRate:r>0?(n/r*100).toFixed(2):0,totalHours:i.toFixed(2),totalOvertime:o.toFixed(2)}}},applyForLeave:e=>{const{employeeId:t,leaveTypeId:s,startDate:a,endDate:r,days:n,reason:l}=e,i=$.find(e=>e.employeeId===t&&e.leaveTypeId===s);if(!i||i.remainingDays<n)throw new Error("\u0631\u0635\u064a\u062f \u0627\u0644\u0625\u062c\u0627\u0632\u0627\u062a \u063a\u064a\u0631 \u0643\u0627\u0641\u064d");const o={id:Date.now(),employeeId:t,leaveTypeId:s,startDate:a,endDate:r,days:n,reason:l,status:"pending",appliedAt:(new Date).toISOString(),appliedBy:1},c=[...X,o];return K(c),at("bero_employee_leaves",c),o},approveLeave:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"approved";const a=X.findIndex(t=>t.id===e);if(-1===a)throw new Error("\u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const r=X[a],n=[...X];if(n[a]=Be(Be({},r),{},{status:s,approvedAt:(new Date).toISOString(),approvedBy:t}),"approved"===s){const e=$.findIndex(e=>e.employeeId===r.employeeId&&e.leaveTypeId===r.leaveTypeId);if(-1!==e){const s=[...$],a=s[e];s[e]=Be(Be({},a),{},{usedDays:a.usedDays+r.days,remainingDays:a.remainingDays-r.days,updatedAt:(new Date).toISOString(),updatedBy:t}),G(s),at("bero_employee_leave_balances",s)}}return K(n),at("bero_employee_leaves",n),n[a]},calculateLeaveBalance:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getFullYear();if(!A.find(t=>t.id===e))throw new Error("\u0627\u0644\u0645\u0648\u0638\u0641 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const a=W.find(e=>e.id===t);if(!a)throw new Error("\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const r=a.annualAllowance||30;let n=$.find(a=>a.employeeId===e&&a.leaveTypeId===t&&a.year===s);if(n)return n;const l={id:Date.now(),employeeId:e,leaveTypeId:t,year:s,annualAllowance:r,usedDays:0,remainingDays:r,carryForward:0,createdAt:(new Date).toISOString()},i=[...$,l];return G(i),at("bero_employee_leave_balances",i),l},calculatePayroll:e=>{const t=Z.find(t=>t.id===e);if(!t)throw new Error("\u0641\u062a\u0631\u0629 \u0627\u0644\u0631\u0627\u062a\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");const s=A.filter(e=>"active"===e.status),a=[];return s.forEach(s=>{const r=parseFloat(s.basicSalary||0),n=Y.find(t=>t.employeeId===s.id&&t.periodId===e),l=n?(n.allowances||{}).reduce((e,t)=>e+parseFloat(t.amount||0),0):0,i=n?(n.deductions||{}).reduce((e,t)=>e+parseFloat(t.amount||0),0):0,o=Q.filter(e=>{const a=new Date(e.date),r=new Date(t.startDate),n=new Date(t.endDate);return e.employeeId===s.id&&a>=r&&a<=n}).reduce((e,t)=>e+(t.overtimeHours||0),0),c=o*(r/160),d=r+l+c-i,x={id:Date.now()+Math.random(),periodId:e,employeeId:s.id,basicSalary:r,allowances:l,overtimeHours:o,overtimePay:c,deductions:i,netSalary:d,status:"calculated",calculatedAt:(new Date).toISOString(),calculatedBy:1};a.push(x);const u=[...te,x];se(u),at("bero_payroll_details",u)}),a},generatePayrollReport:e=>{const t=Z.find(t=>t.id===e);if(!t)throw new Error("\u0641\u062a\u0631\u0629 \u0627\u0644\u0631\u0627\u062a\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");const s=te.filter(t=>t.periodId===e),a=s.reduce((e,t)=>e+t.basicSalary,0),r=s.reduce((e,t)=>e+t.allowances,0),n=s.reduce((e,t)=>e+t.overtimePay,0),l=s.reduce((e,t)=>e+t.deductions,0),i=s.reduce((e,t)=>e+t.netSalary,0);return{period:t,details:s,summary:{totalEmployees:s.length,totalBasicSalary:a.toFixed(2),totalAllowances:r.toFixed(2),totalOvertimePay:n.toFixed(2),totalDeductions:l.toFixed(2),totalNetSalary:i.toFixed(2)}}},accounts:P,journalEntries:z,addAccount:e=>{if(e.parentId){if(!P.find(t=>t.id===e.parentId))throw new Error("\u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0623\u0628 \u0627\u0644\u0645\u062d\u062f\u062f \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f")}if(P.find(t=>t.code===e.code))throw new Error("\u0631\u0645\u0632 \u0627\u0644\u062d\u0633\u0627\u0628 ".concat(e.code," \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064b"));let t=1;if(e.parentId){const s=P.find(t=>t.id===e.parentId);t=s?s.level+1:1}const s={id:Date.now(),code:e.code,name:e.name,nameEn:e.nameEn||"",parentId:e.parentId||null,level:t,type:e.type,nature:e.nature,category:e.category||"",isActive:!1!==e.isActive,isSystem:e.isSystem||!1,allowPosting:!1!==e.allowPosting,description:e.description||"",balance:0,openingBalance:e.openingBalance||0,openingBalanceType:e.openingBalanceType||"debit",costCenterId:e.costCenterId||null,branchId:e.branchId||null,createdAt:(new Date).toISOString(),createdBy:1,updatedAt:(new Date).toISOString(),updatedBy:1},a=[...P,s];return T(a),at("bero_accounts",a),s},updateAccount:(e,t)=>{const s=P.find(t=>t.id===e);if(!s)throw new Error("\u0627\u0644\u062d\u0633\u0627\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");if(s.isSystem)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645\u064a\u0629");if(t.code&&t.code!==s.code){if(P.find(s=>s.code===t.code&&s.id!==e))throw new Error("\u0631\u0645\u0632 \u0627\u0644\u062d\u0633\u0627\u0628 ".concat(t.code," \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064b"))}const a=P.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString(),updatedBy:1}):s);T(a),at("bero_accounts",a)},deleteAccount:e=>{const t=P.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u062d\u0633\u0627\u0628 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");if(t.isSystem)throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645\u064a\u0629");if(P.some(t=>t.parentId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u062d\u0633\u0627\u0628: \u064a\u0648\u062c\u062f \u062d\u0633\u0627\u0628\u0627\u062a \u0641\u0631\u0639\u064a\u0629 \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647");if(z.some(t=>t.entries.some(t=>t.accountId===e)))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u062d\u0633\u0627\u0628: \u064a\u0648\u062c\u062f \u062d\u0631\u0643\u0627\u062a \u0645\u062d\u0627\u0633\u0628\u064a\u0629 \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647");const s=P.filter(t=>t.id!==e);T(s),at("bero_accounts",s)},createJournalEntry:e=>{const{date:t,description:s,reference:a,entries:r,totalDebit:n,totalCredit:l}=e;if(Math.abs(n-l)>.001)throw new Error("\u0627\u0644\u0642\u064a\u062f \u063a\u064a\u0631 \u0645\u062a\u0648\u0627\u0632\u0646: \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0633\u0627\u0648\u064a \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646");for(const x of r){const e=P.find(e=>e.id===x.accountId);if(!e)throw new Error("\u0627\u0644\u062d\u0633\u0627\u0628 \u0631\u0642\u0645 ".concat(x.accountId," \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f"));if(!e.allowPosting)throw new Error("\u0627\u0644\u062d\u0633\u0627\u0628 ".concat(e.name," \u0644\u0627 \u064a\u0633\u0645\u062d \u0628\u0627\u0644\u062a\u0631\u062d\u064a\u0644"))}const i=z.length>0?z[0]:null,o=i?i.entryNumber+1:1,c={id:Date.now(),entryNumber:o,date:t||(new Date).toISOString(),description:s,reference:a||"",entries:r.map(e=>Be(Be({},e),{},{id:Date.now()+Math.random()})),totalDebit:n,totalCredit:l,status:"posted",createdAt:(new Date).toISOString(),createdBy:1,postedAt:(new Date).toISOString(),postedBy:1},d=[c,...z];return O(d),at("bero_journal_entries",d),xt(r),c},getAccountTransactions:ut,getTrialBalance:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return P.map(t=>{const s=ut(t.id,null,e),a=s.reduce((e,t)=>e+t.debit,0),r=s.reduce((e,t)=>e+t.credit,0);let n=t.openingBalance||0;return"debit"===t.openingBalanceType?n+=a-r:n+=r-a,Be(Be({},t),{},{debit:a,credit:r,balance:n,balanceType:"debit"===t.nature?"debit":"credit"})}).filter(e=>e.debit>0||e.credit>0||0!==e.balance)},employees:A,departments:R,positions:B,attendance:Q,leaveTypes:W,employeeLeaves:X,employeeLeaveBalances:$,salaryComponents:Y,payrollPeriods:Z,payrollDetails:te,performanceMetrics:ae,performanceReviews:ne,attendanceRecords:Q,addAttendanceRecord:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...Q,t];return H(s),at("bero_attendance",s),t},updateAttendanceRecord:(e,t)=>{const s=Q.map(s=>s.id===e?Be(Be({},s),t):s);H(s),at("bero_attendance",s)},deleteAttendanceRecord:e=>{const t=Q.filter(t=>t.id!==e);H(t),at("bero_attendance",t)},getAttendanceByEmployee:e=>Q.filter(t=>t.employeeId===e),getMonthlyAttendanceReport:(e,t)=>{const s="".concat(t,"-").concat(String(e).padStart(2,"0"));return Q.filter(e=>e.date.startsWith(s))},leaves:X,addLeave:e=>{const t=Be(Be({id:Date.now()},e),{},{leaveDays:Math.ceil((new Date(e.endDate)-new Date(e.startDate))/864e5)+1,createdAt:(new Date).toISOString()}),s=[...X,t];return K(s),at("bero_employee_leaves",s),t},updateLeave:(e,t)=>{const s=X.map(s=>s.id===e?Be(Be({},s),t):s);K(s),at("bero_employee_leaves",s)},deleteLeave:e=>{const t=X.filter(t=>t.id!==e);K(t),at("bero_employee_leaves",t)},getLeavesByEmployee:e=>X.filter(t=>t.employeeId===e),getLeavesByStatus:e=>X.filter(t=>t.status===e),getLeavesByDateRange:(e,t)=>X.filter(s=>s.startDate>=e&&s.endDate<=t),getLeaveBalance:(e,t)=>$.find(s=>s.employeeId===e&&s.leaveTypeId===t),salaries:te,addSalary:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...te,t];return se(s),at("bero_payroll_details",s),t},updateSalary:(e,t)=>{const s=te.map(s=>s.id===e?Be(Be({},s),t):s);se(s),at("bero_payroll_details",s)},deleteSalary:e=>{const t=te.filter(t=>t.id!==e);se(t),at("bero_payroll_details",t)},getSalariesByEmployee:e=>te.filter(t=>t.employeeId===e),getMonthlySalaryReport:(e,t)=>{const s="".concat(t,"-").concat(String(e).padStart(2,"0"));return te.filter(e=>{var t;return null===(t=e.periodId)||void 0===t?void 0:t.startsWith(s)})},calculateMonthlySalary:(e,t,s)=>{const a=A.find(t=>t.id===e);if(!a)return 0;return(a.basicSalary||0)+1e3-500},productionOrders:ie,addProductionOrder:e=>{const t=Be(Be({id:Date.now()},e),{},{status:"Created",createdAt:(new Date).toISOString(),progress:0,actualStartDate:null,actualEndDate:null,actualCost:0}),s=[...ie,t];return oe(s),at("bero_production_orders",s),t},updateProductionOrder:(e,t)=>{const s=ie.map(s=>s.id===e?Be(Be({},s),t):s);oe(s),at("bero_production_orders",s)},deleteProductionOrder:e=>{const t=ie.filter(t=>t.id!==e);oe(t),at("bero_production_orders",t)},getProductionOrderById:e=>ie.find(t=>t.id===e),getProductionOrdersByStatus:e=>ie.filter(t=>t.status===e),getProductionOrdersByDateRange:(e,t)=>ie.filter(s=>s.plannedStartDate>=e&&s.plannedEndDate<=t),updateProductionOrderStatus:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const a=ie.map(a=>{if(a.id===e){const e=Be(Be({},a),{},{status:t});return"In Progress"!==t||a.actualStartDate||(e.actualStartDate=(new Date).toISOString()),"Completed"!==t&&"Closed"!==t||(e.actualEndDate=(new Date).toISOString(),e.progress=100),null!==s&&(e.progress=s),e}return a});oe(a),at("bero_production_orders",a)},bomItems:ce,addBomItem:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...ce,t];return de(s),at("bero_bom_items",s),t},updateBomItem:(e,t)=>{const s=ce.map(s=>s.id===e?Be(Be({},s),t):s);de(s),at("bero_bom_items",s)},deleteBomItem:e=>{const t=ce.filter(t=>t.id!==e);de(t),at("bero_bom_items",t)},getBomItemsByProduct:e=>ce.filter(t=>t.productId===e),workCenters:me,addWorkCenter:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),status:"Active",utilization:0}),s=[...me,t];return he(s),at("bero_work_centers",s),t},updateWorkCenter:(e,t)=>{const s=me.map(s=>s.id===e?Be(Be({},s),t):s);he(s),at("bero_work_centers",s)},deleteWorkCenter:e=>{const t=me.filter(t=>t.id!==e);he(t),at("bero_work_centers",t)},productionOperations:xe,addProductionOperation:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),actualDuration:0,status:"Pending"}),s=[...xe,t];return ue(s),at("bero_production_operations",s),t},updateProductionOperation:(e,t)=>{const s=xe.map(s=>s.id===e?Be(Be({},s),t):s);ue(s),at("bero_production_operations",s)},getOperationsByOrder:e=>xe.filter(t=>t.orderId===e),productionPlans:pe,addProductionPlan:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),status:"Draft"}),s=[...pe,t];return ge(s),at("bero_production_plans",s),t},updateProductionPlan:(e,t)=>{const s=pe.map(s=>s.id===e?Be(Be({},s),t):s);ge(s),at("bero_production_plans",s)},generateMRPRequirements:(e,t)=>ce.filter(t=>t.productId===e).map(e=>({materialId:e.materialId,requiredQuantity:e.quantity*t,availableQuantity:0,shortage:0})),materialConsumption:fe,addMaterialConsumption:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...fe,t];return be(s),at("bero_material_consumption",s),t},getMaterialConsumptionByOrder:e=>fe.filter(t=>t.orderId===e),productionWaste:ve,addProductionWaste:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...ve,t];return je(s),at("bero_production_waste",s),t},getWasteByOrder:e=>ve.filter(t=>t.orderId===e),qualityControls:ye,addQualityControl:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),status:"Pending"}),s=[...ye,t];return Ne(s),at("bero_quality_controls",s),t},updateQualityControl:(e,t)=>{const s=ye.map(s=>s.id===e?Be(Be({},s),t):s);Ne(s),at("bero_quality_controls",s)},getQualityControlsByOrder:e=>ye.filter(t=>t.orderId===e),productionKPIs:we,addProductionKPI:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),calculatedAt:(new Date).toISOString()}),s=[...we,t];return Se(s),at("bero_production_kpis",s),t},calculateOEE:e=>{const t=xe.filter(t=>t.orderId===e);if(0===t.length)return 0;return(t.filter(e=>"Completed"===e.status).length/t.length*(t.reduce((e,t)=>{const s=t.plannedDuration||1;return e+s/(t.actualDuration||s)},0)/t.length)*(1-ve.filter(t=>t.orderId===e).length/(t.length||1))*100).toFixed(2)},calculateOnTimeDelivery:(e,t)=>{const s=ie.filter(s=>s.plannedEndDate>=e&&s.plannedEndDate<=t);if(0===s.length)return 0;return(s.filter(e=>e.actualEndDate&&e.actualEndDate<=e.plannedEndDate).length/s.length*100).toFixed(2)},calculateMaterialEfficiency:e=>{const t=fe.filter(t=>t.orderId===e),s=ce.filter(t=>{var s;return(null===(s=ie.find(t=>t.id===e))||void 0===s?void 0:s.productId)===t.productId});if(0===t.length||0===s.length)return 100;const a=t.reduce((e,t)=>e+t.quantity,0);return(s.reduce((e,t)=>e+t.quantity,0)/a*100).toFixed(2)},getProductionDashboardData:()=>{const e=ie.length,t=ie.filter(e=>"Completed"===e.status).length,s=ie.filter(e=>"In Progress"===e.status).length,a=ie.filter(e=>e.actualEndDate&&e.actualEndDate<=e.plannedEndDate).length;return{totalOrders:e,completedOrders:t,inProgressOrders:s,onTimeDeliveryRate:e>0?(a/e*100).toFixed(2):0,completionRate:e>0?(t/e*100).toFixed(2):0}},fixedAssets:ke,addFixedAsset:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),status:"Active",currentValue:e.originalCost,accumulatedDepreciation:0,bookValue:e.originalCost,lastValuationDate:null,nextMaintenanceDate:null,warrantyExpiry:null}),s=[...ke,t];return Ce(s),at("bero_fixed_assets",s),t},updateFixedAsset:(e,t)=>{const s=ke.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);Ce(s),at("bero_fixed_assets",s)},deleteFixedAsset:e=>{const t=ke.filter(t=>t.id!==e);Ce(t),at("bero_fixed_assets",t)},getFixedAssetById:e=>ke.find(t=>t.id===e),getFixedAssetsByCategory:e=>ke.filter(t=>t.categoryId===e),getFixedAssetsByLocation:e=>ke.filter(t=>t.locationId===e),getActiveFixedAssets:()=>ke.filter(e=>"Active"===e.status),assetCategories:Ie,addAssetCategory:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...Ie,t];return De(s),at("bero_asset_categories",s),t},updateAssetCategory:(e,t)=>{const s=Ie.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);De(s),at("bero_asset_categories",s)},deleteAssetCategory:e=>{if(ke.some(t=>t.categoryId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0626\u0629: \u064a\u0648\u062c\u062f \u0623\u0635\u0648\u0644 \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647\u0627");const t=Ie.filter(t=>t.id!==e);De(t),at("bero_asset_categories",t)},assetLocations:_e,addAssetLocation:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[..._e,t];return Le(s),at("bero_asset_locations",s),t},updateAssetLocation:(e,t)=>{const s=_e.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);Le(s),at("bero_asset_locations",s)},deleteAssetLocation:e=>{if(ke.some(t=>t.locationId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0642\u0639: \u064a\u0648\u062c\u062f \u0623\u0635\u0648\u0644 \u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647");const t=_e.filter(t=>t.id!==e);Le(t),at("bero_asset_locations",t)},depreciationMethods:Ee,addDepreciationMethod:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...Ee,t];return Me(s),at("bero_depreciation_methods",s),t},updateDepreciationMethod:(e,t)=>{const s=Ee.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);Me(s),at("bero_depreciation_methods",s)},deleteDepreciationMethod:e=>{if(ke.some(t=>t.depreciationMethodId===e))throw new Error("\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643: \u064a\u0648\u062c\u062f \u0623\u0635\u0648\u0644 \u062a\u0633\u062a\u062e\u062f\u0645\u0647\u0627");const t=Ee.filter(t=>t.id!==e);Me(t),at("bero_depreciation_methods",t)},calculateDepreciation:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"monthly";const s=ke.find(t=>t.id===e);if(!s)throw new Error("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const a=Ee.find(e=>e.id===s.depreciationMethodId);if(!a)throw new Error("\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");let r=0;const n=(new Date).getFullYear(),l=(new Date).getMonth()+1;switch(a.type){case"straight_line":const e=s.usefulLife-s.elapsedYears;r=e<=0?0:(s.currentValue-s.salvageValue)/e;break;case"declining_balance":const t=a.depreciationRate||.2;r=s.currentValue*t,s.currentValue-r<s.salvageValue&&(r=s.currentValue-s.salvageValue);break;case"units_of_production":r=(s.currentProduction||0)/(s.totalProduction||1)*(s.originalCost-s.salvageValue);break;default:r=(s.currentValue-s.salvageValue)/s.usefulLife}let i=1;"yearly"===t&&(i=12),"quarterly"===t&&(i=3);const o=r/i;return{assetId:e,period:t,periodStart:"yearly"===t?"".concat(n,"-01-01"):"".concat(n,"-").concat(String(l).padStart(2,"0"),"-01"),periodEnd:"yearly"===t?"".concat(n,"-12-31"):"".concat(n,"-").concat(String(l+i-1).padStart(2,"0"),"-28"),depreciationAmount:o,totalDepreciation:r,method:a.type,rate:a.depreciationRate,calculatedAt:(new Date).toISOString()}},depreciationSchedules:Pe,generateDepreciationSchedule:e=>{const t=ke.find(t=>t.id===e);if(!t)throw new Error("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s=Ee.find(e=>e.id===t.depreciationMethodId);if(!s)throw new Error("\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629");const a=[];let r=t.originalCost,n=0;const l=new Date(t.depreciationStartDate||t.purchaseDate),i=12*t.usefulLife;for(let c=1;c<=i;c++){const o=new Date(l);o.setMonth(o.getMonth()+(c-1));let d=0;if("straight_line"===s.type)d=(r-t.salvageValue)/(i-(c-1));else if("declining_balance"===s.type){d=r*(s.depreciationRate||.2),r-d<t.salvageValue&&(d=r-t.salvageValue)}r-=d,n+=d,a.push({id:Date.now()+c,assetId:e,period:c,periodDate:o.toISOString(),beginningValue:r+d,depreciationAmount:d,accumulatedDepreciation:n,endingValue:r,status:c<=12?"Current":"Future"})}const o=[...Pe,...a];return Te(o),at("bero_depreciation_schedules",o),a},getDepreciationSchedule:e=>Pe.filter(t=>t.assetId===e),depreciationEntries:ze,createDepreciationEntry:e=>{const{assetId:t,depreciationAmount:s,period:a,description:r}=e,n=ke.find(e=>e.id===t);if(!n)throw new Error("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const l={id:Date.now(),assetId:t,assetName:n.name,depreciationAmount:s,period:a,description:r||"\u0625\u0647\u0644\u0627\u0643 \u0627\u0644\u0623\u0635\u0644 ".concat(n.name," \u0644\u0641\u062a\u0631\u0629 ").concat(a),date:(new Date).toISOString(),status:"Posted",createdAt:(new Date).toISOString()},i=ke.map(e=>e.id===t?Be(Be({},e),{},{accumulatedDepreciation:(e.accumulatedDepreciation||0)+s,currentValue:e.currentValue-s,bookValue:e.originalCost-(e.accumulatedDepreciation||0)-s,updatedAt:(new Date).toISOString()}):e);Ce(i),at("bero_fixed_assets",i);const o=[...ze,l];return Oe(o),at("bero_depreciation_entries",o),l},getDepreciationEntriesByAsset:e=>ze.filter(t=>t.assetId===e),getDepreciationEntriesByPeriod:e=>ze.filter(t=>t.period===e),maintenanceSchedules:Ae,addMaintenanceSchedule:e=>{const t=Be(Be({id:Date.now()},e),{},{status:"Active",createdAt:(new Date).toISOString()}),s=[...Ae,t];return Fe(s),at("bero_maintenance_schedules",s),t},updateMaintenanceSchedule:(e,t)=>{const s=Ae.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);Fe(s),at("bero_maintenance_schedules",s)},getMaintenanceSchedulesByAsset:e=>Ae.filter(t=>t.assetId===e),checkMaintenanceDue:()=>{const e=new Date;return Ae.filter(t=>{const s=new Date(t.nextMaintenanceDate);return Math.ceil((s-e)/864e5)<=30&&"Active"===t.status})},maintenanceRecords:Re,addMaintenanceRecord:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString(),status:"Completed"}),s=[...Re,t];return Ve(s),at("bero_maintenance_records",s),t},updateMaintenanceRecord:(e,t)=>{const s=Re.map(s=>s.id===e?Be(Be(Be({},s),t),{},{updatedAt:(new Date).toISOString()}):s);Ve(s),at("bero_maintenance_records",s)},getMaintenanceRecordsByAsset:e=>Re.filter(t=>t.assetId===e),maintenanceCosts:qe,addMaintenanceCost:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...qe,t];return He(s),at("bero_maintenance_costs",s),t},getMaintenanceCostsByAsset:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=qe.filter(t=>t.assetId===e);return t&&(a=a.filter(e=>e.date>=t)),s&&(a=a.filter(e=>e.date<=s)),a},getTotalMaintenanceCostByAsset:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=qe.filter(t=>t.assetId===e);return t&&(s=s.filter(e=>new Date(e.date).getFullYear()===t)),s.reduce((e,t)=>e+(t.amount||0),0)},assetInventory:We,createInventory:e=>{const t=Be(Be({id:Date.now()},e),{},{status:"Active",createdAt:(new Date).toISOString()}),s=[...We,t];return Ue(s),at("bero_asset_inventory",s),t},addInventoryItem:(e,t)=>{if(!We.find(t=>t.id===e))throw new Error("\u0627\u0644\u062c\u0631\u062f \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const s={id:Date.now(),inventoryId:e,assetId:t.assetId,found:!1!==t.found,actualCondition:t.actualCondition||"Good",actualLocation:t.actualLocation,notes:t.notes,checkedAt:(new Date).toISOString(),checkedBy:1},a=We.map(t=>{if(t.id===e){const e=t.items||[];return Be(Be({},t),{},{items:[...e,s]})}return t});return Ue(a),at("bero_asset_inventory",a),s},assetValuations:Xe,addAssetValuation:e=>{const t=Be(Be({id:Date.now()},e),{},{createdAt:(new Date).toISOString()}),s=[...Xe,t];return Ke(s),at("bero_asset_valuations",s),t},getAssetValuations:e=>Xe.filter(t=>t.assetId===e).sort((e,t)=>new Date(t.valuationDate)-new Date(e.valuationDate)),getLatestAssetValuation:e=>{const t=Xe.filter(t=>t.assetId===e);return t.length>0?t.sort((e,t)=>new Date(t.valuationDate)-new Date(e.valuationDate))[0]:null},assetDisposals:$e,createAssetDisposal:e=>{const{assetId:t,disposalType:s,disposalDate:a,disposalAmount:r,reason:n}=e,l=ke.find(e=>e.id===t);if(!l)throw new Error("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const i={id:Date.now(),assetId:t,assetName:l.name,disposalType:s,disposalDate:a,disposalAmount:r,reason:n,status:"Completed",createdAt:(new Date).toISOString()},o=ke.map(e=>e.id===t?Be(Be({},e),{},{status:"Disposed",disposalDate:a,disposalAmount:r,updatedAt:(new Date).toISOString()}):e);Ce(o),at("bero_fixed_assets",o);const c=[...$e,i];return Ye(c),at("bero_asset_disposals",c),i},getAssetDisposals:e=>$e.filter(t=>t.assetId===e),assetTransfers:Je,createAssetTransfer:e=>{const{assetId:t,fromLocationId:s,toLocationId:a,transferDate:r,reason:n}=e,l=ke.find(e=>e.id===t);if(!l)throw new Error("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const i={id:Date.now(),assetId:t,assetName:l.name,fromLocationId:s,toLocationId:a,transferDate:r,reason:n,status:"Completed",createdAt:(new Date).toISOString()},o=ke.map(e=>e.id===t?Be(Be({},e),{},{locationId:a,updatedAt:(new Date).toISOString()}):e);Ce(o),at("bero_fixed_assets",o);const c=[...Je,i];return Ze(c),at("bero_asset_transfers",c),i},getAssetTransfers:e=>Je.filter(t=>t.assetId===e),assetAcquisitions:et,createAssetAcquisition:e=>{const t=Be(Be({id:Date.now()},e),{},{status:"Active",createdAt:(new Date).toISOString()}),s=[...et,t];return tt(s),at("bero_asset_acquisitions",s),t},getAssetAcquisitions:e=>et.filter(t=>t.assetId===e),getFixedAssetsSummary:()=>{const e=ke.filter(e=>"Active"===e.status),t=e.reduce((e,t)=>e+(t.originalCost||0),0),s=e.reduce((e,t)=>e+(t.currentValue||0),0),a=e.reduce((e,t)=>e+(t.accumulatedDepreciation||0),0),r=e.reduce((e,t)=>e+(t.bookValue||0),0),n={};return e.forEach(e=>{var t;const s=(null===(t=Ie.find(t=>t.id===e.categoryId))||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";n[s]||(n[s]={count:0,originalCost:0,currentValue:0,bookValue:0}),n[s].count++,n[s].originalCost+=e.originalCost||0,n[s].currentValue+=e.currentValue||0,n[s].bookValue+=e.bookValue||0}),{totalAssets:e.length,totalOriginalCost:t,totalCurrentValue:s,totalAccumulatedDepreciation:a,totalBookValue:r,categorySummary:n,averageAssetAge:e.length>0?e.reduce((e,t)=>{const s=new Date(t.purchaseDate);return e+(new Date-s)/31536e6},0)/e.length:0}}};return(0,Qe.jsx)(Ge.Provider,{value:ht,children:t})},Ze=(0,r.createContext)(),et=()=>{const e=(0,r.useContext)(Ze);if(!e)throw new Error("useTab must be used within TabProvider");return e},tt=e=>{let{children:t}=e;const s=J(),a=ee(),[n,l]=(0,r.useState)([{id:"tab-1",path:"/dashboard",title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:"\ud83c\udfe0",isMain:!0}]),[i,o]=(0,r.useState)("tab-1");(0,r.useEffect)(()=>{l(e=>e.map(e=>e.id===i?Be(Be({},e),{},{path:s.pathname,title:c(s.pathname),icon:d(s.pathname)}):e))},[s.pathname,i]),(0,r.useEffect)(()=>{const e=n.find(e=>e.id===i);e&&s.pathname!==e.path&&a(e.path)},[i]);const c=e=>({"/dashboard":"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645","/warehouses/add-product":"\u0625\u0636\u0627\u0641\u0629 \u0628\u0636\u0627\u0639\u0629","/warehouses/manage-products":"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0628\u0636\u0627\u0626\u0639","/warehouses/add-warehouse":"\u0625\u0636\u0627\u0641\u0629 \u0645\u062e\u0632\u0646","/warehouses/manage-categories":"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0626\u0627\u062a","/warehouses/transfer":"\u062a\u062d\u0648\u064a\u0644 \u0628\u0636\u0627\u0639\u0629","/warehouses/inventory":"\u0627\u0644\u062c\u0631\u062f","/warehouses/manage":"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646","/purchases/new-invoice":"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062c\u062f\u064a\u062f\u0629","/purchases/invoices":"\u0633\u062c\u0644 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","/purchases/manage":"\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","/purchases/returns":"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","/sales/new-invoice":"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a \u062c\u062f\u064a\u062f\u0629","/sales/invoices":"\u0633\u062c\u0644 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","/sales/manage":"\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","/sales/returns":"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","/sales/external":"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629","/customers/add":"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644","/customers/manage":"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","/suppliers/add":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f","/suppliers/manage":"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","/treasury/receipt/new":"\u0625\u0630\u0646 \u0627\u0633\u062a\u0644\u0627\u0645 \u0646\u0642\u062f\u064a","/treasury/receipts":"\u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645","/treasury/disbursement/new":"\u0625\u0630\u0646 \u0635\u0631\u0641 \u0646\u0642\u062f\u064a","/treasury/disbursements":"\u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641","/treasury/movement":"\u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629","/treasury/customer-balances":"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","/treasury/supplier-balances":"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","/reports/inventory":"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0648\u0646","/reports/low-stock":"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062e\u0641\u0636","/reports/product-movement":"\u062d\u0631\u0643\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a","/reports/sales":"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","/reports/sales-by-customer":"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","/reports/top-selling":"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0623\u0643\u062b\u0631 \u0645\u0628\u064a\u0639\u0627\u064b","/reports/purchases":"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","/reports/purchases-by-supplier":"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","/reports/treasury":"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062e\u0632\u064a\u0646\u0629","/reports/cash-flow":"\u0627\u0644\u062a\u062f\u0641\u0642 \u0627\u0644\u0646\u0642\u062f\u064a","/reports/profit-loss":"\u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631","/notifications":"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a","/settings/add-user":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645","/settings/permissions":"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a","/settings/support":"\u062e\u062f\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","/settings/system":"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645","/integrations/external-platforms":"\u0645\u0646\u0635\u0627\u062a \u062e\u0627\u0631\u062c\u064a\u0629","/integrations/whatsapp-business":"\u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644","/adjustments/quantity":"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a","/adjustments/value":"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629","/adjustments/damaged":"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641","/adjustments/customer-balance":"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","/adjustments/supplier-balance":"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","/adjustments/treasury":"\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u062e\u0632\u064a\u0646\u0629","/adjustments/entries":"\u0642\u064a\u0648\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629","/adjustments/history":"\u0633\u062c\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a","/production":"\u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u0646\u062a\u0627\u062c","/production/orders":"\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c","/production/planning":"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c","/production/materials":"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645","/production/quality":"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u062c\u0648\u062f\u0629","/production/dashboard":"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629"}[e]||"\u0635\u0641\u062d\u0629"),d=e=>"/dashboard"===e?"\ud83c\udfe0":e.includes("warehouses")?"\ud83d\udce6":e.includes("purchases")?"\ud83d\uded2":e.includes("sales")?"\ud83d\udcb0":e.includes("customers")?"\ud83d\udc65":e.includes("suppliers")?"\ud83d\ude9a":e.includes("treasury")?"\ud83d\udcb5":e.includes("reports")?"\ud83d\udcca":e.includes("notifications")?"\ud83d\udd14":e.includes("settings")?"\u2699\ufe0f":e.includes("integrations")?"\ud83d\udd17":e.includes("adjustments")?"\ud83d\udee0\ufe0f":e.includes("production")?"\ud83c\udfed":"\ud83d\udcc4",x={tabs:n,activeTabId:i,openNewTab:()=>{const e="tab-".concat(Date.now()),t={id:e,path:"/dashboard",title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:"\ud83c\udfe0",isMain:!1};l(e=>[...e,t]),o(e),a("/dashboard")},closeTab:e=>{const t=n.find(t=>t.id===e);null!==t&&void 0!==t&&t.isMain||l(t=>{const s=t.filter(t=>t.id!==e);if(i===e){const r=t.findIndex(t=>t.id===e),n=s[Math.max(0,r-1)];o(n.id),a(n.path)}return s})},switchTab:e=>{const t=n.find(t=>t.id===e);t&&(o(e),a(t.path))},getActiveTab:()=>n.find(e=>e.id===i),hasMultipleTabs:n.length>1};return(0,Qe.jsx)(Ze.Provider,{value:x,children:t})};var st={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},at=r.createContext&&r.createContext(st),rt=function(){return rt=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},rt.apply(this,arguments)},nt=function(e,t){var s={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(s[a[r]]=e[a[r]])}return s};function lt(e){return e&&e.map(function(e,t){return r.createElement(e.tag,rt({key:t},e.attr),lt(e.child))})}function it(e){return function(t){return r.createElement(ot,rt({attr:rt({},e.attr)},t),lt(e.child))}}function ot(e){var t=function(t){var s,a=e.attr,n=e.size,l=e.title,i=nt(e,["attr","size","title"]),o=n||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",rt({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:s,style:rt(rt({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),l&&r.createElement("title",null,l),e.children)};return void 0!==at?r.createElement(at.Consumer,null,function(e){return t(e)}):t(st)}function ct(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2 0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"}}]})(e)}function dt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z"}}]})(e)}function xt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"}}]})(e)}function ut(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"}}]})(e)}function mt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"}}]})(e)}function ht(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 448V64h18v384H0zm26.857-.273V64H36v383.727h-9.143zm27.143 0V64h8.857v383.727H54zm44.857 0V64h8.857v383.727h-8.857zm36 0V64h17.714v383.727h-17.714zm44.857 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm18 0V64h8.857v383.727h-8.857zm35.715 0V64h18v383.727h-18zm44.857 0V64h18v383.727h-18zm35.999 0V64h18.001v383.727h-18.001zm36.001 0V64h18.001v383.727h-18.001zm26.857 0V64h18v383.727h-18zm45.143 0V64h26.857v383.727h-26.857zm35.714 0V64h9.143v383.727H476zm18 .273V64h18v384h-18z"}}]})(e)}function pt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(e)}function gt(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M542.22 32.05c-54.8 3.11-163.72 14.43-230.96 55.59-4.64 2.84-7.27 7.89-7.27 13.17v363.87c0 11.55 12.63 18.85 23.28 13.49 69.18-34.82 169.23-44.32 218.7-46.92 16.89-.89 30.02-14.43 30.02-30.66V62.75c.01-17.71-15.35-31.74-33.77-30.7zM264.73 87.64C197.5 46.48 88.58 35.17 33.78 32.05 15.36 31.01 0 45.04 0 62.75V400.6c0 16.24 13.13 29.78 30.02 30.66 49.49 2.6 149.59 12.11 218.77 46.95 10.62 5.35 23.21-1.94 23.21-13.46V100.63c0-5.29-2.62-10.14-7.27-12.99z"}}]})(e)}function ft(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"}}]})(e)}function bt(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M560 288h-80v96l-32-21.3-32 21.3v-96h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16zm-384-64h224c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16h-80v96l-32-21.3L256 96V0h-80c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16zm64 64h-80v96l-32-21.3L96 384v-96H16c-8.8 0-16 7.2-16 16v192c0 8.8 7.2 16 16 16h224c8.8 0 16-7.2 16-16V304c0-8.8-7.2-16-16-16z"}}]})(e)}function vt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 480h-20V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v456H12c-6.627 0-12 5.373-12 12v20h448v-20c0-6.627-5.373-12-12-12zM128 76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76zm0 96c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40zm52 148h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40c0 6.627-5.373 12-12 12zm76 160h-64v-84c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v84zm64-172c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12v-40c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40zm0-96c0 6.627-5.373 12-12 12h-40c-6.627 0-12-5.373-12-12V76c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v40z"}}]})(e)}function jt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"}}]})(e)}function yt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(e)}function Nt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"}}]})(e)}function wt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 160H12c-6.6 0-12-5.4-12-12v-36c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48v36c0 6.6-5.4 12-12 12zM12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm257.3 160l48.1-48.1c4.7-4.7 4.7-12.3 0-17l-28.3-28.3c-4.7-4.7-12.3-4.7-17 0L224 306.7l-48.1-48.1c-4.7-4.7-12.3-4.7-17 0l-28.3 28.3c-4.7 4.7-4.7 12.3 0 17l48.1 48.1-48.1 48.1c-4.7 4.7-4.7 12.3 0 17l28.3 28.3c4.7 4.7 12.3 4.7 17 0l48.1-48.1 48.1 48.1c4.7 4.7 12.3 4.7 17 0l28.3-28.3c4.7-4.7 4.7-12.3 0-17L269.3 352z"}}]})(e)}function St(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M12 192h424c6.6 0 12 5.4 12 12v260c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V204c0-6.6 5.4-12 12-12zm436-44v-36c0-26.5-21.5-48-48-48h-48V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H160V12c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v52H48C21.5 64 0 85.5 0 112v36c0 6.6 5.4 12 12 12h424c6.6 0 12-5.4 12-12z"}}]})(e)}function kt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M511.1 378.8l-26.7-160c-2.6-15.4-15.9-26.7-31.6-26.7H208v-64h96c8.8 0 16-7.2 16-16V16c0-8.8-7.2-16-16-16H48c-8.8 0-16 7.2-16 16v96c0 8.8 7.2 16 16 16h96v64H59.1c-15.6 0-29 11.3-31.6 26.7L.8 378.7c-.6 3.5-.9 7-.9 10.5V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32v-90.7c.1-3.5-.2-7-.8-10.5zM280 248c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16zm-32 64h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16zm-32-80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16zM80 80V48h192v32H80zm40 200h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16zm16 64v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16zm216 112c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h176c4.4 0 8 3.6 8 8v16zm24-112c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16zm48-80c0 8.8-7.2 16-16 16h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h16c8.8 0 16 7.2 16 16v16z"}}]})(e)}function Ct(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(e)}function It(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"}}]})(e)}function Dt(e){return it({tag:"svg",attr:{viewBox:"0 0 544 512"},child:[{tag:"path",attr:{d:"M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"}}]})(e)}function _t(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"}}]})(e)}function Lt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}}]})(e)}function Et(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(e)}function Mt(e){return it({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"}}]})(e)}function Pt(e){return it({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"}}]})(e)}function Tt(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"}}]})(e)}function zt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"}}]})(e)}function Ot(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function At(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"}}]})(e)}function Ft(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"}}]})(e)}function Rt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M488.6 250.2L392 214V105.5c0-15-9.3-28.4-23.4-33.7l-100-37.5c-8.1-3.1-17.1-3.1-25.3 0l-100 37.5c-14.1 5.3-23.4 18.7-23.4 33.7V214l-96.6 36.2C9.3 255.5 0 268.9 0 283.9V394c0 13.6 7.7 26.1 19.9 32.2l100 50c10.1 5.1 22.1 5.1 32.2 0l103.9-52 103.9 52c10.1 5.1 22.1 5.1 32.2 0l100-50c12.2-6.1 19.9-18.6 19.9-32.2V283.9c0-15-9.3-28.4-23.4-33.7zM358 214.8l-85 31.9v-68.2l85-37v73.3zM154 104.1l102-38.2 102 38.2v.6l-102 41.4-102-41.4v-.6zm84 291.1l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6zm240 112l-85 42.5v-79.1l85-38.8v75.4zm0-112l-102 41.4-102-41.4v-.6l102-38.2 102 38.2v.6z"}}]})(e)}function Vt(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"}}]})(e)}function Bt(e){return it({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"}}]})(e)}function qt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function Qt(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"}}]})(e)}function Ht(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"}}]})(e)}function Wt(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 168v-16c0-13.255 10.745-24 24-24h360V80c0-21.367 25.899-32.042 40.971-16.971l80 80c9.372 9.373 9.372 24.569 0 33.941l-80 80C409.956 271.982 384 261.456 384 240v-48H24c-13.255 0-24-10.745-24-24zm488 152H128v-48c0-21.314-25.862-32.08-40.971-16.971l-80 80c-9.372 9.373-9.372 24.569 0 33.941l80 80C102.057 463.997 128 453.437 128 432v-48h360c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24z"}}]})(e)}function Ut(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function Xt(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(e)}function Kt(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M320 400c-75.85 0-137.25-58.71-142.9-133.11L72.2 185.82c-13.79 17.3-26.48 35.59-36.72 55.59a32.35 32.35 0 0 0 0 29.19C89.71 376.41 197.07 448 320 448c26.91 0 52.87-4 77.89-10.46L346 397.39a144.13 144.13 0 0 1-26 2.61zm313.82 58.1l-110.55-85.44a331.25 331.25 0 0 0 81.25-102.07 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64a308.15 308.15 0 0 0-147.32 37.7L45.46 3.37A16 16 0 0 0 23 6.18L3.37 31.45A16 16 0 0 0 6.18 53.9l588.36 454.73a16 16 0 0 0 22.46-2.81l19.64-25.27a16 16 0 0 0-2.82-22.45zm-183.72-142l-39.3-30.38A94.75 94.75 0 0 0 416 256a94.76 94.76 0 0 0-121.31-92.21A47.65 47.65 0 0 1 304 192a46.64 46.64 0 0 1-1.54 10l-73.61-56.89A142.31 142.31 0 0 1 320 112a143.92 143.92 0 0 1 144 144c0 21.63-5.29 41.79-13.9 60.11z"}}]})(e)}function $t(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"}}]})(e)}function Gt(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"}}]})(e)}function Yt(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128zM571 308l-95.7-96.4c-10.1-10.1-27.4-3-27.4 11.3V288h-64v64h64v65.2c0 14.3 17.3 21.4 27.4 11.3L571 332c6.6-6.6 6.6-17.4 0-24zm-379 28v-32c0-8.8 7.2-16 16-16h176V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V352H208c-8.8 0-16-7.2-16-16z"}}]})(e)}function Jt(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"}}]})(e)}function Zt(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 256H96v64h192v-64zm89-151L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 64c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8v-16zm256 304c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-200v96c0 8.84-7.16 16-16 16H80c-8.84 0-16-7.16-16-16v-96c0-8.84 7.16-16 16-16h224c8.84 0 16 7.16 16 16z"}}]})(e)}function es(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(e)}function ts(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z"}}]})(e)}function ss(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 128H272l-64-64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48z"}}]})(e)}function as(e){return it({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z"}}]})(e)}function rs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"}}]})(e)}function ns(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"}}]})(e)}function ls(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"}}]})(e)}function is(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M475.115 163.781L336 252.309v-68.28c0-18.916-20.931-30.399-36.885-20.248L160 252.309V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56v400c0 13.255 10.745 24 24 24h464c13.255 0 24-10.745 24-24V184.029c0-18.917-20.931-30.399-36.885-20.248z"}}]})(e)}function os(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(e)}function cs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"}}]})(e)}function ds(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"}}]})(e)}function xs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M80 368H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm0-320H16A16 16 0 0 0 0 64v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16V64a16 16 0 0 0-16-16zm0 160H16a16 16 0 0 0-16 16v64a16 16 0 0 0 16 16h64a16 16 0 0 0 16-16v-64a16 16 0 0 0-16-16zm416 176H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm0-320H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16V80a16 16 0 0 0-16-16zm0 160H176a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h320a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"}}]})(e)}function us(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"}}]})(e)}function ms(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}function hs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function ps(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"}}]})(e)}function gs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}}]})(e)}function fs(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M112 224c61.9 0 112-50.1 112-112S173.9 0 112 0 0 50.1 0 112s50.1 112 112 112zm0-160c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zm224 224c-61.9 0-112 50.1-112 112s50.1 112 112 112 112-50.1 112-112-50.1-112-112-112zm0 160c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zM392.3.2l31.6-.1c19.4-.1 30.9 21.8 19.7 37.8L77.4 501.6a23.95 23.95 0 0 1-19.6 10.2l-33.4.1c-19.5 0-30.9-21.9-19.7-37.8l368-463.7C377.2 4 384.5.2 392.3.2z"}}]})(e)}function bs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(e)}function vs(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"}}]})(e)}function js(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(e)}function ys(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}function Ns(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z"}}]})(e)}function ws(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}}]})(e)}function Ss(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function ks(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(e)}function Cs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"}}]})(e)}function Is(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"}}]})(e)}function Ds(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)}function _s(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M128 352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-24-80h192v48h48v-48h192v48h48v-57.59c0-21.17-17.23-38.41-38.41-38.41H344v-64h40c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h40v64H94.41C73.23 224 56 241.23 56 262.41V320h48v-48zm264 80h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm240 0h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}}]})(e)}function Ls(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M440.65 12.57l4 82.77A247.16 247.16 0 0 0 255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0 0 24.09 224h49.05a12 12 0 0 0 11.67-9.26 175.91 175.91 0 0 1 317-56.94l-101.46-4.86a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12H500a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12h-47.37a12 12 0 0 0-11.98 12.57zM255.83 432a175.61 175.61 0 0 1-146-77.8l101.8 4.87a12 12 0 0 0 12.57-12v-47.4a12 12 0 0 0-12-12H12a12 12 0 0 0-12 12V500a12 12 0 0 0 12 12h47.35a12 12 0 0 0 12-12.6l-4.15-82.57A247.17 247.17 0 0 0 255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 0 0-11.8-14.18h-49.05a12 12 0 0 0-11.67 9.26A175.86 175.86 0 0 1 255.83 432z"}}]})(e)}function Es(e){return it({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"}}]})(e)}function Ms(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"}}]})(e)}function Ps(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"}}]})(e)}function Ts(e){return it({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(e)}function zs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M501.1 395.7L384 278.6c-23.1-23.1-57.6-27.6-85.4-13.9L192 158.1V96L64 0 0 64l96 128h62.1l106.6 106.6c-13.6 27.8-9.2 62.3 13.9 85.4l117.1 117.1c14.6 14.6 38.2 14.6 52.7 0l52.7-52.7c14.5-14.6 14.5-38.2 0-52.7zM331.7 225c28.3 0 54.9 11 74.9 31l19.4 19.4c15.8-6.9 30.8-16.5 43.8-29.5 37.1-37.1 49.7-89.3 37.9-136.7-2.2-9-13.5-12.1-20.1-5.5l-74.4 74.4-67.9-11.3L334 98.9l74.4-74.4c6.6-6.6 3.4-17.9-5.7-20.2-47.4-11.7-99.6.9-136.6 37.9-28.5 28.5-41.9 66.1-41.2 103.6l82.1 82.1c8.1-1.9 16.5-2.9 24.7-2.9zm-103.9 82l-56.7-56.7L18.7 402.8c-25 25-25 65.5 0 90.5s65.5 25 90.5 0l123.6-123.6c-7.6-19.9-9.9-41.6-5-62.7zM64 472c-13.2 0-24-10.8-24-24 0-13.3 10.7-24 24-24s24 10.7 24 24c0 13.2-10.7 24-24 24z"}}]})(e)}function Os(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"}}]})(e)}function As(e){return it({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M378.31 378.49L298.42 288h30.63c9.01 0 16.98-5 20.78-13.06 3.8-8.04 2.55-17.26-3.28-24.05L268.42 160h28.89c9.1 0 17.3-5.35 20.86-13.61 3.52-8.13 1.86-17.59-4.24-24.08L203.66 4.83c-6.03-6.45-17.28-6.45-23.32 0L70.06 122.31c-6.1 6.49-7.75 15.95-4.24 24.08C69.38 154.65 77.59 160 86.69 160h28.89l-78.14 90.91c-5.81 6.78-7.06 15.99-3.27 24.04C37.97 283 45.93 288 54.95 288h30.63L5.69 378.49c-6 6.79-7.36 16.09-3.56 24.26 3.75 8.05 12 13.25 21.01 13.25H160v24.45l-30.29 48.4c-5.32 10.64 2.42 23.16 14.31 23.16h95.96c11.89 0 19.63-12.52 14.31-23.16L224 440.45V416h136.86c9.01 0 17.26-5.2 21.01-13.25 3.8-8.17 2.44-17.47-3.56-24.26z"}}]})(e)}function Fs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h16c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"}}]})(e)}function Rs(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"}}]})(e)}function Vs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M496 224c-79.6 0-144 64.4-144 144s64.4 144 144 144 144-64.4 144-144-64.4-144-144-144zm64 150.3c0 5.3-4.4 9.7-9.7 9.7h-60.6c-5.3 0-9.7-4.4-9.7-9.7v-76.6c0-5.3 4.4-9.7 9.7-9.7h12.6c5.3 0 9.7 4.4 9.7 9.7V352h38.3c5.3 0 9.7 4.4 9.7 9.7v12.6zM320 368c0-27.8 6.7-54.1 18.2-77.5-8-1.5-16.2-2.5-24.6-2.5h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h347.1c-45.3-31.9-75.1-84.5-75.1-144zm-96-112c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128z"}}]})(e)}function Bs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function qs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"}}]})(e)}function Qs(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"}}]})(e)}function Hs(e){return it({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"}}]})(e)}function Ws(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(e)}function Us(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"}}]})(e)}function Xs(e){return it({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M504 352H136.4c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0 96H136.1c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm0-192H136.6c-4.4 0-8 3.6-8 8l-.1 48c0 4.4 3.6 8 8 8H504c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm106.5-139L338.4 3.7a48.15 48.15 0 0 0-36.9 0L29.5 117C11.7 124.5 0 141.9 0 161.3V504c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V256c0-17.6 14.6-32 32.6-32h382.8c18 0 32.6 14.4 32.6 32v248c0 4.4 3.6 8 8 8h80c4.4 0 8-3.6 8-8V161.3c0-19.4-11.7-36.8-29.5-44.3z"}}]})(e)}function Ks(e){return it({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"}}]})(e)}const $s=e=>{let{isMobile:t=!1,onClose:s}=e;const[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(!1),u=(0,r.useRef)(null),m=ee(),{products:h,customers:p,suppliers:g,purchaseInvoices:f,salesInvoices:b,warehouses:v}=Ye();(0,r.useEffect)(()=>{if(a.trim().length<2)return i([]),void x(!1);c(!0);const e=a.toLowerCase().trim(),t=[];h.filter(t=>{var s,a,r;return(null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.barcode)||void 0===a?void 0:a.toLowerCase().includes(e))||(null===(r=t.category)||void 0===r?void 0:r.toLowerCase().includes(e))}).slice(0,5).forEach(e=>{t.push({id:"product-".concat(e.id),type:"product",title:e.name,subtitle:"\u0627\u0644\u0643\u0645\u064a\u0629: ".concat(e.mainQuantity||0," - \u0627\u0644\u0633\u0639\u0631: ").concat(e.sellingPrice||0," \u062c\u0646\u064a\u0647"),category:e.category,icon:(0,Qe.jsx)(ft,{}),color:"purple",path:"/warehouses/manage-products",data:e})});p.filter(t=>{var s,a,r;return(null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.phone)||void 0===a?void 0:a.includes(e))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(e))}).slice(0,5).forEach(e=>{t.push({id:"customer-".concat(e.id),type:"customer",title:e.name,subtitle:e.phone||e.email,icon:(0,Qe.jsx)(Hs,{}),color:"pink",path:"/customers/manage",data:e})});g.filter(t=>{var s,a,r;return(null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.phone)||void 0===a?void 0:a.includes(e))||(null===(r=t.email)||void 0===r?void 0:r.toLowerCase().includes(e))}).slice(0,5).forEach(e=>{t.push({id:"supplier-".concat(e.id),type:"supplier",title:e.name,subtitle:e.phone||e.email,icon:(0,Qe.jsx)(Fs,{}),color:"cyan",path:"/suppliers/manage",data:e})});f.filter(t=>{var s,a;return(null===(s=t.invoiceNumber)||void 0===s?void 0:s.toString().includes(e))||(null===(a=t.supplierName)||void 0===a?void 0:a.toLowerCase().includes(e))}).slice(0,3).forEach(e=>{t.push({id:"purchase-".concat(e.id),type:"purchase",title:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(e.invoiceNumber||e.id),subtitle:"".concat(e.supplierName," - ").concat(e.total," \u062c\u0646\u064a\u0647"),icon:(0,Qe.jsx)(Is,{}),color:"green",path:"/purchases/invoices",data:e})});b.filter(t=>{var s,a;return(null===(s=t.invoiceNumber)||void 0===s?void 0:s.toString().includes(e))||(null===(a=t.customerName)||void 0===a?void 0:a.toLowerCase().includes(e))}).slice(0,3).forEach(e=>{t.push({id:"sale-".concat(e.id),type:"sale",title:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(e.invoiceNumber||e.id),subtitle:"".concat(e.customerName," - ").concat(e.total," \u062c\u0646\u064a\u0647"),icon:(0,Qe.jsx)(It,{}),color:"orange",path:"/sales/invoices",data:e})});v.filter(t=>{var s,a;return(null===(s=t.name)||void 0===s?void 0:s.toLowerCase().includes(e))||(null===(a=t.location)||void 0===a?void 0:a.toLowerCase().includes(e))}).slice(0,3).forEach(e=>{t.push({id:"warehouse-".concat(e.id),type:"warehouse",title:e.name,subtitle:e.location||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0645\u0648\u0642\u0639",icon:(0,Qe.jsx)(Xs,{}),color:"indigo",path:"/warehouses/manage",data:e})}),i(t),x(t.length>0),c(!1)},[a,h,p,g,f,b,v]),(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const j=l.reduce((e,t)=>{const s=t.type;return e[s]||(e[s]=[]),e[s].push(t),e},{}),y={product:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",customer:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",supplier:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",purchase:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",sale:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",warehouse:"\u0627\u0644\u0645\u062e\u0627\u0632\u0646"};return(0,Qe.jsxs)("div",{ref:u,className:"relative w-full",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:a,onChange:e=>n(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0646\u062a\u062c\u060c \u0639\u0645\u064a\u0644\u060c \u0645\u0648\u0631\u062f\u060c \u0641\u0627\u062a\u0648\u0631\u0629...",className:"w-full ".concat(t?"px-3 py-2 pr-9 text-sm":"px-3 py-1.5 pr-9 text-xs"," bg-orange-50/80 border border-orange-100 rounded-lg focus:outline-none focus:bg-white focus:border-orange-300 transition-all placeholder-gray-400"),autoFocus:t}),(0,Qe.jsx)("div",{className:"absolute right-2.5 top-1/2 -translate-y-1/2",children:o?(0,Qe.jsx)("div",{className:"w-3 h-3 border-2 border-orange-400 border-t-transparent rounded-full animate-spin"}):(0,Qe.jsx)(ks,{className:"text-orange-400",size:t?14:12})}),a&&(0,Qe.jsx)("button",{onClick:()=>{n(""),i([]),x(!1)},className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,Qe.jsx)(Ts,{size:t?14:12})})]}),d&&l.length>0&&(0,Qe.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-orange-100 max-h-[70vh] overflow-y-auto z-[9998]",children:[Object.entries(j).map(e=>{let[a,r]=e;return(0,Qe.jsxs)("div",{className:"border-b border-orange-50 last:border-b-0",children:[(0,Qe.jsx)("div",{className:"px-3 py-2 bg-gradient-to-r from-orange-50 to-white sticky top-0",children:(0,Qe.jsx)("p",{className:"text-xs font-bold text-orange-600",children:y[a]})}),r.map(e=>{return(0,Qe.jsxs)("button",{onClick:()=>(e=>{m(e.path),n(""),x(!1),t&&s&&s()})(e),className:"w-full px-3 py-2.5 hover:bg-orange-50 transition-all flex items-start gap-3 text-right border-b border-orange-50/50 last:border-b-0",children:[(0,Qe.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br ".concat((a=e.color,{purple:"from-purple-500 to-purple-600",pink:"from-pink-500 to-pink-600",cyan:"from-cyan-500 to-cyan-600",green:"from-green-500 to-green-600",orange:"from-orange-500 to-orange-600",indigo:"from-indigo-500 to-indigo-600"}[a]||"from-gray-500 to-gray-600")," flex items-center justify-center text-white flex-shrink-0 shadow-sm mt-0.5"),children:(0,Qe.jsx)("span",{className:"text-xs",children:e.icon})}),(0,Qe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:e.title}),(0,Qe.jsx)("p",{className:"text-xs text-gray-500 truncate mt-0.5",children:e.subtitle}),e.category&&(0,Qe.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 bg-orange-100 text-orange-700 rounded text-[10px] font-medium",children:e.category})]})]},e.id);var a})]},a)}),(0,Qe.jsx)("div",{className:"px-3 py-2 bg-gray-50 border-t border-orange-100 sticky bottom-0",children:(0,Qe.jsxs)("p",{className:"text-[10px] text-gray-500 text-center",children:["\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 ",l.length," \u0646\u062a\u064a\u062c\u0629"]})})]}),d&&0===l.length&&a.length>=2&&!o&&(0,Qe.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl border border-orange-100 p-6 z-[9998] text-center",children:[(0,Qe.jsx)("div",{className:"w-16 h-16 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,Qe.jsx)(ks,{className:"text-orange-300",size:24})}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"}),(0,Qe.jsxs)("p",{className:"text-xs text-gray-500",children:['\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0646\u062a\u0627\u0626\u062c \u0644\u0640 "',a,'"']})]})]})},Gs=()=>{const{tabs:e,activeTabId:t,closeTab:s,switchTab:a,openNewTab:r}=et(),{logout:n}=We(),l=ee();return(0,Qe.jsxs)("div",{className:"h-9 flex items-center gap-2 px-3 overflow-x-auto scrollbar-thin scrollbar-thumb-orange-400 scrollbar-track-transparent",children:[(0,Qe.jsx)("div",{className:"flex items-center gap-1.5 flex-1 overflow-x-auto",children:e.map(e=>{const r=e.id===t;return(0,Qe.jsxs)("div",{className:"\n                flex items-center gap-2 px-3 py-1.5 rounded-t-lg transition-all cursor-pointer group relative\n                min-w-[140px] max-w-[220px] flex-shrink-0\n                ".concat(r?"bg-white shadow-lg border-t-2 border-l border-r border-orange-500 -mb-[1px] z-10":"bg-white/60 hover:bg-white/90 border border-transparent hover:border-orange-300/50 shadow-sm","\n              "),onClick:()=>a(e.id),children:[(0,Qe.jsx)("span",{className:"text-base flex-shrink-0 transition-transform ".concat(r?"scale-110":"group-hover:scale-105"),children:e.icon}),(0,Qe.jsx)("span",{className:"\n                  text-sm font-semibold truncate flex-1\n                  ".concat(r?"text-orange-600":"text-gray-600 group-hover:text-gray-800","\n                "),title:e.title,children:e.title}),!e.isMain&&(0,Qe.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"\n                    flex-shrink-0 p-1 rounded-md transition-all\n                    ".concat(r?"text-orange-500 hover:bg-orange-100 hover:text-orange-700":"text-gray-400 hover:text-red-500 hover:bg-red-50 opacity-0 group-hover:opacity-100","\n                  "),title:"\u0625\u063a\u0644\u0627\u0642 \u0627\u0644\u062a\u0628\u0648\u064a\u0628",children:(0,Qe.jsx)(Ts,{size:11})}),r&&(0,Qe.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-orange-400 via-orange-500 to-orange-400 rounded-t-full"})]},e.id)})}),(0,Qe.jsx)("button",{onClick:()=>{n(),l("/login")},className:"flex items-center justify-center w-8 h-8 text-orange-600 hover:text-white bg-orange-50 hover:bg-gradient-to-br hover:from-orange-500 hover:to-orange-600 rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0 ml-1",title:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c",children:(0,Qe.jsx)(Ds,{size:13,className:"font-bold"})}),(0,Qe.jsx)("button",{onClick:r,className:"flex items-center justify-center w-8 h-8 text-orange-600 hover:text-white bg-orange-50 hover:bg-gradient-to-br hover:from-orange-500 hover:to-orange-600 rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0 ml-1",title:"\u062a\u0628\u0648\u064a\u0628 \u062c\u062f\u064a\u062f (Ctrl+T)",children:(0,Qe.jsx)(js,{size:13,className:"font-bold"})})]})},Ys=()=>{const{user:e,logout:t}=We(),{unreadCount:s}=Ke(),[a,n]=(ee(),(0,r.useState)(!1)),[l,i]=(0,r.useState)(!1);return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("header",{className:"h-[40px] fixed top-0 left-0 right-0 z-[9998] bg-white shadow-md transition-all",children:(0,Qe.jsx)("div",{className:"border-t border-orange-200/50 bg-gradient-to-b from-orange-50/50 to-white",children:(0,Qe.jsx)(Gs,{})})}),l&&(0,Qe.jsx)("div",{className:"lg:hidden absolute top-full left-0 right-0 p-3 bg-white border-b border-orange-100 shadow-lg z-[9998]",children:(0,Qe.jsx)($s,{isMobile:!0,onClose:()=>i(!1)})})]})},Js=e=>{let{isOpen:t,closeSidebar:s}=e;const a=J(),{isAdmin:n}=We(),[l,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1),d=e=>!(!e.path||a.pathname!==e.path)||!!e.subItems&&e.subItems.some(e=>a.pathname===e.path);(0,r.useEffect)(()=>{const e=x.find(e=>e.subItems&&e.subItems.some(e=>a.pathname===e.path));e&&i(e.id)},[a.pathname]);const x=[{id:"dashboard",title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:(0,Qe.jsx)(ns,{}),path:"/dashboard",color:"from-blue-500 to-blue-600"},{id:"warehouses",title:"\u0627\u0644\u0645\u062e\u0627\u0632\u0646",icon:(0,Qe.jsx)(Xs,{}),color:"from-purple-500 to-purple-600",subItems:[{title:"\u0625\u0636\u0627\u0641\u0629 \u0628\u0636\u0627\u0639\u0629",icon:(0,Qe.jsx)(js,{}),path:"/warehouses/add-product"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0628\u0636\u0627\u0626\u0639",icon:(0,Qe.jsx)(ft,{}),path:"/warehouses/manage-products"},{title:"\u0625\u0636\u0627\u0641\u0629 \u0645\u062e\u0632\u0646",icon:(0,Qe.jsx)(Xs,{}),path:"/warehouses/add-warehouse"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0626\u0627\u062a",icon:(0,Qe.jsx)(Ms,{}),path:"/warehouses/manage-categories"},{title:"\u062a\u062d\u0648\u064a\u0644",icon:(0,Qe.jsx)(Wt,{}),path:"/warehouses/transfer"},{title:"\u0627\u0644\u062c\u0631\u062f",icon:(0,Qe.jsx)(xs,{}),path:"/warehouses/inventory"},{title:"\u0627\u0644\u0636\u0628\u0637",icon:(0,Qe.jsx)(Ot,{}),path:"/warehouses/manage"}]},{id:"purchases",title:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)(Is,{}),color:"from-green-500 to-green-600",subItems:[{title:"\u0641\u0627\u062a\u0648\u0631\u0629 \u062c\u062f\u064a\u062f\u0629",icon:(0,Qe.jsx)(js,{}),path:"/purchases/new-invoice"},{title:"\u0633\u062c\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:(0,Qe.jsx)(xs,{}),path:"/purchases/invoices"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:(0,Qe.jsx)(Zt,{}),path:"/purchases/manage"},{title:"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)(Rs,{}),path:"/purchases/returns"}]},{id:"sales",title:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:(0,Qe.jsx)(It,{}),color:"from-orange-500 to-orange-600",subItems:[{title:"\u0641\u0627\u062a\u0648\u0631\u0629 \u062c\u062f\u064a\u062f\u0629",icon:(0,Qe.jsx)(js,{}),path:"/sales/new-invoice"},{title:"\u0633\u062c\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:(0,Qe.jsx)(xs,{}),path:"/sales/invoices"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:(0,Qe.jsx)(Zt,{}),path:"/sales/manage"},{title:"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:(0,Qe.jsx)(Rs,{}),path:"/sales/returns"},{title:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629",icon:(0,Qe.jsx)(ds,{}),path:"/sales/external"}]},{id:"suppliers",title:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(Fs,{}),color:"from-cyan-500 to-cyan-600",subItems:[{title:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f",icon:(0,Qe.jsx)(js,{}),path:"/suppliers/add"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(xs,{}),path:"/suppliers/manage"}]},{id:"customers",title:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{}),color:"from-pink-500 to-pink-600",subItems:[{title:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644",icon:(0,Qe.jsx)(Bs,{}),path:"/customers/add"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(xs,{}),path:"/customers/manage"}]},{id:"treasury",title:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)(hs,{}),color:"from-yellow-500 to-yellow-600",subItems:[{title:"\u0625\u0630\u0646 \u0627\u0633\u062a\u0644\u0627\u0645 \u0646\u0642\u062f\u064a",icon:(0,Qe.jsx)(js,{}),path:"/treasury/receipt/new"},{title:"\u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645",icon:(0,Qe.jsx)(xs,{}),path:"/treasury/receipts"},{title:"\u0625\u0630\u0646 \u0635\u0631\u0641 \u0646\u0642\u062f\u064a",icon:(0,Qe.jsx)(js,{}),path:"/treasury/disbursement/new"},{title:"\u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641",icon:(0,Qe.jsx)(xs,{}),path:"/treasury/disbursements"},{title:"\u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)(It,{}),path:"/treasury/movement"},{title:"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{}),path:"/treasury/customer-balances"},{title:"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(Fs,{}),path:"/treasury/supplier-balances"}]},{id:"accounting",title:"\u0627\u0644\u0645\u062d\u0627\u0633\u0628\u0629",icon:(0,Qe.jsx)(jt,{}),color:"from-orange-500 to-orange-600",subItems:[{title:"\u062f\u0644\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a",icon:(0,Qe.jsx)(gt,{}),path:"/accounting/chart-of-accounts"},{title:"\u0627\u0644\u0642\u064a\u0648\u062f \u0627\u0644\u064a\u0648\u0645\u064a\u0629",icon:(0,Qe.jsx)(Zt,{}),path:"/accounting/journal-entry"}]},{id:"hr",title:"\u0627\u0644\u0645\u0648\u0627\u0631\u062f \u0627\u0644\u0628\u0634\u0631\u064a\u0629",icon:(0,Qe.jsx)(Ws,{}),color:"from-blue-500 to-blue-600",subItems:[{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646",icon:(0,Qe.jsx)(Bs,{}),path:"/hr/employees"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0642\u0633\u0627\u0645",icon:(0,Qe.jsx)(vt,{}),path:"/hr/organization"},{title:"\u0627\u0644\u062d\u0636\u0648\u0631 \u0648\u0627\u0644\u0627\u0646\u0635\u0631\u0627\u0641",icon:(0,Qe.jsx)(zt,{}),path:"/hr/attendance"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0627\u062a",icon:(0,Qe.jsx)(yt,{}),path:"/hr/leaves"},{title:"\u0627\u0644\u0631\u0648\u0627\u062a\u0628",icon:(0,Qe.jsx)(hs,{}),path:"/hr/payroll"}]},{id:"production",title:"\u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",icon:(0,Qe.jsx)(is,{}),color:"from-orange-500 to-red-600",subItems:[{title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629",icon:(0,Qe.jsx)(Es,{}),path:"/production/dashboard"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",icon:(0,Qe.jsx)(Tt,{}),path:"/production/orders"},{title:"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",icon:(0,Qe.jsx)(At,{}),path:"/production/planning"},{title:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645",icon:(0,Qe.jsx)(bt,{}),path:"/production/materials"},{title:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u062c\u0648\u062f\u0629",icon:(0,Qe.jsx)(_t,{}),path:"/production/quality"}]},{id:"fixed-assets",title:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629",icon:(0,Qe.jsx)(vt,{}),color:"from-indigo-500 to-indigo-600",subItems:[{title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:(0,Qe.jsx)(Es,{}),path:"/fixed-assets/dashboard"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0635\u0648\u0644",icon:(0,Qe.jsx)(bt,{}),path:"/fixed-assets/management"},{title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643",icon:(0,Qe.jsx)(It,{}),path:"/fixed-assets/depreciation"},{title:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0635\u064a\u0627\u0646\u0629",icon:(0,Qe.jsx)(zt,{}),path:"/fixed-assets/maintenance"},{title:"\u062c\u0631\u062f \u0648\u062a\u0642\u064a\u064a\u0645",icon:(0,Qe.jsx)(xs,{}),path:"/fixed-assets/inventory"},{title:"\u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644",icon:(0,Qe.jsx)(Wt,{}),path:"/fixed-assets/disposal"}]},{id:"reports",title:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",icon:(0,Qe.jsx)(Tt,{}),color:"from-teal-500 to-teal-600",subItems:[{title:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:(0,Qe.jsx)(bt,{}),path:"/reports/inventory"},{title:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0645\u0646\u062e\u0641\u0636",icon:(0,Qe.jsx)(It,{}),path:"/reports/low-stock"},{title:"\u062d\u0631\u0643\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",icon:(0,Qe.jsx)(Wt,{}),path:"/reports/product-movement"},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:(0,Qe.jsx)(Ct,{}),path:"/reports/sales"},{title:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{}),path:"/reports/sales-by-customer"},{title:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0623\u0643\u062b\u0631 \u0645\u0628\u064a\u0639\u0627\u064b",icon:(0,Qe.jsx)(Dt,{}),path:"/reports/top-selling"},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)(Is,{}),path:"/reports/purchases"},{title:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(Fs,{}),path:"/reports/purchases-by-supplier"},{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)(hs,{}),path:"/reports/treasury"},{title:"\u0627\u0644\u062a\u062f\u0641\u0642 \u0627\u0644\u0646\u0642\u062f\u064a",icon:(0,Qe.jsx)(kt,{}),path:"/reports/cash-flow"},{title:"\u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631",icon:(0,Qe.jsx)(Bt,{}),path:"/reports/profit-loss"}]},{id:"adjustments",title:"\u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a",icon:(0,Qe.jsx)(zs,{}),color:"from-amber-500 to-amber-600",subItems:[{title:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a",icon:(0,Qe.jsx)(bt,{}),path:"/adjustments/quantity"},{title:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629",icon:(0,Qe.jsx)(Bt,{}),path:"/adjustments/value"},{title:"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641",icon:(0,Qe.jsx)(Xt,{}),path:"/adjustments/damaged"},{title:"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{}),path:"/adjustments/customer-balance"},{title:"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(Fs,{}),path:"/adjustments/supplier-balance"},{title:"\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)(hs,{}),path:"/adjustments/treasury"},{title:"\u0642\u064a\u0648\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629",icon:(0,Qe.jsx)(Zt,{}),path:"/adjustments/entries"},{title:"\u0633\u062c\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a",icon:(0,Qe.jsx)(xs,{}),path:"/adjustments/history"}]},{id:"notifications",title:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a",icon:(0,Qe.jsx)(pt,{}),path:"/notifications",color:"from-red-500 to-red-600"},{id:"integrations",title:"\u0627\u0644\u0631\u0628\u0637",icon:(0,Qe.jsx)(ds,{}),color:"from-indigo-500 to-indigo-600",subItems:[{title:"\u0645\u0646\u0635\u0627\u062a \u062e\u0627\u0631\u062c\u064a\u0629",icon:(0,Qe.jsx)(vt,{}),path:"/integrations/external-platforms"},{title:"\u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644",icon:(0,Qe.jsx)(ct,{}),path:"/integrations/whatsapp-business"}]},...n()?[{id:"settings",title:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a",icon:(0,Qe.jsx)(Ot,{}),color:"from-gray-500 to-gray-600",subItems:[{title:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645",icon:(0,Qe.jsx)(Bs,{}),path:"/settings/add-user"},{title:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a",icon:(0,Qe.jsx)(Ot,{}),path:"/settings/permissions"},{title:"\u062e\u062f\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{}),path:"/settings/support"},{title:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645",icon:(0,Qe.jsx)(Ot,{}),path:"/settings/system"}]}]:[]],u=t||o;return(0,Qe.jsxs)(Qe.Fragment,{children:[t&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:s}),(0,Qe.jsxs)("aside",{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),className:"\n          fixed z-40 transition-all duration-300 overflow-hidden\n          bg-white/95 backdrop-blur-md border-l border-orange-100/50 shadow-lg\n          top-[40px] h-[calc(100vh-40px)]\n          ".concat(u?"w-56":"w-14","\n          ").concat(t?"translate-x-0":"translate-x-full lg:translate-x-0","\n        "),style:{right:0},children:[(0,Qe.jsx)("nav",{className:"h-full overflow-y-auto py-2 px-1.5",children:x.map(e=>(0,Qe.jsx)("div",{className:"mb-1",children:e.subItems?(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("button",{onClick:()=>{return t=e.id,void i(l===t?null:t);var t},className:"\n                      w-full flex items-center gap-2.5 px-2 py-2 rounded-lg transition-all group relative\n                      ".concat(d(e)?"bg-gradient-to-r from-orange-500 to-orange-600 shadow-md":l===e.id?"bg-orange-50":"hover:bg-orange-50","\n                    "),title:u?"":e.title,children:[(0,Qe.jsx)("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0 ".concat(d(e)?"bg-white/20 text-white":"bg-gradient-to-br ".concat(e.color," text-white shadow-sm")),children:(0,Qe.jsx)("span",{className:"text-sm",children:e.icon})}),u&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("span",{className:"flex-1 text-xs font-semibold text-right truncate ".concat(d(e)?"text-white":"text-gray-700"),children:e.title}),(0,Qe.jsx)(Pt,{className:"text-xs transition-transform ".concat(d(e)?"text-white/80":"text-gray-400"," ").concat(l===e.id?"rotate-90":"")})]})]}),l===e.id&&u&&(0,Qe.jsx)("div",{className:"mr-4 mt-1 space-y-0.5 pr-2 border-r-2 border-orange-200",children:e.subItems.map((e,t)=>(0,Qe.jsxs)(Pe,{to:e.path,onClick:()=>{window.innerWidth<1024&&s()},className:e=>{let{isActive:t}=e;return"flex items-center gap-2.5 px-2 py-2 rounded-lg transition-all ".concat(t?"bg-gradient-to-r from-orange-500 to-orange-600 text-white shadow-sm":"text-gray-600 hover:bg-orange-50 hover:text-orange-600")},children:[(0,Qe.jsx)("span",{className:"text-xs flex-shrink-0",children:e.icon}),(0,Qe.jsx)("span",{className:"truncate font-medium text-xs",children:e.title})]},t))})]}):(0,Qe.jsx)(Pe,{to:e.path,onClick:()=>{window.innerWidth<1024&&s()},className:e=>{let{isActive:t}=e;return"flex items-center gap-2.5 px-2 py-2 rounded-lg transition-all group ".concat(t?"bg-gradient-to-r from-orange-500 to-orange-600 shadow-md":"hover:bg-orange-50")},title:u?"":e.title,children:t=>{let{isActive:s}=t;return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("div",{className:"w-7 h-7 rounded-lg flex items-center justify-center flex-shrink-0 ".concat(s?"bg-white/20 text-white":"bg-gradient-to-br ".concat(e.color," text-white shadow-sm")),children:(0,Qe.jsx)("span",{className:"text-sm",children:e.icon})}),u&&(0,Qe.jsx)("span",{className:"flex-1 text-xs font-semibold text-right truncate ".concat(s?"text-white":"text-gray-700"),children:e.title})]})}})},e.id))}),!u&&(0,Qe.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-12 bg-gradient-to-b from-orange-400 to-orange-600 rounded-r-full opacity-50"})]})]})},Zs=()=>{const e=(new Date).getFullYear();return(0,Qe.jsx)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-8",children:(0,Qe.jsx)("div",{className:"container mx-auto px-4",children:(0,Qe.jsxs)("div",{className:"text-center text-gray-600 text-sm",children:[(0,Qe.jsxs)("p",{children:["\u062a\u0645 \u0627\u0644\u062a\u0637\u0648\u064a\u0631 \u0628\u0648\u0627\u0633\u0637\u0629 ",(0,Qe.jsx)("span",{className:"font-semibold text-blue-600",children:"Biruni Soft"})]}),(0,Qe.jsxs)("p",{className:"mt-1",children:["\xa9 ",e," Biruni Soft. \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629."]})]})})})},ea=()=>{const[e,t]=(0,r.useState)({company:{name:"Bero System",address:"",phone:"",email:"",tax:"",logo:""},general:{currency:"EGP",language:"ar",timezone:"Africa/Cairo",dateFormat:"DD/MM/YYYY",theme:"light",autoSave:!0,notifications:!0,soundEnabled:!0},invoices:{prefix:"INV",startNumber:"1000",footerText:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627",showCompanyLogo:!0,showTaxNumber:!0,autoCalculateTax:!0,taxRate:"0",pdfQuality:"high",defaultPaymentTerms:"30 \u064a\u0648\u0645",allowPartialPayments:!0,requireCustomerInfo:!0},security:{sessionTimeout:"30",requirePasswordChange:!1,passwordMinLength:"6",passwordRequireSpecial:!1,passwordRequireNumbers:!1,passwordRequireUppercase:!1,enableTwoFactor:!1,enableAuditLog:!0,maxLoginAttempts:"5",accountLockoutDuration:"15"},backup:{autoBackup:!1,frequency:"daily",time:"00:00",retentionDays:"30",lastBackup:null,backupLocation:"local",compressBackup:!0,includeImages:!0},notifications:{emailNotifications:!1,lowStockAlerts:!0,overduePayments:!0,systemUpdates:!0,dailyReports:!0,email:"",smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:""},reports:{defaultDateRange:"30",includeSubCategories:!0,includeZeroValues:!1,showPercentages:!0,groupByMonth:!1,defaultChartType:"bar",autoRefresh:!1,refreshInterval:"60"},inventory:{enableBarcodeScanning:!0,defaultWarehouse:null,lowStockThreshold:"10",enableBatchTracking:!1,enableExpiryTracking:!1,autoGenerateProductCodes:!0,allowNegativeStock:!1,roundToNearest:"1"},contacts:{requireCustomerApproval:!1,allowCustomerSelfRegistration:!1,defaultCreditLimit:"0",enableCreditLimit:!1,paymentTermsDays:"30",enableSupplierPortal:!1,requireSupplierApproval:!1},ui:{compactMode:!1,showQuickActions:!0,showSearchBar:!0,enableAnimations:!0,defaultPageSize:"25",enableDarkMode:!1,sidebarCollapsed:!1,showTooltips:!0,enableKeyboardShortcuts:!1},developer:{enableDebugMode:!1,showConsoleLogs:!1,enableApiLogging:!1,testMode:!1,mockData:!1}}),[s,a]=(0,r.useState)(!0),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),{user:c}=We();function d(){try{const e=localStorage.getItem("bero_system_settings");if(e){const t=JSON.parse(e);return x({company:{name:"Bero System",address:"",phone:"",email:"",tax:"",logo:""},general:{currency:"EGP",language:"ar",timezone:"Africa/Cairo",dateFormat:"DD/MM/YYYY",theme:"light",autoSave:!0,notifications:!0,soundEnabled:!0},invoices:{prefix:"INV",startNumber:"1000",footerText:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627",showCompanyLogo:!0,showTaxNumber:!0,autoCalculateTax:!0,taxRate:"0",pdfQuality:"high",defaultPaymentTerms:"30 \u064a\u0648\u0645",allowPartialPayments:!0,requireCustomerInfo:!0},security:{sessionTimeout:"30",requirePasswordChange:!1,passwordMinLength:"6",passwordRequireSpecial:!1,passwordRequireNumbers:!1,passwordRequireUppercase:!1,enableTwoFactor:!1,enableAuditLog:!0,maxLoginAttempts:"5",accountLockoutDuration:"15"},backup:{autoBackup:!1,frequency:"daily",time:"00:00",retentionDays:"30",lastBackup:null,backupLocation:"local",compressBackup:!0,includeImages:!0},notifications:{emailNotifications:!1,lowStockAlerts:!0,overduePayments:!0,systemUpdates:!0,dailyReports:!0,email:"",smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:""},reports:{defaultDateRange:"30",includeSubCategories:!0,includeZeroValues:!1,showPercentages:!0,groupByMonth:!1,defaultChartType:"bar",autoRefresh:!1,refreshInterval:"60"},inventory:{enableBarcodeScanning:!0,defaultWarehouse:null,lowStockThreshold:"10",enableBatchTracking:!1,enableExpiryTracking:!1,autoGenerateProductCodes:!0,allowNegativeStock:!1,roundToNearest:"1"},contacts:{requireCustomerApproval:!1,allowCustomerSelfRegistration:!1,defaultCreditLimit:"0",enableCreditLimit:!1,paymentTermsDays:"30",enableSupplierPortal:!1,requireSupplierApproval:!1},ui:{compactMode:!1,showQuickActions:!0,showSearchBar:!0,enableAnimations:!0,defaultPageSize:"25",enableDarkMode:!1,sidebarCollapsed:!1,showTooltips:!0,enableKeyboardShortcuts:!1},developer:{enableDebugMode:!1,showConsoleLogs:!1,enableApiLogging:!1,testMode:!1,mockData:!1}},t)}}catch(e){console.error("Error loading settings:",e),N("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error")}return{company:{name:"Bero System",address:"",phone:"",email:"",tax:"",logo:""},general:{currency:"EGP",language:"ar",timezone:"Africa/Cairo",dateFormat:"DD/MM/YYYY",theme:"light",autoSave:!0,notifications:!0,soundEnabled:!0},invoices:{prefix:"INV",startNumber:"1000",footerText:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627",showCompanyLogo:!0,showTaxNumber:!0,autoCalculateTax:!0,taxRate:"0",pdfQuality:"high",defaultPaymentTerms:"30 \u064a\u0648\u0645",allowPartialPayments:!0,requireCustomerInfo:!0},security:{sessionTimeout:"30",requirePasswordChange:!1,passwordMinLength:"6",passwordRequireSpecial:!1,passwordRequireNumbers:!1,passwordRequireUppercase:!1,enableTwoFactor:!1,enableAuditLog:!0,maxLoginAttempts:"5",accountLockoutDuration:"15"},backup:{autoBackup:!1,frequency:"daily",time:"00:00",retentionDays:"30",lastBackup:null,backupLocation:"local",compressBackup:!0,includeImages:!0},notifications:{emailNotifications:!1,lowStockAlerts:!0,overduePayments:!0,systemUpdates:!0,dailyReports:!0,email:"",smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:""},reports:{defaultDateRange:"30",includeSubCategories:!0,includeZeroValues:!1,showPercentages:!0,groupByMonth:!1,defaultChartType:"bar",autoRefresh:!1,refreshInterval:"60"},inventory:{enableBarcodeScanning:!0,defaultWarehouse:null,lowStockThreshold:"10",enableBatchTracking:!1,enableExpiryTracking:!1,autoGenerateProductCodes:!0,allowNegativeStock:!1,roundToNearest:"1"},contacts:{requireCustomerApproval:!1,allowCustomerSelfRegistration:!1,defaultCreditLimit:"0",enableCreditLimit:!1,paymentTermsDays:"30",enableSupplierPortal:!1,requireSupplierApproval:!1},ui:{compactMode:!1,showQuickActions:!0,showSearchBar:!0,enableAnimations:!0,defaultPageSize:"25",enableDarkMode:!1,sidebarCollapsed:!1,showTooltips:!0,enableKeyboardShortcuts:!1},developer:{enableDebugMode:!1,showConsoleLogs:!1,enableApiLogging:!1,testMode:!1,mockData:!1}}}function x(e,t){const s=Be({},e);return Object.keys(e).forEach(a=>{t[a]&&"object"===typeof e[a]&&!Array.isArray(e[a])?s[a]=Be(Be({},e[a]),t[a]):void 0!==t[a]&&(s[a]=t[a])}),s}(0,r.useEffect)(()=>{u()},[]),(0,r.useEffect)(()=>{const e=e=>{if("bero_system_settings"===e.key){const e=d();t(e),l(!1)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]);const u=(0,r.useCallback)(()=>{const e=d();t(e),a(!1);const s=localStorage.getItem("bero_system_settings_last_saved");s&&o(new Date(s))},[]),m=(0,r.useCallback)(async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;if(!v())return N("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error"),!1;try{return a(!0),localStorage.setItem("bero_system_settings",JSON.stringify(s)),localStorage.setItem("bero_system_settings_last_saved",(new Date).toISOString()),localStorage.setItem("bero_system_settings_editor",JSON.stringify({userId:null===c||void 0===c?void 0:c.id,username:null===c||void 0===c?void 0:c.username,timestamp:(new Date).toISOString()})),t(s),l(!1),o(new Date),a(!1),N("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0628\u0646\u062c\u0627\u062d","success"),!0}catch(r){return console.error("Error saving settings:",r),N("\u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error"),a(!1),!1}},[e,c,n]),h=(0,r.useCallback)((s,a,r)=>{const n=Be(Be({},e),{},{[s]:Be(Be({},e[s]),{},{[a]:r})});t(n),l(!0),e.general.autoSave&&setTimeout(()=>m(n),1e3)},[e,m]),p=(0,r.useCallback)(s=>{const a=Be({},e);Object.keys(s).forEach(e=>{a[e]&&(a[e]=Be(Be({},a[e]),s[e]))}),t(a),l(!0),e.general.autoSave&&setTimeout(()=>m(a),1e3)},[e,m]),g=(0,r.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!v())return N("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error"),!1;const a={company:{name:"Bero System",address:"",phone:"",email:"",tax:"",logo:""},general:{currency:"EGP",language:"ar",timezone:"Africa/Cairo",dateFormat:"DD/MM/YYYY",theme:"light",autoSave:!0,notifications:!0,soundEnabled:!0},invoices:{prefix:"INV",startNumber:"1000",footerText:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627",showCompanyLogo:!0,showTaxNumber:!0,autoCalculateTax:!0,taxRate:"0",pdfQuality:"high",defaultPaymentTerms:"30 \u064a\u0648\u0645",allowPartialPayments:!0,requireCustomerInfo:!0},security:{sessionTimeout:"30",requirePasswordChange:!1,passwordMinLength:"6",passwordRequireSpecial:!1,passwordRequireNumbers:!1,passwordRequireUppercase:!1,enableTwoFactor:!1,enableAuditLog:!0,maxLoginAttempts:"5",accountLockoutDuration:"15"},backup:{autoBackup:!1,frequency:"daily",time:"00:00",retentionDays:"30",lastBackup:null,backupLocation:"local",compressBackup:!0,includeImages:!0},notifications:{emailNotifications:!1,lowStockAlerts:!0,overduePayments:!0,systemUpdates:!0,dailyReports:!0,email:"",smtpServer:"",smtpPort:"587",smtpUsername:"",smtpPassword:""},reports:{defaultDateRange:"30",includeSubCategories:!0,includeZeroValues:!1,showPercentages:!0,groupByMonth:!1,defaultChartType:"bar",autoRefresh:!1,refreshInterval:"60"},inventory:{enableBarcodeScanning:!0,defaultWarehouse:null,lowStockThreshold:"10",enableBatchTracking:!1,enableExpiryTracking:!1,autoGenerateProductCodes:!0,allowNegativeStock:!1,roundToNearest:"1"},contacts:{requireCustomerApproval:!1,allowCustomerSelfRegistration:!1,defaultCreditLimit:"0",enableCreditLimit:!1,paymentTermsDays:"30",enableSupplierPortal:!1,requireSupplierApproval:!1},ui:{compactMode:!1,showQuickActions:!0,showSearchBar:!0,enableAnimations:!0,defaultPageSize:"25",enableDarkMode:!1,sidebarCollapsed:!1,showTooltips:!0,enableKeyboardShortcuts:!1},developer:{enableDebugMode:!1,showConsoleLogs:!1,enableApiLogging:!1,testMode:!1,mockData:!1}};if(s){const r=Be(Be({},e),{},{[s]:a[s]});t(r),l(!0),N("\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a ".concat(s),"info")}else t(a),l(!0),N("\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u062c\u0645\u064a\u0639 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","info");return!0},[e,c]),f=(0,r.useCallback)(()=>{try{const t={settings:e,exportedBy:(null===c||void 0===c?void 0:c.username)||"unknown",exportedAt:(new Date).toISOString(),version:"1.0"},s=JSON.stringify(t,null,2),a=new Blob([s],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="bero-system-settings-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),N("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0628\u0646\u062c\u0627\u062d","success")}catch(t){console.error("Error exporting settings:",t),N("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error")}},[e,c]),b=(0,r.useCallback)(async s=>{if(!v())return N("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a","error"),!1;try{const a=await s.text(),r=JSON.parse(a);if(r.settings){const s=x(e,r.settings);return t(s),l(!0),N("\u062a\u0645 \u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0628\u0646\u062c\u0627\u062d","success"),!0}throw new Error("\u0645\u0644\u0641 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")}catch(a){return console.error("Error importing settings:",a),N("\u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a: "+a.message,"error"),!1}},[e,c]),v=(0,r.useCallback)(()=>!!c&&("admin"===c.role||"manager"===c.role),[c]),j=(0,r.useCallback)(t=>e[t]||{},[e]),y=(0,r.useCallback)(t=>{const s={barcode_scanning:"inventory.enableBarcodeScanning",batch_tracking:"inventory.enableBatchTracking",expiry_tracking:"inventory.enableExpiryTracking",audit_log:"security.enableAuditLog",two_factor:"security.enableTwoFactor",email_notifications:"notifications.emailNotifications",low_stock_alerts:"notifications.lowStockAlerts",auto_backup:"backup.autoBackup",customer_self_registration:"contacts.allowCustomerSelfRegistration"}[t];if(!s)return!1;const a=s.split(".");let r=e;for(const e of a){if(!r||"object"!==typeof r)return!1;r=r[e]}return Boolean(r)},[e]),N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";try{const s=new CustomEvent("systemNotification",{detail:{message:e,type:t}});window.dispatchEvent(s)}catch(s){console.log("System Notification [".concat(t,"]: ").concat(e))}};return{settings:e,loading:s,hasChanges:n,lastSaved:i,saveSettings:m,updateSettings:h,updateMultipleSettings:p,resetSettings:g,loadSettings:u,exportSettings:f,importSettings:b,getSectionSettings:j,isFeatureEnabled:y,hasPermissionToEdit:v,currentUser:c,settingsVersion:"1.0",canEdit:v(),isAutoSaveEnabled:e.general.autoSave,companyName:e.company.name,currency:e.general.currency,language:e.general.language,theme:e.general.theme}},ta=e=>{let{message:t="\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...",fullScreen:s=!1,size:a="md",variant:r="modern",color:n="primary",withBackground:l=!0}=e;const i={sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"},o=s?"fixed inset-0 ".concat(l?"bg-white bg-opacity-95 backdrop-blur-sm":""," flex items-center justify-center z-[9998]"):"flex items-center justify-center py-12";return(0,Qe.jsx)("div",{className:o,children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"flex justify-center mb-4 ".concat({primary:"text-blue-600 border-blue-600",success:"text-green-600 border-green-600",warning:"text-yellow-600 border-yellow-600",danger:"text-red-600 border-red-600",gradient:"text-gradient-to-r from-blue-500 to-purple-600 border-blue-500"}[n]),children:(()=>{switch(r){case"dots":return(0,Qe.jsx)("div",{className:"flex space-x-2 space-x-reverse",children:[0,1,2].map(e=>(0,Qe.jsx)("div",{className:"".concat(i[a]," rounded-full bg-current animate-bounce"),style:{animationDelay:"".concat(.1*e,"s")}},e))});case"pulse":return(0,Qe.jsxs)("div",{className:"".concat(i[a]," relative"),children:[(0,Qe.jsx)("div",{className:"absolute inset-0 rounded-full bg-current animate-ping opacity-75"}),(0,Qe.jsx)("div",{className:"absolute inset-0 rounded-full bg-current"})]});case"bars":return(0,Qe.jsx)("div",{className:"flex space-x-1 space-x-reverse items-end h-6",children:[0,1,2,3,4].map(e=>(0,Qe.jsx)("div",{className:"w-1 bg-current animate-wave",style:{height:"".concat(20*(e+1),"%"),animationDelay:"".concat(.1*e,"s"),animationDuration:"0.8s"}},e))});case"modern":return(0,Qe.jsxs)("div",{className:"".concat(i[a]," relative"),children:[(0,Qe.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-current border-t-transparent animate-spin"}),(0,Qe.jsx)("div",{className:"absolute inset-2 rounded-full border-2 border-current border-b-transparent animate-spin-reverse"}),(0,Qe.jsx)("div",{className:"absolute inset-4 rounded-full bg-current animate-pulse"})]});default:return(0,Qe.jsxs)("div",{className:"".concat(i[a]," relative"),children:[(0,Qe.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-gray-200"}),(0,Qe.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-current border-t-transparent animate-spin"})]})}})()}),t&&(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("p",{className:"text-gray-700 font-medium text-lg animate-pulse",children:t}),(0,Qe.jsx)("div",{className:"mt-2 w-32 h-1 bg-gray-200 rounded-full overflow-hidden mx-auto",children:(0,Qe.jsx)("div",{className:"h-full bg-current animate-progress"})})]})]})})};const sa=()=>{const e=ee(),{warehouses:t,products:s,suppliers:a,customers:r,purchaseInvoices:n,salesInvoices:l,treasuryBalance:i}=Ye(),o=s.length,c=t.length,d=a.length,x=r.length,u=n.length,m=l.length,h=s.filter(e=>(e.mainQuantity||0)<10).length,p=s.filter(e=>(e.mainQuantity||0)<0).length,g=s.filter(e=>0===(e.mainQuantity||0)).length,f=(s.reduce((e,t)=>e+(t.mainPrice||0)*(t.mainQuantity||0),0),l.reduce((e,t)=>e+(t.total||0),0),n.reduce((e,t)=>e+(t.total||0),0),new Date),b=f.getMonth(),v=f.getFullYear(),j=(l.filter(e=>{const t=new Date(e.date);return t.getMonth()===b&&t.getFullYear()===v}).reduce((e,t)=>e+(t.total||0),0),n.filter(e=>{const t=new Date(e.date);return t.getMonth()===b&&t.getFullYear()===v}).reduce((e,t)=>e+(t.total||0),0),[{title:"\u0627\u0644\u0645\u062e\u0627\u0632\u0646",description:"\u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u0644\u0645\u062e\u0627\u0632\u0646 \u0648\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0648\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:(0,Qe.jsx)(Xs,{}),gradient:"from-orange-400 to-orange-600",bgGradient:"from-orange-50 to-orange-100",stats:{label:"\u0639\u062f\u062f \u0627\u0644\u0645\u062e\u0627\u0632\u0646",value:c,subLabel:"".concat(o," \u0645\u0646\u062a\u062c")},tasks:["\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646","\u0625\u0636\u0627\u0641\u0629 \u0648\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a","\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646","\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u062c\u0631\u062f"],path:"/warehouses/manage"},{title:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",description:"\u0625\u062f\u0627\u0631\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0648\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a",icon:(0,Qe.jsx)(Ws,{}),gradient:"from-blue-400 to-blue-600",bgGradient:"from-blue-50 to-blue-100",stats:{label:"\u0639\u062f\u062f \u0627\u0644\u0639\u0645\u0644\u0627\u0621",value:x,subLabel:"\u0639\u0645\u064a\u0644 \u0646\u0634\u0637"},tasks:["\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u0644\u0627\u0621 \u062c\u062f\u062f","\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621","\u0639\u0631\u0636 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621","\u0633\u062c\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"],path:"/customers/manage"},{title:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",description:"\u0625\u062f\u0627\u0631\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646 \u0648\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)(Fs,{}),gradient:"from-purple-400 to-purple-600",bgGradient:"from-purple-50 to-purple-100",stats:{label:"\u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",value:d,subLabel:"\u0645\u0648\u0631\u062f \u0646\u0634\u0637"},tasks:["\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f\u064a\u0646 \u062c\u062f\u062f","\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","\u0639\u0631\u0636 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646","\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"],path:"/suppliers/manage"},{title:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",description:"\u0625\u0646\u0634\u0627\u0621 \u0648\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0648\u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a",icon:(0,Qe.jsx)(Zt,{}),gradient:"from-green-400 to-green-600",bgGradient:"from-green-50 to-green-100",stats:{label:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:m,subLabel:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a"},tasks:["\u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"],path:"/sales/invoices"},{title:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",description:"\u0625\u0646\u0634\u0627\u0621 \u0648\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0648\u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a",icon:(0,Qe.jsx)(Is,{}),gradient:"from-indigo-400 to-indigo-600",bgGradient:"from-indigo-50 to-indigo-100",stats:{label:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",value:u,subLabel:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a"},tasks:["\u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"],path:"/purchases/invoices"},{title:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a",description:"\u0625\u062f\u0627\u0631\u0629 \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0648\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)(Rs,{}),gradient:"from-red-400 to-red-600",bgGradient:"from-red-50 to-red-100",stats:{label:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a",value:"0",subLabel:"\u0645\u0631\u062a\u062c\u0639"},tasks:["\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a","\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a"],path:"/sales/returns"},{title:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",description:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062d\u0631\u0643\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0648\u0627\u0644\u0623\u0631\u0635\u062f\u0629",icon:(0,Qe.jsx)(Us,{}),gradient:"from-yellow-400 to-yellow-600",bgGradient:"from-yellow-50 to-yellow-100",stats:{label:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629",value:"\u2022\u2022\u2022\u2022\u2022\u2022",subLabel:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0633\u0631\u064a\u0629"},tasks:["\u0625\u0630\u0646 \u0627\u0633\u062a\u0644\u0627\u0645 \u0646\u0642\u062f\u064a","\u0625\u0630\u0646 \u0635\u0631\u0641 \u0646\u0642\u062f\u064a\u0629","\u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629","\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0648\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"],path:"/treasury/movement"},{title:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",description:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0634\u0627\u0645\u0644\u0629 \u0639\u0646 \u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645",icon:(0,Qe.jsx)(Tt,{}),gradient:"from-teal-400 to-teal-600",bgGradient:"from-teal-50 to-teal-100",stats:{label:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062a\u0627\u062d\u0629",value:"11",subLabel:"\u062a\u0642\u0631\u064a\u0631"},tasks:["\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0648\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u0627\u0644\u062d\u0631\u0643\u0629","\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0648\u0627\u0644\u062e\u0632\u064a\u0646\u0629","\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0648\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"],path:"/reports/inventory"}]);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"mb-8",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-orange-600 via-orange-500 to-yellow-500 bg-clip-text text-transparent",children:"\u0646\u0638\u0627\u0645 Bero \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),(0,Qe.jsx)("p",{className:"text-gray-600 mt-3 text-xl",children:"\u0646\u0638\u0627\u0645 \u0645\u062a\u0643\u0627\u0645\u0644 \u0644\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0645\u062e\u0627\u0632\u0646 \u0648\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0648\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"})]}),p>0&&(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-red-600 to-red-700 text-white rounded-2xl p-5 mb-4 flex items-center justify-between shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 p-3 rounded-xl",children:(0,Qe.jsx)(Xt,{className:"text-3xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-bold text-lg",children:"\ud83d\udea8 \u062e\u0637\u0623 \u062d\u0631\u062c: \u0643\u0645\u064a\u0640\u0627\u062a \u0633\u0627\u0644\u0628\u0629"}),(0,Qe.jsxs)("p",{className:"text-sm opacity-90",children:["\u064a\u0648\u062c\u062f ",p," \u0645\u0646\u062a\u062c \u0628\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629 - \u064a\u062a\u0637\u0644\u0628 \u0625\u0635\u0644\u0627\u062d \u0641\u0648\u0631\u064a"]})]})]}),(0,Qe.jsx)("div",{className:"flex gap-3",children:(0,Qe.jsxs)("button",{onClick:()=>e("/tools/fix-negative-quantities"),className:"bg-orange-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-orange-600 transition-all flex items-center gap-2",children:[(0,Qe.jsx)(zs,{}),(0,Qe.jsx)("span",{children:"\u0623\u062f\u0627\u0629 \u0627\u0644\u0625\u0635\u0644\u0627\u062d"}),(0,Qe.jsx)(xt,{})]})})]}),h>0&&(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-2xl p-5 mb-4 flex items-center justify-between shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 p-3 rounded-xl",children:(0,Qe.jsx)(ft,{className:"text-3xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-bold text-lg",children:"\u26a0\ufe0f \u062a\u0646\u0628\u064a\u0647: \u0645\u062e\u0632\u0648\u0646 \u0645\u0646\u062e\u0641\u0636"}),(0,Qe.jsxs)("p",{className:"text-sm opacity-90",children:["\u064a\u0648\u062c\u062f ",h," \u0645\u0646\u062a\u062c \u064a\u062d\u062a\u0627\u062c \u0625\u0639\u0627\u062f\u0629 \u062a\u0648\u0641\u064a\u0631"]})]})]}),(0,Qe.jsxs)("button",{onClick:()=>e("/reports/low-stock"),className:"bg-white text-orange-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all flex items-center gap-2",children:[(0,Qe.jsx)("span",{children:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0631\u064a\u0631"}),(0,Qe.jsx)(xt,{})]})]}),g>0&&(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white rounded-2xl p-5 mb-6 flex items-center justify-between shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 p-3 rounded-xl",children:(0,Qe.jsx)(Xt,{className:"text-3xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-bold text-lg",children:"\u26a1 \u062a\u0646\u0628\u064a\u0647: \u0646\u0641\u0627\u062f \u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsxs)("p",{className:"text-sm opacity-90",children:["\u064a\u0648\u062c\u062f ",g," \u0645\u0646\u062a\u062c \u0646\u0641\u062f \u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"]})]})]}),(0,Qe.jsxs)("button",{onClick:()=>e("/warehouses/inventory"),className:"bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-all flex items-center gap-2",children:[(0,Qe.jsx)("span",{children:"\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)(xt,{})]})]})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:j.map((t,s)=>(0,Qe.jsx)("div",{onClick:()=>e(t.path),className:"group cursor-pointer",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border-2 border-transparent hover:border-gray-200 h-full flex flex-col",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-r ".concat(t.gradient," p-6 text-white relative overflow-hidden"),children:[(0,Qe.jsx)("div",{className:"absolute top-0 left-0 w-32 h-32 bg-white opacity-10 rounded-full -ml-16 -mt-16"}),(0,Qe.jsx)("div",{className:"absolute bottom-0 right-0 w-24 h-24 bg-white opacity-10 rounded-full -mr-12 -mb-12"}),(0,Qe.jsxs)("div",{className:"relative flex items-center justify-between mb-4",children:[(0,Qe.jsx)("div",{className:"text-5xl opacity-90",children:t.icon}),(0,Qe.jsx)(xt,{className:"text-xl opacity-0 group-hover:opacity-100 group-hover:-translate-x-2 transition-all"})]}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold mb-2",children:t.title}),(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:t.description})]}),(0,Qe.jsx)("div",{className:"bg-gradient-to-br ".concat(t.bgGradient," p-4 border-b-2 border-gray-100"),children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 font-semibold",children:t.stats.label}),(0,Qe.jsx)("p",{className:"text-3xl font-bold bg-gradient-to-r ${module.gradient} bg-clip-text text-transparent",children:t.stats.value})]}),(0,Qe.jsx)("div",{className:"text-left",children:(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:t.stats.subLabel})})]})}),(0,Qe.jsxs)("div",{className:"p-5 flex-1 bg-gray-50",children:[(0,Qe.jsx)("p",{className:"text-xs font-bold text-gray-700 mb-3 uppercase tracking-wide",children:"\u0627\u0644\u0645\u0647\u0627\u0645 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629:"}),(0,Qe.jsx)("ul",{className:"space-y-2",children:t.tasks.map((e,s)=>(0,Qe.jsxs)("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[(0,Qe.jsx)("span",{className:"bg-gradient-to-br ".concat(t.gradient," w-1.5 h-1.5 rounded-full mt-1.5 flex-shrink-0")}),(0,Qe.jsx)("span",{children:e})]},s))})]}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r ".concat(t.gradient," h-1.5")})]})},s))})]})},aa=e=>{let{title:t,children:s,icon:a=null,className:r="",headerAction:n=null,footer:l=null,variant:i="default"}=e;return(0,Qe.jsxs)("div",{className:"".concat({default:"card",glass:"glass-card rounded-2xl p-6 transition-all duration-300 hover:shadow-2xl",gradient:"rounded-2xl p-6 transition-all duration-300 hover:shadow-2xl gradient-orange-soft border border-orange-200"}[i]," ").concat(r),children:[(t||a||n)&&(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6 pb-4 border-b-2 border-orange-100",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,Qe.jsx)("div",{className:"text-orange-600 text-3xl p-2 bg-orange-50 rounded-xl",children:a}),t&&(0,Qe.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-orange-600 to-orange-500 bg-clip-text text-transparent",children:t})]}),n&&(0,Qe.jsx)("div",{children:n})]}),(0,Qe.jsx)("div",{className:"card-content",children:s}),l&&(0,Qe.jsx)("div",{className:"mt-6 pt-4 border-t-2 border-orange-100",children:l})]})},ra=e=>{let{children:t,onClick:s,type:a="button",variant:r="primary",size:n="md",disabled:l=!1,fullWidth:i=!1,className:o="",icon:c=null}=e;const d=i?"w-full":"";return(0,Qe.jsxs)("button",{type:a,onClick:s,disabled:l,className:"".concat("inline-flex items-center justify-center gap-2 font-semibold rounded-xl transition-all duration-300 focus:outline-none focus:ring-4"," ").concat({primary:"bg-gradient-to-r from-orange-500 to-orange-600 text-white hover:from-orange-600 hover:to-orange-700 focus:ring-orange-200 shadow-lg hover:shadow-xl disabled:from-orange-300 disabled:to-orange-300",secondary:"bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 focus:ring-gray-200 shadow-lg hover:shadow-xl disabled:from-gray-300 disabled:to-gray-300",success:"bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 focus:ring-green-200 shadow-lg hover:shadow-xl disabled:from-green-300 disabled:to-green-300",danger:"bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 focus:ring-red-200 shadow-lg hover:shadow-xl disabled:from-red-300 disabled:to-red-300",warning:"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white hover:from-yellow-600 hover:to-yellow-700 focus:ring-yellow-200 shadow-lg hover:shadow-xl disabled:from-yellow-300 disabled:to-yellow-300",outline:"border-2 border-orange-500 text-orange-600 hover:bg-orange-50 focus:ring-orange-200 disabled:border-orange-300 disabled:text-orange-300 hover:border-orange-600",ghost:"text-orange-600 hover:bg-orange-50 focus:ring-orange-200 disabled:text-orange-300"}[r]," ").concat({sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-lg"}[n]," ").concat(d," ").concat(o," ").concat(l?"cursor-not-allowed opacity-60":""),children:[c&&(0,Qe.jsx)("span",{className:"text-lg",children:c}),t]})},na=()=>{const{notifications:e,markAsRead:t,markAllAsRead:s,removeNotification:a,clearAll:r}=Ke(),n=e=>{switch(e){case"success":return(0,Qe.jsx)(_t,{className:"text-green-500"});case"error":return(0,Qe.jsx)(Ps,{className:"text-red-500"});case"warning":return(0,Qe.jsx)(Xt,{className:"text-yellow-500"});case"info":return(0,Qe.jsx)(os,{className:"text-blue-500"});default:return(0,Qe.jsx)(pt,{className:"text-gray-500"})}};return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)(ra,{variant:"primary",size:"sm",onClick:s,children:"\u0648\u0636\u0639 \u0627\u0644\u0643\u0644 \u0643\u0645\u0642\u0631\u0648\u0621"}),(0,Qe.jsx)(ra,{variant:"danger",size:"sm",onClick:r,children:"\u062d\u0630\u0641 \u0627\u0644\u0643\u0644"})]})]}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(pt,{}),children:0===e.length?(0,Qe.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Qe.jsx)(pt,{className:"text-6xl mx-auto mb-4 opacity-30"}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a"})]}):(0,Qe.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,Qe.jsx)("div",{className:"p-4 rounded-lg border transition-all ".concat(e.read?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"),children:(0,Qe.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Qe.jsx)("div",{className:"text-2xl mt-1",children:n(e.type)}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-gray-800",children:e.title}),(0,Qe.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.timestamp).toLocaleString("ar-EG")})]}),(0,Qe.jsx)("p",{className:"text-gray-600",children:e.message})]}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:[!e.read&&(0,Qe.jsx)("button",{onClick:()=>t(e.id),className:"text-blue-600 hover:text-blue-700 p-2",title:"\u0648\u0636\u0639 \u0643\u0645\u0642\u0631\u0648\u0621",children:(0,Qe.jsx)(_t,{})}),(0,Qe.jsx)("button",{onClick:()=>a(e.id),className:"text-red-600 hover:text-red-700 p-2",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})]})},e.id))})})]})},la=()=>{const e=ee(),{warehouses:t,categories:s,addProduct:a}=Ye(),{showSuccess:n,showError:l}=Ke(),[i,o]=(0,r.useState)({name:"",category:"",mainPrice:"",subPrice:"",mainQuantity:"",subQuantity:"",warehouseId:"",barcode:"",description:""}),[c,d]=(0,r.useState)(!1),[x,u]=(0,r.useState)(null),m=e=>{o(Be(Be({},i),{},{[e.target.name]:e.target.value}))},h=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.focus()},[]),(0,r.useEffect)(()=>{const e=e=>{if(e.ctrlKey&&"s"===e.key){e.preventDefault();const t=document.querySelector("form");if(t){const e=new Event("submit",{cancelable:!0,bubbles:!0});t.dispatchEvent(e)}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]);const p=t.map(e=>({value:e.id,label:e.name})),g=s.map(e=>({value:e.name,label:e.name}));return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0628\u0636\u0627\u0639\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsxs)("button",{type:"submit",form:"product-form",className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:[(0,Qe.jsx)(Ss,{})," \u062d\u0641\u0638 \u0627\u0644\u0645\u0646\u062a\u062c"]}),(0,Qe.jsxs)("button",{type:"button",onClick:()=>{var e;o({name:"",category:"",mainPrice:"",subPrice:"",mainQuantity:"",subQuantity:"",warehouseId:"",barcode:"",description:""}),null===(e=h.current)||void 0===e||e.focus()},className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:[(0,Qe.jsx)(Rs,{})," \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"]})]})]}),c&&x&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full transform transition-all",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-6 rounded-t-2xl text-white relative",children:[(0,Qe.jsx)("button",{onClick:()=>d(!1),className:"absolute top-4 left-4 text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:(0,Qe.jsx)(Ts,{size:20})}),(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 rounded-full p-4",children:(0,Qe.jsx)(_t,{size:48})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-center",children:"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d!"})]}),(0,Qe.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-white p-4 rounded-lg border-r-4 border-orange-500",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(ft,{className:"text-orange-500",size:24}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("p",{className:"text-lg font-bold text-gray-800",children:x.name})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(Ms,{className:"text-blue-500"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0641\u0626\u0629"})]}),(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:x.category})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(Xs,{className:"text-purple-500"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0645\u062e\u0632\u0646"})]}),(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:x.warehouseName})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(Bt,{className:"text-green-500"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a"})]}),(0,Qe.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[x.mainPrice.toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(Rt,{className:"text-indigo-500"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"})]}),(0,Qe.jsx)("p",{className:"text-xl font-bold text-indigo-600",children:x.mainQuantity})]})]}),x.barcode&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("p",{className:"font-mono font-semibold text-gray-800",children:x.barcode})]})]}),(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 rounded-b-2xl flex gap-3",children:[(0,Qe.jsx)("button",{onClick:()=>d(!1),className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors font-semibold",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u0622\u062e\u0631"}),(0,Qe.jsx)("button",{onClick:()=>{d(!1),e("/warehouses/manage-products")},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors font-semibold",children:"\u0639\u0631\u0636 \u0627\u0644\u0628\u0636\u0627\u0639\u0629"})]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,Qe.jsxs)("form",{id:"product-form",onSubmit:e=>{e.preventDefault();try{var s;const e=Be(Be({},i),{},{mainPrice:parseFloat(i.mainPrice)||0,subPrice:parseFloat(i.subPrice)||0,mainQuantity:parseInt(i.mainQuantity)||0,subQuantity:parseInt(i.subQuantity)||0,warehouseId:parseInt(i.warehouseId),createdAt:(new Date).toISOString()}),r=a(e);u(Be(Be({},r),{},{warehouseName:(null===(s=t.find(e=>e.id===parseInt(i.warehouseId)))||void 0===s?void 0:s.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})),d(!0),n("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),o({name:"",category:"",mainPrice:"",subPrice:"",mainQuantity:"",subQuantity:"",warehouseId:"",barcode:"",description:""})}catch(r){l("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u062a\u062c")}},children:[(0,Qe.jsxs)("div",{className:"p-4 bg-gray-50 border-b",children:[(0,Qe.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(ft,{className:"text-orange-500"})," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c *"}),(0,Qe.jsx)("input",{ref:h,type:"text",name:"name",value:i.name,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0641\u0626\u0629 *"}),(0,Qe.jsxs)("select",{name:"category",value:i.category,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0626\u0629"}),g.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u062e\u0632\u0646 *"}),(0,Qe.jsxs)("select",{name:"warehouseId",value:i.warehouseId,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646"}),p.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})]}),(0,Qe.jsxs)("div",{className:"p-4 border-b",children:[(0,Qe.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(Bt,{className:"text-green-500"})," \u0627\u0644\u0623\u0633\u0639\u0627\u0631"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a *"}),(0,Qe.jsx)("input",{type:"number",step:"0.01",name:"mainPrice",value:i.mainPrice,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",min:"0",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0641\u0631\u0639\u064a"}),(0,Qe.jsx)("input",{type:"number",step:"0.01",name:"subPrice",value:i.subPrice,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",min:"0"})]})]})]}),(0,Qe.jsxs)("div",{className:"p-4 border-b",children:[(0,Qe.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(Rt,{className:"text-blue-500"})," \u0627\u0644\u0643\u0645\u064a\u0627\u062a"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"number",name:"mainQuantity",value:i.mainQuantity,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0631\u0639\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",name:"subQuantity",value:i.subQuantity,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0",min:"0"})]})]})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-gray-50",children:[(0,Qe.jsxs)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(ht,{className:"text-purple-500"})," \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("input",{type:"text",name:"barcode",value:i.barcode,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456789"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("input",{type:"text",name:"description",value:i.description,onChange:m,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"\u0648\u0635\u0641 \u0645\u062e\u062a\u0635\u0631 \u0644\u0644\u0645\u0646\u062a\u062c"})]})]})]})]}),(0,Qe.jsxs)("div",{className:"px-4 py-3 bg-gray-100 border-t text-xs text-gray-500 text-center",children:[(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"\ud83d\udca1 \u0627\u062e\u062a\u0635\u0627\u0631\u0627\u062a: "}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Ctrl+S = \u062d\u0641\u0638"}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Tab = \u0627\u0644\u062a\u0646\u0642\u0644"})]})]})]})},ia=()=>{const{products:e,categories:t,warehouses:s,updateProduct:a,deleteProduct:n}=Ye(),{showSuccess:l,showError:i}=Ke(),{settings:o}=ea(),{hasPermission:c}=We(),[d,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),[j,y]=(0,r.useState)({}),N=e=>{const t=(null===o||void 0===o?void 0:o.currency)||"EGP",s="ar"===(null===o||void 0===o?void 0:o.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},w=c("edit_product"),S=c("delete_product"),k=c("export_data"),C=c("view_inventory"),I=(0,r.useMemo)(()=>({totalProducts:e.length,totalValue:e.reduce((e,t)=>e+t.mainPrice*t.mainQuantity,0),lowStock:e.filter(e=>e.mainQuantity<10).length,categoriesCount:[...new Set(e.map(e=>e.category))].length}),[e]),D=(0,r.useMemo)(()=>e.filter(e=>{var t;const s=!d||e.name.toLowerCase().includes(d.toLowerCase())||(null===(t=e.barcode)||void 0===t?void 0:t.toLowerCase().includes(d.toLowerCase()))||e.category.toLowerCase().includes(d.toLowerCase()),a=!u||e.category===u,r=!h||e.warehouseId===parseInt(h);return s&&a&&r}),[e,d,u,h]),_=e=>{y(Be(Be({},j),{},{[e.target.name]:e.target.value}))},L=()=>{try{const e=Be(Be({},j),{},{mainPrice:parseFloat(j.mainPrice)||0,subPrice:parseFloat(j.subPrice)||0,mainQuantity:parseInt(j.mainQuantity)||0,subQuantity:parseInt(j.subQuantity)||0,warehouseId:parseInt(j.warehouseId)});a(b,e),l("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),v(null),y({})}catch(e){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b")}},E=()=>{v(null),y({})},M=e=>{const t="string"===typeof e?parseInt(e):e,a=s.find(e=>e.id===t);return a?a.name:"-"},P=e=>{const s=t.find(t=>t.name===e);return(null===s||void 0===s?void 0:s.color)||"#fb923c"},T=[{value:"",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"},...t.map(e=>({value:e.name,label:e.name}))],z=[{value:"",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"},...s.map(e=>({value:e.id.toString(),label:e.name}))];return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4 space-y-4",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0648\u0633\u062c\u0644 \u0627\u0644\u0628\u0636\u0627\u0626\u0639"}),k&&(0,Qe.jsxs)("button",{onClick:()=>{if(!k)return void i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a");const e=D.map(e=>{const t=s.find(t=>t.id===e.warehouseId);return[e.name,e.category,(null===t||void 0===t?void 0:t.name)||"-",e.mainQuantity,e.mainPrice,e.mainPrice*e.mainQuantity,e.barcode||"-"]}),t=[["\u0627\u0644\u0627\u0633\u0645","\u0627\u0644\u0641\u0626\u0629","\u0627\u0644\u0645\u062e\u0632\u0646","\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629","\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a","\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629","\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"].join(","),...e.map(e=>e.join(","))].join("\n"),a=new Blob(["\ufeff".concat(t)],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="products_".concat((new Date).toLocaleDateString("ar-EG"),".csv"),r.click(),l("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0646\u062c\u0627\u062d")},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:[(0,Qe.jsx)(qt,{})," \u062a\u0635\u062f\u064a\u0631 CSV"]})]}),C?(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-5 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-1",children:I.totalProducts}),(0,Qe.jsx)("p",{className:"text-blue-200 text-xs mt-1",children:"\u0645\u0646\u062a\u062c"})]}),(0,Qe.jsx)(ft,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-5 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-1",children:N(I.totalValue)}),(0,Qe.jsx)("p",{className:"text-green-200 text-xs mt-1",children:(null===o||void 0===o?void 0:o.currency)||"EGP"})]}),(0,Qe.jsx)(hs,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-5 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-orange-100 text-sm font-medium",children:"\u0645\u062e\u0632\u0648\u0646 \u0645\u0646\u062e\u0641\u0636"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-1",children:I.lowStock}),(0,Qe.jsx)("p",{className:"text-orange-200 text-xs mt-1",children:"\u0645\u0646\u062a\u062c"})]}),(0,Qe.jsx)(Xt,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-5 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0626\u0627\u062a"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-1",children:I.categoriesCount}),(0,Qe.jsx)("p",{className:"text-purple-200 text-xs mt-1",children:"\u0641\u0626\u0629"})]}),(0,Qe.jsx)(Ms,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-xl p-5 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-red-100 text-sm font-medium",children:"\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-1",children:e.filter(e=>(e.mainQuantity||0)<0).length}),(0,Qe.jsx)("p",{className:"text-red-200 text-xs mt-1",children:"\u0645\u0646\u062a\u062c"})]}),(0,Qe.jsx)(Xt,{className:"text-4xl opacity-80"})]})})]}):(0,Qe.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[(0,Qe.jsx)(Xt,{className:"text-yellow-600 text-xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-yellow-800 font-semibold",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-yellow-700 text-sm",children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"})]})]}),I.lowStock>0&&(0,Qe.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-4 flex items-center gap-3",children:[(0,Qe.jsx)(Xt,{className:"text-yellow-600 text-xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("p",{className:"text-yellow-800 font-semibold",children:["\u062a\u0646\u0628\u064a\u0647: \u064a\u0648\u062c\u062f ",I.lowStock," \u0645\u0646\u062a\u062c \u0628\u0645\u062e\u0632\u0648\u0646 \u0645\u0646\u062e\u0641\u0636"]}),(0,Qe.jsx)("p",{className:"text-yellow-700 text-sm",children:"\u064a\u064f\u0646\u0635\u062d \u0628\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u062a\u0632\u0648\u064a\u062f"})]})]}),e.filter(e=>(e.mainQuantity||0)<0).length>0&&(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 text-xl"}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("p",{className:"text-red-800 font-semibold",children:"\u062e\u0637\u0623 \u062d\u0631\u062c: \u064a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629"}),(0,Qe.jsx)("p",{className:"text-red-700 text-sm",children:"\u064a\u062a\u0637\u0644\u0628 \u0625\u0635\u0644\u0627\u062d \u0641\u0648\u0631\u064a"})]}),(0,Qe.jsxs)("button",{onClick:()=>{const e=new CustomEvent("navigate",{detail:"/tools/fix-negative-quantities"});window.dispatchEvent(e)},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors text-sm font-semibold flex items-center gap-2",children:[(0,Qe.jsx)(zs,{}),"\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u0625\u0635\u0644\u0627\u062d"]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0645\u0646\u062a\u062c (\u0627\u0644\u0627\u0633\u0645\u060c \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f\u060c \u0627\u0644\u0641\u0626\u0629)...",value:d,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Qe.jsx)(ks,{className:"absolute right-3 top-3 text-gray-400"})]}),(0,Qe.jsxs)("button",{onClick:()=>f(!g),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm font-semibold ".concat(g?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:[(0,Qe.jsx)(es,{})," \u0641\u0644\u0627\u062a\u0631 \u0645\u062a\u0642\u062f\u0645\u0629"]})]}),g&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 p-3 bg-gray-50 rounded-lg border",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsx)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:T.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:z.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Qe.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,Qe.jsxs)("span",{children:["\u0639\u0631\u0636 ",D.length," \u0645\u0646 ",e.length," \u0645\u0646\u062a\u062c"]}),(d||u||h)&&(0,Qe.jsxs)("button",{onClick:()=>{x(""),m(""),p("")},className:"text-orange-600 hover:text-orange-700 font-semibold flex items-center gap-1",children:[(0,Qe.jsx)(Ts,{})," \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0641\u0644\u0627\u062a\u0631"]})]})]})}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:0===D.length?(0,Qe.jsxs)("div",{className:"text-center py-12 p-4",children:[(0,Qe.jsx)(ft,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:d||u||h?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0628\u062d\u062b":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0639\u062f\u060c \u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f!"})]}):(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0642\u064a\u0645\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{children:D.map(e=>b===e.id?(0,Qe.jsx)("tr",{className:"bg-blue-50 border-b",children:(0,Qe.jsx)("td",{className:"px-3 py-3",colSpan:"8",children:(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c *"}),(0,Qe.jsx)("input",{type:"text",name:"name",value:j.name,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0641\u0626\u0629 *"}),(0,Qe.jsx)("select",{name:"category",value:j.category,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",required:!0,children:t.map(e=>(0,Qe.jsx)("option",{value:e.name,children:e.name},e.name))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u062e\u0632\u0646 *"}),(0,Qe.jsx)("select",{name:"warehouseId",value:j.warehouseId,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",required:!0,children:s.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"number",name:"mainQuantity",value:j.mainQuantity,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0631\u0639\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",name:"subQuantity",value:j.subQuantity,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("input",{type:"text",name:"barcode",value:j.barcode||"",onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a * (",(null===o||void 0===o?void 0:o.currency)||"EGP",")"]}),(0,Qe.jsx)("input",{type:"number",step:"0.01",name:"mainPrice",value:j.mainPrice,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0641\u0631\u0639\u064a (",(null===o||void 0===o?void 0:o.currency)||"EGP",")"]}),(0,Qe.jsx)("input",{type:"number",step:"0.01",name:"subPrice",value:j.subPrice,onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("input",{type:"text",name:"description",value:j.description||"",onChange:_,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500"})]})]}),(0,Qe.jsx)("div",{className:"flex gap-2",children:w&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("button",{onClick:L,className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-sm font-semibold",children:[(0,Qe.jsx)(Ss,{})," \u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"]}),(0,Qe.jsxs)("button",{onClick:E,className:"flex items-center gap-1 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white rounded text-sm font-semibold",children:[(0,Qe.jsx)(Ts,{})," \u0625\u0644\u063a\u0627\u0621"]})]})})]})})},e.id):(0,Qe.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors ".concat(e.mainQuantity<10?"bg-yellow-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-orange-500 rounded flex items-center justify-center text-white text-sm",children:(0,Qe.jsx)(ft,{})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-gray-900 text-sm",children:e.name}),e.description&&(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:e.description})]})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold text-white",style:{backgroundColor:P(e.category)},children:e.category})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)(Xs,{className:"text-gray-400 text-xs"}),(0,Qe.jsx)("span",{className:"text-sm",children:M(e.warehouseId)})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:e.mainQuantity}),e.subQuantity>0&&(0,Qe.jsxs)("p",{className:"text-xs text-gray-500",children:["+ ",e.subQuantity," \u0641\u0631\u0639\u064a"]})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:N(e.mainPrice)}),e.subPrice>0&&(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:N(e.subPrice)})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsx)("p",{className:"font-bold text-green-600 text-sm",children:N(e.mainPrice*e.mainQuantity)})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:e.barcode?(0,Qe.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qe.jsx)(ht,{className:"text-gray-400 text-xs"}),(0,Qe.jsx)("span",{className:"text-xs font-mono",children:e.barcode})]}):(0,Qe.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex gap-1 justify-center",children:[w&&(0,Qe.jsx)("button",{onClick:()=>(e=>{w?(v(e.id),y(Be({},e))):i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a")})(e),className:"p-1.5 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{className:"text-sm"})}),S&&(0,Qe.jsx)("button",{onClick:()=>((e,t)=>{if(S){if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c "'.concat(t,'"\u061f\n\u0633\u064a\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0631\u062a\u0628\u0637\u0629 \u0628\u0647.')))try{n(e),l("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d")}catch(s){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062d\u0630\u0641")}}else i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a")})(e.id,e.name),className:"p-1.5 text-red-600 hover:bg-red-100 rounded transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{className:"text-sm"})}),!w&&!S&&(0,Qe.jsx)("span",{className:"text-xs text-gray-400",children:"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})]})})]},e.id))})]})})})]})};const oa=["label","type","name","value","onChange","placeholder","required","disabled","error","className","icon"],ca=e=>{let{label:t,name:s,value:a,onChange:r,options:n=[],required:l=!1,disabled:i=!1,error:o="",className:c=""}=e;return(0,Qe.jsxs)("div",{className:"w-full ".concat(c),children:[t&&(0,Qe.jsxs)("label",{htmlFor:s,className:"label flex items-center gap-1",children:[t,l&&(0,Qe.jsx)("span",{className:"text-red-500 text-lg",children:"*"})]}),(0,Qe.jsx)("select",{id:s,name:s,value:a,onChange:r,required:l,disabled:i,className:"input-field ".concat(o?"border-red-400 focus:border-red-500 focus:ring-red-200":""," ").concat(i?"bg-gray-100 cursor-not-allowed opacity-60":"hover:border-orange-200"),children:n.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))}),o&&(0,Qe.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1 font-medium",children:[(0,Qe.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Qe.jsx)("span",{children:o})]})]})},da=e=>{let{label:t,type:s="text",name:a,value:r,onChange:n,placeholder:l="",required:i=!1,disabled:o=!1,error:c="",className:d="",icon:x=null}=e,u=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)s=n[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,oa);return(0,Qe.jsxs)("div",{className:"w-full ".concat(d),children:[t&&(0,Qe.jsxs)("label",{htmlFor:a,className:"label flex items-center gap-1",children:[t,i&&(0,Qe.jsx)("span",{className:"text-red-500 text-lg",children:"*"})]}),(0,Qe.jsxs)("div",{className:"relative group",children:[x&&(0,Qe.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-orange-400 group-focus-within:text-orange-600 transition-colors",children:x}),(0,Qe.jsx)("input",Be({type:s,id:a,name:a,value:r,onChange:n,placeholder:l,required:i,disabled:o,className:"input-field ".concat(x?"pr-12":""," ").concat(c?"border-red-400 focus:border-red-500 focus:ring-red-200":""," ").concat(o?"bg-gray-100 cursor-not-allowed opacity-60":"hover:border-orange-200")},u))]}),c&&(0,Qe.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1 font-medium",children:[(0,Qe.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Qe.jsx)("span",{children:c})]})]})},xa=()=>{const e=ee(),{addWarehouse:t,warehouses:s}=Ye(),{showSuccess:a,showError:n}=Ke(),[l,i]=(0,r.useState)({name:"",address:"",phone:"",manager:"",description:""}),[o,c]=(0,r.useState)({}),d=e=>{const{name:t,value:s}=e.target;i(Be(Be({},l),{},{[t]:s})),o[t]&&c(Be(Be({},o),{},{[t]:""}))};return(0,Qe.jsxs)("div",{className:"p-6 max-w-5xl mx-auto",children:[(0,Qe.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,Qe.jsx)(Xs,{className:"text-orange-500"}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u062e\u0632\u0646 \u062c\u062f\u064a\u062f"]}),(0,Qe.jsx)("p",{className:"text-gray-600 mt-2",children:"\u0623\u062f\u062e\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0646 \u0627\u0644\u062c\u062f\u064a\u062f"})]}),(0,Qe.jsx)(ra,{variant:"secondary",icon:(0,Qe.jsx)(xt,{}),onClick:()=>e("/warehouses/manage"),children:"\u0627\u0644\u0639\u0648\u062f\u0629"})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),(()=>{const e={};l.name.trim()?(null===s||void 0===s?void 0:s.some(e=>e.name.toLowerCase().trim()===l.name.toLowerCase().trim()))&&(e.name="\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064b"):e.name="\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646 \u0645\u0637\u0644\u0648\u0628";l.address.trim()||(e.address="\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0645\u0637\u0644\u0648\u0628"),l.phone&&l.phone.trim()&&(/^\+20[0-9]{9,10}$/.test(l.phone.replace(/\s/g,""))||(e.phone="\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0628\u062f\u0623 \u0628\u0640 +20 \u0648\u064a\u062a\u0643\u0648\u0646 \u0645\u0646 9-10 \u0623\u0631\u0642\u0627\u0645"));return c(e),0===Object.keys(e).length})())try{const s=Be(Be({},l),{},{name:l.name.trim(),address:l.address.trim(),phone:l.phone.trim(),manager:l.manager.trim(),description:l.description.trim(),createdAt:(new Date).toISOString(),status:"active"});t(s),a("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062e\u0632\u0646 \u0628\u0646\u062c\u0627\u062d"),setTimeout(()=>{e("/warehouses/manage")},1e3)}catch(i){n("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062e\u0632\u0646"),console.error("Error adding warehouse:",i)}else n("\u064a\u0631\u062c\u0649 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0623\u062e\u0637\u0627\u0621 \u0641\u064a \u0627\u0644\u0646\u0645\u0648\u0630\u062c")},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646",name:"name",value:l.name,onChange:d,placeholder:"\u0645\u062b\u0627\u0644: \u0627\u0644\u0645\u062e\u0632\u0646 \u0627\u0644\u0631\u0626\u064a\u0633\u064a - \u0627\u0644\u0642\u0627\u0647\u0631\u0629",required:!0,error:o.name}),o.name&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:l.address,onChange:d,placeholder:"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u062e\u0632\u0646 \u0641\u064a \u0645\u0635\u0631",required:!0,error:o.address}),o.address&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.address})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",name:"phone",value:l.phone,onChange:d,placeholder:"+20 XXX XXX XXXX",error:o.phone}),o.phone&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.phone}),(0,Qe.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\u064a\u062c\u0628 \u0623\u0646 \u064a\u0628\u062f\u0623 \u0628\u0640 +20"})]}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)(da,{label:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646",name:"manager",value:l.manager,onChange:d,placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0633\u0624\u0648\u0644"})})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u062e\u0632\u0646 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("textarea",{name:"description",value:l.description,onChange:d,rows:"4",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent transition-all",placeholder:"\u0623\u062f\u062e\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u062e\u0632\u0646\u060c \u0627\u0644\u0645\u0648\u0642\u0639\u060c \u0627\u0644\u0645\u0645\u064a\u0632\u0627\u062a\u060c \u0625\u0644\u062e..."})]}),(0,Qe.jsxs)("div",{className:"flex gap-4 pt-4 border-t",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"success",icon:(0,Qe.jsx)(Ss,{}),children:"\u062d\u0641\u0638 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",onClick:()=>{i({name:"",address:"",phone:"",manager:"",description:""}),c({})},children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"})]})]})}),(0,Qe.jsx)(aa,{className:"mt-6 bg-blue-50 border-2 border-blue-200",children:(0,Qe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qe.jsx)("div",{className:"text-blue-600 text-2xl",children:"\ud83d\udca1"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"font-bold text-blue-900 mb-2",children:"\u0646\u0635\u0627\u0626\u062d \u0645\u0647\u0645\u0629:"}),(0,Qe.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Qe.jsx)("li",{children:"\u2022 \u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0641\u0631\u064a\u062f \u0644\u0643\u0644 \u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("li",{children:"\u2022 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u062f\u0642\u064a\u0642\u0627\u064b \u0644\u0633\u0647\u0648\u0644\u0629 \u0627\u0644\u062a\u0648\u0635\u064a\u0644 \u0648\u0627\u0644\u0646\u0642\u0644"}),(0,Qe.jsx)("li",{children:"\u2022 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0645\u0635\u0631\u064a \u0648\u064a\u0628\u062f\u0623 \u0628\u0640 +20"}),(0,Qe.jsx)("li",{children:"\u2022 \u064a\u0645\u0643\u0646\u0643 \u062a\u0639\u064a\u064a\u0646 \u0645\u062f\u064a\u0631 \u0645\u0633\u0624\u0648\u0644 \u0644\u0643\u0644 \u0645\u062e\u0632\u0646"})]})]})]})})]})},ua=()=>{const{categories:e,addCategory:t,updateCategory:s,deleteCategory:a}=Ye(),{showSuccess:n,showError:l,showConfirm:i}=Ke(),{settings:o}=ea(),{hasPermission:c}=We(),[d,x]=(0,r.useState)({name:"",description:"",color:"#fb923c"}),[u,m]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),g=e=>{x(Be(Be({},d),{},{[e.target.name]:e.target.value}))},f=e.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0641\u0626\u0627\u062a"}),!c("manage_categories")&&(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-amber-600 bg-amber-50 px-4 py-2 rounded-lg",children:[(0,Qe.jsx)(us,{className:"text-sm"}),(0,Qe.jsx)("span",{className:"text-sm font-medium",children:"\u0639\u0631\u0636 \u0641\u0642\u0637 - \u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0625\u062f\u0627\u0631\u0629"})]})]}),c("manage_categories")&&(0,Qe.jsxs)(aa,{icon:(0,Qe.jsx)(Ms,{}),className:"mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:u?"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0641\u0626\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0641\u0626\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),c(u?"edit_category":"add_category"))if(d.name.trim())try{u?(s(u,d),n("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0641\u0626\u0629 \u0628\u0646\u062c\u0627\u062d"),m(null)):(t(d),n("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0626\u0629 \u0628\u0646\u062c\u0627\u062d")),x({name:"",description:"",color:"#fb923c"})}catch(a){l("\u062d\u062f\u062b \u062e\u0637\u0623\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649")}else l("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0641\u0626\u0629");else l("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 ".concat(u?"\u062a\u0639\u062f\u064a\u0644":"\u0625\u0636\u0627\u0641\u0629"," \u0627\u0644\u0641\u0626\u0627\u062a"))},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0641\u0626\u0629",name:"name",value:d.name,onChange:g,placeholder:"\u0645\u062b\u0627\u0644: \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0627\u062a\u060c \u0623\u063a\u0630\u064a\u0629\u060c \u0645\u0644\u0627\u0628\u0633...",required:!0}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"label",children:"\u0627\u0644\u0644\u0648\u0646 \u0627\u0644\u0645\u0645\u064a\u0632"}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsx)("input",{type:"color",name:"color",value:d.color,onChange:g,className:"w-16 h-11 rounded-lg border-2 border-gray-300 cursor-pointer"}),(0,Qe.jsx)("input",{type:"text",value:d.color,onChange:e=>x(Be(Be({},d),{},{color:e.target.value})),className:"input-field flex-1",placeholder:"#fb923c"})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"label",children:"\u0623\u0644\u0648\u0627\u0646 \u0645\u0642\u062a\u0631\u062d\u0629"}),(0,Qe.jsx)("div",{className:"flex flex-wrap gap-2",children:[{name:"\u0628\u0631\u062a\u0642\u0627\u0644\u064a",value:"#fb923c"},{name:"\u0623\u0632\u0631\u0642",value:"#3b82f6"},{name:"\u0623\u062e\u0636\u0631",value:"#10b981"},{name:"\u0623\u062d\u0645\u0631",value:"#ef4444"},{name:"\u0628\u0646\u0641\u0633\u062c\u064a",value:"#8b5cf6"},{name:"\u0648\u0631\u062f\u064a",value:"#ec4899"},{name:"\u0623\u0635\u0641\u0631",value:"#f59e0b"},{name:"\u0631\u0645\u0627\u062f\u064a",value:"#6b7280"}].map(e=>(0,Qe.jsx)("button",{type:"button",onClick:()=>x(Be(Be({},d),{},{color:e.value})),className:"px-4 py-2 rounded-lg border-2 transition-all hover:scale-105",style:{backgroundColor:e.value,borderColor:d.color===e.value?"#000":"transparent",color:"#fff"},title:e.name,children:e.name},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"label",children:"\u0648\u0635\u0641 \u0627\u0644\u0641\u0626\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("textarea",{name:"description",value:d.description,onChange:g,rows:"3",className:"input-field",placeholder:"\u0623\u062f\u062e\u0644 \u0648\u0635\u0641 \u0645\u062e\u062a\u0635\u0631 \u0644\u0644\u0641\u0626\u0629..."})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)(ra,{type:"submit",variant:u?"primary":"success",icon:u?(0,Qe.jsx)(Qt,{}):(0,Qe.jsx)(js,{}),children:u?"\u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0641\u0626\u0629":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0626\u0629"}),u&&(0,Qe.jsx)(ra,{type:"button",variant:"secondary",icon:(0,Qe.jsx)(Ts,{}),onClick:()=>{m(null),x({name:"",description:"",color:"#fb923c"})},children:"\u0625\u0644\u063a\u0627\u0621"})]})]})]}),(0,Qe.jsxs)(aa,{icon:(0,Qe.jsx)(Ms,{}),children:[(0,Qe.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[(0,Qe.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["\u0627\u0644\u0641\u0626\u0627\u062a \u0627\u0644\u0645\u062a\u0627\u062d\u0629 (",e.length,")"]}),(0,Qe.jsx)(da,{type:"text",placeholder:"\u0628\u062d\u062b \u0639\u0646 \u0641\u0626\u0629...",value:h,onChange:e=>p(e.target.value),className:"md:w-64"})]}),0===f.length?(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(Ms,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:h?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0626\u0627\u062a \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0628\u062d\u062b":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0626\u0627\u062a \u0628\u0639\u062f\u060c \u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0626\u0629 \u0627\u0644\u0623\u0648\u0644\u0649!"})]}):(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(e=>(0,Qe.jsxs)("div",{className:"p-4 rounded-xl border-2 border-gray-200 hover:border-orange-300 transition-all bg-gradient-to-br from-white to-gray-50",children:[(0,Qe.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-white shadow-lg",style:{backgroundColor:e.color||"#fb923c"},children:(0,Qe.jsx)(Ms,{})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-900",children:e.name}),(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ar-EG")})]})]})}),e.description&&(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-3 pr-1",children:e.description}),(0,Qe.jsxs)("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200",children:[c("edit_category")&&(0,Qe.jsx)(ra,{variant:"primary",size:"sm",icon:(0,Qe.jsx)(Qt,{}),onClick:()=>(e=>{c("edit_category")?(x({name:e.name,description:e.description||"",color:e.color||"#fb923c"}),m(e.id),window.scrollTo({top:0,behavior:"smooth"})):l("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0641\u0626\u0627\u062a")})(e),className:"flex-1",children:"\u062a\u0639\u062f\u064a\u0644"}),c("delete_category")&&(0,Qe.jsx)(ra,{variant:"danger",size:"sm",icon:(0,Qe.jsx)(Os,{}),onClick:()=>((e,t)=>{if(c("delete_category")){if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0626\u0629 "'.concat(t,'"\u061f')))try{a(e),n("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0641\u0626\u0629 \u0628\u0646\u062c\u0627\u062d")}catch(s){l("\u062d\u062f\u062b \u062e\u0637\u0623\u060c \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649")}}else l("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062d\u0630\u0641 \u0627\u0644\u0641\u0626\u0627\u062a")})(e.id,e.name),className:"flex-1",children:"\u062d\u0630\u0641"}),!c("edit_category")&&!c("delete_category")&&(0,Qe.jsxs)("div",{className:"flex items-center gap-1 text-gray-400 text-sm w-full justify-center py-1",children:[(0,Qe.jsx)(us,{className:"text-xs"}),(0,Qe.jsx)("span",{children:"\u0639\u0631\u0636 \u0641\u0642\u0637"})]})]})]},e.id))})]})]})},ma=e=>{let{label:t,name:s,value:a,onChange:r,options:n=[],required:l=!1,disabled:i=!1,error:o="",className:c="",placeholder:d="\u0627\u062e\u062a\u0631..."}=e;return(0,Qe.jsxs)("div",{className:"w-full ".concat(c),children:[t&&(0,Qe.jsxs)("label",{htmlFor:s,className:"label flex items-center gap-1",children:[t,l&&(0,Qe.jsx)("span",{className:"text-red-500 text-lg",children:"*"})]}),(0,Qe.jsxs)("div",{className:"relative group",children:[(0,Qe.jsxs)("select",{id:s,name:s,value:a,onChange:r,required:l,disabled:i,className:"input-field appearance-none pr-12 ".concat(o?"border-red-400 focus:border-red-500 focus:ring-red-200":""," ").concat(i?"bg-gray-100 cursor-not-allowed opacity-60":"hover:border-orange-200 cursor-pointer"),children:[(0,Qe.jsx)("option",{value:"",children:d}),n.map((e,t)=>(0,Qe.jsx)("option",{value:e.value,children:e.label},t))]}),(0,Qe.jsx)("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-orange-400 group-focus-within:text-orange-600 transition-colors pointer-events-none",children:(0,Qe.jsx)(Et,{})})]}),o&&(0,Qe.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1 font-medium",children:[(0,Qe.jsx)("span",{children:"\u26a0\ufe0f"}),(0,Qe.jsx)("span",{children:o})]})]})},ha=()=>{const{warehouses:e,products:t,transfers:s,transferProduct:a}=Ye(),{showSuccess:n,showError:l}=Ke(),[i,o]=(0,r.useState)({productId:"",fromWarehouseId:"",toWarehouseId:"",quantity:"",notes:""}),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),p=(0,r.useMemo)(()=>i.fromWarehouseId?t.filter(e=>e.warehouseId===parseInt(i.fromWarehouseId)):[],[t,i.fromWarehouseId]),g=(0,r.useMemo)(()=>{const e=new Date;e.setHours(0,0,0,0);const t=s.filter(t=>{const s=new Date(t.date);return s.setHours(0,0,0,0),s.getTime()===e.getTime()}),a=new Date;a.setDate(1),a.setHours(0,0,0,0);const r=s.filter(e=>new Date(e.date)>=a);return{total:s.length,today:t.length,thisMonth:r.length,totalQuantity:s.reduce((e,t)=>e+t.quantity,0)}},[s]),f=e=>{const{name:t,value:s}=e.target;if(o(Be(Be({},i),{},{[t]:s})),"productId"===t&&s){const e=p.find(e=>e.id===parseInt(s));d(e)}"fromWarehouseId"===t&&(o(e=>Be(Be({},e),{},{productId:"",quantity:""})),d(null))},b=e.map(e=>({value:e.id,label:e.name})),v=p.map(e=>({value:e.id,label:"".concat(e.name," - ").concat(e.category," (\u0645\u062a\u0648\u0641\u0631: ").concat(e.mainQuantity,")")})),j=e=>{const t=new Date,s=new Date(e),a=Math.floor((t-s)/6e4);if(a<1)return"\u0627\u0644\u0622\u0646";if(a<60)return"\u0645\u0646\u0630 ".concat(a," \u062f\u0642\u064a\u0642\u0629");const r=Math.floor(a/60);if(r<24)return"\u0645\u0646\u0630 ".concat(r," \u0633\u0627\u0639\u0629");const n=Math.floor(r/24);return"\u0645\u0646\u0630 ".concat(n," \u064a\u0648\u0645")};return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center",children:(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u062d\u0648\u064a\u0644 \u0628\u064a\u0646 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"})}),x&&m&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full transform transition-all",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 rounded-t-2xl text-white relative",children:[(0,Qe.jsx)("button",{onClick:()=>u(!1),className:"absolute top-4 left-4 text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:(0,Qe.jsx)(Ts,{size:20})}),(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 rounded-full p-4",children:(0,Qe.jsx)(_t,{size:48})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-center",children:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u062c\u0627\u062d!"})]}),(0,Qe.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-white p-4 rounded-lg border-r-4 border-orange-500",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(ft,{className:"text-orange-500",size:24}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("p",{className:"text-lg font-bold text-gray-800",children:m.productName})]})]})}),(0,Qe.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"text-center flex-1",children:[(0,Qe.jsx)(Xs,{className:"text-blue-500 mx-auto mb-2",size:24}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("p",{className:"font-bold text-gray-800",children:m.fromWarehouseName})]}),(0,Qe.jsx)(ut,{className:"text-blue-500",size:24}),(0,Qe.jsxs)("div",{className:"text-center flex-1",children:[(0,Qe.jsx)(Xs,{className:"text-green-500 mx-auto mb-2",size:24}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0625\u0644\u0649 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("p",{className:"font-bold text-gray-800",children:m.toWarehouseName})]})]})}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(Wt,{className:"text-green-500"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062d\u0648\u0644\u0629"})]}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-600",children:m.quantity})]}),m.notes&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-800",children:m.notes})]})]}),(0,Qe.jsx)("div",{className:"p-6 bg-gray-50 rounded-b-2xl",children:(0,Qe.jsx)(ra,{onClick:()=>u(!1),variant:"primary",className:"w-full",children:"\u0625\u063a\u0644\u0627\u0642"})})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-2",children:g.total})]}),(0,Qe.jsx)(rs,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u064a\u0648\u0645"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-2",children:g.today})]}),(0,Qe.jsx)(It,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0634\u0647\u0631"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-2",children:g.thisMonth})]}),(0,Qe.jsx)(Wt,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0643\u0645\u064a\u0627\u062a"}),(0,Qe.jsx)("h3",{className:"text-3xl font-bold mt-2",children:g.totalQuantity})]}),(0,Qe.jsx)(ft,{className:"text-4xl opacity-80"})]})})]}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Wt,{}),title:"\u0646\u0645\u0648\u0630\u062c \u0627\u0644\u062a\u062d\u0648\u064a\u0644",children:(0,Qe.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),i.fromWarehouseId===i.toWarehouseId)return void l("\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u062d\u0648\u064a\u0644 \u0625\u0644\u0649 \u0646\u0641\u0633 \u0627\u0644\u0645\u062e\u0632\u0646");const s=parseInt(i.quantity);if(s<=0)l("\u0627\u0644\u0643\u0645\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631");else if(c&&s>c.mainQuantity)l("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u0641\u0642\u0637 ".concat(c.mainQuantity));else try{var r,x;const t={productId:parseInt(i.productId),fromWarehouseId:parseInt(i.fromWarehouseId),toWarehouseId:parseInt(i.toWarehouseId),quantity:s,notes:i.notes},l=a(t);h(Be(Be({},l),{},{fromWarehouseName:null===(r=e.find(e=>e.id===parseInt(i.fromWarehouseId)))||void 0===r?void 0:r.name,toWarehouseName:null===(x=e.find(e=>e.id===parseInt(i.toWarehouseId)))||void 0===x?void 0:x.name})),u(!0),n("\u062a\u0645 \u062a\u062d\u0648\u064a\u0644 \u0627\u0644\u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d"),o({productId:"",fromWarehouseId:"",toWarehouseId:"",quantity:"",notes:""}),d(null)}catch(m){l(m.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0648\u064a\u0644")}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(ma,{label:"\u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0646 (\u0627\u0644\u0645\u0635\u062f\u0631)",name:"fromWarehouseId",value:i.fromWarehouseId,onChange:f,options:b,required:!0,icon:(0,Qe.jsx)(Xs,{})}),i.fromWarehouseId&&(0,Qe.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[(0,Qe.jsx)(os,{className:"inline ml-1"}),"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629: ",p.length]})]}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)(ma,{label:"\u0625\u0644\u0649 \u0627\u0644\u0645\u062e\u0632\u0646 (\u0627\u0644\u0648\u062c\u0647\u0629)",name:"toWarehouseId",value:i.toWarehouseId,onChange:f,options:b,required:!0,icon:(0,Qe.jsx)(Xs,{})})})]}),i.fromWarehouseId&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(ma,{label:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u062a\u062c",name:"productId",value:i.productId,onChange:f,options:v,required:!0,icon:(0,Qe.jsx)(ft,{})}),0===p.length&&(0,Qe.jsxs)("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-2",children:[(0,Qe.jsx)(Xt,{className:"text-yellow-600"}),(0,Qe.jsx)("p",{className:"text-sm text-yellow-700",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0641\u064a \u0647\u0630\u0627 \u0627\u0644\u0645\u062e\u0632\u0646"})]})]}),c&&(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[(0,Qe.jsxs)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(os,{className:"text-blue-500"}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0627\u0633\u0645"}),(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:c.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:c.category})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629"}),(0,Qe.jsx)("p",{className:"font-bold text-green-600 text-lg",children:c.mainQuantity})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsxs)("p",{className:"font-semibold text-gray-800",children:[c.mainPrice," \u062c.\u0645"]})]})]})]}),i.productId&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,Qe.jsx)(da,{label:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0631\u0627\u062f \u062a\u062d\u0648\u064a\u0644\u0647\u0627",name:"quantity",type:"number",value:i.quantity,onChange:f,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629",min:"1",max:null===c||void 0===c?void 0:c.mainQuantity,required:!0})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"label",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("textarea",{name:"notes",value:i.notes,onChange:f,rows:"3",className:"input-field",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062d\u0648\u0644 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0648\u064a\u0644..."})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"primary",icon:(0,Qe.jsx)(Wt,{}),disabled:!i.productId||!i.fromWarehouseId||!i.toWarehouseId,children:"\u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u062a\u062d\u0648\u064a\u0644"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",onClick:()=>{o({productId:"",fromWarehouseId:"",toWarehouseId:"",quantity:"",notes:""}),d(null)},children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"})]})]})}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(rs,{}),title:"\u0633\u062c\u0644 \u0627\u0644\u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629",children:0===s.length?(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(rs,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062a\u062d\u0648\u064a\u0644\u0627\u062a \u0628\u0639\u062f"})]}):(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gradient-to-r from-blue-50 to-white border-b-2 border-blue-200",children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0625\u0644\u0649 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-bold text-gray-700",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{children:s.slice(0,10).map(t=>{var s,a;return(0,Qe.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:new Date(t.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:j(t.date)})]})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)(ft,{className:"text-orange-500"}),(0,Qe.jsx)("span",{className:"font-semibold text-gray-800",children:t.productName})]})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("span",{className:"text-sm text-gray-700",children:(null===(s=e.find(e=>e.id===t.fromWarehouseId))||void 0===s?void 0:s.name)||"-"})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("span",{className:"text-sm text-gray-700",children:(null===(a=e.find(e=>e.id===t.toWarehouseId))||void 0===a?void 0:a.name)||"-"})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("span",{className:"font-bold text-blue-600",children:t.quantity})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:t.notes||"-"})})]},t.id)})})]})})})]})},pa=()=>{const{products:e,warehouses:t}=Ye(),{showSuccess:s}=Ke(),[a,n]=(0,r.useState)("all"),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>e.filter(e=>{const t=e.name.toLowerCase().includes(l.toLowerCase())||e.category.toLowerCase().includes(l.toLowerCase()),s=""===o||e.warehouseId===parseInt(o);return t&&s&&(()=>{const t=e.mainQuantity||0;return"all"===a||("out"===a?0===t:"low"===a?t>0&&t<10:"available"!==a||t>=10)})()}),[e,l,o,a]),m=(0,r.useMemo)(()=>({available:u.filter(e=>(e.mainQuantity||0)>=10).length,low:u.filter(e=>(e.mainQuantity||0)>0&&(e.mainQuantity||0)<10).length,out:u.filter(e=>0===(e.mainQuantity||0)).length,totalValue:u.reduce((e,t)=>e+(t.mainPrice||0)*(t.mainQuantity||0),0)}),[u]),h=e=>{const s="string"===typeof e?parseInt(e):e,a=t.find(e=>e.id===s);return a?a.name:"-"},p=[{value:"",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"},...t.map(e=>({value:e.id,label:e.name}))],g=e=>0===e?"text-red-600":e<10?"text-yellow-600":"text-green-600",f=e=>0===e?(0,Qe.jsxs)("span",{className:"px-3 py-1 bg-red-100 text-red-600 rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[(0,Qe.jsx)(Ps,{})," \u0645\u0646\u062a\u0647\u064a"]}):e<10?(0,Qe.jsxs)("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-600 rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[(0,Qe.jsx)(Xt,{})," \u0645\u0646\u062e\u0641\u0636"]}):(0,Qe.jsxs)("span",{className:"px-3 py-1 bg-green-100 text-green-600 rounded-full text-xs font-semibold flex items-center gap-1 w-fit",children:[(0,Qe.jsx)(_t,{})," \u0645\u062a\u0627\u062d"]}),b=l||o||"all"!==a;return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4 space-y-4",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u062c\u0631\u062f \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),(0,Qe.jsxs)("button",{onClick:()=>{const e=u.map(e=>{const t=e.mainQuantity||0;let s="\u0645\u062a\u0627\u062d";return 0===t?s="\u0645\u0646\u062a\u0647\u064a":t<10&&(s="\u0645\u0646\u062e\u0641\u0636"),[e.name,e.category,h(e.warehouseId),t,e.mainPrice||0,(e.mainPrice||0)*t,s]}),t=[["\u0627\u0644\u0627\u0633\u0645","\u0627\u0644\u0641\u0626\u0629","\u0627\u0644\u0645\u062e\u0632\u0646","\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629","\u0627\u0644\u0633\u0639\u0631","\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629","\u0627\u0644\u062d\u0627\u0644\u0629"].join(","),...e.map(e=>e.join(","))].join("\n"),a=new Blob(["\ufeff".concat(t)],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");r.href=URL.createObjectURL(a),r.download="inventory_".concat((new Date).toLocaleDateString("ar-EG"),".csv"),r.click(),s("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062c\u0631\u062f \u0628\u0646\u062c\u0627\u062d")},className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors text-sm font-semibold",children:[(0,Qe.jsx)(qt,{})," \u062a\u0635\u062f\u064a\u0631 CSV"]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white shadow",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold mt-1",children:u.length}),(0,Qe.jsxs)("p",{className:"text-xs opacity-75 mt-1",children:["\u0645\u0646 ",e.length," \u0645\u0646\u062a\u062c"]})]}),(0,Qe.jsx)(ft,{className:"text-3xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white shadow",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs opacity-90",children:"\u0645\u062a\u0627\u062d"}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold mt-1",children:m.available}),(0,Qe.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"\u0623\u0643\u062b\u0631 \u0645\u0646 10 \u0642\u0637\u0639"})]}),(0,Qe.jsx)(_t,{className:"text-3xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg p-4 text-white shadow",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs opacity-90",children:"\u0645\u0646\u062e\u0641\u0636"}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold mt-1",children:m.low}),(0,Qe.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"1-9 \u0642\u0637\u0639"})]}),(0,Qe.jsx)(Xt,{className:"text-3xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 rounded-lg p-4 text-white shadow",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs opacity-90",children:"\u0645\u0646\u062a\u0647\u064a"}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold mt-1",children:m.out}),(0,Qe.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"\u064a\u062d\u062a\u0627\u062c \u0625\u0639\u0627\u062f\u0629 \u062a\u0648\u0631\u064a\u062f"})]}),(0,Qe.jsx)(Ps,{className:"text-3xl opacity-80"})]})})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0641\u0626\u0629...",className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,Qe.jsx)(ks,{className:"absolute right-3 top-3 text-gray-400"})]}),(0,Qe.jsxs)("button",{onClick:()=>x(!d),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-colors text-sm font-semibold ".concat(d?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-700"),children:[(0,Qe.jsx)(es,{})," \u0641\u0644\u0627\u062a\u0631 \u0645\u062a\u0642\u062f\u0645\u0629"]})]}),d&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 p-3 bg-gray-50 rounded-lg border",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u062a\u0635\u0641\u064a\u0629 \u062d\u0633\u0628 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:p.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"\u062a\u0635\u0641\u064a\u0629 \u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("select",{value:a,onChange:e=>n(e.target.value),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[{value:"all",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"},{value:"available",label:"\u0645\u062a\u0627\u062d (\u2265 10)"},{value:"low",label:"\u0645\u0646\u062e\u0641\u0636 (1-9)"},{value:"out",label:"\u0645\u0646\u062a\u0647\u064a (0)"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Qe.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[(0,Qe.jsxs)("span",{children:["\u0639\u0631\u0636 ",u.length," \u0645\u0646 ",e.length," \u0645\u0646\u062a\u062c"]}),b&&(0,Qe.jsxs)("button",{onClick:()=>{i(""),c(""),n("all")},className:"text-orange-600 hover:text-orange-700 font-semibold flex items-center gap-1",children:[(0,Qe.jsx)(Ts,{})," \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0641\u0644\u0627\u062a\u0631"]})]})]})}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:0===u.length?(0,Qe.jsxs)("div",{className:"text-center py-12 p-4",children:[(0,Qe.jsx)(ft,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:b?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0628\u062d\u062b":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0641\u064a \u0627\u0644\u0645\u062e\u0627\u0632\u0646"})]}):(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0642\u064a\u0645\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{children:u.map((e,t)=>{const s=e.mainQuantity||0,a=(e.mainPrice||0)*s;return(0,Qe.jsxs)("tr",{className:"border-b hover:bg-gray-50 transition-colors ".concat(0===s?"bg-red-50":s<10?"bg-yellow-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-400 to-orange-500 rounded flex items-center justify-center text-white text-sm",children:(0,Qe.jsx)(ft,{})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-gray-900 text-sm",children:e.name}),e.barcode&&(0,Qe.jsx)("p",{className:"text-xs text-gray-500 font-mono",children:e.barcode})]})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsx)("span",{className:"text-sm text-gray-700",children:e.category})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)(Xs,{className:"text-gray-400 text-xs"}),(0,Qe.jsx)("span",{className:"text-sm text-gray-700",children:h(e.warehouseId)})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsx)("span",{className:"text-lg font-bold ".concat(g(s)),children:s})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("span",{className:"text-sm text-gray-700",children:[(e.mainPrice||0).toLocaleString("ar-EG")," \u062c.\u0645"]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("span",{className:"font-semibold text-green-600 text-sm",children:[a.toLocaleString("ar-EG")," \u062c.\u0645"]})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:f(s)})]},e.id)})})]})})}),u.length>0&&(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[m.totalValue.toLocaleString("ar-EG")," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0645\u062a\u0648\u0633\u0637 \u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[(m.totalValue/u.length).toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u062a\u0648\u0641\u0631"}),(0,Qe.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[(m.available/u.length*100).toFixed(1),"%"]})]})]})})]})},ga=e=>{let{isOpen:t,onClose:s,title:a,children:r,size:n="md",footer:l=null}=e;if(!t)return null;return(0,Qe.jsxs)("div",{className:"fixed inset-0 z-[9998] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),(0,Qe.jsx)("div",{className:"flex min-h-screen items-center justify-center p-4",children:(0,Qe.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl ".concat({sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-full mx-4"}[n]," w-full"),children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Qe.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:a}),(0,Qe.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Qe.jsx)(Ts,{size:20})})]}),(0,Qe.jsx)("div",{className:"p-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:r}),l&&(0,Qe.jsx)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:l})]})})]})},fa=()=>{const e=ee(),{warehouses:t,updateWarehouse:s,deleteWarehouse:a,products:n}=Ye(),{showSuccess:l,showError:i,showWarning:o}=Ke(),{settings:c}=ea(),{hasPermission:d}=We(),x=e=>{const t=(null===c||void 0===c?void 0:c.currency)||"EGP",s="ar"===(null===c||void 0===c?void 0:c.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t}).format(e)},[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(""),[b,v]=(0,r.useState)({name:"",address:"",phone:"",manager:"",description:"",status:"active"}),[j,y]=(0,r.useState)({}),N=e=>(null===n||void 0===n?void 0:n.filter(t=>t.warehouseId===e).length)||0,w=(0,r.useMemo)(()=>t?t.filter(e=>{var t,s,a,r;const n=g.toLowerCase();return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(s=e.address)||void 0===s?void 0:s.toLowerCase().includes(n))||(null===(a=e.manager)||void 0===a?void 0:a.toLowerCase().includes(n))||(null===(r=e.phone)||void 0===r?void 0:r.includes(g))}):[],[t,g]),S=(0,r.useMemo)(()=>{const e=(null===t||void 0===t?void 0:t.length)||0,s=(null===t||void 0===t?void 0:t.filter(e=>"active"===e.status).length)||0;return{total:e,active:s,inactive:e-s,totalProducts:(null===n||void 0===n?void 0:n.length)||0,totalValue:(null===n||void 0===n?void 0:n.reduce((e,t)=>e+(t.mainQuantity||0)*(t.price||0),0))||0}},[t,n]);return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[(0,Qe.jsx)(Ot,{className:"text-orange-500"}),"\u0636\u0628\u0637 \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"]}),(0,Qe.jsx)("p",{className:"text-gray-600 mt-2",children:"\u0625\u062f\u0627\u0631\u0629 \u0648\u0645\u062a\u0627\u0628\u0639\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"})]}),(0,Qe.jsx)(ra,{variant:"primary",icon:(0,Qe.jsx)(js,{}),onClick:()=>e("/warehouses/add-warehouse"),children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u062e\u0632\u0646 \u062c\u062f\u064a\u062f"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:S.total})]}),(0,Qe.jsx)(Xs,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0645\u062e\u0627\u0632\u0646 \u0646\u0634\u0637\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:S.active})]}),(0,Qe.jsx)(It,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-red-500 to-red-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0645\u062e\u0627\u0632\u0646 \u0645\u0639\u0637\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:S.inactive})]}),(0,Qe.jsx)(Xs,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:S.totalProducts})]}),(0,Qe.jsx)(bt,{className:"text-4xl opacity-80"})]})}),d("view_inventory")?(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold mt-1",children:x(S.totalValue)})]}),(0,Qe.jsx)(It,{className:"text-4xl opacity-80"})]})}):(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsxs)("p",{className:"text-lg font-bold mt-1 flex items-center gap-2",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"\u0645\u062e\u0641\u064a"]})]}),(0,Qe.jsx)(It,{className:"text-4xl opacity-80"})]})})]}),(0,Qe.jsx)(aa,{className:"mb-6",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645\u060c \u0627\u0644\u0639\u0646\u0648\u0627\u0646\u060c \u0627\u0644\u0645\u062f\u064a\u0631 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641...",value:g,onChange:e=>f(e.target.value),className:"w-full pr-12 pl-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0627\u0633\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u064a\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w&&w.length>0?w.map(e=>{const t=N(e.id),r=(c=e.id,((null===n||void 0===n?void 0:n.filter(e=>e.warehouseId===c))||[]).reduce((e,t)=>e+(t.mainQuantity||0)*(t.price||0),0));var c;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)(Xs,{className:"text-orange-500 ml-2"}),(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.address||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.phone||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.manager||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Qe.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:t})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:d("view_inventory")?x(r):(0,Qe.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-xs"}),"\u0645\u062e\u0641\u064a"]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:d("edit_warehouse")?(0,Qe.jsx)("button",{onClick:()=>(e=>{if(!d("edit_warehouse"))return void i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062e\u0627\u0632\u0646");const t="active"===e.status?"inactive":"active";try{s(e.id,{status:t}),l("\u062a\u0645 ".concat("active"===t?"\u062a\u0641\u0639\u064a\u0644":"\u062a\u0639\u0637\u064a\u0644"," \u0627\u0644\u0645\u062e\u0632\u0646 \u0628\u0646\u062c\u0627\u062d"))}catch(a){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u063a\u064a\u064a\u0631 \u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u062e\u0632\u0646")}})(e),className:"px-3 py-1 rounded-full text-xs font-semibold transition-colors ".concat("active"===e.status?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"),children:"active"===e.status?"\u0646\u0634\u0637":"\u0645\u0639\u0637\u0644"}):(0,Qe.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===e.status?"\u0646\u0634\u0637":"\u0645\u0639\u0637\u0644"})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,Qe.jsxs)("div",{className:"flex gap-2",children:[d("edit_warehouse")&&(0,Qe.jsx)("button",{onClick:()=>(e=>{d("edit_warehouse")?(p(e),v({name:e.name||"",address:e.address||"",phone:e.phone||"",manager:e.manager||"",description:e.description||"",status:e.status||"active"}),y({}),m(!0)):i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062e\u0627\u0632\u0646")})(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{className:"text-lg"})}),d("delete_warehouse")&&(0,Qe.jsx)("button",{onClick:()=>(e=>{if(!d("delete_warehouse"))return void i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062d\u0630\u0641 \u0627\u0644\u0645\u062e\u0627\u0632\u0646");const t=N(e.id);if(t>0)o('\u0644\u0627 \u064a\u0645\u0643\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u062e\u0632\u0646 "'.concat(e.name,'" \u0644\u0623\u0646\u0647 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 ').concat(t," \u0645\u0646\u062a\u062c. \u064a\u062c\u0628 \u062d\u0630\u0641 \u0623\u0648 \u0646\u0642\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0623\u0648\u0644\u0627\u064b."));else if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u062e\u0632\u0646 "'.concat(e.name,'"\u061f')))try{a(e.id),l("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u062e\u0632\u0646 \u0628\u0646\u062c\u0627\u062d")}catch(s){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u062e\u0632\u0646"),console.error("Error deleting warehouse:",s)}})(e),className:"text-red-600 hover:text-red-800 transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{className:"text-lg"})})]})})]},e.id)}):(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:g?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c \u0644\u0644\u0628\u062d\u062b":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u062e\u0627\u0632\u0646. \u0642\u0645 \u0628\u0625\u0636\u0627\u0641\u0629 \u0645\u062e\u0632\u0646 \u062c\u062f\u064a\u062f"})})})]})})}),(0,Qe.jsx)(ga,{isOpen:u,onClose:()=>{m(!1),p(null),y({})},title:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0646",children:(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),d("edit_warehouse"))if((()=>{const e={};b.name.trim()?(null===t||void 0===t?void 0:t.some(e=>e.id!==(null===h||void 0===h?void 0:h.id)&&e.name.toLowerCase().trim()===b.name.toLowerCase().trim()))&&(e.name="\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064b"):e.name="\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646 \u0645\u0637\u0644\u0648\u0628";b.address.trim()||(e.address="\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0645\u0637\u0644\u0648\u0628"),b.phone&&b.phone.trim()&&(/^\+20[0-9]{9,10}$/.test(b.phone.replace(/\s/g,""))||(e.phone="\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0628\u062f\u0623 \u0628\u0640 +20 \u0648\u064a\u062a\u0643\u0648\u0646 \u0645\u0646 9-10 \u0623\u0631\u0642\u0627\u0645"));return y(e),0===Object.keys(e).length})())try{const e=Be(Be({},b),{},{name:b.name.trim(),address:b.address.trim(),phone:b.phone.trim(),manager:b.manager.trim(),description:b.description.trim()});s(h.id,e),l("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0646 \u0628\u0646\u062c\u0627\u062d"),m(!1),p(null)}catch(a){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u062e\u0632\u0646"),console.error("Error updating warehouse:",a)}else i("\u064a\u0631\u062c\u0649 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0623\u062e\u0637\u0627\u0621 \u0641\u064a \u0627\u0644\u0646\u0645\u0648\u0630\u062c");else i("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062e\u0627\u0632\u0646")},className:"space-y-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u062e\u0632\u0646",name:"name",value:b.name,onChange:e=>{v(Be(Be({},b),{},{name:e.target.value})),j.name&&y(Be(Be({},j),{},{name:""}))},required:!0,error:j.name}),j.name&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:b.address,onChange:e=>{v(Be(Be({},b),{},{address:e.target.value})),j.address&&y(Be(Be({},j),{},{address:""}))},required:!0,error:j.address}),j.address&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.address})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",name:"phone",value:b.phone,onChange:e=>{v(Be(Be({},b),{},{phone:e.target.value})),j.phone&&y(Be(Be({},j),{},{phone:""}))},placeholder:"+20 XXX XXX XXXX",error:j.phone}),j.phone&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:j.phone})]}),(0,Qe.jsx)(da,{label:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646",name:"manager",value:b.manager,onChange:e=>v(Be(Be({},b),{},{manager:e.target.value}))}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:b.status,onChange:e=>v(Be(Be({},b),{},{status:e.target.value})),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u0645\u0639\u0637\u0644"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("textarea",{name:"description",value:b.description,onChange:e=>v(Be(Be({},b),{},{description:e.target.value})),rows:"3",className:"w-full px-4 py-2 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-400 focus:border-transparent",placeholder:"\u0648\u0635\u0641 \u0627\u0644\u0645\u062e\u0632\u0646..."})]}),(0,Qe.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,Qe.jsx)(ra,{type:"button",variant:"secondary",onClick:()=>{m(!1),p(null),y({})},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{type:"submit",variant:"success",children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"})]})]})})]})},ba=function(e){var t,s,a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"purchase";const{formData:n,items:l,total:i,suppliers:o,customers:c,products:d,warehouses:x,paymentTypes:u}=e,m="Bero System",h="\u0627\u0644\u0642\u0627\u0647\u0631\u0629 - \u0645\u0635\u0631",p="+20 123 456 789",g="info@berosystem.com",f="purchase"===r?(null===o||void 0===o||null===(t=o.find(e=>e.id===parseInt(n.supplierId)))||void 0===t?void 0:t.name)||"-":(null===c||void 0===c||null===(s=c.find(e=>e.id===parseInt(n.customerId)))||void 0===s?void 0:s.name)||"-",b=(null===u||void 0===u||null===(a=u.find(e=>e.value===n.paymentType))||void 0===a?void 0:a.label)||"-",v=Date.now(),j='\n    <!DOCTYPE html>\n    <html dir="rtl" lang="ar">\n    <head>\n      <meta charset="UTF-8">\n      <meta name="viewport" content="width=device-width, initial-scale=1.0">\n      <title>\u0641\u0627\u062a\u0648\u0631\u0629 - '.concat(v,'</title>\n      <style>\n        * {\n          margin: 0;\n          padding: 0;\n          box-sizing: border-box;\n        }\n        \n        body {\n          font-family: Arial, sans-serif;\n          padding: 20px;\n          background: white;\n          color: #000;\n          line-height: 1.6;\n        }\n        \n        .invoice-container {\n          max-width: 800px;\n          margin: 0 auto;\n          background: white;\n          border: 2px solid #000;\n          padding: 20px;\n        }\n        \n        .invoice-header {\n          text-align: center;\n          padding-bottom: 20px;\n          margin-bottom: 20px;\n          border-bottom: 2px solid #000;\n        }\n        \n        .invoice-header h1 {\n          font-size: 28px;\n          font-weight: bold;\n          color: #000;\n          margin-bottom: 5px;\n        }\n        \n        .invoice-header .company-details {\n          font-size: 12px;\n          color: #333;\n          margin: 3px 0;\n        }\n        \n        .invoice-type {\n          background: #000;\n          color: #fff;\n          padding: 10px;\n          text-align: center;\n          font-size: 18px;\n          font-weight: bold;\n          margin-bottom: 20px;\n        }\n        \n        .invoice-info {\n          display: table;\n          width: 100%;\n          margin-bottom: 20px;\n          border: 1px solid #000;\n        }\n        \n        .invoice-info-row {\n          display: table-row;\n        }\n        \n        .invoice-info-label,\n        .invoice-info-value {\n          display: table-cell;\n          padding: 10px;\n          border: 1px solid #000;\n        }\n        \n        .invoice-info-label {\n          font-weight: bold;\n          background: #f5f5f5;\n          width: 30%;\n        }\n        \n        .items-table {\n          width: 100%;\n          border-collapse: collapse;\n          margin-bottom: 20px;\n          border: 2px solid #000;\n        }\n        \n        .items-table thead {\n          background: #000;\n          color: #fff;\n        }\n        \n        .items-table th,\n        .items-table td {\n          padding: 10px;\n          text-align: right;\n          border: 1px solid #000;\n        }\n        \n        .items-table th {\n          font-weight: bold;\n          font-size: 14px;\n        }\n        \n        .items-table td {\n          font-size: 13px;\n        }\n        \n        .items-table tbody tr:nth-child(even) {\n          background: #f9f9f9;\n        }\n        \n        .totals-section {\n          margin-top: 20px;\n          border: 2px solid #000;\n          padding: 15px;\n          background: #f5f5f5;\n        }\n        \n        .total-row {\n          display: flex;\n          justify-content: space-between;\n          padding: 10px 0;\n          font-size: 16px;\n          font-weight: bold;\n        }\n        \n        .total-row.grand-total {\n          border-top: 2px solid #000;\n          margin-top: 10px;\n          padding-top: 15px;\n          font-size: 20px;\n          color: #000;\n        }\n        \n        .footer {\n          text-align: center;\n          margin-top: 30px;\n          padding-top: 20px;\n          border-top: 2px solid #000;\n          font-size: 12px;\n          color: #666;\n        }\n        \n        .print-date {\n          margin-top: 10px;\n          font-size: 11px;\n          color: #999;\n        }\n        \n        @media print {\n          body {\n            padding: 0;\n          }\n          \n          @page {\n            size: A4 portrait;\n            margin: 1.5cm;\n          }\n          \n          .invoice-container {\n            border: none;\n            padding: 0;\n          }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="invoice-container">\n        \x3c!-- \u0631\u0623\u0633 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 --\x3e\n        <div class="invoice-header">\n          <h1>').concat(m,'</h1>\n          <p class="company-details">').concat(h,'</p>\n          <p class="company-details">\u0627\u0644\u0647\u0627\u062a\u0641: ').concat(p," | \u0627\u0644\u0628\u0631\u064a\u062f: ").concat(g,'</p>\n        </div>\n\n        \x3c!-- \u0646\u0648\u0639 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 --\x3e\n        <div class="invoice-type">\n          ').concat("purchase"===r?"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a":"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a",'\n        </div>\n\n        \x3c!-- \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 --\x3e\n        <table class="invoice-info">\n          <tr class="invoice-info-row">\n            <td class="invoice-info-label">\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629</td>\n            <td class="invoice-info-value">#').concat(v,'</td>\n          </tr>\n          <tr class="invoice-info-row">\n            <td class="invoice-info-label">').concat("purchase"===r?"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f":"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",'</td>\n            <td class="invoice-info-value">').concat(f,'</td>\n          </tr>\n          <tr class="invoice-info-row">\n            <td class="invoice-info-label">\u0627\u0644\u062a\u0627\u0631\u064a\u062e</td>\n            <td class="invoice-info-value">').concat(new Date(n.date).toLocaleDateString("ar-EG"),'</td>\n          </tr>\n          <tr class="invoice-info-row">\n            <td class="invoice-info-label">\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639</td>\n            <td class="invoice-info-value">').concat(b,"</td>\n          </tr>\n          ").concat(n.notes?'\n          <tr class="invoice-info-row">\n            <td class="invoice-info-label">\u0645\u0644\u0627\u062d\u0638\u0627\u062a</td>\n            <td class="invoice-info-value">'.concat(n.notes,"</td>\n          </tr>\n          "):"",'\n        </table>\n\n        \x3c!-- \u062c\u062f\u0648\u0644 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 --\x3e\n        <table class="items-table">\n          <thead>\n            <tr>\n              <th style="width: 5%">#</th>\n              <th style="width: 30%">\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641</th>\n              <th style="width: 20%">\u0627\u0644\u0645\u062e\u0632\u0646</th>\n              <th style="width: 10%">\u0627\u0644\u0643\u0645\u064a\u0629</th>\n              <th style="width: 15%">\u0627\u0644\u0633\u0639\u0631</th>\n              <th style="width: 20%">\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(l.map((e,t)=>{const s=null===d||void 0===d?void 0:d.find(t=>t.id===parseInt(e.productId)),a=null===x||void 0===x?void 0:x.find(e=>e.id===(null===s||void 0===s?void 0:s.warehouseId)),r=e.quantity*(e.price||0);return"\n                <tr>\n                  <td>".concat(t+1,"</td>\n                  <td>").concat((null===s||void 0===s?void 0:s.name)||"-","</td>\n                  <td>").concat((null===a||void 0===a?void 0:a.name)||"-","</td>\n                  <td>").concat(e.quantity,"</td>\n                  <td>").concat(parseFloat(e.price||0).toFixed(2)," \u062c.\u0645</td>\n                  <td>").concat(r.toFixed(2)," \u062c.\u0645</td>\n                </tr>\n              ")}).join(""),'\n          </tbody>\n        </table>\n\n        \x3c!-- \u0627\u0644\u0645\u062c\u0627\u0645\u064a\u0639 --\x3e\n        <div class="totals-section">\n          <div class="total-row">\n            <span>\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a:</span>\n            <span>').concat((i||0).toFixed(2),' \u062c.\u0645</span>\n          </div>\n          <div class="total-row grand-total">\n            <span>\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0646\u0647\u0627\u0626\u064a:</span>\n            <span>').concat((i||0).toFixed(2),' \u062c.\u0645</span>\n          </div>\n        </div>\n\n        \x3c!-- \u0627\u0644\u062a\u0630\u064a\u064a\u0644 --\x3e\n        <div class="footer">\n          <p><strong>\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627</strong></p>\n          <p>Bero System - \u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0645\u062a\u0643\u0627\u0645\u0644</p>\n          <p class="print-date">\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0628\u0627\u0639\u0629: ').concat((new Date).toLocaleString("ar-EG"),"</p>\n        </div>\n      </div>\n      \n      <script>\n        window.onload = function() {\n          window.print();\n          window.onafterprint = function() {\n            window.close();\n          };\n        };\n      <\/script>\n    </body>\n    </html>\n  "),y=window.open("","_blank","width=800,height=600");y.document.write(j),y.document.close()},va=()=>{const{suppliers:e,products:t,warehouses:s,addPurchaseInvoice:a,getSupplierBalance:n}=Ye(),{showSuccess:l,showError:i}=Ke(),[o,c]=(0,r.useState)({supplierId:"",date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),paymentType:"main",notes:"",discountType:"percentage",discountValue:0}),[d,x]=(0,r.useState)([{productId:"",productName:"",quantity:1,subQuantity:0,price:0,subPrice:0,discount:0}]),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)([""]),[b,v]=(0,r.useState)([!1]),[j,y]=(0,r.useState)(!1),[N,w]=(0,r.useState)([!1]),[S,k]=(0,r.useState)([!1]),[C,I]=(0,r.useState)([!1]),[D,_]=(0,r.useState)([!1]),[L,E]=(0,r.useState)({}),M=(0,r.useRef)(null),P=(0,r.useRef)([]),T=(0,r.useRef)([]);(0,r.useEffect)(()=>{var e;null===(e=M.current)||void 0===e||e.focus()},[]);const z=e=>(e.quantity||0)*(e.price||0)+(e.subQuantity||0)*(e.subPrice||0),O=e=>{const t=z(e),s=e.discount||0;return Math.max(0,t-s)},A=()=>d.reduce((e,t)=>e+O(t),0),F=()=>{const e=A();return"percentage"===o.discountType?e*(o.discountValue/100):parseFloat(o.discountValue)||0},R=()=>{const e=A(),t=F();return Math.max(0,e-t)},V=null;o.supplierId&&n(parseInt(o.supplierId));(0,r.useEffect)(()=>{const e=e=>{var t;if(e.ctrlKey&&"s"===e.key&&(e.preventDefault(),U(e)),"Enter"===e.key&&null!==(t=e.target.name)&&void 0!==t&&t.startsWith("quantity-")){parseInt(e.target.name.split("-")[1])===d.length-1&&(e.preventDefault(),W())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[d]);const B=e=>{c(Be(Be({},o),{},{[e.target.name]:e.target.value}))},q=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())),Q=e=>{const s=g[e]||"";return t.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()))},H=(e,t,s)=>{const a=[...d];if(a[e][t]=s,x(a),"quantity"===t||"subQuantity"===t){const a=[...S];"quantity"===t&&(a[e]=s<0),k(a)}if("price"===t||"subPrice"===t){const a=[...C];"price"===t&&(a[e]=s<0),I(a)}if("discount"===t){const t=[...D];t[e]=s<0,_(t)}},W=()=>{x([...d,{productId:"",productName:"",quantity:1,subQuantity:0,price:0,subPrice:0,discount:0}]),f([...g,""]),v([...b,!1]),w([...N,!1]),k([...S,!1]),I([...C,!1]),_([...D,!1]),setTimeout(()=>{var e;const t=d.length;null===(e=P.current[t])||void 0===e||e.focus()},100)},U=function(r){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&r.preventDefault(),!(()=>{const e={};o.supplierId||(e.supplier="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0648\u0631\u062f"),o.date||(e.date="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),o.discountValue<0&&(e.discount="\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0629"),"percentage"===o.discountType&&o.discountValue>100&&(e.discount="\u0646\u0633\u0628\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0632\u064a\u062f \u0639\u0646 100%"),F()>A()&&(e.discount="\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0632\u064a\u062f \u0639\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a");const t=[],s=[],a=[];return d.forEach((r,n)=>{r.productId||(e["product_".concat(n)]="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"),r.quantity<0?(e["quantity_".concat(n)]="\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0629",t[n]=!0):0===r.quantity&&0===r.subQuantity?(e["quantity_".concat(n)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0623\u0633\u0627\u0633\u064a\u0629 \u0623\u0648 \u0641\u0631\u0639\u064a\u0629",t[n]=!0):t[n]=!1,r.price<0?(e["price_".concat(n)]="\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b",s[n]=!0):0===r.price&&r.quantity>0?(e["price_".concat(n)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0633\u0639\u0631 \u0623\u0633\u0627\u0633\u064a \u0644\u0644\u0645\u0646\u062a\u062c",s[n]=!0):s[n]=!1,r.subPrice<0?e["subPrice_".concat(n)]="\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0641\u0631\u0639\u064a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b":0===r.subPrice&&r.subQuantity>0&&(e["subPrice_".concat(n)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0633\u0639\u0631 \u0641\u0631\u0639\u064a \u0639\u0646\u062f \u0648\u062c\u0648\u062f \u0643\u0645\u064a\u0629 \u0641\u0631\u0639\u064a\u0629"),r.discount<0?(e["discount_".concat(n)]="\u062e\u0635\u0645 \u0627\u0644\u0639\u0646\u0635\u0631 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b",a[n]=!0):r.discount>z(r)?(e["discount_".concat(n)]="\u062e\u0635\u0645 \u0627\u0644\u0639\u0646\u0635\u0631 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0632\u064a\u062f \u0639\u0646 \u0625\u062c\u0645\u0627\u0644\u064a\u0647",a[n]=!0):a[n]=!1}),k(t),I(s),_(a),E(e),R()<=0&&(e.total="\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631"),0===Object.keys(e).length})()){i("\u064a\u0631\u062c\u0649 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0623\u062e\u0637\u0627\u0621 \u0642\u0628\u0644 \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629");const e=Object.values(L)[0];return void(e&&setTimeout(()=>i(e),500))}try{const r=F(),i=Be(Be({},o),{},{date:"".concat(o.date,"T").concat(o.time,":00"),items:d,subtotal:A(),discountAmount:r,total:R(),status:"completed"}),c=a(i);if(l("\u062a\u0645 \u062d\u0641\u0638 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),n){const a=e.find(e=>e.id===parseInt(o.supplierId));ba({formData:c,items:c.items,subtotal:c.subtotal,discountAmount:c.discountAmount,total:c.total,supplier:a,suppliers:e,products:t,warehouses:s},"purchase")}X()}catch(c){i(c.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),console.error("\u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a:",c)}},X=()=>{var e;c({supplierId:"",date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),paymentType:"main",notes:"",discountType:"percentage",discountValue:0}),x([{productId:"",productName:"",quantity:1,subQuantity:0,price:0,subPrice:0,discount:0}]),m(""),f([""]),p(!1),v([!1]),y(!1),w([!1]),k([!1]),I([!1]),_([!1]),E({}),null===(e=M.current)||void 0===e||e.focus()};return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[V,(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4 pb-4 border-b",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{ref:M,type:"text",value:u,onChange:e=>{return t=e.target.value,m(t),void p(t.trim().length>0);var t},onBlur:()=>{setTimeout(()=>{p(!1)},200)},className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0648\u0631\u062f..."}),(0,Qe.jsx)(ks,{className:"absolute left-2 top-2.5 text-gray-400 text-xs"})]}),h&&u.trim().length>0&&q.length>0&&(0,Qe.jsx)("div",{className:"absolute z-[9999] w-full mt-1 bg-white border-2 border-blue-400 rounded-lg shadow-xl max-h-56 overflow-y-auto",children:q.map(e=>(0,Qe.jsx)("div",{onClick:()=>(e=>{c(Be(Be({},o),{},{supplierId:e.id})),m(e.name),p(!1)})(e),className:"px-4 py-2.5 hover:bg-blue-100 cursor-pointer border-b last:border-b-0 transition-colors",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"font-semibold text-sm text-gray-800",children:e.name}),(0,Qe.jsx)("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:e.phone})]})},e.id))})]}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{name:"paymentType",value:o.paymentType,onChange:B,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"main",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Qe.jsx)("option",{value:"deferred",children:"\u0622\u062c\u0644"}),(0,Qe.jsx)("option",{value:"partial",children:"\u062c\u0632\u0626\u064a"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("input",{type:"date",name:"date",value:o.date,onChange:B,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("input",{type:"time",name:"time",value:o.time,onChange:B,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})})]}),(0,Qe.jsx)("div",{className:"mb-4 relative",children:(0,Qe.jsx)("div",{className:"overflow-x-auto overflow-y-visible",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-2 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-20",children:"\u0643\u0645\u064a\u0629 \u0623\u0633\u0627\u0633\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-20",children:"\u0643\u0645\u064a\u0629 \u0641\u0631\u0639\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0633\u0639\u0631 \u0623\u0633\u0627\u0633\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0633\u0639\u0631 \u0641\u0631\u0639\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0627\u0644\u062e\u0635\u0645"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-16",children:"\u062d\u0630\u0641"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:d.map((e,t)=>{var a;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-2 py-2 static",children:[(0,Qe.jsxs)("div",{className:"relative z-[10]",children:[(0,Qe.jsx)("input",{ref:e=>P.current[t]=e,type:"text",value:g[t]||"",onChange:e=>((e,t)=>{const s=[...g];s[e]=t,f(s);const a=[...b];a[e]=t.trim().length>0,v(a)})(t,e.target.value),onBlur:()=>(e=>{setTimeout(()=>{const t=[...b];t[e]=!1,v(t)},200)})(t),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c..."}),(0,Qe.jsx)(ks,{className:"absolute left-2 top-2.5 text-gray-400 text-xs"})]}),b[t]&&(null===(a=g[t])||void 0===a?void 0:a.trim().length)>0&&Q(t).length>0&&(0,Qe.jsx)("div",{className:"absolute z-[9999] left-0 w-full mt-1 bg-white border-2 border-blue-400 rounded-lg shadow-2xl max-h-64 overflow-y-auto",children:Q(t).map(e=>{const a=s.find(t=>t.id===e.warehouseId);return(0,Qe.jsx)("div",{onClick:()=>((e,t)=>{const s=[...d];s[e]=Be(Be({},s[e]),{},{productId:t.id,productName:t.name,price:parseFloat(t.mainPrice)||0,subPrice:parseFloat(t.subPrice)||0,discount:0}),x(s);const a=[...g];a[e]=t.name,f(a);const r=[...b];r[e]=!1,v(r),setTimeout(()=>{var t;null===(t=T.current[e])||void 0===t||t.focus()},100)})(t,e),className:"px-4 py-2.5 hover:bg-blue-100 cursor-pointer border-b last:border-b-0 transition-colors",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("span",{className:"font-semibold text-sm text-gray-800",children:e.name}),(0,Qe.jsxs)("span",{className:"text-xs text-gray-600 mr-2",children:["(",(null===a||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"," - ",e.category,")"]})]}),(0,Qe.jsxs)("span",{className:"text-xs font-bold text-green-700 bg-green-100 px-2 py-1 rounded",children:["\u0623\u0633\u0627\u0633\u064a: ",e.mainQuantity||0,", \u0641\u0631\u0639\u064a: ",e.subQuantity||0]})]})},e.id)})})]}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{ref:e=>T.current[t]=e,type:"number",name:"quantity-".concat(t),value:e.quantity,onChange:e=>H(t,"quantity",parseInt(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(S[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",value:e.subQuantity,onChange:e=>H(t,"subQuantity",parseInt(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.price,onChange:e=>H(t,"price",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(C[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.subPrice,onChange:e=>H(t,"subPrice",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.discount,onChange:e=>H(t,"discount",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(D[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2 text-center",children:(0,Qe.jsx)("span",{className:"font-semibold text-blue-600",children:O(e).toFixed(2)})}),(0,Qe.jsx)("td",{className:"px-2 py-2 text-center",children:(0,Qe.jsx)("button",{type:"button",onClick:()=>(e=>{d.length>1&&(x(d.filter((t,s)=>s!==e)),f(g.filter((t,s)=>s!==e)),v(b.filter((t,s)=>s!==e)),w(N.filter((t,s)=>s!==e)),k(S.filter((t,s)=>s!==e)),I(C.filter((t,s)=>s!==e)),_(D.filter((t,s)=>s!==e)))})(t),disabled:1===d.length,className:"text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:(0,Qe.jsx)(Os,{})})})]},t)})})]})})}),(0,Qe.jsx)("button",{type:"button",onClick:W,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"+ \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f (Enter)"}),(0,Qe.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsx)("textarea",{name:"notes",value:o.notes,onChange:B,rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(fs,{className:"text-yellow-600"}),(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u062e\u0635\u0645"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,Qe.jsxs)("select",{name:"discountType",value:o.discountType,onChange:B,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"percentage",children:"\u0646\u0633\u0628\u0629 \u0645\u0626\u0648\u064a\u0629 %"}),(0,Qe.jsx)("option",{value:"fixed",children:"\u0645\u0628\u0644\u063a \u062b\u0627\u0628\u062a"})]}),(0,Qe.jsx)("input",{type:"number",name:"discountValue",value:o.discountValue,onChange:B,className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0",step:"percentage"===o.discountType?"0.1":"0.01",placeholder:"percentage"===o.discountType?"0.0%":"0.00"})]}),o.discountValue>0&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-600 text-center",children:["\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645: ",F().toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,Qe.jsxs)("div",{className:"space-y-2",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a:"}),(0,Qe.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[A().toFixed(2)," \u062c.\u0645"]})]}),o.discountValue>0&&(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-1 border-t border-blue-200",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u062e\u0635\u0645:"}),(0,Qe.jsxs)("span",{className:"text-sm font-medium text-red-600",children:["-",F().toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-lg font-bold text-blue-700",children:[R().toFixed(2)," \u062c.\u0645"]})]})]}),(0,Qe.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-2",children:["\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a: ",d.length]})]})]})]})}),(0,Qe.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,Qe.jsxs)("button",{type:"button",onClick:X,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",title:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0627\u0644\u0643\u0627\u0645\u0644",children:[(0,Qe.jsx)(Os,{})," \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"]}),(0,Qe.jsxs)("button",{type:"button",onClick:e=>U(e,!1),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,Qe.jsx)(Ss,{})," \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"]}),(0,Qe.jsxs)("button",{type:"button",onClick:e=>U(e,!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,Qe.jsx)(ys,{})," \u062d\u0641\u0638 \u0648\u0637\u0628\u0627\u0639\u0629"]})]})}),(0,Qe.jsxs)("div",{className:"mt-4 pt-3 border-t text-xs text-gray-500 text-center",children:[(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"\ud83d\udca1 \u0627\u062e\u062a\u0635\u0627\u0631\u0627\u062a: "}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Ctrl+S = \u062d\u0641\u0638"}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Enter = \u0635\u0641 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Tab = \u0627\u0644\u062a\u0646\u0642\u0644"})]})]})]})},ja=e=>{let{columns:t,data:s,onEdit:a,onDelete:r,onView:n,onReturn:l,actions:i=!0}=e;return(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[t.map((e,t)=>(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b",children:e.header},t)),i&&(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase tracking-wider border-b",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:s&&s.length>0?s.map((e,s)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.map((t,s)=>(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.render?t.render(e):e[t.accessor]},s)),i&&(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Qe.jsxs)("div",{className:"flex gap-2 justify-end",children:[n&&(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>n(e),children:"\u0639\u0631\u0636"}),l&&(0,Qe.jsx)(ra,{variant:"warning",size:"sm",onClick:()=>l(e),children:"\u0625\u0631\u062c\u0627\u0639"}),a&&(0,Qe.jsx)(ra,{variant:"primary",size:"sm",onClick:()=>a(e),children:"\u062a\u0639\u062f\u064a\u0644"}),r&&(0,Qe.jsx)(ra,{variant:"danger",size:"sm",onClick:()=>r(e),children:"\u062d\u0630\u0641"})]})})]},s)):(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:t.length+(i?1:0),className:"px-6 py-8 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0644\u0639\u0631\u0636"})})})]})})},ya=()=>{const{purchaseInvoices:e,suppliers:t,products:s,warehouses:a}=Ye(),[n,l]=(0,r.useState)(""),i=e.filter(e=>{const s=t.find(t=>t.id===parseInt(e.supplierId));return(s?s.name:"").toLowerCase().includes(n.toLowerCase())}),o=[{header:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",accessor:"id",render:e=>"#".concat(e.id)},{header:"\u0627\u0644\u0645\u0648\u0631\u062f",accessor:"supplierId",render:e=>{const s=t.find(t=>t.id===parseInt(e.supplierId));return s?s.name:"-"}},{header:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",accessor:"date",render:e=>new Date(e.date).toLocaleDateString("ar-EG")},{header:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639",accessor:"paymentType",render:e=>({cash:"\u0646\u0642\u062f\u064a",deferred:"\u0622\u062c\u0644",partial:"\u062c\u0632\u0626\u064a"}[e.paymentType]||e.paymentType)},{header:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639",accessor:"total",render:e=>"".concat(e.total||0," \u062f.\u0639")},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 rounded text-xs",children:"\u0645\u0643\u062a\u0645\u0644\u0629"})},{header:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",render:e=>(0,Qe.jsxs)("button",{onClick:()=>{const r={formData:e,items:e.items||[],total:e.total||0,suppliers:t,customers:[],products:s,warehouses:a,paymentTypes:[{value:"cash",label:"\u0646\u0642\u062f\u064a"},{value:"deferred",label:"\u0622\u062c\u0644"},{value:"partial",label:"\u062c\u0632\u0626\u064a"}],type:"purchase"};ba(r,"purchase")},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-semibold transition-colors",title:"\u0637\u0628\u0627\u0639\u0629 \u0641\u0648\u0631\u064a\u0629",children:[(0,Qe.jsx)(ys,{})," \u0637\u0628\u0627\u0639\u0629"]})}];return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0633\u062c\u0644 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)(aa,{icon:(0,Qe.jsx)(xs,{}),children:[(0,Qe.jsx)("div",{className:"mb-6",children:(0,Qe.jsx)(da,{label:"\u0628\u062d\u062b",name:"search",value:n,onChange:e=>l(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f...",icon:(0,Qe.jsx)(ks,{})})}),(0,Qe.jsx)(ja,{columns:o,data:i})]})]})},Na=e=>{let{invoice:t,products:s,suppliers:a,purchaseReturns:n,onSubmit:l,onClose:i,formatCurrency:o}=e;const[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),p=a.find(e=>e.id===parseInt(t.supplierId));(0,r.useEffect)(()=>{const e=t.items.map(e=>{const a=n.filter(e=>e.invoiceId===t.id&&"cancelled"!==e.status);let r=0;a.forEach(t=>{const s=t.items.find(t=>t.productId===e.productId);s&&(r+=(s.quantity||0)+(s.subQuantity||0))});const l=parseInt(e.quantity)||0,i=l-r,o=s.find(t=>t.id===parseInt(e.productId));return{productId:e.productId,productName:(null===o||void 0===o?void 0:o.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",originalQuantity:l,originalPrice:e.price||0,returnedQty:r,availableQty:i,returnQuantity:0,returnSubQuantity:0,selected:!1}});d(e)},[t,n,s]);return(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0631\u062c\u0627\u0639 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 #",t.id]})]}),(0,Qe.jsx)("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:(0,Qe.jsx)(Ts,{})})]}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===p||void 0===p?void 0:p.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(t.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:"cash"===t.paymentType?"\u0646\u0642\u062f\u064a":"deferred"===t.paymentType?"\u0622\u062c\u0644":"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsx)("p",{className:"font-bold text-lg text-purple-600",children:o(t.total||0)})]})]})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=c.filter(e=>e.selected);if(0===s.length)return void alert("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0646\u062a\u062c \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0644\u0644\u0625\u0631\u062c\u0627\u0639");if(s.some(e=>0===e.returnQuantity))alert("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0635\u062d\u064a\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629");else if(x.trim())try{const e={invoiceId:t.id,items:s.map(e=>({productId:e.productId,quantity:e.returnQuantity,subQuantity:0})),reason:x,notes:m};l(e)}catch(a){alert(a.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}else alert("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")},children:[(0,Qe.jsxs)("div",{className:"bg-white border rounded-lg mb-4",children:[(0,Qe.jsx)("div",{className:"p-4 border-b",children:(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u0627\u062f \u0625\u0631\u062c\u0627\u0639\u0647\u0627"})}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{className:"bg-gray-100",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 w-10",children:(0,Qe.jsx)("input",{type:"checkbox",onChange:e=>{const t=c.map(t=>Be(Be({},t),{},{selected:e.target.checked&&t.availableQty>0}));d(t)},className:"rounded"})}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0633\u0627\u0628\u0642\u0627\u064b"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062a\u0627\u062d \u0644\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0643\u0645\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:c.map((e,t)=>{const a=s.find(t=>t.id===parseInt(e.productId)),r=e.returnQuantity*e.originalPrice,n=0===e.availableQty;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(n?"opacity-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>(e=>{const t=[...c];t[e].selected=!t[e].selected,t[e].selected||(t[e].returnQuantity=0,t[e].returnSubQuantity=0),d(t)})(t),disabled:n,className:"rounded"})}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:e.productName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===a||void 0===a?void 0:a.category)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:e.originalQuantity}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:e.returnedQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.availableQty>0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:e.selected&&(0,Qe.jsx)("input",{type:"number",value:e.returnQuantity,onChange:e=>((e,t)=>{const s=[...c],a=s[e];s[e].returnQuantity=Math.max(0,parseInt(t)||0),s[e].returnQuantity>a.availableQty&&(s[e].returnQuantity=0),d(s)})(t,e.target.value),className:"w-20 px-2 py-1 text-xs text-center border border-gray-300 rounded",min:"0",max:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:e.selected?r.toFixed(2):"0.00"})]},t)})})]})})]}),(0,Qe.jsx)("div",{className:"bg-white border rounded-lg mb-4 p-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"defective",children:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("option",{value:"wrong_item",children:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626"}),(0,Qe.jsx)("option",{value:"supplier_request",children:"\u0637\u0644\u0628 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]})}),(0,Qe.jsx)("div",{className:"bg-white border rounded-lg mb-4 p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.filter(e=>e.selected).length})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-red-600",children:o(c.reduce((e,t)=>t.selected?e+t.returnQuantity*t.originalPrice:e,0))})]})]})}),(0,Qe.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,Qe.jsx)("button",{type:"button",onClick:i,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)("button",{type:"submit",className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(Rs,{})," \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"]})]})]})]})]})})},wa=()=>{var e;const{purchaseInvoices:t,suppliers:s,products:a,warehouses:n,deletePurchaseInvoice:l,addPurchaseReturn:i,purchaseReturns:o}=Ye(),{showSuccess:c,showError:d}=Ke(),{settings:x}=ea(),{hasPermission:u}=We(),m=e=>{const t=(null===x||void 0===x?void 0:x.currency)||"EGP",s="ar"===(null===x||void 0===x?void 0:x.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},h=u("view_purchase_invoices"),p=u("return_purchase"),g=u("print_invoices"),f=u("delete_purchase_invoice"),b=u("manage_purchases"),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(null),[w,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)("all"),[I,D]=(0,r.useState)(!1),[_,L]=(0,r.useState)(null),E=t.filter(e=>{const t=s.find(t=>t.id===parseInt(e.supplierId)),a=(t?t.name:"").toLowerCase().includes(v.toLowerCase())||e.id.toString().includes(v),r="all"===k||e.paymentType===k;return a&&r}),M=e=>{if(g)try{const t={formData:e,items:e.items||[],total:e.total||0,suppliers:s,products:a,warehouses:n};ba(t,"purchase"),c("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0644\u0644\u0637\u0628\u0627\u0639\u0629")}catch(t){d("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}else d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631")},P={cash:"\u0646\u0642\u062f\u064a",deferred:"\u0622\u062c\u0644",partial:"\u062c\u0632\u0626\u064a"};return b||h?(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f..."}),(0,Qe.jsx)(ks,{className:"absolute left-3 top-3 text-gray-400"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[(0,Qe.jsx)("option",{value:"all",children:"\u0643\u0644 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,Qe.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Qe.jsx)("option",{value:"deferred",children:"\u0622\u062c\u0644"}),(0,Qe.jsx)("option",{value:"partial",children:"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsx)(es,{className:"absolute left-3 top-3 text-gray-400"})]})})]}),(0,Qe.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["\u0639\u0631\u0636 ",E.length," \u0645\u0646 ",t.length," \u0641\u0627\u062a\u0648\u0631\u0629"]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===E.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsxs)("td",{colSpan:"7",className:"px-3 py-8 text-center text-gray-500",children:[(0,Qe.jsx)(Zt,{className:"mx-auto mb-2 text-3xl text-gray-300"}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631"})]})}):E.map(e=>{var t;const a=s.find(t=>t.id===parseInt(e.supplierId));return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-3 py-2 font-semibold text-blue-600",children:["#",e.id]}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===a||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===a||void 0===a?void 0:a.phone)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("cash"===e.paymentType?"bg-green-100 text-green-700":"deferred"===e.paymentType?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"),children:P[e.paymentType]||e.paymentType})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-bold text-green-600",children:m(e.total||0)}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:(null===(t=e.items)||void 0===t?void 0:t.length)||0})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-2",children:[h&&(0,Qe.jsx)("button",{onClick:()=>(e=>{h?(N(e),S(!0)):d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a")})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\u0639\u0631\u0636",children:(0,Qe.jsx)(Zt,{})}),p&&(0,Qe.jsx)("button",{onClick:()=>(e=>{p?(L(e),D(!0)):d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0625\u0631\u062c\u0627\u0639 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a")})(e),className:"p-2 text-orange-600 hover:bg-orange-50 rounded transition-colors",title:"\u0625\u0631\u062c\u0627\u0639",children:(0,Qe.jsx)(Rs,{})}),g&&(0,Qe.jsx)("button",{onClick:()=>M(e),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"\u0637\u0628\u0627\u0639\u0629",children:(0,Qe.jsx)(ys,{})}),f&&(0,Qe.jsx)("button",{onClick:()=>(e=>{if(f){if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 #".concat(e.id,"\u061f\n\u0633\u064a\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0625\u0644\u0649 \u0627\u0644\u0645\u062e\u0632\u0648\u0646.")))try{l(e.id),c("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d \u0648\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0644\u0644\u0645\u062e\u0632\u0648\u0646")}catch(t){d(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}}else d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a")})(e),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})}),!h&&!p&&!g&&!f&&(0,Qe.jsx)("span",{className:"text-xs text-gray-400",children:"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})]})})]},e.id)})})]})})}),w&&y&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 text-white sticky top-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a #",y.id]}),(0,Qe.jsx)("button",{onClick:()=>S(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:"\u2715"})]})}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===(e=s.find(e=>e.id===parseInt(y.supplierId)))||void 0===e?void 0:e.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(y.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:P[y.paymentType]||y.paymentType})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsx)("p",{className:"font-bold text-lg text-purple-600",children:m(y.total||0)})]})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h4",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y",children:(y.items||[]).map((e,t)=>{const s=a.find(t=>t.id===parseInt(e.productId)),r=(null===s||void 0===s?void 0:s.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",n=(null===s||void 0===s?void 0:s.category)||"-",l=(e.quantity||0)*(e.price||0)+(e.subQuantity||0)*(e.subPrice||0);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:t+1}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:r}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:n})]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,Qe.jsxs)("div",{children:[e.quantity||0," \u0623\u0633\u0627\u0633\u064a"]}),e.subQuantity>0&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-500",children:[e.subQuantity," \u0641\u0631\u0639\u064a"]})]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,Qe.jsx)("div",{children:m(e.price||0)}),e.subPrice>0&&(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:m(e.subPrice||0)})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-blue-600",children:m(l)})]},t)})})]})})]}),y.notes&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm",children:y.notes})]})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 border-t flex justify-end gap-2",children:[g&&(0,Qe.jsxs)("button",{onClick:()=>{M(y),S(!1)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(ys,{})," \u0637\u0628\u0627\u0639\u0629"]}),(0,Qe.jsx)("button",{onClick:()=>S(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})]})]})}),I&&_&&(0,Qe.jsx)(Na,{invoice:_,products:a,suppliers:s,purchaseReturns:o,onSubmit:e=>{try{i(e),c("\u062a\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),D(!1),L(null)}catch(t){d(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}},onClose:()=>{D(!1),L(null)},formatCurrency:m})]}):(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center gap-4",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 text-2xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-red-800 font-bold text-lg",children:"\u0648\u0635\u0648\u0644 \u063a\u064a\u0631 \u0645\u0635\u0631\u062d"}),(0,Qe.jsx)("p",{className:"text-red-700",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0623\u0648 \u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"})]})]})})},Sa=()=>{const{invoiceId:e}=te(),t=ee(),{purchaseInvoices:s,products:a,suppliers:n,addPurchaseReturn:l,purchaseReturns:i}=Ye(),{showSuccess:o,showError:c}=Ke(),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)("");(0,r.useEffect)(()=>{const r=s.find(t=>t.id===parseInt(e));if(!r)return c("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"),void t("/purchases/manage");x(r);const n=r.items.map(e=>{const t=i.filter(e=>e.invoiceId===r.id&&"cancelled"!==e.status);let s=0;t.forEach(t=>{const a=t.items.find(t=>t.productId===e.productId);a&&(s+=(a.quantity||0)+(a.subQuantity||0))});const n=(e.quantity||0)+(e.subQuantity||0)-s,l=a.find(t=>t.id===parseInt(e.productId));return{productId:e.productId,productName:(null===l||void 0===l?void 0:l.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",originalQuantity:e.quantity||0,originalSubQuantity:e.subQuantity||0,originalPrice:e.price||0,originalSubPrice:e.subPrice||0,returnedQty:s,availableQty:n,returnQuantity:0,returnSubQuantity:0,selected:!1}});m(n)},[e,s,i,t,c]);const b=(e,t,s)=>{const a=[...u],r=a[e];a[e][t]=Math.max(0,parseInt(s)||0);a[e].returnQuantity+a[e].returnSubQuantity>r.availableQty&&(c("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629 \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0627\u062d\u0629 (".concat(r.availableQty,")")),a[e][t]=0),m(a)};if(!d)return(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:(0,Qe.jsx)("div",{className:"text-center py-8",children:(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})})});const v=n.find(e=>e.id===parseInt(d.supplierId));return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0631\u062c\u0627\u0639 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 #",d.id]})]}),(0,Qe.jsxs)("button",{onClick:()=>t("/purchases/manage"),className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(xt,{})," \u0631\u062c\u0648\u0639"]})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===v||void 0===v?void 0:v.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(d.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:"cash"===d.paymentType?"\u0646\u0642\u062f\u064a":"deferred"===d.paymentType?"\u0622\u062c\u0644":"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsxs)("p",{className:"font-bold text-lg text-purple-600",children:[d.total.toFixed(2)," \u062f.\u0639"]})]})]})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=u.filter(e=>e.selected);if(0===s.length)return void c("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0646\u062a\u062c \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0644\u0644\u0625\u0631\u062c\u0627\u0639");if(s.some(e=>e.returnQuantity+e.returnSubQuantity===0))c("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0635\u062d\u064a\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629");else if(h.trim())try{const e={invoiceId:d.id,items:s.map(e=>({productId:e.productId,quantity:e.returnQuantity,subQuantity:e.returnSubQuantity})),reason:h,notes:g};l(e),o("\u062a\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),t("/purchases/returns")}catch(a){c(a.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}else c("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")},children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u0627\u062f \u0625\u0631\u062c\u0627\u0639\u0647\u0627"}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 w-10",children:(0,Qe.jsx)("input",{type:"checkbox",onChange:e=>{const t=u.map(t=>Be(Be({},t),{},{selected:e.target.checked&&t.availableQty>0}));m(t)},className:"rounded"})}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0633\u0627\u0628\u0642\u0627\u064b"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062a\u0627\u062d \u0644\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0643\u0645\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map((e,t)=>{const s=a.find(t=>t.id===parseInt(e.productId)),r=e.returnQuantity*e.originalPrice+e.returnSubQuantity*e.originalSubPrice,n=0===e.availableQty;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(n?"opacity-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>(e=>{const t=[...u];t[e].selected=!t[e].selected,t[e].selected||(t[e].returnQuantity=0,t[e].returnSubQuantity=0),m(t)})(t),disabled:n,className:"rounded"})}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===s||void 0===s?void 0:s.name)||e.productName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===s||void 0===s?void 0:s.category)||"-"})]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,Qe.jsxs)("div",{children:[e.originalQuantity," \u0623\u0633\u0627\u0633\u064a"]}),e.originalSubQuantity>0&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-500",children:[e.originalSubQuantity," \u0641\u0631\u0639\u064a"]})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:e.returnedQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.availableQty>0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:e.selected&&(0,Qe.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,Qe.jsx)("input",{type:"number",value:e.returnQuantity,onChange:e=>b(t,"returnQuantity",e.target.value),className:"w-16 px-2 py-1 text-xs text-center border border-gray-300 rounded",min:"0",max:e.availableQty,placeholder:"\u0623\u0633\u0627\u0633\u064a"}),e.originalSubQuantity>0&&(0,Qe.jsx)("input",{type:"number",value:e.returnSubQuantity,onChange:e=>b(t,"returnSubQuantity",e.target.value),className:"w-16 px-2 py-1 text-xs text-center border border-gray-300 rounded",min:"0",max:e.availableQty,placeholder:"\u0641\u0631\u0639\u064a"})]})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:e.selected?r.toFixed(2):"0.00"})]},t)})})]})})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"defective",children:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("option",{value:"wrong_item",children:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626"}),(0,Qe.jsx)("option",{value:"expired",children:"\u0645\u0646\u062a\u062c \u0645\u0646\u062a\u0647\u064a \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,Qe.jsx)("option",{value:"excess",children:"\u0632\u064a\u0627\u062f\u0629 \u0641\u064a \u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]})}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:u.filter(e=>e.selected).length})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[u.reduce((e,t)=>t.selected?e+t.returnQuantity*t.originalPrice+t.returnSubQuantity*t.originalSubPrice:e,0).toFixed(2)," \u062f.\u0639"]})]})]})}),(0,Qe.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>t("/purchases/manage"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)("button",{type:"submit",className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(Rs,{})," \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"]})]})]})]})},ka=()=>{const{purchaseReturns:e,purchaseInvoices:t,suppliers:s,products:a,deletePurchaseReturn:n}=Ye(),{showSuccess:l,showError:i}=Ke(),[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)("all"),g=e.filter(e=>{const a=t.find(t=>t.id===e.invoiceId),r=s.find(e=>e.id===parseInt(null===a||void 0===a?void 0:a.supplierId)),n=(r?r.name:"").toLowerCase().includes(o.toLowerCase())||e.id.toString().includes(o)||e.invoiceId.toString().includes(o),l="all"===h||e.status===h;return n&&l}),f=e=>({defective:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628",damaged:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641",wrong_item:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626",expired:"\u0645\u0646\u062a\u0647\u064a \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",excess:"\u0632\u064a\u0627\u062f\u0629 \u0641\u064a \u0627\u0644\u0643\u0645\u064a\u0629",other:"\u0623\u062e\u0631\u0649"}[e]||e),b=e=>{const t={completed:{text:"\u0645\u0643\u062a\u0645\u0644",class:"bg-green-100 text-green-700"},pending:{text:"\u0645\u0639\u0644\u0642",class:"bg-yellow-100 text-yellow-700"},cancelled:{text:"\u0645\u0644\u063a\u0649",class:"bg-red-100 text-red-700"}}[e]||{text:e,class:"bg-gray-100 text-gray-700"};return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(t.class),children:t.text})},v=e.length,j=e.reduce((e,t)=>e+(t.totalAmount||0),0);return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:v})]}),(0,Qe.jsx)(Rs,{className:"text-4xl opacity-50"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:j.toFixed(2)}),(0,Qe.jsx)("p",{className:"text-xs opacity-75",children:"\u062f\u064a\u0646\u0627\u0631 \u0639\u0631\u0627\u0642\u064a"})]}),(0,Qe.jsx)(Zt,{className:"text-4xl opacity-50"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:v>0?(j/v).toFixed(2):"0.00"}),(0,Qe.jsx)("p",{className:"text-xs opacity-75",children:"\u062f\u064a\u0646\u0627\u0631 \u0639\u0631\u0627\u0642\u064a"})]}),(0,Qe.jsx)(ks,{className:"text-4xl opacity-50"})]})})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0625\u0631\u062c\u0627\u0639\u060c \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f..."}),(0,Qe.jsx)(ks,{className:"absolute left-3 top-3 text-gray-400"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,Qe.jsx)("option",{value:"pending",children:"\u0645\u0639\u0644\u0642"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u0649"})]}),(0,Qe.jsx)(es,{className:"absolute left-3 top-3 text-gray-400"})]})})]}),(0,Qe.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["\u0639\u0631\u0636 ",g.length," \u0645\u0646 ",e.length," \u0645\u0631\u062a\u062c\u0639"]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0633\u0628\u0628"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===g.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsxs)("td",{colSpan:"9",className:"px-3 py-8 text-center text-gray-500",children:[(0,Qe.jsx)(Rs,{className:"mx-auto mb-2 text-3xl text-gray-300"}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a"})]})}):g.map(e=>{var a;const r=t.find(t=>t.id===e.invoiceId),o=s.find(e=>e.id===parseInt(null===r||void 0===r?void 0:r.supplierId));return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-3 py-2 font-semibold text-red-600",children:["#",e.id]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 font-medium text-blue-600",children:["#",e.invoiceId]}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===o||void 0===o?void 0:o.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===o||void 0===o?void 0:o.phone)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs",children:f(e.reason)})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:(null===(a=e.items)||void 0===a?void 0:a.length)||0})}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center font-bold text-red-600",children:[(e.totalAmount||0).toFixed(2)," \u062f.\u0639"]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:b(e.status)}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{x(e),m(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\u0639\u0631\u0636",children:(0,Qe.jsx)($t,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 #".concat(e.id,"\u061f\n\u0633\u064a\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0644\u0644\u0645\u062e\u0632\u0648\u0646.")))try{n(e.id),l("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0628\u0646\u062c\u0627\u062d \u0648\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0644\u0644\u0645\u062e\u0632\u0648\u0646")}catch(t){i(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0631\u062a\u062c\u0639")}})(e),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id)})})]})})}),u&&d&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-4 text-white sticky top-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 #",d.id]}),(0,Qe.jsx)("button",{onClick:()=>m(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:"\u2715"})]})}),(0,Qe.jsx)("div",{className:"p-6",children:(()=>{const e=t.find(e=>e.id===d.invoiceId),r=s.find(t=>t.id===parseInt(null===e||void 0===e?void 0:e.supplierId));return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("p",{className:"font-semibold text-sm",children:["#",d.invoiceId]})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(d.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsxs)("p",{className:"font-bold text-lg text-purple-600",children:[(d.totalAmount||0).toFixed(2)," \u062f.\u0639"]})]})]}),(0,Qe.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg mb-6",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold",children:f(d.reason)}),d.notes&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mt-2 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm",children:d.notes})]})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h4",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629"}),(0,Qe.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y",children:(d.items||[]).map((t,s)=>{const r=a.find(e=>e.id===parseInt(t.productId)),n=null===e||void 0===e?void 0:e.items.find(e=>e.productId===t.productId),l=(t.quantity||0)*((null===n||void 0===n?void 0:n.price)||0)+(t.subQuantity||0)*((null===n||void 0===n?void 0:n.subPrice)||0);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:s+1}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===r||void 0===r?void 0:r.category)||"-"})]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,Qe.jsxs)("div",{children:[t.quantity||0," \u0623\u0633\u0627\u0633\u064a"]}),t.subQuantity>0&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-500",children:[t.subQuantity," \u0641\u0631\u0639\u064a"]})]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center",children:[(0,Qe.jsx)("div",{children:((null===n||void 0===n?void 0:n.price)||0).toFixed(2)}),(null===n||void 0===n?void 0:n.subPrice)>0&&(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:((null===n||void 0===n?void 0:n.subPrice)||0).toFixed(2)})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:l.toFixed(2)})]},s)})})]})})]})]})})()}),(0,Qe.jsx)("div",{className:"bg-gray-50 p-4 border-t flex justify-end",children:(0,Qe.jsx)("button",{onClick:()=>m(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},Ca=()=>{const{customers:e,products:t,warehouses:s,addSalesInvoice:a,getCustomerBalance:n,addCustomer:l}=Ye(),{showSuccess:i,showError:o}=Ke(),[c,d]=(0,r.useState)({customerId:"",date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),paymentType:"main",agentType:"main",notes:"",discountType:"percentage",discountValue:0}),[x,u]=(0,r.useState)([{productId:"",productName:"",quantity:0,subQuantity:0,price:0,subPrice:0,discount:0}]),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)([""]),[v,j]=(0,r.useState)([!1]),[y,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)([!1]),[k,C]=(0,r.useState)([!1]),[I,D]=(0,r.useState)([!1]),[_,L]=(0,r.useState)([!1]),[E,M]=(0,r.useState)({}),P=(0,r.useRef)(null),T=(0,r.useRef)([]),z=(0,r.useRef)([]),[O,A]=(0,r.useState)(!1),[F,R]=(0,r.useState)({name:"",phone1:"",address:"",agentType:"general"}),[V,B]=(0,r.useState)(!1),q=e=>(e.quantity||0)*(e.price||0)+(e.subQuantity||0)*(e.subPrice||0),Q=e=>{const t=q(e),s=e.discount||0;return Math.max(0,t-s)},H=()=>x.reduce((e,t)=>e+Q(t),0),W=()=>{const e=H();return"percentage"===c.discountType?e*(c.discountValue/100):parseFloat(c.discountValue)||0},U=()=>{const e=H(),t=W();return Math.max(0,e-t)},X=null;(0,r.useEffect)(()=>{var e;null===(e=P.current)||void 0===e||e.focus()},[]),(0,r.useEffect)(()=>{const e=e=>{var t;if(e.ctrlKey&&"s"===e.key&&(e.preventDefault(),se(e)),"Enter"===e.key&&null!==(t=e.target.name)&&void 0!==t&&t.startsWith("quantity-")){parseInt(e.target.name.split("-")[1])===x.length-1&&(e.preventDefault(),ee())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x]);const K=e=>{d(Be(Be({},c),{},{[e.target.name]:e.target.value}))},$=()=>{A(!1),B(!1)},G=e=>{R(Be(Be({},F),{},{[e.target.name]:e.target.value}))},Y=e.filter(e=>e.name.toLowerCase().includes(m.toLowerCase())),J=e=>{const s=f[e]||"";return t.filter(e=>e.name.toLowerCase().includes(s.toLowerCase()))},Z=(e,t,s)=>{const a=[...x];if(a[e][t]=s,u(a),"quantity"===t||"subQuantity"===t){const a=[...k];"quantity"===t&&(a[e]=s<0),C(a)}if("price"===t||"subPrice"===t){const a=[...I];"price"===t&&(a[e]=s<0),D(a)}if("discount"===t){const t=[..._];t[e]=s<0,L(t)}},ee=()=>{u([...x,{productId:"",productName:"",quantity:0,subQuantity:0,mainPrice:0,subPrice:0,discount:0}]),b([...f,""]),j([...v,!1]),S([...w,!1]),C([...k,!1]),D([...I,!1]),L([..._,!1]),setTimeout(()=>{var e;const t=x.length;null===(e=T.current[t])||void 0===e||e.focus()},100)},te=e=>{const s=x[e];if(!s.productId)return null;const a=parseInt(s.quantity)||0,r=parseInt(s.subQuantity)||0,n=(e=>{const s=t.find(t=>t.id===e);return s?{mainQuantity:s.mainQuantity||0,subQuantity:s.subQuantity||0,total:(s.mainQuantity||0)+(s.subQuantity||0)}:{mainQuantity:0,subQuantity:0,total:0}})(s.productId),l=n.mainQuantity,i=n.subQuantity;return a>l||r>i?(0,Qe.jsxs)("div",{className:"mt-1 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:["\u26a0\ufe0f \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629: \u0623\u0633\u0627\u0633\u064a ",a,"\u060c \u0641\u0631\u0639\u064a ",r,(0,Qe.jsx)("br",{}),"\u0627\u0644\u0645\u062a\u0648\u0641\u0631: \u0623\u0633\u0627\u0633\u064a ",l,"\u060c \u0641\u0631\u0639\u064a ",i,(0,Qe.jsx)("br",{}),a>l&&"\u0627\u0644\u0623\u0633\u0627\u0633\u064a \u0632\u0627\u0626\u062f \u0628\u0640 ".concat(a-l),r>i&&"\u0627\u0644\u0641\u0631\u0639\u064a \u0632\u0627\u0626\u062f \u0628\u0640 ".concat(r-i)]}):null},se=function(r){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&r.preventDefault(),!(()=>{const e={};c.customerId||(e.customer="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0639\u0645\u064a\u0644"),c.date||(e.date="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"),c.discountValue<0&&(e.discount="\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0629"),"percentage"===c.discountType&&c.discountValue>100&&(e.discount="\u0646\u0633\u0628\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0632\u064a\u062f \u0639\u0646 100%"),W()>H()&&(e.discount="\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0632\u064a\u062f \u0639\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a");const s=[],a=[],r=[];return x.forEach((n,l)=>{n.productId||(e["product_".concat(l)]="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"),n.quantity<0?(e["quantity_".concat(l)]="\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0629",s[l]=!0):0===n.quantity&&0===n.subQuantity?(e["quantity_".concat(l)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0623\u0633\u0627\u0633\u064a\u0629 \u0623\u0648 \u0641\u0631\u0639\u064a\u0629",s[l]=!0):s[l]=!1,n.price<0?(e["price_".concat(l)]="\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0623\u0633\u0627\u0633\u064a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b",a[l]=!0):0===n.price&&n.quantity>0?(e["price_".concat(l)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0633\u0639\u0631 \u0623\u0633\u0627\u0633\u064a \u0644\u0644\u0645\u0646\u062a\u062c",a[l]=!0):a[l]=!1,n.subPrice<0?e["subPrice_".concat(l)]="\u0627\u0644\u0633\u0639\u0631 \u0627\u0644\u0641\u0631\u0639\u064a \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b":0===n.subPrice&&n.subQuantity>0&&(e["subPrice_".concat(l)]="\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0633\u0639\u0631 \u0641\u0631\u0639\u064a \u0639\u0646\u062f \u0648\u062c\u0648\u062f \u0643\u0645\u064a\u0629 \u0641\u0631\u0639\u064a\u0629"),n.discount<0?(e["discount_".concat(l)]="\u062e\u0635\u0645 \u0627\u0644\u0639\u0646\u0635\u0631 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0633\u0627\u0644\u0628\u0627\u064b",r[l]=!0):n.discount>q(n)?(e["discount_".concat(l)]="\u062e\u0635\u0645 \u0627\u0644\u0639\u0646\u0635\u0631 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u064a\u0632\u064a\u062f \u0639\u0646 \u0625\u062c\u0645\u0627\u0644\u064a\u0647",r[l]=!0):r[l]=!1;const i=t.find(e=>e.id===parseInt(n.productId));if(i){const t=parseInt(n.quantity)||0,a=parseInt(n.subQuantity)||0,r=i.mainQuantity||0,o=i.subQuantity||0;t>r?(e["stock_".concat(l)]="\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 (".concat(t,") \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0645\u062a\u0648\u0641\u0631 (").concat(r,")"),s[l]=!0):a>o?(e["stock_".concat(l)]="\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0641\u0631\u0639\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 (".concat(a,") \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0645\u062a\u0648\u0641\u0631 (").concat(o,")"),s[l]=!0):s[l]=!1}}),C(s),D(a),L(r),M(e),U()<=0&&(e.total="\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631"),0===Object.keys(e).length})()){o("\u064a\u0631\u062c\u0649 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0623\u062e\u0637\u0627\u0621 \u0642\u0628\u0644 \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629");const e=Object.values(E)[0];return void(e&&setTimeout(()=>o(e),500))}try{const r=x.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity||0,subQuantity:e.subQuantity||0,mainPrice:e.price||0,subPrice:e.subPrice||0,discount:e.discount||0,total:Q(e)})),l=W(),o=Be(Be({},c),{},{date:"".concat(c.date,"T").concat(c.time,":00"),items:r,subtotal:H(),discountAmount:l,total:U(),status:"completed"}),d=a(o);if(i("\u062a\u0645 \u062d\u0641\u0638 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0628\u0646\u062c\u0627\u062d! \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: ".concat(U().toFixed(2)," \u062c.\u0645")),n){const a=e.find(e=>e.id===parseInt(c.customerId));ba({formData:d,items:d.items,subtotal:d.subtotal,discountAmount:d.discountAmount,total:d.total,customer:a,customers:e,products:t,warehouses:s},"sales")}ae()}catch(l){o(l.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}},ae=()=>{var e;d({customerId:"",date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),paymentType:"main",agentType:"",notes:"",discountType:"percentage",discountValue:0}),u([{productId:"",productName:"",quantity:0,subQuantity:0,mainPrice:0,subPrice:0,discount:0}]),h(""),b([""]),g(!1),j([!1]),N(!1),S([!1]),C([!1]),D([!1]),L([!1]),M({}),null===(e=P.current)||void 0===e||e.focus()};return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-4 pb-4 border-b",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsxs)("div",{className:"relative flex-1",children:[(0,Qe.jsx)("input",{ref:P,type:"text",value:m,onChange:e=>{return t=e.target.value,h(t),void g(t.trim().length>0);var t},onBlur:()=>{setTimeout(()=>{g(!1)},200)},className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0639\u0645\u064a\u0644..."}),(0,Qe.jsx)(ks,{className:"absolute left-2 top-2.5 text-gray-400 text-xs"})]}),(0,Qe.jsxs)("button",{type:"button",onClick:()=>{R({name:"",phone1:"",address:"",agentType:"general"}),A(!0)},className:"px-3 py-1.5 text-xs bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center gap-1 whitespace-nowrap",title:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f \u0633\u0631\u064a\u0639",children:[(0,Qe.jsx)(Bs,{className:"text-xs"}),"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"]})]}),p&&m.trim().length>0&&Y.length>0&&(0,Qe.jsx)("div",{className:"absolute z-[9999] w-full mt-1 bg-white border-2 border-blue-400 rounded-lg shadow-xl max-h-56 overflow-y-auto",children:Y.map(e=>(0,Qe.jsx)("div",{onClick:()=>(e=>{d(Be(Be({},c),{},{customerId:e.id,agentType:e.agentType||""})),h(e.name),g(!1)})(e),className:"px-4 py-2.5 hover:bg-blue-100 cursor-pointer border-b last:border-b-0 transition-colors",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"font-semibold text-sm text-gray-800",children:e.name}),(0,Qe.jsx)("span",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:e.phone})]})},e.id))})]}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{name:"paymentType",value:c.paymentType,onChange:K,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"main",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Qe.jsx)("option",{value:"deferred",children:"\u0622\u062c\u0644"}),(0,Qe.jsx)("option",{value:"partial",children:"\u062c\u0632\u0626\u064a"})]})}),X,(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{name:"agentType",value:c.agentType,onChange:K,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628"}),(0,Qe.jsx)("option",{value:"general",children:"\u0639\u0627\u0645"}),(0,Qe.jsx)("option",{value:"fatora",children:"\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("option",{value:"kartona",children:"\u0643\u0631\u062a\u0648\u0646\u0629"})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("input",{type:"date",name:"date",value:c.date,onChange:K,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("input",{type:"time",name:"time",value:c.time,onChange:K,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500"})]})]}),(0,Qe.jsx)("div",{className:"mb-4 relative",children:(0,Qe.jsx)("div",{className:"overflow-x-auto overflow-y-visible",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-2 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-20",children:"\u0643\u0645\u064a\u0629 \u0623\u0633\u0627\u0633\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-20",children:"\u0643\u0645\u064a\u0629 \u0641\u0631\u0639\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0633\u0639\u0631 \u0623\u0633\u0627\u0633\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0633\u0639\u0631 \u0641\u0631\u0639\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0627\u0644\u062e\u0635\u0645"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-24",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("th",{className:"px-2 py-2 text-center text-xs font-semibold text-gray-700 w-16",children:"\u062d\u0630\u0641"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map((e,t)=>{var a;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-2 py-2 static",children:[(0,Qe.jsxs)("div",{className:"relative z-[10]",children:[(0,Qe.jsx)("input",{ref:e=>T.current[t]=e,type:"text",value:f[t]||"",onChange:e=>((e,t)=>{const s=[...f];s[e]=t,b(s);const a=[...v];a[e]=t.trim().length>0,j(a)})(t,e.target.value),onBlur:()=>(e=>{setTimeout(()=>{const t=[...v];t[e]=!1,j(t)},200)})(t),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c..."}),(0,Qe.jsx)(ks,{className:"absolute left-2 top-2.5 text-gray-400 text-xs"})]}),v[t]&&(null===(a=f[t])||void 0===a?void 0:a.trim().length)>0&&J(t).length>0&&(0,Qe.jsx)("div",{className:"absolute z-[9999] left-0 w-full mt-1 bg-white border-2 border-blue-400 rounded-lg shadow-2xl max-h-64 overflow-y-auto",children:J(t).map(e=>{const a=s.find(t=>t.id===e.warehouseId);return(0,Qe.jsx)("div",{onClick:()=>((e,t)=>{const s=[...x];s[e]=Be(Be({},s[e]),{},{productId:t.id,productName:t.name,price:parseFloat(t.mainPrice)||0,subPrice:parseFloat(t.subPrice)||0,discount:0}),u(s);const a=[...f];a[e]=t.name,b(a);const r=[...v];r[e]=!1,j(r),setTimeout(()=>{var t;null===(t=z.current[e])||void 0===t||t.focus()},100)})(t,e),className:"px-4 py-2.5 hover:bg-blue-100 cursor-pointer border-b last:border-b-0 transition-colors",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("span",{className:"font-semibold text-sm text-gray-800",children:e.name}),(0,Qe.jsxs)("span",{className:"text-xs text-gray-600 mr-2",children:["(",(null===a||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"," - ",e.category,")"]})]}),(0,Qe.jsxs)("span",{className:"text-xs font-bold text-green-700 bg-green-100 px-2 py-1 rounded",children:["\u0623\u0633\u0627\u0633\u064a: ",e.mainQuantity||0,", \u0641\u0631\u0639\u064a: ",e.subQuantity||0]})]})},e.id)})}),te(t)]}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{ref:e=>z.current[t]=e,type:"number",name:"quantity-".concat(t),value:e.quantity,onChange:e=>Z(t,"quantity",parseInt(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(k[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",value:e.subQuantity,onChange:e=>Z(t,"subQuantity",parseInt(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.price,onChange:e=>Z(t,"price",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(I[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.subPrice,onChange:e=>Z(t,"subPrice",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2",children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:e.discount,onChange:e=>Z(t,"discount",parseFloat(e.target.value)||0),className:"w-full px-2 py-1.5 text-sm text-center border rounded-md focus:ring-2 focus:ring-blue-500 ".concat(_[t]?"border-red-500 bg-red-50":"border-gray-300"),min:"0"})}),(0,Qe.jsx)("td",{className:"px-2 py-2 text-center",children:(0,Qe.jsx)("span",{className:"font-semibold text-blue-600",children:Q(e).toFixed(2)})}),(0,Qe.jsx)("td",{className:"px-2 py-2 text-center",children:(0,Qe.jsx)("button",{type:"button",onClick:()=>(e=>{x.length>1&&(u(x.filter((t,s)=>s!==e)),b(f.filter((t,s)=>s!==e)),j(v.filter((t,s)=>s!==e)),S(w.filter((t,s)=>s!==e)),C(k.filter((t,s)=>s!==e)),D(I.filter((t,s)=>s!==e)),L(_.filter((t,s)=>s!==e)))})(t),disabled:1===x.length,className:"text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",children:(0,Qe.jsx)(Os,{})})})]},t)})})]})})}),(0,Qe.jsx)("button",{type:"button",onClick:ee,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-blue-500 hover:text-blue-600 transition-colors text-sm font-medium",children:"+ \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f (Enter)"}),(0,Qe.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsx)("textarea",{name:"notes",value:c.notes,onChange:K,rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qe.jsx)(fs,{className:"text-yellow-600"}),(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u062e\u0635\u0645"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[(0,Qe.jsxs)("select",{name:"discountType",value:c.discountType,onChange:K,className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"percentage",children:"\u0646\u0633\u0628\u0629 \u0645\u0626\u0648\u064a\u0629 %"}),(0,Qe.jsx)("option",{value:"fixed",children:"\u0645\u0628\u0644\u063a \u062b\u0627\u0628\u062a"})]}),(0,Qe.jsx)("input",{type:"number",name:"discountValue",value:c.discountValue,onChange:K,className:"w-full px-2 py-1.5 text-sm text-center border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500",min:"0",step:"percentage"===c.discountType?"0.1":"0.01",placeholder:"percentage"===c.discountType?"0.0%":"0.00"})]}),c.discountValue>0&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-600 text-center",children:["\u0642\u064a\u0645\u0629 \u0627\u0644\u062e\u0635\u0645: ",W().toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"w-full bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,Qe.jsxs)("div",{className:"space-y-2",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0641\u0631\u0639\u064a:"}),(0,Qe.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[H().toFixed(2)," \u062c.\u0645"]})]}),c.discountValue>0&&(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-1 border-t border-blue-200",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u062e\u0635\u0645:"}),(0,Qe.jsxs)("span",{className:"text-sm font-medium text-red-600",children:["-",W().toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-blue-200",children:[(0,Qe.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-lg font-bold text-blue-700",children:[U().toFixed(2)," \u062c.\u0645"]})]})]}),(0,Qe.jsxs)("div",{className:"text-xs text-gray-500 text-center mt-2",children:["\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a: ",x.length]})]})]})]})}),(0,Qe.jsx)("div",{className:"mt-6 pt-4 border-t",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,Qe.jsxs)("button",{type:"button",onClick:ae,className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",title:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0627\u0644\u0643\u0627\u0645\u0644",children:[(0,Qe.jsx)(Os,{})," \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"]}),(0,Qe.jsxs)("button",{type:"button",onClick:e=>se(e,!1),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,Qe.jsx)(Ss,{})," \u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"]}),(0,Qe.jsxs)("button",{type:"button",onClick:e=>se(e,!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors font-medium",children:[(0,Qe.jsx)(ys,{})," \u062d\u0641\u0638 \u0648\u0637\u0628\u0627\u0639\u0629"]})]})}),(0,Qe.jsxs)("div",{className:"mt-4 pt-3 border-t text-xs text-gray-500 text-center",children:[(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"\ud83d\udca1 \u0627\u062e\u062a\u0635\u0627\u0631\u0627\u062a: "}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Ctrl+S = \u062d\u0641\u0638"}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Enter = \u0635\u0641 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("span",{className:"inline-block mx-2",children:"Tab = \u0627\u0644\u062a\u0646\u0642\u0644"})]})]}),O&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"bg-green-100 rounded-full p-2",children:(0,Qe.jsx)(Bs,{className:"text-green-600 text-lg"})}),(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f \u0633\u0631\u064a\u0639"})]}),(0,Qe.jsx)("button",{onClick:$,className:"text-gray-400 hover:text-gray-600 transition-colors",type:"button",children:(0,Qe.jsx)(Ts,{className:"text-xl"})})]}),(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(F.name.trim()&&F.phone1.trim()){B(!0);try{const e=l(Be(Be({},F),{},{createdAt:(new Date).toISOString(),status:"active"}));i('\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644 "'.concat(e.name,'" \u0628\u0646\u062c\u0627\u062d')),d(Be(Be({},c),{},{customerId:e.id,agentType:e.agentType||""})),h(e.name),$()}catch(e){o("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644")}finally{B(!1)}}else o("\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0627\u0633\u0645 \u0648\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641")})()},className:"space-y-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"text",name:"name",value:F.name,onChange:G,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"tel",name:"phone1",value:F.phone1,onChange:G,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"+20 XXX XXX XXXX",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Qe.jsx)("input",{type:"text",name:"address",value:F.address,onChange:G,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628"}),(0,Qe.jsxs)("select",{name:"agentType",value:F.agentType,onChange:G,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"general",children:"\u0639\u0627\u0645"}),(0,Qe.jsx)("option",{value:"fatora",children:"\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("option",{value:"kartona",children:"\u0643\u0631\u062a\u0648\u0646\u0629"})]})]}),(0,Qe.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:(0,Qe.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Qe.jsx)(os,{className:"text-blue-600 text-sm mt-0.5"}),(0,Qe.jsxs)("div",{className:"text-xs text-blue-700",children:[(0,Qe.jsx)("p",{className:"font-semibold mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0629 \u0633\u0631\u064a\u0639\u0629:"}),(0,Qe.jsx)("p",{children:"\u2022 \u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644 \u0645\u0628\u0627\u0634\u0631\u0629 \u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("p",{children:"\u2022 \u064a\u0645\u0643\u0646\u0643 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0627\u062d\u0642\u0627\u064b \u0645\u0646 \u0635\u0641\u062d\u0629 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"})]})]})}),(0,Qe.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:$,className:"flex-1 px-4 py-2 text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",disabled:V,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",disabled:V||!F.name.trim()||!F.phone1.trim(),children:V?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0636\u0627\u0641\u0629..."]}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(Bs,{className:"text-sm"}),"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644"]})})]})]})})]})})]})},Ia=()=>{const{salesInvoices:e,customers:t,products:s,warehouses:a}=Ye(),[n,l]=(0,r.useState)(""),i=e.filter(e=>{const s=t.find(t=>t.id===parseInt(e.customerId));return(s?s.name:"").toLowerCase().includes(n.toLowerCase())||e.id.toString().includes(n)}),o=[{header:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",accessor:"id",render:e=>"#".concat(e.id)},{header:"\u0627\u0644\u0639\u0645\u064a\u0644",accessor:"customerId",render:e=>{const s=t.find(t=>t.id===parseInt(e.customerId));return s?s.name:"-"}},{header:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",accessor:"date",render:e=>new Date(e.date).toLocaleDateString("ar-EG")},{header:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639",accessor:"paymentType",render:e=>({cash:"\u0646\u0642\u062f\u064a",deferred:"\u0622\u062c\u0644",partial:"\u062c\u0632\u0626\u064a"}[e.paymentType]||e.paymentType)},{header:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639",accessor:"total",render:e=>"".concat((e.total||0).toFixed(2)," \u062f.\u0639")},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-600 rounded text-xs",children:"\u0645\u0643\u062a\u0645\u0644\u0629"})},{header:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",render:e=>(0,Qe.jsxs)("button",{onClick:()=>{const r={formData:e,items:e.items||[],total:e.total||0,suppliers:[],customers:t,products:s,warehouses:a,paymentTypes:[{value:"cash",label:"\u0646\u0642\u062f\u064a"},{value:"deferred",label:"\u0622\u062c\u0644"},{value:"partial",label:"\u062c\u0632\u0626\u064a"}],type:"sales"};ba(r,"sales")},className:"flex items-center gap-2 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-semibold transition-colors",title:"\u0637\u0628\u0627\u0639\u0629 \u0641\u0648\u0631\u064a\u0629",children:[(0,Qe.jsx)(ys,{})," \u0637\u0628\u0627\u0639\u0629"]})}];return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0633\u062c\u0644 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)(aa,{icon:(0,Qe.jsx)(xs,{}),children:[(0,Qe.jsx)("div",{className:"mb-6",children:(0,Qe.jsx)(da,{label:"\u0628\u062d\u062b",name:"search",value:n,onChange:e=>l(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629...",icon:(0,Qe.jsx)(ks,{})})}),(0,Qe.jsx)(ja,{columns:o,data:i})]})]})},Da=e=>{let{invoice:t,products:s,customers:a,salesReturns:n,onSubmit:l,onClose:i,formatCurrency:o}=e;const[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),p=a.find(e=>e.id===parseInt(t.customerId));(0,r.useEffect)(()=>{const e=t.items.map(e=>{const a=n.filter(e=>e.invoiceId===t.id&&"cancelled"!==e.status);let r=0;a.forEach(t=>{const s=t.items.find(t=>t.productId===e.productId);s&&(r+=(s.quantity||0)+(s.subQuantity||0))});const l=parseInt(e.quantity)||0,i=l-r,o=s.find(t=>t.id===parseInt(e.productId));return{productId:e.productId,productName:(null===o||void 0===o?void 0:o.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",originalQuantity:l,originalPrice:e.price||0,returnedQty:r,availableQty:i,returnQuantity:0,returnSubQuantity:0,selected:!1}});d(e)},[t,n,s]);return(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0631\u062c\u0627\u0639 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 #",t.id]})]}),(0,Qe.jsx)("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 text-2xl",children:(0,Qe.jsx)(Ts,{})})]}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===p||void 0===p?void 0:p.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(t.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:"cash"===t.paymentType?"\u0646\u0642\u062f\u064a":"deferred"===t.paymentType?"\u0622\u062c\u0644":"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsx)("p",{className:"font-bold text-lg text-purple-600",children:o(t.total||0)})]})]})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=c.filter(e=>e.selected);if(0===s.length)return void alert("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0646\u062a\u062c \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0644\u0644\u0625\u0631\u062c\u0627\u0639");if(s.some(e=>0===e.returnQuantity))alert("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0635\u062d\u064a\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629");else if(x.trim())try{const e={invoiceId:t.id,items:s.map(e=>({productId:e.productId,quantity:e.returnQuantity,subQuantity:0})),reason:x,notes:m};l(e)}catch(a){alert(a.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}else alert("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")},children:[(0,Qe.jsxs)("div",{className:"bg-white border rounded-lg mb-4",children:[(0,Qe.jsx)("div",{className:"p-4 border-b",children:(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u0627\u062f \u0625\u0631\u062c\u0627\u0639\u0647\u0627"})}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{className:"bg-gray-100",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 w-10",children:(0,Qe.jsx)("input",{type:"checkbox",onChange:e=>{const t=c.map(t=>Be(Be({},t),{},{selected:e.target.checked&&t.availableQty>0}));d(t)},className:"rounded"})}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0633\u0627\u0628\u0642\u0627\u064b"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062a\u0627\u062d \u0644\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0643\u0645\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:c.map((e,t)=>{const a=s.find(t=>t.id===parseInt(e.productId)),r=e.returnQuantity*e.originalPrice,n=0===e.availableQty;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(n?"opacity-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>(e=>{const t=[...c];t[e].selected=!t[e].selected,t[e].selected||(t[e].returnQuantity=0,t[e].returnSubQuantity=0),d(t)})(t),disabled:n,className:"rounded"})}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:e.productName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===a||void 0===a?void 0:a.category)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:e.originalQuantity}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:e.returnedQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.availableQty>0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:e.selected&&(0,Qe.jsx)("input",{type:"number",value:e.returnQuantity,onChange:e=>((e,t)=>{const s=[...c],a=s[e];s[e].returnQuantity=Math.max(0,parseInt(t)||0),s[e].returnQuantity>a.availableQty&&(s[e].returnQuantity=0),d(s)})(t,e.target.value),className:"w-20 px-2 py-1 text-xs text-center border border-gray-300 rounded",min:"0",max:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:e.selected?r.toFixed(2):"0.00"})]},t)})})]})})]}),(0,Qe.jsx)("div",{className:"bg-white border rounded-lg mb-4 p-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"defective",children:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("option",{value:"wrong_item",children:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626"}),(0,Qe.jsx)("option",{value:"customer_request",children:"\u0637\u0644\u0628 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]})}),(0,Qe.jsx)("div",{className:"bg-white border rounded-lg mb-4 p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:c.filter(e=>e.selected).length})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-red-600",children:o(c.reduce((e,t)=>t.selected?e+t.returnQuantity*t.originalPrice:e,0))})]})]})}),(0,Qe.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,Qe.jsx)("button",{type:"button",onClick:i,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)("button",{type:"submit",className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(Rs,{})," \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"]})]})]})]})]})})},_a=()=>{var e;const{salesInvoices:t,products:s,customers:a,warehouses:n,deleteSalesInvoice:l,addSalesReturn:i,salesReturns:o}=Ye(),{showSuccess:c,showError:d}=Ke(),{settings:x}=ea(),{hasPermission:u}=We(),m=e=>{const t=(null===x||void 0===x?void 0:x.currency)||"EGP",s="ar"===(null===x||void 0===x?void 0:x.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},h=u("view_sales_invoices"),p=u("return_sale"),g=u("print_invoices"),f=u("delete_sales_invoice"),b=u("manage_sales"),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(null),[w,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)("all"),[I,D]=(0,r.useState)(!1),[_,L]=(0,r.useState)(null),E=t.filter(e=>{const t=a.find(t=>t.id===parseInt(e.customerId)),s=(t?t.name:"").toLowerCase().includes(v.toLowerCase())||e.id.toString().includes(v),r="all"===k||e.paymentType===k;return s&&r}),M=e=>{if(g)try{const t={formData:e,items:e.items||[],total:e.total||0,customers:a,products:s,warehouses:n};ba(t,"sales"),c("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0644\u0644\u0637\u0628\u0627\u0639\u0629")}catch(t){d("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}else d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631")},P={cash:"\u0646\u0642\u062f\u064a",deferred:"\u0622\u062c\u0644",partial:"\u062c\u0632\u0626\u064a"};return b||h?(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644..."}),(0,Qe.jsx)(ks,{className:"absolute left-3 top-3 text-gray-400"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("select",{value:k,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[(0,Qe.jsx)("option",{value:"all",children:"\u0643\u0644 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,Qe.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Qe.jsx)("option",{value:"deferred",children:"\u0622\u062c\u0644"}),(0,Qe.jsx)("option",{value:"partial",children:"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsx)(es,{className:"absolute left-3 top-3 text-gray-400"})]})})]}),(0,Qe.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["\u0639\u0631\u0636 ",E.length," \u0645\u0646 ",t.length," \u0641\u0627\u062a\u0648\u0631\u0629"]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===E.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsxs)("td",{colSpan:"7",className:"px-3 py-8 text-center text-gray-500",children:[(0,Qe.jsx)(Zt,{className:"mx-auto mb-2 text-3xl text-gray-300"}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631"})]})}):E.map(e=>{var t;const s=a.find(t=>t.id===parseInt(e.customerId));return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-3 py-2 font-semibold text-blue-600",children:["#",e.id]}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===s||void 0===s?void 0:s.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===s||void 0===s?void 0:s.phone)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("cash"===e.paymentType?"bg-green-100 text-green-700":"deferred"===e.paymentType?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"),children:P[e.paymentType]||e.paymentType})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-bold text-green-600",children:m(e.total||0)}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:(null===(t=e.items)||void 0===t?void 0:t.length)||0})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-2",children:[h&&(0,Qe.jsx)("button",{onClick:()=>(e=>{h?(N(e),S(!0)):d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a")})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\u0639\u0631\u0636",children:(0,Qe.jsx)(Zt,{})}),p&&(0,Qe.jsx)("button",{onClick:()=>(e=>{p?(L(e),D(!0)):d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0625\u0631\u062c\u0627\u0639 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a")})(e),className:"p-2 text-orange-600 hover:bg-orange-50 rounded transition-colors",title:"\u0625\u0631\u062c\u0627\u0639",children:(0,Qe.jsx)(Rs,{})}),g&&(0,Qe.jsx)("button",{onClick:()=>M(e),className:"p-2 text-green-600 hover:bg-green-50 rounded transition-colors",title:"\u0637\u0628\u0627\u0639\u0629",children:(0,Qe.jsx)(ys,{})}),f&&(0,Qe.jsx)("button",{onClick:()=>(e=>{if(f){if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 #".concat(e.id,"\u061f\n\u0633\u064a\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0625\u0644\u0649 \u0627\u0644\u0645\u062e\u0632\u0648\u0646.")))try{l(e.id),c("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d \u0648\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0644\u0644\u0645\u062e\u0632\u0648\u0646")}catch(t){d(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629")}}else d("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a")})(e),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})}),!h&&!p&&!g&&!f&&(0,Qe.jsx)("span",{className:"text-xs text-gray-400",children:"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})]})})]},e.id)})})]})})}),w&&y&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 text-white sticky top-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a #",y.id]}),(0,Qe.jsx)("button",{onClick:()=>S(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:"\u2715"})]})}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===(e=a.find(e=>e.id===parseInt(y.customerId)))||void 0===e?void 0:e.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(y.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:P[y.paymentType]||y.paymentType})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsx)("p",{className:"font-bold text-lg text-purple-600",children:m(y.total||0)})]})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h4",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y",children:(y.items||[]).map((e,t)=>{const a=s.find(t=>t.id===parseInt(e.productId)),r=(null===a||void 0===a?void 0:a.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",n=(null===a||void 0===a?void 0:a.category)||"-",l=(e.quantity||0)*(e.price||0);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:t+1}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:r}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:n})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("div",{children:e.quantity||0})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("div",{children:m(e.price||0)})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-blue-600",children:m(l)})]},t)})})]})})]}),y.notes&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm",children:y.notes})]})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 border-t flex justify-end gap-2",children:[g&&(0,Qe.jsxs)("button",{onClick:()=>{M(y),S(!1)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(ys,{})," \u0637\u0628\u0627\u0639\u0629"]}),(0,Qe.jsx)("button",{onClick:()=>S(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})]})]})}),I&&_&&(0,Qe.jsx)(Da,{invoice:_,products:s,customers:a,salesReturns:o,onSubmit:e=>{try{i(e),c("\u062a\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),D(!1),L(null)}catch(t){d(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}},onClose:()=>{D(!1),L(null)},formatCurrency:m})]}):(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center gap-4",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 text-2xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-red-800 font-bold text-lg",children:"\u0648\u0635\u0648\u0644 \u063a\u064a\u0631 \u0645\u0635\u0631\u062d"}),(0,Qe.jsx)("p",{className:"text-red-700",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0623\u0648 \u0625\u062f\u0627\u0631\u0629 \u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"})]})]})})},La=()=>{const{invoiceId:e}=te(),t=ee(),{salesInvoices:s,products:a,customers:n,addSalesReturn:l,salesReturns:i}=Ye(),{showSuccess:o,showError:c}=Ke(),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)("");(0,r.useEffect)(()=>{const r=s.find(t=>t.id===parseInt(e));if(!r)return c("\u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f\u0629"),void t("/sales/manage");x(r);const n=r.items.map(e=>{const t=i.filter(e=>e.invoiceId===r.id&&"cancelled"!==e.status);let s=0;t.forEach(t=>{const a=t.items.find(t=>t.productId===e.productId);a&&(s+=(a.quantity||0)+(a.subQuantity||0))});const n=parseInt(e.quantity)||0,l=n-s,o=a.find(t=>t.id===parseInt(e.productId));return{productId:e.productId,productName:(null===o||void 0===o?void 0:o.name)||e.productName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",originalQuantity:n,originalPrice:e.price||0,returnedQty:s,availableQty:l,returnQuantity:0,returnSubQuantity:0,selected:!1}});m(n)},[e,s,i,t,c,a]);if(!d)return(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto p-4",children:(0,Qe.jsx)("div",{className:"text-center py-8",children:(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})})});const b=n.find(e=>e.id===parseInt(d.customerId));return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0631\u062c\u0627\u0639 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0641\u0627\u062a\u0648\u0631\u0629 \u0631\u0642\u0645 #",d.id]})]}),(0,Qe.jsxs)("button",{onClick:()=>t("/sales/manage"),className:"flex items-center gap-2 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(xt,{})," \u0631\u062c\u0648\u0639"]})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===b||void 0===b?void 0:b.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(d.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:"cash"===d.paymentType?"\u0646\u0642\u062f\u064a":"deferred"===d.paymentType?"\u0622\u062c\u0644":"\u062c\u0632\u0626\u064a"})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0643\u0644\u064a"}),(0,Qe.jsxs)("p",{className:"font-bold text-lg text-purple-600",children:[d.total.toFixed(2)," \u062f.\u0639"]})]})]})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=u.filter(e=>e.selected);if(0===s.length)return void c("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0646\u062a\u062c \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644 \u0644\u0644\u0625\u0631\u062c\u0627\u0639");if(s.some(e=>0===e.returnQuantity))c("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0643\u0645\u064a\u0629 \u0635\u062d\u064a\u062d\u0629 \u0644\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629");else if(h.trim())try{const e={invoiceId:d.id,items:s.map(e=>({productId:e.productId,quantity:e.returnQuantity,subQuantity:0})),reason:h,notes:g};l(e),o("\u062a\u0645 \u0625\u0631\u062c\u0627\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),t("/sales/returns")}catch(a){c(a.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")}else c("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639")},children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsx)("h3",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u0627\u062f \u0625\u0631\u062c\u0627\u0639\u0647\u0627"}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700 w-10",children:(0,Qe.jsx)("input",{type:"checkbox",onChange:e=>{const t=u.map(t=>Be(Be({},t),{},{selected:e.target.checked&&t.availableQty>0}));m(t)},className:"rounded"})}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0633\u0627\u0628\u0642\u0627\u064b"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u062a\u0627\u062d \u0644\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0643\u0645\u064a\u0629 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:u.map((e,t)=>{const s=a.find(t=>t.id===parseInt(e.productId)),r=e.returnQuantity*e.originalPrice,n=0===e.availableQty;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(n?"opacity-50":""),children:[(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("input",{type:"checkbox",checked:e.selected,onChange:()=>(e=>{const t=[...u];t[e].selected=!t[e].selected,t[e].selected||(t[e].returnQuantity=0,t[e].returnSubQuantity=0),m(t)})(t),disabled:n,className:"rounded"})}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:e.productName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===s||void 0===s?void 0:s.category)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:e.originalQuantity}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:e.returnedQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(e.availableQty>0?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:e.selected&&(0,Qe.jsx)("input",{type:"number",value:e.returnQuantity,onChange:e=>((e,t)=>{const s=[...u],a=s[e];s[e].returnQuantity=Math.max(0,parseInt(t)||0),s[e].returnQuantity>a.availableQty&&(c("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629 \u062a\u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0627\u062d\u0629 (".concat(a.availableQty,")")),s[e].returnQuantity=0),m(s)})(t,e.target.value),className:"w-20 px-2 py-1 text-xs text-center border border-gray-300 rounded",min:"0",max:e.availableQty})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:e.selected?r.toFixed(2):"0.00"})]},t)})})]})})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"defective",children:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("option",{value:"wrong_item",children:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626"}),(0,Qe.jsx)("option",{value:"customer_request",children:"\u0637\u0644\u0628 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:g,onChange:e=>f(e.target.value),rows:"2",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]})}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:u.filter(e=>e.selected).length})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:[u.reduce((e,t)=>t.selected?e+t.returnQuantity*t.originalPrice:e,0).toFixed(2)," \u062f.\u0639"]})]})]})}),(0,Qe.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>t("/sales/manage"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)("button",{type:"submit",className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:[(0,Qe.jsx)(Rs,{})," \u062a\u0646\u0641\u064a\u0630 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"]})]})]})]})},Ea=()=>{const{salesReturns:e,salesInvoices:t,customers:s,products:a,deleteSalesReturn:n}=Ye(),{showSuccess:l,showError:i}=Ke(),[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)("all"),g=e.filter(e=>{const a=t.find(t=>t.id===e.invoiceId),r=s.find(e=>e.id===parseInt(null===a||void 0===a?void 0:a.customerId)),n=(r?r.name:"").toLowerCase().includes(o.toLowerCase())||e.id.toString().includes(o)||e.invoiceId.toString().includes(o),l="all"===h||e.status===h;return n&&l}),f=e=>({defective:"\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0628",damaged:"\u0645\u0646\u062a\u062c \u062a\u0627\u0644\u0641",wrong_item:"\u0645\u0646\u062a\u062c \u062e\u0627\u0637\u0626",customer_request:"\u0637\u0644\u0628 \u0627\u0644\u0639\u0645\u064a\u0644",other:"\u0623\u062e\u0631\u0649"}[e]||e),b=e=>{const t={completed:{text:"\u0645\u0643\u062a\u0645\u0644",class:"bg-green-100 text-green-700"},pending:{text:"\u0645\u0639\u0644\u0642",class:"bg-yellow-100 text-yellow-700"},cancelled:{text:"\u0645\u0644\u063a\u0649",class:"bg-red-100 text-red-700"}}[e]||{text:e,class:"bg-gray-100 text-gray-700"};return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(t.class),children:t.text})},v=e.length,j=e.reduce((e,t)=>e+(t.totalAmount||0),0);return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto p-4",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"\u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:v})]}),(0,Qe.jsx)(Rs,{className:"text-4xl opacity-50"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:j.toFixed(2)}),(0,Qe.jsx)("p",{className:"text-xs opacity-75",children:"\u062f\u064a\u0646\u0627\u0631 \u0639\u0631\u0627\u0642\u064a"})]}),(0,Qe.jsx)(Zt,{className:"text-4xl opacity-50"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-lg shadow-md",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u0631\u062a\u062c\u0639"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-1",children:v>0?(j/v).toFixed(2):"0.00"}),(0,Qe.jsx)("p",{className:"text-xs opacity-75",children:"\u062f\u064a\u0646\u0627\u0631 \u0639\u0631\u0627\u0642\u064a"})]}),(0,Qe.jsx)(ks,{className:"text-4xl opacity-50"})]})})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,Qe.jsx)("div",{className:"col-span-2",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0625\u0631\u062c\u0627\u0639\u060c \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644..."}),(0,Qe.jsx)(ks,{className:"absolute left-3 top-3 text-gray-400"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 pr-10 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,Qe.jsx)("option",{value:"pending",children:"\u0645\u0639\u0644\u0642"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u0649"})]}),(0,Qe.jsx)(es,{className:"absolute left-3 top-3 text-gray-400"})]})})]}),(0,Qe.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:["\u0639\u0631\u0636 ",g.length," \u0645\u0646 ",e.length," \u0645\u0631\u062a\u062c\u0639"]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0633\u0628\u0628"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-700",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===g.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsxs)("td",{colSpan:"9",className:"px-3 py-8 text-center text-gray-500",children:[(0,Qe.jsx)(Rs,{className:"mx-auto mb-2 text-3xl text-gray-300"}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a"})]})}):g.map(e=>{var a;const r=t.find(t=>t.id===e.invoiceId),o=s.find(e=>e.id===parseInt(null===r||void 0===r?void 0:r.customerId));return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-3 py-2 font-semibold text-red-600",children:["#",e.id]}),(0,Qe.jsxs)("td",{className:"px-3 py-2 font-medium text-blue-600",children:["#",e.invoiceId]}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===o||void 0===o?void 0:o.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===o||void 0===o?void 0:o.phone)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded-full text-xs",children:f(e.reason)})}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:(0,Qe.jsx)("span",{className:"px-2 py-1 bg-gray-100 rounded-full text-xs",children:(null===(a=e.items)||void 0===a?void 0:a.length)||0})}),(0,Qe.jsxs)("td",{className:"px-3 py-2 text-center font-bold text-red-600",children:[(e.totalAmount||0).toFixed(2)," \u062f.\u0639"]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:b(e.status)}),(0,Qe.jsx)("td",{className:"px-3 py-2",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{x(e),m(!0)})(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"\u0639\u0631\u0636",children:(0,Qe.jsx)($t,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 #".concat(e.id,"\u061f\n\u0633\u064a\u062a\u0645 \u062e\u0635\u0645 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646.")))try{n(e.id),l("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0631\u062a\u062c\u0639 \u0628\u0646\u062c\u0627\u062d \u0648\u062e\u0635\u0645 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646")}catch(t){i(t.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0631\u062a\u062c\u0639")}})(e),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id)})})]})})}),u&&d&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-4 text-white sticky top-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0625\u0631\u062c\u0627\u0639 #",d.id]}),(0,Qe.jsx)("button",{onClick:()=>m(!1),className:"text-white hover:bg-white hover:bg-opacity-20 rounded-full p-2 transition-all",children:"\u2715"})]})}),(0,Qe.jsx)("div",{className:"p-6",children:(()=>{const e=t.find(e=>e.id===d.invoiceId),r=s.find(t=>t.id===parseInt(null===e||void 0===e?void 0:e.customerId));return(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629"}),(0,Qe.jsxs)("p",{className:"font-semibold text-sm",children:["#",d.invoiceId]})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold text-sm",children:new Date(d.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsxs)("p",{className:"font-bold text-lg text-purple-600",children:[(d.totalAmount||0).toFixed(2)," \u062f.\u0639"]})]})]}),(0,Qe.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg mb-6",children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"\u0633\u0628\u0628 \u0627\u0644\u0625\u0631\u062c\u0627\u0639"}),(0,Qe.jsx)("p",{className:"font-semibold",children:f(d.reason)}),d.notes&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600 mt-2 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm",children:d.notes})]})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h4",{className:"text-sm font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0631\u062a\u062c\u0639\u0629"}),(0,Qe.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-gray-100",children:[(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-right text-xs font-semibold",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-3 py-2 text-center text-xs font-semibold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y",children:(d.items||[]).map((t,s)=>{const r=a.find(e=>e.id===parseInt(t.productId)),n=null===e||void 0===e?void 0:e.items.find(e=>e.productId===t.productId),l=(t.quantity||0)*((null===n||void 0===n?void 0:n.price)||0);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-3 py-2",children:s+1}),(0,Qe.jsxs)("td",{className:"px-3 py-2",children:[(0,Qe.jsx)("div",{className:"font-medium",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:(null===r||void 0===r?void 0:r.category)||"-"})]}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:t.quantity||0}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center",children:((null===n||void 0===n?void 0:n.price)||0).toFixed(2)}),(0,Qe.jsx)("td",{className:"px-3 py-2 text-center font-semibold text-red-600",children:l.toFixed(2)})]},s)})})]})})]})]})})()}),(0,Qe.jsx)("div",{className:"bg-gray-50 p-4 border-t flex justify-end",children:(0,Qe.jsx)("button",{onClick:()=>m(!1),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},Ma=(e,t)=>{if(!e||!t)return 0;const s=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(s===a)return 1;const r=s.length>a.length?s:a;s.length,a.length;if(0===r.length)return 1;const n=Pa(s,a);return(r.length-n)/r.length},Pa=(e,t)=>{const s=[];for(let a=0;a<=t.length;a++)s[a]=[a];for(let a=0;a<=e.length;a++)s[0][a]=a;for(let a=1;a<=t.length;a++)for(let r=1;r<=e.length;r++)t.charAt(a-1)===e.charAt(r-1)?s[a][r]=s[a-1][r-1]:s[a][r]=Math.min(s[a-1][r-1]+1,s[a][r-1]+1,s[a-1][r]+1);return s[t.length][e.length]},Ta=(e,t)=>{if(!e||!t||0===t.length)return null;const{customerName:s,customerPhone:a,customerEmail:r}=e;let n=null,l=0;for(const i of t){let e=0,t=0;if(a&&i.phone){const s=a.replace(/\D/g,""),r=i.phone.replace(/\D/g,"");if(s===r)return i;s.slice(-8)===r.slice(-8)&&(e+=.8,t++)}if(r&&i.email&&r.toLowerCase()===i.email.toLowerCase())return i;if(s&&i.name){e+=Ma(s,i.name),t++}const o=t>0?e/t:0;o>l&&o>=.75&&(l=o,n=i)}return n},za=(e,t)=>{if(!e||!t||0===t.length)return null;const{productName:s,productSKU:a}=e;let r=null,n=0;for(const l of t){if(a&&l.barcode&&a===l.barcode)return l;if(s&&l.name){const e=Ma(s,l.name);e>n&&e>=.75&&(n=e,r=l)}}return r},Oa=(e,t)=>{const s=[],a=[];for(const r of e){const e=za(r,t);e?s.push(Be(Be({},r),{},{matchedProduct:e,productId:e.id})):a.push(r)}return{matchedItems:s,unmatchedItems:a,allMatched:0===a.length,matchRate:s.length/e.length}},Aa=(e,t)=>({name:e.customerName||"\u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f",phone:e.customerPhone||"",email:e.customerEmail||"",address:"",notes:"\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0647\u0630\u0627 \u0627\u0644\u0639\u0645\u064a\u0644 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0645\u0646 ".concat(t),source:t,createdAt:(new Date).toISOString()}),Fa=e=>{const t=[],s=[];for(const a of e){const e=a.matchedProduct,r=a.quantity,n=(e.mainQuantity||0)+(e.subQuantity||0);n<r?t.push(Be(Be({},a),{},{requestedQty:r,availableQty:n,shortage:r-n})):s.push(a)}return{allAvailable:0===t.length,availableItems:s,unavailableItems:t,availabilityRate:s.length/e.length}},Ra=(e,t,s)=>{const a=Ta(e,t),r=!a,n=Oa(e.items,s),l=n.matchedItems.length>0?Fa(n.matchedItems):{allAvailable:!1,unavailableItems:[],availableItems:[]},i=(a?.3:0)+.4*n.matchRate+(l.allAvailable?.3:.3*l.availabilityRate);return{customer:{matched:a,needsCreation:r,data:a||Aa(e,e.platformName)},items:{matched:n.matchedItems,unmatched:n.unmatchedItems,matchRate:n.matchRate,allMatched:n.allMatched},inventory:{available:l.availableItems,unavailable:l.unavailableItems,allAvailable:l.allAvailable,availabilityRate:l.availabilityRate||0},readiness:{score:i,level:i>=.8?"high":i>=.5?"medium":"low",canAutoAccept:i>=.8&&l.allAvailable},issues:[...r?["\u0633\u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"]:[],...n.unmatchedItems.length>0?["".concat(n.unmatchedItems.length," \u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0637\u0627\u0628\u0642")]:[],...l.unavailableItems.length>0?["".concat(l.unavailableItems.length," \u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631 \u0628\u0627\u0644\u0645\u062e\u0632\u0648\u0646")]:[]]}},Va={INVOICE_PLATFORM:{baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_INVOICE_PLATFORM_URL||"https://api.invoice-platform.com",apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_INVOICE_API_KEY||"",webhookSecret:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_INVOICE_WEBHOOK_SECRET||""},CARTON_PLATFORM:{baseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CARTON_PLATFORM_URL||"https://api.carton-platform.com",apiKey:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CARTON_API_KEY||"",webhookSecret:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_CARTON_WEBHOOK_SECRET||""}},Ba=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const s=await fetch(e,Be(Be({},t),{},{headers:Be({"Content-Type":"application/json"},t.headers)}));if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return await s.json()}catch(s){throw console.error("API Request Error:",s),s}},qa={fetchPendingInvoices:async()=>{const e="".concat(Va.INVOICE_PLATFORM.baseURL,"/invoices/pending");return await Ba(e,{method:"GET",headers:{Authorization:"Bearer ".concat(Va.INVOICE_PLATFORM.apiKey)}})},confirmInvoice:async e=>{const t="".concat(Va.INVOICE_PLATFORM.baseURL,"/invoices/").concat(e,"/confirm");return await Ba(t,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.INVOICE_PLATFORM.apiKey)},body:JSON.stringify({status:"accepted"})})},rejectInvoice:async(e,t)=>{const s="".concat(Va.INVOICE_PLATFORM.baseURL,"/invoices/").concat(e,"/reject");return await Ba(s,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.INVOICE_PLATFORM.apiKey)},body:JSON.stringify({status:"rejected",reason:t||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u0628\u0628"})})},subscribeToWebhook:async e=>{const t="".concat(Va.INVOICE_PLATFORM.baseURL,"/webhooks/subscribe");return await Ba(t,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.INVOICE_PLATFORM.apiKey)},body:JSON.stringify({url:e,events:["invoice.created","invoice.updated"]})})}},Qa={fetchPendingInvoices:async()=>{const e="".concat(Va.CARTON_PLATFORM.baseURL,"/orders/pending");return await Ba(e,{method:"GET",headers:{Authorization:"Bearer ".concat(Va.CARTON_PLATFORM.apiKey)}})},confirmOrder:async e=>{const t="".concat(Va.CARTON_PLATFORM.baseURL,"/orders/").concat(e,"/confirm");return await Ba(t,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.CARTON_PLATFORM.apiKey)},body:JSON.stringify({status:"accepted"})})},rejectOrder:async(e,t)=>{const s="".concat(Va.CARTON_PLATFORM.baseURL,"/orders/").concat(e,"/reject");return await Ba(s,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.CARTON_PLATFORM.apiKey)},body:JSON.stringify({status:"rejected",reason:t||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u0628\u0628"})})},subscribeToWebhook:async e=>{const t="".concat(Va.CARTON_PLATFORM.baseURL,"/webhooks/subscribe");return await Ba(t,{method:"POST",headers:{Authorization:"Bearer ".concat(Va.CARTON_PLATFORM.apiKey)},body:JSON.stringify({url:e,events:["order.created","order.updated"]})})}},Ha=e=>{var t,s,a,r;return{id:"INV-".concat(e.id),platform:"invoice",platformName:"\u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629",externalId:e.id,customerName:(null===(t=e.customer)||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",customerPhone:(null===(s=e.customer)||void 0===s?void 0:s.phone)||"",customerEmail:(null===(a=e.customer)||void 0===a?void 0:a.email)||"",receivedDate:new Date(e.created_at).toISOString().split("T")[0],receivedTime:new Date(e.created_at).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),paymentType:"cash"===e.payment_method?"cash":"deferred"===e.payment_method?"deferred":"partial",items:(null===(r=e.items)||void 0===r?void 0:r.map(e=>({productName:e.product_name,productSKU:e.sku||"",quantity:e.quantity,mainPrice:parseFloat(e.unit_price),subPrice:e.sub_price?parseFloat(e.sub_price):0})))||[],total:parseFloat(e.total_amount),notes:e.notes||"",agentType:"invoice"}},Wa=e=>{var t,s,a,r;return{id:"CTN-".concat(e.id),platform:"carton",platformName:"\u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629",externalId:e.id,customerName:(null===(t=e.customer)||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",customerPhone:(null===(s=e.customer)||void 0===s?void 0:s.phone)||"",customerEmail:(null===(a=e.customer)||void 0===a?void 0:a.email)||"",receivedDate:new Date(e.created_at).toISOString().split("T")[0],receivedTime:new Date(e.created_at).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),paymentType:"cash"===e.payment_method?"cash":"deferred"===e.payment_method?"deferred":"partial",items:(null===(r=e.items)||void 0===r?void 0:r.map(e=>({productName:e.product_name,productSKU:e.sku||"",quantity:e.quantity,mainPrice:parseFloat(e.unit_price),subPrice:e.sub_price?parseFloat(e.sub_price):0})))||[],total:parseFloat(e.total_amount),notes:e.notes||"",agentType:"carton"}},Ua=async()=>{try{var e,t;const[s,a]=await Promise.allSettled([qa.fetchPendingInvoices(),Qa.fetchPendingInvoices()]),r=[];return"fulfilled"===s.status&&null!==(e=s.value)&&void 0!==e&&e.data&&r.push(...s.value.data.map(Ha)),"fulfilled"===a.status&&null!==(t=a.value)&&void 0!==t&&t.data&&r.push(...a.value.data.map(Wa)),r}catch(s){throw console.error("Error fetching pending invoices:",s),s}},Xa=()=>{const{customers:e,products:t,warehouses:s,addSalesInvoice:a,addCustomer:n}=Ye(),{showSuccess:l,showError:i,showInfo:o,showWarning:c,addNotification:d}=Ke(),[x,u]=(0,r.useState)("pending"),[m,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),[v,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)(!1),[I,D]=(0,r.useState)(null),[_,L]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),[P,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{z(),A()},[]);const z=()=>{const e=localStorage.getItem("external_pending_invoices"),t=localStorage.getItem("external_accepted_invoices"),s=localStorage.getItem("external_rejected_invoices");e&&h(JSON.parse(e)),t&&g(JSON.parse(t)),s&&b(JSON.parse(s))},O=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},A=()=>{const e=[{id:1,platform:"invoice",platformName:"\u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629",customerName:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f",customerPhone:"07701234567",customerEmail:"ahmed@example.com",receivedDate:"2025-10-23",receivedTime:"14:30",paymentType:"cash",items:[{productName:"\u0645\u0646\u062a\u062c A",productSKU:"SKU001",quantity:5,mainPrice:1e4,subPrice:500},{productName:"\u0645\u0646\u062a\u062c B",productSKU:"SKU002",quantity:3,mainPrice:15e3,subPrice:750}],total:95e3,notes:"\u0637\u0644\u0628 \u0645\u0633\u062a\u0639\u062c\u0644",agentType:"invoice"},{id:2,platform:"carton",platformName:"\u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629",customerName:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0644\u064a",customerPhone:"07809876543",customerEmail:"fatima@example.com",receivedDate:"2025-10-23",receivedTime:"15:45",paymentType:"deferred",items:[{productName:"\u0645\u0646\u062a\u062c C",productSKU:"SKU003",quantity:10,mainPrice:8e3,subPrice:400},{productName:"\u0645\u0646\u062a\u062c D",productSKU:"SKU004",quantity:2,mainPrice:2e4,subPrice:1e3}],total:12e4,notes:"\u062a\u0648\u0635\u064a\u0644 \u0645\u0633\u0627\u0621\u064b",agentType:"carton"}];h(e),O("external_pending_invoices",e)},F={pending:m.length,accepted:p.length,rejected:f.length,pendingTotal:m.reduce((e,t)=>e+t.total,0)},R=s=>{let{invoice:r,status:x}=s;const u="invoice"===r.platform?(0,Qe.jsx)(Zt,{}):(0,Qe.jsx)(ft,{}),f="invoice"===r.platform?"blue":"purple";return(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-".concat(f,"-500 to-").concat(f,"-600 flex items-center justify-center text-white"),children:u}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-bold text-gray-800",children:r.customerName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:r.platformName})]})]}),(0,Qe.jsxs)("div",{className:"text-left",children:[(0,Qe.jsx)("div",{className:"text-sm font-semibold text-gray-600",children:r.receivedDate}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:r.receivedTime})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0623\u0635\u0646\u0627\u0641:"}),(0,Qe.jsx)("span",{className:"font-semibold mr-2",children:r.items.length})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0646\u0648\u0639 \u0627\u0644\u062f\u0641\u0639:"}),(0,Qe.jsx)("span",{className:"font-semibold mr-2",children:"cash"===r.paymentType?"\u0646\u0642\u062f\u064a":"deferred"===r.paymentType?"\u0622\u062c\u0644":"\u062c\u0632\u0626\u064a"})]})]}),(0,Qe.jsx)("div",{className:"mb-3",children:(0,Qe.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold ".concat("invoice"===r.agentType?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"),children:["invoice"===r.agentType?(0,Qe.jsx)(Zt,{}):(0,Qe.jsx)(ft,{}),"invoice"===r.agentType?"\u0641\u0627\u062a\u0648\u0631\u0629":"\u0643\u0631\u062a\u0648\u0646\u0629"]})}),(0,Qe.jsxs)("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[r.total.toLocaleString()," ",(0,Qe.jsx)("span",{className:"text-sm",children:"\u062c.\u0645"})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:["pending"===x&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("button",{onClick:()=>(async s=>{try{var r;L(!0);const i=Ra(s,e,t);if(!i.inventory.allAvailable){const e=i.inventory.unavailable.map(e=>"".concat(e.productName," (\u0645\u0637\u0644\u0648\u0628: ").concat(e.requestedQty,", \u0645\u062a\u0648\u0641\u0631: ").concat(e.availableQty,")")).join("\n");c("\u062a\u062d\u0630\u064a\u0631: \u0628\u0639\u0636 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629 \u0628\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629:\n".concat(e,"\n\n\u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u0645\u062a\u0627\u0628\u0639\u0629\u061f"))}let x=null===(r=i.customer.matched)||void 0===r?void 0:r.id;if(i.customer.needsCreation){const e=n(i.customer.data);x=e.id,o("\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f: ".concat(e.name))}const u=i.items.matched.map(e=>({productId:e.productId,quantity:e.quantity,price:e.mainPrice})),f={customerId:x,date:s.receivedDate,paymentType:s.paymentType,agentType:s.agentType,notes:"[".concat(s.platformName,"] ").concat(s.notes),items:u,total:s.total,status:"completed",externalSource:s.platform,externalId:s.id};a(f);const b=m.filter(e=>e.id!==s.id),v=Be(Be({},s),{},{acceptedDate:(new Date).toISOString().split("T")[0],acceptedTime:(new Date).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),analysis:i});h(b),g(e=>[v,...e]),O("external_pending_invoices",b),O("external_accepted_invoices",[v,...p]),l("\u062a\u0645 \u0642\u0628\u0648\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0646 ".concat(s.platformName," \u0628\u0646\u062c\u0627\u062d!\n")+"\u0627\u0644\u0639\u0645\u064a\u0644: ".concat(s.customerName).concat(i.customer.needsCreation?" (\u062c\u062f\u064a\u062f)":"","\n")+"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: ".concat(s.total.toLocaleString()," \u062c.\u0645\n")+"\u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644: ".concat("invoice"===s.agentType?"\u0641\u0627\u062a\u0648\u0631\u0629":"\u0643\u0631\u062a\u0648\u0646\u0629")),d({type:"success",title:"\u2705 \u062a\u0645 \u0642\u0628\u0648\u0644 \u0641\u0627\u062a\u0648\u0631\u0629 \u062e\u0627\u0631\u062c\u064a\u0629",message:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0646 ".concat(s.platformName," - ").concat(s.customerName," - ").concat(s.total.toLocaleString()," \u062c.\u0645"),icon:"success"})}catch(x){i("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0642\u0628\u0648\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629: "+x.message)}finally{L(!1)}})(r),disabled:_,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,Qe.jsx)(Lt,{})," \u0642\u0628\u0648\u0644"]}),(0,Qe.jsx)("button",{onClick:()=>(s=>{const a=Ra(s,e,t);return M(a),T(!0),a})(r),className:"flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors",title:"\u062a\u062d\u0644\u064a\u0644",children:(0,Qe.jsx)(os,{})}),(0,Qe.jsxs)("button",{onClick:()=>(e=>{D(e),S(""),C(!0)})(r),disabled:_,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,Qe.jsx)(Ts,{})," \u0631\u0641\u0636"]})]}),(0,Qe.jsxs)("button",{onClick:()=>(e=>{j(e),N(!0)})(r),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,Qe.jsx)($t,{})," \u062a\u0641\u0627\u0635\u064a\u0644"]})]}),"accepted"===x&&r.acceptedDate&&(0,Qe.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-xs text-green-600",children:[(0,Qe.jsx)(_t,{}),(0,Qe.jsxs)("span",{children:["\u062a\u0645 \u0627\u0644\u0642\u0628\u0648\u0644 \u0641\u064a ",r.acceptedDate," - ",r.acceptedTime]})]})}),"rejected"===x&&r.rejectedDate&&(0,Qe.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-xs text-red-600 mb-1",children:[(0,Qe.jsx)(Ps,{}),(0,Qe.jsxs)("span",{children:["\u062a\u0645 \u0627\u0644\u0631\u0641\u0636 \u0641\u064a ",r.rejectedDate," - ",r.rejectedTime]})]}),r.rejectionReason&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-600 mr-5",children:["\u0627\u0644\u0633\u0628\u0628: ",r.rejectionReason]})]})]})};return(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629"}),(0,Qe.jsxs)("button",{onClick:()=>{(async()=>{L(!0);try{const e=await Ua();h(e),O("external_pending_invoices",e),e.length>0&&d({type:"info",title:"\u0641\u0648\u0627\u062a\u064a\u0631 \u062c\u062f\u064a\u062f\u0629",message:"\u062a\u0645 \u0627\u0633\u062a\u0644\u0627\u0645 ".concat(e.length," \u0641\u0627\u062a\u0648\u0631\u0629 \u062c\u062f\u064a\u062f\u0629 \u0645\u0646 \u0627\u0644\u0645\u0646\u0635\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629"),icon:"info"})}catch(e){i("\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0646 \u0627\u0644\u0645\u0646\u0635\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629")}finally{L(!1)}})()},disabled:_,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg text-sm font-semibold transition-colors",children:[(0,Qe.jsx)(Ls,{className:_?"animate-spin":""}),_?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...":"\u062a\u062d\u062f\u064a\u062b"]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg p-4 text-white shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qe.jsx)(Xt,{className:"text-2xl"}),(0,Qe.jsx)("div",{className:"text-3xl font-bold",children:F.pending})]}),(0,Qe.jsx)("div",{className:"text-sm opacity-90",children:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0639\u0644\u0642\u0629"})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qe.jsx)(_t,{className:"text-2xl"}),(0,Qe.jsx)("div",{className:"text-3xl font-bold",children:F.accepted})]}),(0,Qe.jsx)("div",{className:"text-sm opacity-90",children:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644\u0629"})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-lg p-4 text-white shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qe.jsx)(Ps,{className:"text-2xl"}),(0,Qe.jsx)("div",{className:"text-3xl font-bold",children:F.rejected})]}),(0,Qe.jsx)("div",{className:"text-sm opacity-90",children:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0631\u0641\u0648\u0636\u0629"})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white shadow-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qe.jsx)(ws,{className:"text-2xl"}),(0,Qe.jsxs)("div",{className:"text-xl font-bold",children:[F.pendingTotal.toLocaleString()," \u062c.\u0645"]})]}),(0,Qe.jsx)("div",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0639\u0644\u0642\u0629"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,Qe.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,Qe.jsxs)("button",{onClick:()=>u("pending"),className:"flex-1 px-6 py-3 font-semibold transition-colors ".concat("pending"===x?"bg-orange-50 text-orange-600 border-b-2 border-orange-600":"text-gray-600 hover:bg-gray-50"),children:["\u0627\u0644\u0645\u0639\u0644\u0642\u0629 (",F.pending,")"]}),(0,Qe.jsxs)("button",{onClick:()=>u("accepted"),className:"flex-1 px-6 py-3 font-semibold transition-colors ".concat("accepted"===x?"bg-green-50 text-green-600 border-b-2 border-green-600":"text-gray-600 hover:bg-gray-50"),children:["\u0627\u0644\u0645\u0642\u0628\u0648\u0644\u0629 (",F.accepted,")"]}),(0,Qe.jsxs)("button",{onClick:()=>u("rejected"),className:"flex-1 px-6 py-3 font-semibold transition-colors ".concat("rejected"===x?"bg-red-50 text-red-600 border-b-2 border-red-600":"text-gray-600 hover:bg-gray-50"),children:["\u0627\u0644\u0623\u0631\u0634\u064a\u0641 \u0627\u0644\u0645\u0631\u0641\u0648\u0636 (",F.rejected,")"]})]}),(0,Qe.jsxs)("div",{className:"p-6",children:["pending"===x&&(0,Qe.jsx)("div",{children:0===m.length?(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(_t,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0639\u0644\u0642\u0629 \u062d\u0627\u0644\u064a\u0627\u064b"})]}):(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,Qe.jsx)(R,{invoice:e,status:"pending"},e.id))})}),"accepted"===x&&(0,Qe.jsx)("div",{children:0===p.length?(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(rs,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0642\u0628\u0648\u0644\u0629"})]}):(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,Qe.jsx)(R,{invoice:e,status:"accepted"},e.id))})}),"rejected"===x&&(0,Qe.jsx)("div",{children:0===f.length?(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(rs,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0648\u0627\u062a\u064a\u0631 \u0645\u0631\u0641\u0648\u0636\u0629"})]}):(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(e=>(0,Qe.jsx)(R,{invoice:e,status:"rejected"},e.id))})})]})]}),y&&v&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Qe.jsx)(Ts,{className:"text-xl"})})]}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4 bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645"}),(0,Qe.jsx)("div",{className:"font-semibold",children:v.customerName})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("div",{className:"font-semibold",dir:"ltr",children:v.customerPhone})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0645\u0646\u0635\u0629"}),(0,Qe.jsx)("div",{className:"font-semibold",children:v.platformName})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644"}),(0,Qe.jsx)("div",{className:"font-semibold",children:"invoice"===v.agentType?"\u0641\u0627\u062a\u0648\u0631\u0629":"\u0643\u0631\u062a\u0648\u0646\u0629"})]})]})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0623\u0635\u0646\u0627\u0641"}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full text-sm",children:[(0,Qe.jsx)("thead",{className:"bg-gray-100 border-b",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-4 py-2 text-right font-semibold",children:"\u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("th",{className:"px-4 py-2 text-center font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-4 py-2 text-center font-semibold",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-4 py-2 text-center font-semibold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]})}),(0,Qe.jsx)("tbody",{children:v.items.map((e,t)=>(0,Qe.jsxs)("tr",{className:"border-b",children:[(0,Qe.jsx)("td",{className:"px-4 py-3",children:e.productName}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:e.quantity}),(0,Qe.jsxs)("td",{className:"px-4 py-3 text-center",children:[e.mainPrice.toLocaleString()," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-4 py-3 text-center font-semibold",children:[(e.quantity*e.mainPrice).toLocaleString()," \u062c.\u0645"]})]},t))})]})})]}),v.notes&&(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-sm",children:v.notes})]}),(0,Qe.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-lg font-bold text-gray-800",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0643\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:[v.total.toLocaleString()," \u062c.\u0645"]})]})})]})]})}),k&&I&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,Qe.jsx)("div",{className:"bg-red-600 text-white px-6 py-4 rounded-t-lg",children:(0,Qe.jsx)("h2",{className:"text-xl font-bold",children:"\u0631\u0641\u0636 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"})}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("p",{className:"text-gray-700 mb-4",children:["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0631\u0641\u0636 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0646 ",(0,Qe.jsx)("strong",{children:I.platformName}),"\u061f"]}),(0,Qe.jsxs)("div",{className:"mb-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("textarea",{value:w,onChange:e=>S(e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"\u0627\u0643\u062a\u0628 \u0633\u0628\u0628 \u0631\u0641\u0636 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629..."})]}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)("button",{onClick:()=>{if(!I)return;const e=m.filter(e=>e.id!==I.id),t=Be(Be({},I),{},{rejectedDate:(new Date).toISOString().split("T")[0],rejectedTime:(new Date).toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit"}),rejectionReason:w||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u0628\u0628"});h(e),b(e=>[t,...e]),O("external_pending_invoices",e),O("external_rejected_invoices",[t,...f]),o("\u062a\u0645 \u0631\u0641\u0636 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0646 ".concat(I.platformName)),d({type:"warning",title:"\u274c \u062a\u0645 \u0631\u0641\u0636 \u0641\u0627\u062a\u0648\u0631\u0629 \u062e\u0627\u0631\u062c\u064a\u0629",message:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0646 ".concat(I.platformName," - \u0627\u0644\u0633\u0628\u0628: ").concat(w||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0633\u0628\u0628"),icon:"warning"}),C(!1),D(null),S("")},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors",children:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0631\u0641\u0636"}),(0,Qe.jsx)("button",{onClick:()=>{C(!1),D(null),S("")},className:"flex-1 px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-lg font-semibold transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})]})}),P&&E&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("button",{onClick:()=>T(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Qe.jsx)(Ts,{className:"text-xl"})})]}),(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u062c\u0627\u0647\u0632\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-4",children:(0,Qe.jsx)("div",{className:"h-4 rounded-full ".concat("high"===E.readiness.level?"bg-green-600":"medium"===E.readiness.level?"bg-yellow-600":"bg-red-600"),style:{width:"".concat(100*E.readiness.score,"%")}})}),(0,Qe.jsxs)("span",{className:"font-bold",children:[Math.round(100*E.readiness.score),"%"]})]})]}),E.issues.length>0&&(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("ul",{className:"space-y-2",children:E.issues.map((e,t)=>(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)(Xt,{className:"text-yellow-600 mt-1 flex-shrink-0"}),(0,Qe.jsx)("span",{children:e})]},t))})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:E.customer.matched?(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-green-600",children:[(0,Qe.jsx)(_t,{}),(0,Qe.jsxs)("span",{children:["\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0639\u0645\u064a\u0644 \u0645\u0637\u0627\u0628\u0642: ",E.customer.matched.name]})]}):(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-orange-600",children:[(0,Qe.jsx)(Bs,{}),(0,Qe.jsxs)("span",{children:["\u0633\u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f: ",E.customer.data.name]})]})})]}),(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("h3",{className:"font-bold text-gray-800 mb-3",children:["\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a (",E.items.matched.length," \u0645\u0646 ",E.items.matched.length+E.items.unmatched.length,")"]}),(0,Qe.jsxs)("div",{className:"space-y-2",children:[E.items.matched.map((e,t)=>(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Qe.jsx)(_t,{className:"text-green-600"}),(0,Qe.jsxs)("span",{children:[e.productName," - ",e.matchedProduct.name]})]},t)),E.items.unmatched.map((e,t)=>(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Qe.jsx)(Ps,{className:"text-red-600"}),(0,Qe.jsxs)("span",{children:[e.productName," - \u063a\u064a\u0631 \u0645\u0637\u0627\u0628\u0642"]})]},t))]})]}),E.inventory.unavailable.length>0&&(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"\u062a\u062d\u0630\u064a\u0631\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("div",{className:"space-y-2",children:E.inventory.unavailable.map((e,t)=>(0,Qe.jsxs)("div",{className:"flex items-start gap-2 text-sm bg-red-50 p-3 rounded",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 mt-1 flex-shrink-0"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold",children:e.productName}),(0,Qe.jsxs)("div",{className:"text-gray-600",children:["\u0645\u0637\u0644\u0648\u0628: ",e.requestedQty," | \u0645\u062a\u0648\u0641\u0631: ",e.availableQty," | \u0646\u0642\u0635: ",e.shortage]})]})]},t))})]})]})]})})]})},Ka=()=>{const{addSupplier:e}=Ye(),{showSuccess:t,showError:s}=Ke(),a=ee(),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)({name:"",address:"",phone1:"",phone2:"",email:"",notes:""}),x=()=>{d({name:"",address:"",phone1:"",phone2:"",email:"",notes:""})},u=e=>{d(Be(Be({},c),{},{[e.target.name]:e.target.value}))};return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Fs,{}),children:(0,Qe.jsxs)("form",{onSubmit:t=>{t.preventDefault();try{const t=Be(Be({},c),{},{createdAt:(new Date).toISOString(),status:"active"}),s=e(t);o(s),l(!0),x()}catch(a){s("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0631\u062f")}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f / \u0627\u0644\u0634\u0631\u0643\u0629",name:"name",value:c.name,onChange:u,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:c.address,onChange:u,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646",required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 1",name:"phone1",value:c.phone1,onChange:u,placeholder:"+20 XXX XXX XXXX",required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 2 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"phone2",value:c.phone2,onChange:u,placeholder:"+20 XXX XXX XXXX"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"label",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("textarea",{name:"notes",value:c.notes,onChange:u,rows:"3",className:"input-field",placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0644\u0627\u062d\u0638\u0627\u062a..."})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"success",icon:(0,Qe.jsx)(Ss,{}),children:"\u062d\u0641\u0638 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",onClick:x,children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"})]})]})}),n&&i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-green-100 rounded-full p-4",children:(0,Qe.jsx)(_t,{className:"text-5xl text-green-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d! \u2713"}),(0,Qe.jsx)("div",{className:"bg-green-50 p-4 rounded-lg mb-4 border border-green-200",children:(0,Qe.jsxs)("p",{className:"text-gray-700 text-center mb-2",children:["\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0631\u062f ",(0,Qe.jsxs)("span",{className:"font-bold",children:['"',i.name,'"']})," \u0628\u0646\u062c\u0627\u062d"]})}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0648\u0631\u062f \u0627\u0644\u0645\u0636\u0627\u0641:"}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.name})]}),i.address&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.address})]}),i.phone1&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.phone1})]})]})]}),(0,Qe.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"\u0645\u0627\u0630\u0627 \u062a\u0631\u064a\u062f \u0623\u0646 \u062a\u0641\u0639\u0644 \u0627\u0644\u0622\u0646\u061f"}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{l(!1),o(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0631\u062f \u0622\u062e\u0631"]}),(0,Qe.jsxs)("button",{onClick:()=>{a("/suppliers/manage")},className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Qe.jsx)(xs,{}),"\u0639\u0631\u0636 \u0627\u0644\u0642\u0627\u0626\u0645\u0629"]})]})]})})]})},$a=()=>{const{suppliers:e,updateSupplier:t,deleteSupplier:s}=Ye(),{showSuccess:a,showError:n}=Ke(),{settings:l}=ea(),{hasPermission:i}=We(),o=i("edit_supplier"),c=i("delete_supplier"),d=i("manage_suppliers"),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[v,j]=(0,r.useState)({name:"",address:"",phone1:"",phone2:"",email:"",notes:""}),y=e=>{if(e.preventDefault(),o)try{t(p.id,v),a("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f \u0628\u0646\u062c\u0627\u062d"),u(!1),g(null)}catch(s){n("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0648\u0631\u062f")}else n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646")};if(!d)return(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center gap-4",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 text-2xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-red-800 font-bold text-lg",children:"\u0648\u0635\u0648\u0644 \u063a\u064a\u0631 \u0645\u0635\u0631\u062d"}),(0,Qe.jsx)("p",{className:"text-red-700",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"})]})]})});return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(xs,{}),children:(0,Qe.jsx)(ja,{columns:[{header:"\u0627\u0644\u0627\u0633\u0645",accessor:"name"},{header:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",accessor:"address"},{header:"\u0627\u0644\u0647\u0627\u062a\u0641 1",accessor:"phone1"},{header:"\u0627\u0644\u0647\u0627\u062a\u0641 2",accessor:"phone2"},{header:"\u0627\u0644\u0628\u0631\u064a\u062f",accessor:"email"}],data:e,onEdit:e=>{o?(g(e),j({name:e.name,address:e.address||"",phone1:e.phone1||"",phone2:e.phone2||"",email:e.email||"",notes:e.notes||""}),u(!0)):n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646")},onDelete:e=>{c?(b(e),h(!0)):n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646")}})}),(0,Qe.jsx)(ga,{isOpen:x,onClose:()=>u(!1),title:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f",footer:(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(ra,{variant:"secondary",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{variant:"success",onClick:y,children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"})]}),children:(0,Qe.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,Qe.jsx)(da,{label:"\u0627\u0644\u0627\u0633\u0645",name:"name",value:v.name,onChange:e=>j(Be(Be({},v),{},{name:e.target.value})),required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:v.address,onChange:e=>j(Be(Be({},v),{},{address:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0647\u0627\u062a\u0641 1",name:"phone1",value:v.phone1,onChange:e=>j(Be(Be({},v),{},{phone1:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0647\u0627\u062a\u0641 2",name:"phone2",value:v.phone2,onChange:e=>j(Be(Be({},v),{},{phone2:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0628\u0631\u064a\u062f",name:"email",type:"email",value:v.email,onChange:e=>j(Be(Be({},v),{},{email:e.target.value}))})]})}),m&&f&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-red-100 rounded-full p-4",children:(0,Qe.jsx)(Xt,{className:"text-4xl text-red-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0623\u0643\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4 border border-yellow-200",children:[(0,Qe.jsxs)("p",{className:"text-gray-700 text-center mb-2",children:["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f ",(0,Qe.jsxs)("span",{className:"font-bold",children:['"',f.name,'"']}),"\u061f"]}),(0,Qe.jsx)("p",{className:"text-sm text-red-600 text-center font-semibold",children:"\u26a0\ufe0f \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621"})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u0648\u0631\u062f:"}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.name})]}),f.address&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.address})]}),f.phone1&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.phone1})]}),f.email&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.email})]})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)("button",{onClick:()=>{if(!c)return n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"),void h(!1);try{s(f.id),a('\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f "'.concat(f.name,'" \u0628\u0646\u062c\u0627\u062d')),h(!1),b(null)}catch(e){n("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f"),h(!1)}},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0646\u0639\u0645\u060c \u0627\u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("button",{onClick:()=>{h(!1),b(null)},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},Ga=()=>{const{addCustomer:e}=Ye(),{showSuccess:t,showError:s}=Ke(),a=ee(),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)({name:"",address:"",area:"",phone1:"",phone2:"",agentType:""}),x=()=>{d({name:"",address:"",area:"",phone1:"",phone2:"",agentType:""})},u=e=>{d(Be(Be({},c),{},{[e.target.name]:e.target.value}))};return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Bs,{}),children:(0,Qe.jsxs)("form",{onSubmit:t=>{t.preventDefault();try{const t=Be(Be({},c),{},{createdAt:(new Date).toISOString(),status:"active"}),s=e(t);o(s),l(!0),x()}catch(a){s("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644")}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",name:"name",value:c.name,onChange:u,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:c.address,onChange:u,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0639\u0646\u0648\u0627\u0646",required:!0}),(0,Qe.jsx)(ca,{label:"\u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628",name:"agentType",value:c.agentType,onChange:u,options:[{value:"",label:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628"},{value:"general",label:"\u0639\u0627\u0645"},{value:"fatora",label:"\u0641\u0627\u062a\u0648\u0631\u0629"},{value:"kartona",label:"\u0643\u0631\u062a\u0648\u0646\u0629"}],required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0646\u0637\u0627\u0642",name:"area",value:c.area,onChange:u,placeholder:"\u0645\u062b\u0627\u0644: \u0645\u0635\u0631 ,\u0627\u0644\u0642\u0627\u0647\u0631\u0629..."}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 1",name:"phone1",value:c.phone1,onChange:u,placeholder:"+20 XXX XXX XXXX",required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 2 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"phone2",value:c.phone2,onChange:u,placeholder:"+20 XXX XXX XXXX"})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"success",icon:(0,Qe.jsx)(Ss,{}),children:"\u062d\u0641\u0638 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",onClick:x,children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646"})]})]})}),n&&i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-green-100 rounded-full p-4",children:(0,Qe.jsx)(_t,{className:"text-5xl text-green-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d! \u2713"}),(0,Qe.jsx)("div",{className:"bg-green-50 p-4 rounded-lg mb-4 border border-green-200",children:(0,Qe.jsxs)("p",{className:"text-gray-700 text-center mb-2",children:["\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0645\u064a\u0644 ",(0,Qe.jsxs)("span",{className:"font-bold",children:['"',i.name,'"']})," \u0628\u0646\u062c\u0627\u062d"]})}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0645\u064a\u0644 \u0627\u0644\u0645\u0636\u0627\u0641:"}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.name})]}),i.address&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.address})]}),i.area&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0646\u0637\u0627\u0642: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.area})]}),i.phone1&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:i.phone1})]})]})]}),(0,Qe.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"\u0645\u0627\u0630\u0627 \u062a\u0631\u064a\u062f \u0623\u0646 \u062a\u0641\u0639\u0644 \u0627\u0644\u0622\u0646\u061f"}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{l(!1),o(null)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0639\u0645\u064a\u0644 \u0622\u062e\u0631"]}),(0,Qe.jsxs)("button",{onClick:()=>{a("/customers/manage")},className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Qe.jsx)(xs,{}),"\u0639\u0631\u0636 \u0627\u0644\u0642\u0627\u0626\u0645\u0629"]})]})]})})]})},Ya=()=>{const{customers:e,updateCustomer:t,deleteCustomer:s}=Ye(),{showSuccess:a,showError:n}=Ke(),{settings:l}=ea(),{hasPermission:i}=We(),o=i("edit_customer"),c=i("delete_customer"),d=i("manage_customers"),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(null),[v,j]=(0,r.useState)({name:"",address:"",area:"",phone1:"",phone2:"",agentType:""}),y=e=>{if(e.preventDefault(),o)try{t(p.id,v),a("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"),u(!1),g(null)}catch(s){n("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0639\u0645\u064a\u0644")}else n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621")};if(!d)return(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 flex items-center gap-4",children:[(0,Qe.jsx)(Xt,{className:"text-red-600 text-2xl"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-red-800 font-bold text-lg",children:"\u0648\u0635\u0648\u0644 \u063a\u064a\u0631 \u0645\u0635\u0631\u062d"}),(0,Qe.jsx)("p",{className:"text-red-700",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Qe.jsx)("p",{className:"text-red-600 text-sm mt-1",children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"})]})]})});return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Ws,{}),children:(0,Qe.jsx)(ja,{columns:[{header:"\u0627\u0644\u0627\u0633\u0645",accessor:"name"},{header:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",accessor:"address"},{header:"\u0627\u0644\u0646\u0637\u0627\u0642",accessor:"area"},{header:"\u0627\u0644\u0647\u0627\u062a\u0641 1",accessor:"phone1"},{header:"\u0627\u0644\u0647\u0627\u062a\u0641 2",accessor:"phone2"},{header:"\u0627\u0644\u0645\u0646\u062f\u0648\u0628",accessor:"agentType"}],data:e,onEdit:e=>{o?(g(e),j({name:e.name,address:e.address||"",area:e.area||"",phone1:e.phone1||"",phone2:e.phone2||"",agentType:e.agentType||""}),u(!0)):n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621")},onDelete:e=>{c?(b(e),h(!0)):n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0644\u0627\u0621")}})}),(0,Qe.jsx)(ga,{isOpen:x,onClose:()=>u(!1),title:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644",footer:(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(ra,{variant:"secondary",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{variant:"success",onClick:y,children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"})]}),children:(0,Qe.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,Qe.jsx)(da,{label:"\u0627\u0644\u0627\u0633\u0645",name:"name",value:v.name,onChange:e=>j(Be(Be({},v),{},{name:e.target.value})),required:!0}),(0,Qe.jsx)(ca,{label:"\u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628",name:"agentType",value:v.agentType,onChange:e=>j(Be(Be({},v),{},{agentType:e.target.value})),options:[{value:"",label:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628"},{value:"general",label:"\u0639\u0627\u0645"},{value:"fatora",label:"\u0641\u0627\u062a\u0648\u0631\u0629"},{value:"kartona",label:"\u0643\u0631\u062a\u0648\u0646\u0629"}]}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",name:"address",value:v.address,onChange:e=>j(Be(Be({},v),{},{address:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0646\u0637\u0627\u0642",name:"area",value:v.area,onChange:e=>j(Be(Be({},v),{},{area:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0647\u0627\u062a\u0641 1",name:"phone1",value:v.phone1,onChange:e=>j(Be(Be({},v),{},{phone1:e.target.value}))}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0647\u0627\u062a\u0641 2",name:"phone2",value:v.phone2,onChange:e=>j(Be(Be({},v),{},{phone2:e.target.value}))})]})}),m&&f&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-lg w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-red-100 rounded-full p-4",children:(0,Qe.jsx)(Xt,{className:"text-4xl text-red-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0623\u0643\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4 border border-yellow-200",children:[(0,Qe.jsxs)("p",{className:"text-gray-700 text-center mb-2",children:["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644 ",(0,Qe.jsxs)("span",{className:"font-bold",children:['"',f.name,'"']}),"\u061f"]}),(0,Qe.jsx)("p",{className:"text-sm text-red-600 text-center font-semibold",children:"\u26a0\ufe0f \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621"})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[(0,Qe.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0645\u064a\u0644:"}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.name})]}),f.agentType&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0648\u0643\u064a\u0644 / \u0627\u0644\u0645\u0646\u062f\u0648\u0628: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.agentType})]}),f.address&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.address})]}),f.area&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0646\u0637\u0627\u0642: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.area})]}),f.phone1&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641: "}),(0,Qe.jsx)("span",{className:"font-semibold",children:f.phone1})]})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)("button",{onClick:()=>{if(!c)return n("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"),void h(!1);try{s(f.id),a('\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644 "'.concat(f.name,'" \u0628\u0646\u062c\u0627\u062d')),h(!1),b(null)}catch(e){n("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644"),h(!1)}},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0646\u0639\u0645\u060c \u0627\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("button",{onClick:()=>{h(!1),b(null)},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},Ja=e=>{let{title:t,subtitle:s,icon:a,actions:r,action:n}=e;return(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[a&&(0,Qe.jsx)("div",{className:"text-3xl text-blue-600",children:a}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:t}),s&&(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:s})]})]}),(r||n)&&(0,Qe.jsx)("div",{className:"flex gap-2",children:r&&Array.isArray(r)?r.map((e,t)=>(0,Qe.jsx)("button",{onClick:e.onClick,className:"px-4 py-2 rounded-lg font-medium transition-colors ".concat("primary"===e.variant?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e.label},t)):n})]}),(0,Qe.jsx)("hr",{className:"mt-4 border-gray-200"})]})},Za=()=>{const e=ee(),{addCashReceipt:t,customers:s,suppliers:a}=Ye(),{showError:n,showSuccess:l}=Ke(),[i,o]=(0,r.useState)({receiptNumber:"REC-".concat(Date.now()),amount:"",date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),fromType:"customer",fromId:"",fromName:"",category:"invoice_payment",paymentMethod:"cash",referenceNumber:"",notes:"",description:""}),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)({}),m=e=>{const{name:t,value:r}=e.target;if(o(e=>Be(Be({},e),{},{[t]:r})),x[t]&&u(e=>Be(Be({},e),{},{[t]:""})),"fromType"===t&&o(e=>Be(Be({},e),{},{fromId:"",fromName:""})),"fromId"===t){const e=("customer"===i.fromType?s:a).find(e=>e.id===parseInt(r));e?(d(e),o(t=>Be(Be({},t),{},{fromName:e.name}))):d(null)}};return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0625\u0630\u0646 \u0627\u0633\u062a\u0644\u0627\u0645 \u0646\u0642\u062f\u064a \u062c\u062f\u064a\u062f",icon:(0,Qe.jsx)(hs,{})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),(()=>{const e={};return(!i.amount||parseFloat(i.amount)<=0)&&(e.amount="\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d"),"other"===i.fromType||i.fromId||(e.fromId="\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0635\u062f\u0631"),"other"!==i.fromType||i.fromName||(e.fromName="\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0635\u062f\u0631"),i.category||(e.category="\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0641\u0626\u0629"),u(e),0===Object.keys(e).length})())try{const s=Be(Be({},i),{},{date:"".concat(i.date,"T").concat(i.time,":00")});t(s),l("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645 \u0628\u0646\u062c\u0627\u062d"),e("/treasury/receipts")}catch(a){n("\u062e\u0637\u0623: "+a.message)}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"text",name:"receiptNumber",value:i.receiptNumber,onChange:m,className:"w-full px-4 py-2 border rounded-lg bg-gray-50",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u0645\u0628\u0644\u063a ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"number",name:"amount",value:i.amount,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(x.amount?"border-red-500":""),placeholder:"0.00",step:"0.01",min:"0"}),x.amount&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.amount})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"date",name:"date",value:i.date,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u0648\u0642\u062a ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"time",name:"time",value:i.time,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0635\u062f\u0631"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0646\u0648\u0639 \u0627\u0644\u0645\u0635\u062f\u0631 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{name:"fromType",value:i.fromType,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"customer",children:"\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("option",{value:"supplier",children:"\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),"other"!==i.fromType?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["customer"===i.fromType?"\u0627\u0644\u0639\u0645\u064a\u0644":"\u0627\u0644\u0645\u0648\u0631\u062f"," ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{name:"fromId",value:i.fromId,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(x.fromId?"border-red-500":""),children:[(0,Qe.jsxs)("option",{value:"",children:["\u0627\u062e\u062a\u0631 ","customer"===i.fromType?"\u0627\u0644\u0639\u0645\u064a\u0644":"\u0627\u0644\u0645\u0648\u0631\u062f"]}),("customer"===i.fromType?s:"supplier"===i.fromType?a:[]).map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.name," - ",e.phone||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0647\u0627\u062a\u0641"]},e.id))]}),x.fromId&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.fromId})]}),c&&(0,Qe.jsx)("div",{className:"md:col-span-2",children:(0,Qe.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-blue-900 mb-2",children:["\u0645\u0639\u0644\u0648\u0645\u0627\u062a ","customer"===i.fromType?"\u0627\u0644\u0639\u0645\u064a\u0644":"\u0627\u0644\u0645\u0648\u0631\u062f",":"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("p",{className:"font-medium",children:c.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("p",{className:"font-medium",children:c.phone||"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"}),(0,Qe.jsx)("p",{className:"font-medium",children:c.email||"-"})]}),c.address&&(0,Qe.jsxs)("div",{className:"md:col-span-3",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"}),(0,Qe.jsx)("p",{className:"font-medium",children:c.address})]})]})]})})]}):(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0633\u0645 \u0627\u0644\u0645\u0635\u062f\u0631 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"text",name:"fromName",value:i.fromName,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(x.fromName?"border-red-500":""),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0635\u062f\u0631"}),x.fromName&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.fromName})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u0641\u0626\u0629 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("select",{name:"category",value:i.category,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(x.category?"border-red-500":""),children:[{value:"invoice_payment",label:"\u0633\u062f\u0627\u062f \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a"},{value:"return_refund",label:"\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0634\u062a\u0631\u064a\u0627\u062a"},{value:"capital",label:"\u0625\u064a\u062f\u0627\u0639 \u0631\u0623\u0633 \u0645\u0627\u0644"},{value:"bank",label:"\u0627\u0633\u062a\u0644\u0627\u0645 \u0645\u0646 \u0628\u0646\u0643"},{value:"revenue",label:"\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0645\u062a\u0646\u0648\u0639\u0629"},{value:"other",label:"\u0623\u062e\u0631\u0649"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))}),x.category&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:x.category})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("select",{name:"paymentMethod",value:i.paymentMethod,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[{value:"cash",label:"\u0646\u0642\u062f\u0627\u064b"},{value:"check",label:"\u0634\u064a\u0643"},{value:"bank_transfer",label:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639"}),(0,Qe.jsx)("input",{type:"text",name:"referenceNumber",value:i.referenceNumber,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0644\u0645\u0631\u062c\u0639"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("input",{type:"text",name:"description",value:i.description,onChange:m,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0648\u0635\u0641 \u0645\u062e\u062a\u0635\u0631"})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{name:"notes",value:i.notes,onChange:m,rows:"3",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-4 pt-4 border-t",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"primary",icon:(0,Qe.jsx)(Ss,{}),children:"\u062d\u0641\u0638 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",icon:(0,Qe.jsx)(Ts,{}),onClick:()=>{e("/treasury/receipts")},children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},er=()=>{const e=ee(),{cashReceipts:t,deleteCashReceipt:s,customers:a,suppliers:n}=Ye(),{settings:l}=ea(),{hasPermission:i}=We(),{showWarning:o,showError:c}=Ke(),d=e=>{const t=(null===l||void 0===l?void 0:l.currency)||"EGP",s="ar"===(null===l||void 0===l?void 0:l.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t}).format(e)},[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(null),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)("all"),v={invoice_payment:"\u0633\u062f\u0627\u062f \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a",return_refund:"\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0634\u062a\u0631\u064a\u0627\u062a",capital:"\u0625\u064a\u062f\u0627\u0639 \u0631\u0623\u0633 \u0645\u0627\u0644",bank:"\u0627\u0633\u062a\u0644\u0627\u0645 \u0645\u0646 \u0628\u0646\u0643",revenue:"\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0645\u062a\u0646\u0648\u0639\u0629",other:"\u0623\u062e\u0631\u0649"},j={cash:"\u0646\u0642\u062f\u0627\u064b",check:"\u0634\u064a\u0643",bank_transfer:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"},y=e=>"customer"===e.fromType?a.find(t=>t.id===e.fromId):"supplier"===e.fromType?n.find(t=>t.id===e.fromId):null,N=e=>{const t=y(e);return(null===t||void 0===t?void 0:t.name)||e.fromName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},w=t.filter(e=>{var t,s;const a=N(e),r=(null===(t=e.receiptNumber)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||a.toLowerCase().includes(x.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase())),n="all"===f||e.category===f;return r&&n}),S=w.map(e=>({id:e.id,receiptNumber:e.receiptNumber,date:new Date(e.date).toLocaleDateString("ar-EG"),sourceName:N(e),amount:i("view_financial_data")?d(parseFloat(e.amount)):(0,Qe.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-xs"}),"\u0645\u062e\u0641\u064a"]}),category:v[e.category]||e.category,paymentMethod:j[e.paymentMethod]||e.paymentMethod})),k=w.reduce((e,t)=>e+parseFloat(t.amount||0),0);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0625\u062f\u0627\u0631\u0629 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645",icon:(0,Qe.jsx)(hs,{}),action:i("manage_cash_receipts")&&(0,Qe.jsx)(ra,{onClick:()=>{i("manage_cash_receipts")?e("/treasury/receipt/new"):o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0625\u062f\u0627\u0631\u0629 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645")},icon:(0,Qe.jsx)(js,{}),children:"\u0625\u0636\u0627\u0641\u0629 \u0625\u064a\u0635\u0627\u0644 \u062c\u062f\u064a\u062f"})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-green-600",children:i("view_cash_receipts")?w.length:(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0635\u0627\u0644\u0627\u062a"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:i("view_financial_data")?d(k):(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0644\u063a"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:i("view_financial_data")?d(w.length>0?k/w.length:0):(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"})]})})]}),(0,Qe.jsxs)(aa,{children:[(0,Qe.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0623\u0648 \u0627\u0644\u0645\u0635\u062f\u0631...",value:x,onChange:e=>u(e.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),Object.entries(v).map(e=>{let[t,s]=e;return(0,Qe.jsx)("option",{value:t,children:s},t)})]})]}),(0,Qe.jsx)(ja,{columns:[{key:"receiptNumber",label:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"},{key:"date",label:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"},{key:"sourceName",label:"\u0645\u0646"},{key:"amount",label:"\u0627\u0644\u0645\u0628\u0644\u063a"},{key:"category",label:"\u0627\u0644\u0641\u0626\u0629"},{key:"paymentMethod",label:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}],data:S,onView:e=>{if(!i("view_cash_receipts"))return void o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0639\u0631\u0636 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645");const s=t.find(t=>t.id===e.id);h(s),g(!0)},onDelete:e=>{if(i("delete_cash_receipt")){if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0625\u064a\u0635\u0627\u0644\u061f"))try{s(e.id)}catch(t){c("\u062e\u0637\u0623: "+t.message)}}else o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062d\u0630\u0641 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645")}})]}),(0,Qe.jsx)(ga,{isOpen:p,onClose:()=>g(!1),title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0627\u0633\u062a\u0644\u0627\u0645",children:m&&(()=>{const e=y(m);return(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644:"}),(0,Qe.jsx)("p",{className:"mt-1",children:m.receiptNumber})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,Qe.jsx)("p",{className:"mt-1",children:new Date(m.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0645\u0628\u0644\u063a:"}),(0,Qe.jsx)("p",{className:"mt-1 text-2xl font-bold text-green-600",children:i("view_financial_data")?d(parseFloat(m.amount)):(0,Qe.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"\u0645\u062e\u0641\u064a"]})})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0641\u0626\u0629:"}),(0,Qe.jsx)("p",{className:"mt-1",children:v[m.category]})]}),(0,Qe.jsxs)("div",{className:"col-span-2",children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639:"}),(0,Qe.jsx)("p",{className:"mt-1",children:j[m.paymentMethod]})]})]}),(0,Qe.jsxs)("div",{className:"border-t pt-4",children:[(0,Qe.jsx)("h4",{className:"font-semibold mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0635\u062f\u0631:"}),e?(0,Qe.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0646\u0648\u0639:"}),(0,Qe.jsx)("p",{className:"font-medium",children:"customer"===m.fromType?"\u0639\u0645\u064a\u0644":"\u0645\u0648\u0631\u062f"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.phone||"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.email||"-"})]}),e.address&&(0,Qe.jsxs)("div",{className:"col-span-2",children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.address})]})]})}):(0,Qe.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Qe.jsxs)("p",{children:["\u0627\u0644\u0645\u0635\u062f\u0631: ",m.fromName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})})]}),m.referenceNumber&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639:"}),(0,Qe.jsx)("p",{className:"mt-1",children:m.referenceNumber})]}),m.description&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0648\u0635\u0641:"}),(0,Qe.jsx)("p",{className:"mt-1",children:m.description})]}),m.notes&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,Qe.jsx)("p",{className:"mt-1 text-gray-600",children:m.notes})]}),(0,Qe.jsx)("div",{className:"pt-4 border-t",children:(0,Qe.jsx)(ra,{variant:"secondary",onClick:()=>g(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})()})]})},tr=()=>{const e=ee(),{addCashDisbursement:t,suppliers:s,customers:a,treasuryBalance:n}=Ye(),{showError:l,showSuccess:i}=Ke(),[o,c]=(0,r.useState)({disbursementNumber:"DIS-".concat(Date.now()),amount:"",toType:"supplier",toId:"",toName:"",category:"invoice_payment",paymentMethod:"cash",referenceNumber:"",notes:"",description:""}),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)({}),h=e=>{const{name:t,value:r}=e.target;if(c(e=>Be(Be({},e),{},{[t]:r})),u[t]&&m(e=>Be(Be({},e),{},{[t]:""})),"toType"===t&&c(e=>Be(Be({},e),{},{toId:"",toName:""})),"toId"===t){const e=("supplier"===o.toType?s:"customer"===o.toType?a:[]).find(e=>e.id===parseInt(r));e?(x(e),c(t=>Be(Be({},t),{},{toName:e.name}))):x(null)}};return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0625\u0630\u0646 \u0635\u0631\u0641 \u0646\u0642\u062f\u064a \u062c\u062f\u064a\u062f",icon:(0,Qe.jsx)(hs,{})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-medium",children:"\u0631\u0635\u064a\u062f \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0627\u0644\u062d\u0627\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[n.toFixed(2)," \u062c\u0646\u064a\u0647"]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("form",{onSubmit:s=>{if(s.preventDefault(),(()=>{const e={};return(!o.amount||parseFloat(o.amount)<=0)&&(e.amount="\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d"),parseFloat(o.amount)>n&&(e.amount="\u0627\u0644\u0645\u0628\u0644\u063a \u0623\u0643\u0628\u0631 \u0645\u0646 \u0631\u0635\u064a\u062f \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631 ("+n.toFixed(2)+" \u062c\u0646\u064a\u0647)"),["supplier","customer","employee"].includes(o.toType)&&!o.toId&&(e.toId="\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f"),"other"!==o.toType||o.toName||(e.toName="\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f"),o.category||(e.category="\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0641\u0626\u0629"),m(e),0===Object.keys(e).length})())try{t(o),i("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0635\u0631\u0641 \u0628\u0646\u062c\u0627\u062d"),e("/treasury/disbursements")}catch(a){l("\u062e\u0637\u0623: "+a.message)}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"text",name:"disbursementNumber",value:o.disbursementNumber,onChange:h,className:"w-full px-4 py-2 border rounded-lg bg-gray-50",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u0645\u0628\u0644\u063a ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"number",name:"amount",value:o.amount,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(u.amount?"border-red-500":""),placeholder:"0.00",step:"0.01",min:"0"}),u.amount&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.amount})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{name:"toType",value:o.toType,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"supplier",children:"\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("option",{value:"customer",children:"\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("option",{value:"employee",children:"\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),["supplier","customer","employee"].includes(o.toType)?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["supplier"===o.toType?"\u0627\u0644\u0645\u0648\u0631\u062f":"customer"===o.toType?"\u0627\u0644\u0639\u0645\u064a\u0644":"\u0627\u0644\u0645\u0648\u0638\u0641"," ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsxs)("select",{name:"toId",value:o.toId,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(u.toId?"border-red-500":""),children:[(0,Qe.jsxs)("option",{value:"",children:["\u0627\u062e\u062a\u0631","supplier"===o.toType?" \u0627\u0644\u0645\u0648\u0631\u062f":"customer"===o.toType?" \u0627\u0644\u0639\u0645\u064a\u0644":" \u0627\u0644\u0645\u0648\u0638\u0641"]}),("supplier"===o.toType?s:"customer"===o.toType?a:[]).map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.name," - ",e.phone||"\u0644\u0627 \u064a\u0648\u062c\u062f \u0647\u0627\u062a\u0641"]},e.id))]}),u.toId&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.toId})]}),d&&(0,Qe.jsx)("div",{className:"md:col-span-2",children:(0,Qe.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-green-900 mb-2",children:["\u0645\u0639\u0644\u0648\u0645\u0627\u062a ","supplier"===o.toType?"\u0627\u0644\u0645\u0648\u0631\u062f":"customer"===o.toType?"\u0627\u0644\u0639\u0645\u064a\u0644":"\u0627\u0644\u0645\u0648\u0638\u0641",":"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("p",{className:"font-medium",children:d.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("p",{className:"font-medium",children:d.phone||"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"}),(0,Qe.jsx)("p",{className:"font-medium",children:d.email||"-"})]}),d.address&&(0,Qe.jsxs)("div",{className:"md:col-span-3",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"}),(0,Qe.jsx)("p",{className:"font-medium",children:d.address})]})]})]})})]}):(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("input",{type:"text",name:"toName",value:o.toName,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(u.toName?"border-red-500":""),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f"}),u.toName&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.toName})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["\u0627\u0644\u0641\u0626\u0629 ",(0,Qe.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qe.jsx)("select",{name:"category",value:o.category,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 ".concat(u.category?"border-red-500":""),children:[{value:"invoice_payment",label:"\u0633\u062f\u0627\u062f \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a"},{value:"return_refund",label:"\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0628\u064a\u0639\u0627\u062a"},{value:"salary",label:"\u0631\u0648\u0627\u062a\u0628"},{value:"expenses",label:"\u0645\u0635\u0627\u0631\u064a\u0641 \u0639\u0627\u0645\u0629"},{value:"bank",label:"\u0625\u064a\u062f\u0627\u0639 \u0641\u064a \u0628\u0646\u0643"},{value:"other",label:"\u0623\u062e\u0631\u0649"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))}),u.category&&(0,Qe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.category})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("select",{name:"paymentMethod",value:o.paymentMethod,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[{value:"cash",label:"\u0646\u0642\u062f\u0627\u064b"},{value:"check",label:"\u0634\u064a\u0643"},{value:"bank_transfer",label:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639"}),(0,Qe.jsx)("input",{type:"text",name:"referenceNumber",value:o.referenceNumber,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0644\u0645\u0631\u062c\u0639"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("input",{type:"text",name:"description",value:o.description,onChange:h,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0648\u0635\u0641 \u0645\u062e\u062a\u0635\u0631"})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{name:"notes",value:o.notes,onChange:h,rows:"3",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-4 pt-4 border-t",children:[(0,Qe.jsx)(ra,{type:"submit",variant:"primary",icon:(0,Qe.jsx)(Ss,{}),children:"\u062d\u0641\u0638 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsx)(ra,{type:"button",variant:"secondary",icon:(0,Qe.jsx)(Ts,{}),onClick:()=>{e("/treasury/disbursements")},children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},sr=()=>{const e=ee(),{cashDisbursements:t,deleteCashDisbursement:s,suppliers:a,customers:n}=Ye(),{settings:l}=ea(),{hasPermission:i}=We(),{showWarning:o,showError:c,showSuccess:d}=Ke(),x=e=>{const t=(null===l||void 0===l?void 0:l.currency)||"EGP",s="ar"===(null===l||void 0===l?void 0:l.language)?"ar-EG":"en-US";return new Intl.NumberFormat(s,{style:"currency",currency:t}).format(e)},[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)("all"),j={invoice_payment:"\u0633\u062f\u0627\u062f \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a",return_refund:"\u0627\u0633\u062a\u0631\u062f\u0627\u062f \u0645\u0631\u062a\u062c\u0639\u0627\u062a \u0645\u0628\u064a\u0639\u0627\u062a",salary:"\u0631\u0648\u0627\u062a\u0628",expenses:"\u0645\u0635\u0627\u0631\u064a\u0641 \u0639\u0627\u0645\u0629",bank:"\u0625\u064a\u062f\u0627\u0639 \u0641\u064a \u0628\u0646\u0643",other:"\u0623\u062e\u0631\u0649"},y={cash:"\u0646\u0642\u062f\u0627\u064b",check:"\u0634\u064a\u0643",bank_transfer:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"},N=e=>"supplier"===e.toType?a.find(t=>t.id===e.toId):"customer"===e.toType?n.find(t=>t.id===e.toId):null,w=e=>{const t=N(e);return(null===t||void 0===t?void 0:t.name)||e.toName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},S=t.filter(e=>{var t,s;const a=w(e),r=(null===(t=e.disbursementNumber)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||a.toLowerCase().includes(u.toLowerCase())||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(u.toLowerCase())),n="all"===b||e.category===b;return r&&n}),k=S.map(e=>({id:e.id,disbursementNumber:e.disbursementNumber,date:new Date(e.date).toLocaleDateString("ar-EG"),recipientName:w(e),amount:i("view_financial_data")?x(parseFloat(e.amount)):(0,Qe.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-xs"}),"\u0645\u062e\u0641\u064a"]}),category:j[e.category]||e.category,paymentMethod:y[e.paymentMethod]||e.paymentMethod})),C=S.reduce((e,t)=>e+parseFloat(t.amount||0),0);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0625\u062f\u0627\u0631\u0629 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641",icon:(0,Qe.jsx)(hs,{}),action:i("manage_cash_disbursements")&&(0,Qe.jsx)(ra,{onClick:()=>{i("manage_cash_disbursements")?e("/treasury/disbursement/new"):o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0625\u062f\u0627\u0631\u0629 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641")},icon:(0,Qe.jsx)(js,{}),children:"\u0625\u0636\u0627\u0641\u0629 \u0625\u064a\u0635\u0627\u0644 \u062c\u062f\u064a\u062f"})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-red-600",children:i("view_cash_disbursements")?S.length:(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0635\u0627\u0644\u0627\u062a"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:i("view_financial_data")?x(C):(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u0644\u063a"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:i("view_financial_data")?x(S.length>0?C/S.length:0):(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"--"]})}),(0,Qe.jsx)("div",{className:"text-gray-600 mt-2",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"})]})})]}),(0,Qe.jsxs)(aa,{children:[(0,Qe.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0623\u0648 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f...",value:u,onChange:e=>m(e.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),Object.entries(j).map(e=>{let[t,s]=e;return(0,Qe.jsx)("option",{value:t,children:s},t)})]})]}),(0,Qe.jsx)(ja,{columns:[{key:"disbursementNumber",label:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"},{key:"date",label:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"},{key:"recipientName",label:"\u0625\u0644\u0649"},{key:"amount",label:"\u0627\u0644\u0645\u0628\u0644\u063a"},{key:"category",label:"\u0627\u0644\u0641\u0626\u0629"},{key:"paymentMethod",label:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}],data:k,onView:e=>{if(!i("view_cash_disbursements"))return void o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0639\u0631\u0636 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641");const s=t.find(t=>t.id===e.id);p(s),f(!0)},onDelete:e=>{if(i("delete_cash_disbursement")){if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0625\u064a\u0635\u0627\u0644\u061f"))try{s(e.id)}catch(t){c("\u062e\u0637\u0623: "+t.message)}}else o("\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u062d\u0630\u0641 \u0625\u064a\u0635\u0627\u0644\u0627\u062a \u0627\u0644\u0635\u0631\u0641")}})]}),(0,Qe.jsx)(ga,{isOpen:g,onClose:()=>f(!1),title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0635\u0631\u0641",children:h&&(()=>{const e=N(h);return(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644:"}),(0,Qe.jsx)("p",{className:"mt-1",children:h.disbursementNumber})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,Qe.jsx)("p",{className:"mt-1",children:new Date(h.date).toLocaleDateString("ar-EG")})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0645\u0628\u0644\u063a:"}),(0,Qe.jsx)("p",{className:"mt-1 text-2xl font-bold text-red-600",children:i("view_financial_data")?x(parseFloat(h.amount)):(0,Qe.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,Qe.jsx)(us,{className:"text-sm"}),"\u0645\u062e\u0641\u064a"]})})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0641\u0626\u0629:"}),(0,Qe.jsx)("p",{className:"mt-1",children:j[h.category]})]}),(0,Qe.jsxs)("div",{className:"col-span-2",children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639:"}),(0,Qe.jsx)("p",{className:"mt-1",children:y[h.paymentMethod]})]})]}),(0,Qe.jsxs)("div",{className:"border-t pt-4",children:[(0,Qe.jsx)("h4",{className:"font-semibold mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f:"}),e?(0,Qe.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0646\u0648\u0639:"}),(0,Qe.jsx)("p",{className:"font-medium",children:"supplier"===h.toType?"\u0645\u0648\u0631\u062f":"customer"===h.toType?"\u0639\u0645\u064a\u0644":"\u0645\u0648\u0638\u0641"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.phone||"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.email||"-"})]}),e.address&&(0,Qe.jsxs)("div",{className:"col-span-2",children:[(0,Qe.jsx)("span",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646:"}),(0,Qe.jsx)("p",{className:"font-medium",children:e.address})]})]})}):(0,Qe.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,Qe.jsxs)("p",{children:["\u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f: ",h.toName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})})]}),h.referenceNumber&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639:"}),(0,Qe.jsx)("p",{className:"mt-1",children:h.referenceNumber})]}),h.description&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0627\u0644\u0648\u0635\u0641:"}),(0,Qe.jsx)("p",{className:"mt-1",children:h.description})]}),h.notes&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,Qe.jsx)("p",{className:"mt-1 text-gray-600",children:h.notes})]}),(0,Qe.jsx)("div",{className:"pt-4 border-t",children:(0,Qe.jsx)(ra,{variant:"secondary",onClick:()=>f(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})()})]})},ar=()=>{const{cashReceipts:e,cashDisbursements:t,treasuryBalance:s,customers:a,suppliers:n}=Ye(),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)("all"),u=(0,r.useMemo)(()=>[...e.map(e=>Be(Be({},e),{},{transactionType:"receipt",displayAmount:parseFloat(e.amount)})),...t.map(e=>Be(Be({},e),{},{transactionType:"disbursement",displayAmount:-parseFloat(e.amount)}))].sort((e,t)=>new Date(t.date)-new Date(e.date)),[e,t]),m=(0,r.useMemo)(()=>u.filter(e=>!(l&&new Date(e.date)<new Date(l))&&(!(o&&new Date(e.date)>new Date(o))&&(("receipts"!==d||"receipt"===e.transactionType)&&("disbursements"!==d||"disbursement"===e.transactionType)))),[u,l,o,d]),h=(0,r.useMemo)(()=>{const e=m.filter(e=>"receipt"===e.transactionType).reduce((e,t)=>e+Math.abs(t.displayAmount),0),t=m.filter(e=>"disbursement"===e.transactionType).reduce((e,t)=>e+Math.abs(t.displayAmount),0);return{totalReceipts:e,totalDisbursements:t,netMovement:e-t}},[m]),p=e=>{if("receipt"===e.transactionType){if("customer"===e.fromType){const t=a.find(t=>t.id===e.fromId);return(null===t||void 0===t?void 0:t.name)||e.fromName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}if("supplier"===e.fromType){const t=n.find(t=>t.id===e.fromId);return(null===t||void 0===t?void 0:t.name)||e.fromName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}return e.fromName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}if("supplier"===e.toType){const t=n.find(t=>t.id===e.toId);return(null===t||void 0===t?void 0:t.name)||e.toName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}if("customer"===e.toType){const t=a.find(t=>t.id===e.toId);return(null===t||void 0===t?void 0:t.name)||e.toName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}return e.toName||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"};let g=s;const f=m.map(e=>{const t=g-e.displayAmount,s=Be(Be({},e),{},{balanceAfter:g});return g=t,s}).reverse();return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)(It,{})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,Qe.jsx)(Us,{className:"text-2xl text-blue-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s.toFixed(2)}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a (\u062c\u0646\u064a\u0647)"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,Qe.jsx)(mt,{className:"text-2xl text-green-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:h.totalReceipts.toFixed(2)}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a (\u062c\u0646\u064a\u0647)"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-red-100 p-3 rounded-lg",children:(0,Qe.jsx)(dt,{className:"text-2xl text-red-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:h.totalDisbursements.toFixed(2)}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a (\u062c\u0646\u064a\u0647)"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-lg ".concat(h.netMovement>=0?"bg-green-100":"bg-red-100"),children:(0,Qe.jsx)(It,{className:"text-2xl ".concat(h.netMovement>=0?"text-green-600":"text-red-600")})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold ".concat(h.netMovement>=0?"text-green-600":"text-red-600"),children:h.netMovement.toFixed(2)}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u062d\u0631\u0643\u0629 (\u062c\u0646\u064a\u0647)"})]})]})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[(0,Qe.jsx)(St,{className:"inline ml-2"}),"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"]}),(0,Qe.jsx)("input",{type:"date",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsxs)("label",{className:"block text-sm font-medium mb-2",children:[(0,Qe.jsx)(St,{className:"inline ml-2"}),"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"]}),(0,Qe.jsx)("input",{type:"date",value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629"}),(0,Qe.jsxs)("select",{value:d,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"receipts",children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0641\u0642\u0637"}),(0,Qe.jsx)("option",{value:"disbursements",children:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u0641\u0642\u0637"})]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0644\u0637\u0631\u0641"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u0648\u0627\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u0635\u0627\u062f\u0631"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===f.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062d\u0631\u0643\u0627\u062a \u0641\u064a \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"})}):f.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:"receipt"===e.transactionType?e.receiptNumber:e.disbursementNumber}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:p(e)}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:e.description||"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:"receipt"===e.transactionType?(0,Qe.jsx)("span",{className:"text-green-600 font-semibold",children:Math.abs(e.displayAmount).toFixed(2)}):"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:"disbursement"===e.transactionType?(0,Qe.jsx)("span",{className:"text-red-600 font-semibold",children:Math.abs(e.displayAmount).toFixed(2)}):"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qe.jsx)("span",{className:"font-semibold text-blue-600",children:e.balanceAfter.toFixed(2)})})]},"".concat(e.transactionType,"-").concat(e.id)))}),f.length>0&&(0,Qe.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("td",{colSpan:"4",className:"px-4 py-3 text-right",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center text-green-600",children:h.totalReceipts.toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center text-red-600",children:h.totalDisbursements.toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center text-blue-600",children:s.toFixed(2)})]})})]})})})]})},rr=()=>{const{getAllCustomerBalances:e,customers:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),i=(0,r.useMemo)(()=>e(),[e]),o=(0,r.useMemo)(()=>i.filter(e=>{var t,a,r;return((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))||(null===(a=e.phone)||void 0===a?void 0:a.includes(s))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(s.toLowerCase())))&&!0}),[i,s,n]),c=(0,r.useMemo)(()=>{const e=o.filter(e=>e.balance>0).reduce((e,t)=>e+t.balance,0),t=Math.abs(o.filter(e=>e.balance<0).reduce((e,t)=>e+t.balance,0));return{totalDebit:e,totalCredit:t,netBalance:e-t,debitCount:o.filter(e=>e.balance>0).length,creditCount:o.filter(e=>e.balance<0).length}},[o]);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",icon:(0,Qe.jsx)(Ws,{})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,Qe.jsx)(Ws,{className:"text-2xl text-blue-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0639\u0645\u0644\u0627\u0621"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-red-100 p-3 rounded-lg",children:(0,Qe.jsx)(hs,{className:"text-2xl text-red-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646 (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,Qe.jsx)(hs,{className:"text-2xl text-green-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646 (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-lg ".concat(c.netBalance>=0?"bg-red-100":"bg-green-100"),children:(0,Qe.jsx)(Dt,{className:"text-2xl ".concat(c.netBalance>=0?"text-red-600":"text-green-600")})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold ".concat(c.netBalance>=0?"text-red-600":"text-green-600"),children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0635\u064a\u062f (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629"})]})]})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0647\u0627\u062a\u0641 \u0623\u0648 \u0627\u0644\u0628\u0631\u064a\u062f...",value:s,onChange:e=>a(e.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Qe.jsx)("option",{value:"debit",children:"\u0644\u0647\u0645 \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627 (\u0645\u062f\u064a\u0646)"}),(0,Qe.jsx)("option",{value:"credit",children:"\u0639\u0644\u064a\u0647\u0645 \u062f\u064a\u0646 \u0644\u0646\u0627 (\u062f\u0627\u0626\u0646)"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===o.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"})}):o.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:t+1}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.name}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:e.phone||"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:e.email||"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qe.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629"})}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:e.balance>0?(0,Qe.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:"\u0644\u0647 \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627"}):e.balance<0?(0,Qe.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:"\u0639\u0644\u064a\u0647 \u062f\u064a\u0646 \u0644\u0646\u0627"}):(0,Qe.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:"\u0645\u062a\u0639\u0627\u062f\u0644"})})]},e.id))}),o.length>0&&(0,Qe.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("td",{colSpan:"4",className:"px-4 py-3 text-right",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",colSpan:"2",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,Qe.jsxs)("span",{className:"text-red-600",children:["\u0645\u062f\u064a\u0646: ",c.totalDebit.toFixed(2)]}),(0,Qe.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Qe.jsxs)("span",{className:"text-green-600",children:["\u062f\u0627\u0626\u0646: ",c.totalCredit.toFixed(2)]}),(0,Qe.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Qe.jsxs)("span",{className:c.netBalance>=0?"text-red-600":"text-green-600",children:["\u0627\u0644\u0635\u0627\u0641\u064a: ",Math.abs(c.netBalance).toFixed(2)]})]})})]})})]})})})]})},nr=()=>{const{getAllSupplierBalances:e,suppliers:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)("all"),i=(0,r.useMemo)(()=>e(),[e]),o=(0,r.useMemo)(()=>i.filter(e=>{var t,a,r;return((null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(s.toLowerCase()))||(null===(a=e.phone)||void 0===a?void 0:a.includes(s))||(null===(r=e.email)||void 0===r?void 0:r.toLowerCase().includes(s.toLowerCase())))&&!0}),[i,s,n]),c=(0,r.useMemo)(()=>{const e=o.filter(e=>e.balance>0).reduce((e,t)=>e+t.balance,0),t=Math.abs(o.filter(e=>e.balance<0).reduce((e,t)=>e+t.balance,0));return{totalDebit:e,totalCredit:t,netBalance:e-t,debitCount:o.filter(e=>e.balance>0).length,creditCount:o.filter(e=>e.balance<0).length}},[o]);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(Ja,{title:"\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",icon:(0,Qe.jsx)(Fs,{})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,Qe.jsx)(Fs,{className:"text-2xl text-blue-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:o.length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-red-100 p-3 rounded-lg",children:(0,Qe.jsx)(hs,{className:"text-2xl text-red-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646 (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsxs)("div",{className:"text-xs text-gray-500",children:["\u0644\u0647\u0645 \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627 (",c.debitCount,")"]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-green-100 p-3 rounded-lg",children:(0,Qe.jsx)(hs,{className:"text-2xl text-green-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646 (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsxs)("div",{className:"text-xs text-gray-500",children:["\u0639\u0644\u064a\u0647\u0645 \u062f\u064a\u0646 (",c.creditCount,")"]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-lg ".concat(c.netBalance>=0?"bg-red-100":"bg-green-100"),children:(0,Qe.jsx)(Dt,{className:"text-2xl ".concat(c.netBalance>=0?"text-red-600":"text-green-600")})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold ".concat(c.netBalance>=0?"text-red-600":"text-green-600"),children:"\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0635\u064a\u062f (\u062c\u0646\u064a\u0647)"}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:c.netBalance>=0?"\u0644\u0647\u0645 \u0639\u0644\u064a\u0646\u0627":"\u0639\u0644\u064a\u0647\u0645 \u0644\u0646\u0627"})]})]})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Qe.jsxs)("div",{className:"flex-1 relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0647\u0627\u062a\u0641 \u0623\u0648 \u0627\u0644\u0628\u0631\u064a\u062f...",value:s,onChange:e=>a(e.target.value),className:"w-full pr-10 pl-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,Qe.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Qe.jsx)("option",{value:"debit",children:"\u0644\u0647\u0645 \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627 (\u0645\u062f\u064a\u0646)"}),(0,Qe.jsx)("option",{value:"credit",children:"\u0639\u0644\u064a\u0647\u0645 \u062f\u064a\u0646 \u0644\u0646\u0627 (\u062f\u0627\u0626\u0646)"})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"#"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-sm font-semibold",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:0===o.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"})}):o.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:t+1}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm font-medium",children:e.name}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:e.phone||"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-sm",children:e.email||"-"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qe.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u062d\u0645\u064a\u0629"})}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:e.balance>0?(0,Qe.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold",children:"\u0644\u0647 \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627"}):e.balance<0?(0,Qe.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-semibold",children:"\u0639\u0644\u064a\u0647 \u062f\u064a\u0646 \u0644\u0646\u0627"}):(0,Qe.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold",children:"\u0645\u062a\u0639\u0627\u062f\u0644"})})]},e.id))}),o.length>0&&(0,Qe.jsx)("tfoot",{className:"bg-gray-50 font-semibold",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("td",{colSpan:"4",className:"px-4 py-3 text-right",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",colSpan:"2",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,Qe.jsxs)("span",{className:"text-red-600",children:["\u0645\u062f\u064a\u0646: ",c.totalDebit.toFixed(2)]}),(0,Qe.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Qe.jsxs)("span",{className:"text-green-600",children:["\u062f\u0627\u0626\u0646: ",c.totalCredit.toFixed(2)]}),(0,Qe.jsx)("span",{className:"text-gray-400",children:"|"}),(0,Qe.jsxs)("span",{className:c.netBalance>=0?"text-red-600":"text-green-600",children:["\u0627\u0644\u0635\u0627\u0641\u064a: ",Math.abs(c.netBalance).toFixed(2)]})]})})]})})]})})})]})},lr="bero_system_users",ir=()=>{const{showSuccess:e,showError:t,showWarning:s}=Ke(),{isAdmin:a}=We(),[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)("all"),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[y,N]=(0,r.useState)({username:"",password:"",confirmPassword:"",name:"",email:"",phone:"",role:"user",status:"active"}),[w,S]=(0,r.useState)({username:"",name:"",email:"",phone:"",role:"user",status:"active"});if((0,r.useEffect)(()=>{k()},[]),!a())return(0,Qe.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Qe.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Qe.jsx)("div",{className:"text-red-500 mb-4",children:(0,Qe.jsx)(us,{className:"mx-auto h-12 w-12"})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0645\u062f\u064a\u0631 \u0641\u0642\u0637"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0645\u062a\u0627\u062d\u0629 \u0644\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645 \u0641\u0642\u0637."}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\u062f\u0648\u0631\u0643 \u0627\u0644\u062d\u0627\u0644\u064a: \u063a\u064a\u0631 \u0645\u062f\u064a\u0631 - \u0645\u0637\u0644\u0648\u0628: admin"}),(0,Qe.jsx)("button",{onClick:()=>window.location.href="#/dashboard",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]})});const k=()=>{try{const e=localStorage.getItem(lr);if(e)l(JSON.parse(e));else{const e=[{id:1,username:"admin",password:(0,qe.hashPassword)("admin123"),name:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645",email:"admin@berosystem.com",phone:"+20 XXX XXX XXXX",role:"admin",status:"active",createdAt:(new Date).toISOString()}];l(e),localStorage.setItem(lr,JSON.stringify(e))}}catch(e){console.error("Error loading users:",e)}},C=e=>{const{name:t,value:s}=e.target;N(Be(Be({},y),{},{[t]:s}))},I=e=>{const{name:t,value:s}=e.target;S(Be(Be({},w),{},{[t]:s}))},D=[{value:"admin",label:"\u0645\u062f\u064a\u0631"},{value:"manager",label:"\u0645\u062f\u064a\u0631 \u0645\u062e\u0632\u0646"},{value:"user",label:"\u0645\u0633\u062a\u062e\u062f\u0645"},{value:"viewer",label:"\u0645\u0634\u0627\u0647\u062f \u0641\u0642\u0637"}],_=[{value:"active",label:"\u0646\u0634\u0637"},{value:"inactive",label:"\u063a\u064a\u0631 \u0646\u0634\u0637"}],L=e=>{const t=D.find(t=>t.value===e);return t?t.label:e},E=n.filter(e=>{const t=e.name.toLowerCase().includes(i.toLowerCase())||e.username.toLowerCase().includes(i.toLowerCase())||e.email.toLowerCase().includes(i.toLowerCase()),s="all"===c||e.role===c;return t&&s});return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:n.length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0648\u0646 \u0627\u0644\u0646\u0634\u0637\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:n.filter(e=>"active"===e.status).length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0645\u062f\u064a\u0631\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:n.filter(e=>"admin"===e.role).length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0648\u0646 \u0627\u0644\u0639\u0627\u062f\u064a\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:n.filter(e=>"user"===e.role).length})]})]}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Bs,{}),title:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f",className:"mb-6",children:(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),y.password===y.confirmPassword)if(y.password.length<6)t("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 6 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644");else if(n.some(e=>e.username===y.username))t("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0645\u0648\u062c\u0648\u062f \u0628\u0627\u0644\u0641\u0639\u0644");else try{const e={id:Date.now(),username:y.username,password:(0,qe.hashPassword)(y.password),name:y.name,email:y.email,phone:y.phone,role:y.role,status:y.status,createdAt:(new Date).toISOString()},t=[...n,e];l(t),localStorage.setItem(lr,JSON.stringify(t)),j(e),h(!0),N({username:"",password:"",confirmPassword:"",name:"",email:"",phone:"",role:"user",status:"active"})}catch(s){t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}else t("\u0643\u0644\u0645\u062a\u0627 \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u062a\u064a\u0646")},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",name:"username",value:y.username,onChange:C,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",name:"name",value:y.name,onChange:C,placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",name:"email",type:"email",value:y.email,onChange:C,placeholder:"example@email.com",required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",name:"phone",value:y.phone,onChange:C,placeholder:"+964 XXX XXX XXXX"}),(0,Qe.jsx)(da,{label:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",name:"password",type:"password",value:y.password,onChange:C,placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0}),(0,Qe.jsx)(da,{label:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",name:"confirmPassword",type:"password",value:y.confirmPassword,onChange:C,placeholder:"\u0623\u0639\u062f \u0625\u062f\u062e\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0}),(0,Qe.jsx)(ma,{label:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",name:"role",value:y.role,onChange:C,options:D,required:!0}),(0,Qe.jsx)(ma,{label:"\u0627\u0644\u062d\u0627\u0644\u0629",name:"status",value:y.status,onChange:C,options:_,required:!0})]}),(0,Qe.jsx)("div",{className:"flex gap-4",children:(0,Qe.jsxs)(ra,{type:"submit",variant:"success",children:[(0,Qe.jsx)(Bs,{className:"ml-2"}),"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"]})})]})}),(0,Qe.jsxs)(aa,{icon:(0,Qe.jsx)(qs,{}),title:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",children:[(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"flex-1",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-3 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0645\u0633\u062a\u062e\u062f\u0645...",value:i,onChange:e=>o(e.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,Qe.jsx)(ma,{name:"filterRole",value:c,onChange:e=>d(e.target.value),options:[{value:"all",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"},...D]})]}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===E.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u062a\u0627\u062d\u0629"})}):E.map(e=>{return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username]})]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.email}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.phone||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Qe.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:L(e.role)})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(t=e.status,"active"===t?(0,Qe.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"\u0646\u0634\u0637"}):(0,Qe.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"}))}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Qe.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{b(e),S({username:e.username,name:e.name,email:e.email,phone:e.phone,role:e.role,status:e.status}),g(!0)})(e),className:"text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{b(e),u(!0)})(e),className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id);var t})})]})}),E.length>0&&(0,Qe.jsxs)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:["\u0639\u0631\u0636 ",E.length," \u0645\u0646 \u0623\u0635\u0644 ",n.length," \u0645\u0633\u062a\u062e\u062f\u0645"]})]}),x&&f&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-2xl",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,Qe.jsx)(Os,{className:"text-3xl text-red-600"})}),(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0623\u0643\u064a\u062f \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u062a\u0627\u0644\u064a\u061f \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621."}),(0,Qe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-right",children:[(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0627\u0633\u0645:"})," ",f.name]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:"})," ",f.username]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629:"})," ",L(f.role)]})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)(ra,{variant:"secondary",fullWidth:!0,onClick:()=>{u(!1),b(null)},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)(ra,{variant:"danger",fullWidth:!0,onClick:()=>{try{const t=n.filter(e=>e.id!==f.id);l(t),localStorage.setItem(lr,JSON.stringify(t)),u(!1),b(null),e("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(s){t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}},children:[(0,Qe.jsx)(Os,{className:"ml-2"}),"\u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"]})]})]})}),m&&v&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-2xl",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,Qe.jsx)(_t,{className:"text-3xl text-green-600"})}),(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0645\u062a \u0627\u0644\u0625\u0636\u0627\u0641\u0629 \u0628\u0646\u062c\u0627\u062d!"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d \u0625\u0644\u0649 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,Qe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-right",children:[(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0627\u0633\u0645:"})," ",v.name]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:"})," ",v.username]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0628\u0631\u064a\u062f:"})," ",v.email]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629:"})," ",L(v.role)]})]})]}),(0,Qe.jsx)("div",{className:"flex gap-3",children:(0,Qe.jsx)(ra,{variant:"primary",fullWidth:!0,onClick:()=>{h(!1),j(null)},children:"\u062d\u0633\u0646\u0627\u064b"})})]})}),p&&f&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Qe.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Qe.jsx)(Qt,{className:"text-2xl text-blue-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u062a\u0639\u062f\u064a\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a ",f.name]})]})]})}),(0,Qe.jsx)("div",{className:"space-y-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",name:"username",value:w.username,onChange:I,disabled:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",name:"name",value:w.name,onChange:I,required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",name:"email",type:"email",value:w.email,onChange:I,required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",name:"phone",value:w.phone,onChange:I}),(0,Qe.jsx)(ma,{label:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",name:"role",value:w.role,onChange:I,options:D,required:!0}),(0,Qe.jsx)(ma,{label:"\u0627\u0644\u062d\u0627\u0644\u0629",name:"status",value:w.status,onChange:I,options:_,required:!0})]})}),(0,Qe.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Qe.jsx)(ra,{variant:"secondary",fullWidth:!0,onClick:()=>{g(!1),b(null)},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)(ra,{variant:"success",fullWidth:!0,onClick:()=>{try{const t=n.map(e=>e.id===f.id?Be(Be(Be({},e),w),{},{updatedAt:(new Date).toISOString()}):e);l(t),localStorage.setItem(lr,JSON.stringify(t)),g(!1),b(null),e("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(s){t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645")}},children:[(0,Qe.jsx)(_t,{className:"ml-2"}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"]})]})]})})]})},or="bero_permissions_matrix",cr=()=>{const{showSuccess:e,showWarning:t}=Ke(),{isAdmin:s}=We(),[a,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)({}),[d,x]=(0,r.useState)({});if((0,r.useEffect)(()=>{h()},[]),(0,r.useEffect)(()=>{if(Object.keys(d).length>0){const e=JSON.stringify(o)!==JSON.stringify(d);n(e)}},[o,d]),!s())return(0,Qe.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Qe.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Qe.jsx)("div",{className:"text-red-500 mb-4",children:(0,Qe.jsx)(us,{className:"mx-auto h-12 w-12"})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0645\u062f\u064a\u0631 \u0641\u0642\u0637"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0645\u062a\u0627\u062d\u0629 \u0644\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645 \u0641\u0642\u0637."}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\u062f\u0648\u0631\u0643 \u0627\u0644\u062d\u0627\u0644\u064a: \u063a\u064a\u0631 \u0645\u062f\u064a\u0631 - \u0645\u0637\u0644\u0648\u0628: admin"}),(0,Qe.jsx)("button",{onClick:()=>window.location.href="#/dashboard",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]})});const u=[{id:"admin",name:"\u0645\u062f\u064a\u0631",color:"red"},{id:"manager",name:"\u0645\u062f\u064a\u0631 \u0645\u062e\u0632\u0646",color:"blue"},{id:"user",name:"\u0645\u0633\u062a\u062e\u062f\u0645",color:"green"},{id:"viewer",name:"\u0645\u0634\u0627\u0647\u062f",color:"gray"}],m=[{id:"warehouses",name:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646",category:"inventory"},{id:"products",name:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a",category:"inventory"},{id:"purchases",name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",category:"transactions"},{id:"sales",name:"\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",category:"transactions"},{id:"suppliers",name:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",category:"contacts"},{id:"customers",name:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621",category:"contacts"},{id:"treasury",name:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",category:"finance"},{id:"reports",name:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",category:"reports"},{id:"users",name:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",category:"system"},{id:"settings",name:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a",category:"system"},{id:"integrations",name:"\u0627\u0644\u062a\u0643\u0627\u0645\u0644\u0627\u062a",category:"system"},{id:"backup",name:"\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a",category:"system"}],h=()=>{try{const e=localStorage.getItem(or);if(e){const t=JSON.parse(e);c(t),x(t)}else{const e={admin:m.map(e=>e.id),manager:["warehouses","products","purchases","sales","suppliers","customers","reports"],user:["sales","purchases","products","customers","suppliers"],viewer:["reports"]};c(e),x(e),localStorage.setItem(or,JSON.stringify(e))}}catch(e){console.error("Error loading permissions:",e)}},p=(e,t)=>{c(s=>{const a=s[e]||[],r=a.includes(t);return Be(Be({},s),{},{[e]:r?a.filter(e=>e!==t):[...a,t]})})},g=(e,t)=>{var s;return(null===(s=o[e])||void 0===s?void 0:s.includes(t))||!1},f=e=>{var t;return(null===(t=o[e])||void 0===t?void 0:t.length)||0};return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}),a&&(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsxs)(ra,{variant:"secondary",onClick:()=>{c(d),n(!1),t("\u062a\u0645 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a")},children:[(0,Qe.jsx)(Rs,{className:"ml-2"})," \u062a\u0631\u0627\u062c\u0639"]}),(0,Qe.jsxs)(ra,{variant:"success",onClick:()=>{i(!0)},children:[(0,Qe.jsx)(Ss,{className:"ml-2"})," \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"]})]})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:u.map(e=>(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-".concat(e.color,"-500 to-").concat(e.color,"-600 rounded-lg p-4 text-white"),children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:e.name}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold",children:[f(e.id),"/",m.length]}),(0,Qe.jsx)("p",{className:"text-xs opacity-75 mt-1",children:"\u0635\u0644\u0627\u062d\u064a\u0629 \u0645\u0641\u0639\u0644\u0629"})]}),(0,Qe.jsx)(Cs,{className:"text-3xl opacity-75"})]})},e.id))}),(0,Qe.jsx)("div",{className:"space-y-6",children:[{id:"inventory",name:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:"\ud83d\udce6"},{id:"transactions",name:"\u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a",icon:"\ud83d\udcb0"},{id:"contacts",name:"\u062c\u0647\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644",icon:"\ud83d\udc65"},{id:"finance",name:"\u0627\u0644\u0645\u0627\u0644\u064a\u0629",icon:"\ud83d\udcb5"},{id:"reports",name:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",icon:"\ud83d\udcca"},{id:"system",name:"\u0627\u0644\u0646\u0638\u0627\u0645",icon:"\u2699\ufe0f"}].map(e=>{const t=m.filter(t=>t.category===e.id);return(0,Qe.jsx)(aa,{title:"".concat(e.icon," ").concat(e.name),icon:(0,Qe.jsx)(Ot,{}),children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-sm font-medium text-gray-700",children:"\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),u.map(e=>(0,Qe.jsx)("th",{className:"px-6 py-3 text-center",children:(0,Qe.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,Qe.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name}),(0,Qe.jsxs)("div",{className:"flex gap-1",children:[(0,Qe.jsx)("button",{onClick:()=>{t.forEach(t=>{g(e.id,t.id)||p(e.id,t.id)})},className:"text-xs text-green-600 hover:text-green-800",title:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0643\u0644",children:"\u062a\u0641\u0639\u064a\u0644"}),(0,Qe.jsx)("span",{className:"text-gray-300",children:"|"}),(0,Qe.jsx)("button",{onClick:()=>{t.forEach(t=>{g(e.id,t.id)&&p(e.id,t.id)})},className:"text-xs text-red-600 hover:text-red-800",title:"\u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u0643\u0644",children:"\u062a\u0639\u0637\u064a\u0644"})]})]})},e.id))]})}),(0,Qe.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap font-medium text-gray-900",children:e.name}),u.map(t=>(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Qe.jsx)("button",{onClick:()=>p(t.id,e.id),className:"w-10 h-10 rounded-lg flex items-center justify-center transition-all ".concat(g(t.id,e.id)?"bg-green-100 hover:bg-green-200 text-green-600":"bg-gray-100 hover:bg-gray-200 text-gray-400"),children:g(t.id,e.id)?(0,Qe.jsx)(Lt,{className:"text-xl"}):(0,Qe.jsx)(Ts,{className:"text-xl"})})},t.id))]},e.id))})]})})},e.id)})}),(0,Qe.jsx)(aa,{title:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0633\u0631\u064a\u0639\u0629",icon:(0,Qe.jsx)(Ot,{}),className:"mt-6",children:(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(e=>(0,Qe.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:e.name}),(0,Qe.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,Qe.jsxs)(ra,{variant:"success",size:"sm",fullWidth:!0,onClick:()=>{return t=e.id,void c(e=>Be(Be({},e),{},{[t]:m.map(e=>e.id)}));var t},children:[(0,Qe.jsx)(Lt,{className:"ml-2"}),"\u0645\u0646\u062d \u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"]}),(0,Qe.jsxs)(ra,{variant:"danger",size:"sm",fullWidth:!0,onClick:()=>{return t=e.id,void c(e=>Be(Be({},e),{},{[t]:[]}));var t},children:[(0,Qe.jsx)(Ts,{className:"ml-2"}),"\u0625\u0632\u0627\u0644\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"]})]})]},e.id))})}),(0,Qe.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,Qe.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Qe.jsx)("strong",{children:"\ud83d\udca1 \u0645\u0644\u0627\u062d\u0638\u0629:"})," \u064a\u0645\u0643\u0646\u0643 \u062a\u062e\u0635\u064a\u0635 \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0645\u062e\u062a\u0644\u0641\u0629 \u0644\u0643\u0644 \u062f\u0648\u0631 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645. \u0627\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0623\u064a\u0642\u0648\u0646\u0627\u062a \u0644\u062a\u0641\u0639\u064a\u0644 \u0623\u0648 \u062a\u0639\u0637\u064a\u0644 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a. \u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u0633\u0631\u064a\u0639\u0629 \u0644\u062a\u0637\u0628\u064a\u0642 \u062a\u063a\u064a\u064a\u0631\u0627\u062a \u062c\u0645\u0627\u0639\u064a\u0629."]})}),l&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-2xl",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,Qe.jsx)(Ss,{className:"text-3xl text-blue-600"})}),(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0623\u0643\u064a\u062f \u062d\u0641\u0638 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a\u061f \u0633\u064a\u062a\u0645 \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0639\u0644\u0649 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646."}),(0,Qe.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:u.map(e=>(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-2 text-sm",children:[(0,Qe.jsxs)("span",{className:"font-medium text-gray-700",children:[e.name,":"]}),(0,Qe.jsxs)("span",{className:"text-blue-600",children:[f(e.id)," \u0635\u0644\u0627\u062d\u064a\u0629"]})]},e.id))})]}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)(ra,{variant:"secondary",fullWidth:!0,onClick:()=>i(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)(ra,{variant:"success",fullWidth:!0,onClick:()=>{try{localStorage.setItem(or,JSON.stringify(o)),x(o),n(!1),i(!1),e("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0628\u0646\u062c\u0627\u062d")}catch(s){console.error("Error saving permissions:",s),t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0641\u0638 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a")}},children:[(0,Qe.jsx)(Ss,{className:"ml-2"}),"\u062d\u0641\u0638"]})]})]})})]})},dr="bero_support_tickets",xr=()=>{const{showSuccess:e,showError:t}=Ke(),[s,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),[x,u]=(0,r.useState)({name:"",email:"",phone:"",subject:"",message:"",priority:"medium"});(0,r.useEffect)(()=>{m()},[]);const m=()=>{try{const e=localStorage.getItem(dr);e&&a(JSON.parse(e))}catch(e){console.error("Error loading tickets:",e)}},h=e=>{const{name:t,value:s}=e.target;u(Be(Be({},x),{},{[t]:s}))},p=e=>{const t={pending:{label:"\u0642\u064a\u062f \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629",color:"yellow"},inProgress:{label:"\u062c\u0627\u0631\u064a \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629",color:"blue"},resolved:{label:"\u062a\u0645 \u0627\u0644\u062d\u0644",color:"green"},closed:{label:"\u0645\u063a\u0644\u0642",color:"gray"}},s=t[e]||t.pending;return(0,Qe.jsx)("span",{className:"px-3 py-1 bg-".concat(s.color,"-100 text-").concat(s.color,"-700 rounded-full text-xs font-medium"),children:s.label})},g=e=>{const t={low:{label:"\u0645\u0646\u062e\u0641\u0636\u0629",color:"gray"},medium:{label:"\u0645\u062a\u0648\u0633\u0637\u0629",color:"blue"},high:{label:"\u0639\u0627\u0644\u064a\u0629",color:"orange"},urgent:{label:"\u0639\u0627\u062c\u0644\u0629",color:"red"}},s=t[e]||t.medium;return(0,Qe.jsx)("span",{className:"px-3 py-1 bg-".concat(s.color,"-100 text-").concat(s.color,"-700 rounded-full text-xs font-medium"),children:s.label})},f=[{icon:(0,Qe.jsx)(bs,{className:"text-blue-600"}),title:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",value:"+964 750 123 4567",description:"\u0645\u062a\u0627\u062d \u0637\u0648\u0627\u0644 \u0627\u0644\u0623\u0633\u0628\u0648\u0639 24/7"},{icon:(0,Qe.jsx)(ct,{className:"text-green-600"}),title:"\u0648\u0627\u062a\u0633\u0627\u0628",value:"+964 750 123 4567",description:"\u062f\u0639\u0645 \u0641\u0648\u0631\u064a \u0639\u0628\u0631 \u0648\u0627\u062a\u0633\u0627\u0628"},{icon:(0,Qe.jsx)(Ht,{className:"text-red-600"}),title:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",value:"support@berosystem.com",description:"\u0646\u0631\u062f \u062e\u0644\u0627\u0644 24 \u0633\u0627\u0639\u0629"},{icon:(0,Qe.jsx)(as,{className:"text-purple-600"}),title:"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",value:"www.berosystem.com",description:"\u0632\u0631 \u0645\u0648\u0642\u0639\u0646\u0627 \u0644\u0644\u0645\u0632\u064a\u062f \u0645\u0646 \u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a"},{icon:(0,Qe.jsx)(ms,{className:"text-orange-600"}),title:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646",value:"\u0628\u063a\u062f\u0627\u062f\u060c \u0627\u0644\u0639\u0631\u0627\u0642",description:"\u0645\u0631\u0643\u0632 \u062e\u062f\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0627\u0644\u0631\u0626\u064a\u0633\u064a"}];return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u062e\u062f\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621 \u0648\u0627\u0644\u062f\u0639\u0645 \u0627\u0644\u0641\u0646\u064a"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:s.length})]}),(0,Qe.jsx)(gs,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0642\u064a\u062f \u0627\u0644\u0645\u0639\u0627\u0644\u062c\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:s.filter(e=>"pending"===e.status).length})]}),(0,Qe.jsx)(zt,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u062a\u0645 \u0627\u0644\u062d\u0644"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:s.filter(e=>"resolved"===e.status).length})]}),(0,Qe.jsx)(_t,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0645\u062a\u0648\u0633\u0637 \u0648\u0642\u062a \u0627\u0644\u0631\u062f"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold",children:["2",(0,Qe.jsx)("span",{className:"text-xl",children:"\u0633\u0627\u0639\u0629"})]})]}),(0,Qe.jsx)(zt,{className:"text-3xl opacity-75"})]})})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:f.map((e,t)=>(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-4xl mb-4 flex justify-center",children:e.icon}),(0,Qe.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:e.title}),(0,Qe.jsx)("p",{className:"text-blue-600 font-medium mb-2",children:e.value}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]})},t))}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(gs,{}),title:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0633\u062a\u0641\u0633\u0627\u0631 \u062c\u062f\u064a\u062f",className:"mb-6",children:(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!x.message.trim()||x.message.length<10)t("\u0627\u0644\u0631\u0633\u0627\u0644\u0629 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 10 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644");else try{const e=Be(Be({id:Date.now()},x),{},{status:"pending",createdAt:(new Date).toISOString(),ticketNumber:"TKT-".concat(Date.now().toString().slice(-6))}),t=[e,...s];a(t),localStorage.setItem(dr,JSON.stringify(t)),o(e),l(!0),u({name:"",email:"",phone:"",subject:"",message:"",priority:"medium"})}catch(r){t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631")}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",name:"name",value:x.name,onChange:h,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645\u0643",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",name:"email",type:"email",value:x.email,onChange:h,placeholder:"your@email.com",required:!0}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641",name:"phone",value:x.phone,onChange:h,placeholder:"+964 XXX XXX XXXX"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,Qe.jsx)("select",{name:"priority",value:x.priority,onChange:h,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[{value:"low",label:"\u0645\u0646\u062e\u0641\u0636\u0629"},{value:"medium",label:"\u0645\u062a\u0648\u0633\u0637\u0629"},{value:"high",label:"\u0639\u0627\u0644\u064a\u0629"},{value:"urgent",label:"\u0639\u0627\u062c\u0644\u0629"}].map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0645\u0648\u0636\u0648\u0639",name:"subject",value:x.subject,onChange:h,placeholder:"\u0645\u0648\u0636\u0648\u0639 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631",required:!0}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0631\u0633\u0627\u0644\u0629"}),(0,Qe.jsx)("textarea",{name:"message",value:x.message,onChange:h,placeholder:"\u0627\u0643\u062a\u0628 \u0627\u0633\u062a\u0641\u0633\u0627\u0631\u0643 \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644...",required:!0,rows:"5",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)(ra,{type:"submit",variant:"primary",children:[(0,Qe.jsx)(gs,{className:"ml-2"}),"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631"]})]})}),(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(Ns,{}),title:"\u0627\u0644\u0623\u0633\u0626\u0644\u0629 \u0627\u0644\u0634\u0627\u0626\u0639\u0629",className:"mb-6",children:(0,Qe.jsx)("div",{className:"space-y-4",children:[{question:"\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f\u061f",answer:'\u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 \u0642\u0633\u0645 "\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a" \u0645\u0646 \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062c\u0627\u0646\u0628\u064a\u0629\u060c \u062b\u0645 \u0627\u0636\u063a\u0637 \u0639\u0644\u0649 \u0632\u0631 "\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062a\u062c \u062c\u062f\u064a\u062f". \u0627\u0645\u0644\u0623 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u0627\u0636\u063a\u0637 \u062d\u0641\u0638.'},{question:"\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a\u061f",answer:'\u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 \u0642\u0633\u0645 "\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a" \u0648\u0627\u062e\u062a\u0631 "\u0625\u0646\u0634\u0627\u0621 \u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a"\u060c \u0627\u062e\u062a\u0631 \u0627\u0644\u0639\u0645\u064a\u0644 \u0648\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\u060c \u062b\u0645 \u0627\u062d\u0641\u0638 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629.'},{question:"\u0643\u064a\u0641 \u0623\u0642\u0648\u0645 \u0628\u0639\u0645\u0644 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0645\u0646 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a\u061f",answer:'\u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 "\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a" \u062b\u0645 "\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a" \u0648\u0627\u0636\u063a\u0637 \u0639\u0644\u0649 "\u0625\u0646\u0634\u0627\u0621 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0627\u0644\u0622\u0646". \u0633\u064a\u062a\u0645 \u062a\u0646\u0632\u064a\u0644 \u0645\u0644\u0641 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u062c\u0645\u064a\u0639 \u0628\u064a\u0627\u0646\u0627\u062a\u0643.'},{question:"\u0643\u064a\u0641 \u064a\u0645\u0643\u0646\u0646\u064a \u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f\u061f",answer:'\u0645\u0646 \u0642\u0627\u0626\u0645\u0629 "\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a" \u0627\u062e\u062a\u0631 "\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"\u060c \u0627\u0645\u0644\u0623 \u0646\u0645\u0648\u0630\u062c \u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f \u0628\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u062d\u062f\u062f \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a.'},{question:"\u0643\u064a\u0641 \u0623\u0639\u0631\u0641 \u062d\u0631\u0643\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646\u061f",answer:'\u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 \u0642\u0633\u0645 "\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631" \u0648\u0627\u062e\u062a\u0631 "\u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646" \u0644\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u062f\u062e\u0648\u0644 \u0648\u0627\u0644\u062e\u0631\u0648\u062c \u0644\u0644\u0645\u0646\u062a\u062c\u0627\u062a.'},{question:"\u0647\u0644 \u064a\u0645\u0643\u0646\u0646\u064a \u062a\u062e\u0635\u064a\u0635 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631\u061f",answer:'\u0646\u0639\u0645\u060c \u0645\u0646 "\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a" \u062b\u0645 "\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631" \u064a\u0645\u0643\u0646\u0643 \u062a\u062e\u0635\u064a\u0635 \u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629\u060c \u0646\u0635 \u0627\u0644\u062a\u0630\u064a\u064a\u0644\u060c \u0648\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629.'}].map((e,t)=>(0,Qe.jsxs)("div",{className:"border-b pb-4 last:border-b-0",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-600",children:"\u0633:"}),e.question]}),(0,Qe.jsxs)("p",{className:"text-gray-600 mr-6 text-sm leading-relaxed",children:[(0,Qe.jsx)("span",{className:"text-green-600 font-semibold",children:"\u062c:"})," ",e.answer]})]},t))})}),s.length>0&&(0,Qe.jsx)(aa,{icon:(0,Qe.jsx)(zt,{}),title:"\u0633\u062c\u0644 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631\u0627\u062a",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"\u0631\u0642\u0645 \u0627\u0644\u062a\u0630\u0643\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0645\u0648\u0636\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.slice(0,10).map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"font-mono text-sm text-blue-600",children:e.ticketNumber})}),(0,Qe.jsxs)("td",{className:"px-6 py-4",children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.subject}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.name})]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:g(e.priority)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:p(e.status)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString("ar-EG")})]},e.id))})]})})}),(0,Qe.jsx)(aa,{title:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0637\u0648\u0631",className:"mt-6",children:(0,Qe.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-6 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"\u062a\u0645 \u0627\u0644\u062a\u0637\u0648\u064a\u0631 \u0628\u0648\u0627\u0633\u0637\u0629 MiniMax Agent"}),(0,Qe.jsx)("p",{className:"text-gray-700 mb-4",children:"\u0646\u0638\u0627\u0645 Bero System \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646 \u0627\u0644\u0634\u0627\u0645\u0644 \u0647\u0648 \u062d\u0644 \u0645\u062a\u0643\u0627\u0645\u0644 \u0644\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0645\u062e\u0632\u0646\u060c \u0645\u0646 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0625\u0644\u0649 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0648\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629."}),(0,Qe.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,Qe.jsx)("span",{className:"px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-700 shadow-sm",children:"React 18"}),(0,Qe.jsx)("span",{className:"px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-700 shadow-sm",children:"TailwindCSS"}),(0,Qe.jsx)("span",{className:"px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-700 shadow-sm",children:"Context API"}),(0,Qe.jsx)("span",{className:"px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-700 shadow-sm",children:"React Router"}),(0,Qe.jsx)("span",{className:"px-4 py-2 bg-white rounded-lg text-sm font-medium text-gray-700 shadow-sm",children:"LocalStorage"})]})]})}),n&&i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-2xl",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,Qe.jsx)(_t,{className:"text-3xl text-green-600"})}),(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0627\u0633\u062a\u0641\u0633\u0627\u0631 \u0628\u0646\u062c\u0627\u062d!"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u062a\u0645 \u0627\u0633\u062a\u0644\u0627\u0645 \u0627\u0633\u062a\u0641\u0633\u0627\u0631\u0643 \u0648\u0633\u064a\u062a\u0645 \u0627\u0644\u0631\u062f \u0639\u0644\u064a\u0643 \u0641\u064a \u0623\u0642\u0631\u0628 \u0648\u0642\u062a \u0645\u0645\u0643\u0646"}),(0,Qe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-right",children:[(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0631\u0642\u0645 \u0627\u0644\u062a\u0630\u0643\u0631\u0629:"})," ",(0,Qe.jsx)("span",{className:"font-mono text-blue-600",children:i.ticketNumber})]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0645\u0648\u0636\u0648\u0639:"})," ",i.subject]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,Qe.jsx)("strong",{children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629:"})," ",g(i.priority)]})]})]}),(0,Qe.jsx)(ra,{variant:"primary",fullWidth:!0,onClick:()=>{l(!1),o(null)},children:"\u062d\u0633\u0646\u0627\u064b"})]})})]})},ur="bero_system_settings",mr=()=>{const{showSuccess:e,showWarning:t}=Ke(),[s,a]=(0,r.useState)("company"),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)({companyName:"Bero System",companyAddress:"",companyPhone:"",companyEmail:"",companyTax:"",companyLogo:"",currency:"EGP",language:"ar",timezone:"Africa/Cairo",dateFormat:"DD/MM/YYYY",invoicePrefix:"INV",invoiceStartNumber:"1000",invoiceFooterText:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627",showCompanyLogo:!0,showTaxNumber:!0,autoCalculateTax:!0,taxRate:"0",sessionTimeout:"30",requirePasswordChange:!1,passwordMinLength:"6",enableTwoFactor:!1,autoBackup:!1,backupFrequency:"daily",backupTime:"00:00",lastBackup:null}),[x,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{m()},[]),(0,r.useEffect)(()=>{if(x){const e=JSON.stringify(c)!==JSON.stringify(x);o(e)}},[c,x]);const m=()=>{try{const e=localStorage.getItem(ur);if(e){const t=JSON.parse(e);d(t),u(t)}else u(c)}catch(e){console.error("Error loading settings:",e),u(c)}},h=e=>{const{name:t,value:s,type:a,checked:r}=e.target;d(Be(Be({},c),{},{[t]:"checkbox"===a?r:s}))},p=[{id:"company",label:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629",icon:(0,Qe.jsx)(vt,{})},{id:"general",label:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0639\u0627\u0645\u0629",icon:(0,Qe.jsx)(Ot,{})},{id:"invoice",label:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",icon:(0,Qe.jsx)(Zt,{})},{id:"security",label:"\u0627\u0644\u0623\u0645\u0627\u0646",icon:(0,Qe.jsx)(Cs,{})},{id:"backup",label:"\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a",icon:(0,Qe.jsx)(Vt,{})}];return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645"}),i&&(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsxs)(ra,{variant:"secondary",onClick:()=>{d(x),o(!1),t("\u062a\u0645 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a")},children:[(0,Qe.jsx)(Rs,{className:"ml-2"})," \u062a\u0631\u0627\u062c\u0639"]}),(0,Qe.jsxs)(ra,{variant:"success",onClick:()=>{l(!0)},children:[(0,Qe.jsx)(Ss,{className:"ml-2"})," \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"]})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0639\u0645\u0644\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:c.currency})]}),(0,Qe.jsx)(hs,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0644\u063a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:"ar"===c.language?"\u0639\u0631\u0628\u064a":"en"===c.language?"English":"\u0643\u0648\u0631\u062f\u064a"})]}),(0,Qe.jsx)(Ot,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0623\u0645\u0627\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:c.enableTwoFactor?"\u0645\u0641\u0639\u0644":"\u0645\u0639\u0637\u0644"})]}),(0,Qe.jsx)(Cs,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a"}),(0,Qe.jsx)("p",{className:"text-xl font-bold",children:c.autoBackup?"\u062a\u0644\u0642\u0627\u0626\u064a":"\u064a\u062f\u0648\u064a"})]}),(0,Qe.jsx)(Vt,{className:"text-3xl opacity-75"})]})})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-md mb-4",children:(0,Qe.jsx)("div",{className:"flex border-b overflow-x-auto",children:p.map(e=>(0,Qe.jsxs)("button",{onClick:()=>a(e.id),className:"flex items-center gap-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ".concat(s===e.id?"text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-800"),children:[e.icon,e.label]},e.id))})}),(0,Qe.jsxs)(aa,{children:["company"===s&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(vt,{className:"text-blue-600"}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u0631\u0643\u0629"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629",name:"companyName",value:c.companyName,onChange:h,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629",required:!0}),(0,Qe.jsx)(da,{label:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0634\u0631\u0643\u0629",name:"companyAddress",value:c.companyAddress,onChange:h,placeholder:"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0634\u0631\u0643\u0629"}),(0,Qe.jsx)(da,{label:"\u0647\u0627\u062a\u0641 \u0627\u0644\u0634\u0631\u0643\u0629",name:"companyPhone",value:c.companyPhone,onChange:h,placeholder:"+20 XXX XXX XXXX"}),(0,Qe.jsx)(da,{label:"\u0628\u0631\u064a\u062f \u0627\u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",name:"companyEmail",type:"email",value:c.companyEmail,onChange:h,placeholder:"info@company.com"}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a",name:"companyTax",value:c.companyTax,onChange:h,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a"}),(0,Qe.jsx)(da,{label:"\u0631\u0627\u0628\u0637 \u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629",name:"companyLogo",value:c.companyLogo,onChange:h,placeholder:"https://..."})]})]}),"general"===s&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Ot,{className:"text-blue-600"}),"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0629"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qe.jsx)(ma,{label:"\u0627\u0644\u0639\u0645\u0644\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629",name:"currency",value:c.currency,onChange:h,options:[{value:"EGP",label:"\u062c\u0646\u064a\u0647 \u0645\u0635\u0631\u064a (EGP)"},{value:"USD",label:"\u062f\u0648\u0644\u0627\u0631 \u0623\u0645\u0631\u064a\u0643\u064a (USD)"},{value:"EUR",label:"\u064a\u0648\u0631\u0648 (EUR)"},{value:"GBP",label:"\u062c\u0646\u064a\u0647 \u0627\u0633\u062a\u0631\u0644\u064a\u0646\u064a (GBP)"},{value:"IQD",label:"\u062f\u064a\u0646\u0627\u0631 \u0639\u0631\u0627\u0642\u064a (IQD)"}]}),(0,Qe.jsx)(ma,{label:"\u0627\u0644\u0644\u063a\u0629",name:"language",value:c.language,onChange:h,options:[{value:"ar",label:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},{value:"en",label:"English"},{value:"ku",label:"\u0643\u0648\u0631\u062f\u064a"}]}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629",name:"timezone",value:c.timezone,onChange:h}),(0,Qe.jsx)(ma,{label:"\u062a\u0646\u0633\u064a\u0642 \u0627\u0644\u062a\u0627\u0631\u064a\u062e",name:"dateFormat",value:c.dateFormat,onChange:h,options:[{value:"DD/MM/YYYY",label:"\u064a\u0648\u0645/\u0634\u0647\u0631/\u0633\u0646\u0629"},{value:"MM/DD/YYYY",label:"\u0634\u0647\u0631/\u064a\u0648\u0645/\u0633\u0646\u0629"},{value:"YYYY-MM-DD",label:"\u0633\u0646\u0629-\u0634\u0647\u0631-\u064a\u0648\u0645"}]})]}),(0,Qe.jsx)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:(0,Qe.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Qe.jsx)("strong",{children:"\u0645\u0644\u0627\u062d\u0638\u0629:"})," \u062a\u063a\u064a\u064a\u0631 \u0647\u0630\u0647 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0633\u064a\u0624\u062b\u0631 \u0639\u0644\u0649 \u0639\u0631\u0636 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0641\u064a \u062c\u0645\u064a\u0639 \u0623\u0646\u062d\u0627\u0621 \u0627\u0644\u0646\u0638\u0627\u0645."]})})]}),"invoice"===s&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Zt,{className:"text-blue-600"}),"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0628\u0627\u062f\u0626\u0629 \u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",name:"invoicePrefix",value:c.invoicePrefix,onChange:h,placeholder:"INV"}),(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0627\u0644\u0628\u062f\u0627\u064a\u0629 \u0644\u0644\u0641\u0648\u0627\u062a\u064a\u0631",name:"invoiceStartNumber",type:"number",value:c.invoiceStartNumber,onChange:h,placeholder:"1000"}),(0,Qe.jsx)("div",{className:"md:col-span-2",children:(0,Qe.jsx)(da,{label:"\u0646\u0635 \u062a\u0630\u064a\u064a\u0644 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629",name:"invoiceFooterText",value:c.invoiceFooterText,onChange:h,placeholder:"\u0634\u0643\u0631\u0627\u064b \u0644\u062a\u0639\u0627\u0645\u0644\u0643\u0645 \u0645\u0639\u0646\u0627"})}),(0,Qe.jsx)(da,{label:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 (%)",name:"taxRate",type:"number",value:c.taxRate,onChange:h,placeholder:"0"})]}),(0,Qe.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"showCompanyLogo",checked:c.showCompanyLogo,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u0625\u0638\u0647\u0627\u0631 \u0634\u0639\u0627\u0631 \u0627\u0644\u0634\u0631\u0643\u0629 \u0641\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"})]}),(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"showTaxNumber",checked:c.showTaxNumber,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u0625\u0638\u0647\u0627\u0631 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0636\u0631\u064a\u0628\u064a \u0641\u064a \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"})]}),(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"autoCalculateTax",checked:c.autoCalculateTax,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u062d\u0633\u0627\u0628 \u0627\u0644\u0636\u0631\u064a\u0628\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b"})]})]})]}),"security"===s&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Cs,{className:"text-blue-600"}),"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0623\u0645\u0627\u0646"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0645\u0647\u0644\u0629 \u0627\u0644\u062c\u0644\u0633\u0629 (\u0628\u0627\u0644\u062f\u0642\u0627\u0626\u0642)",name:"sessionTimeout",type:"number",value:c.sessionTimeout,onChange:h,placeholder:"30"}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0644\u0637\u0648\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",name:"passwordMinLength",type:"number",value:c.passwordMinLength,onChange:h,placeholder:"6"})]}),(0,Qe.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"requirePasswordChange",checked:c.requirePasswordChange,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u0637\u0644\u0628 \u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0634\u0643\u0644 \u062f\u0648\u0631\u064a (\u0643\u0644 90 \u064a\u0648\u0645)"})]}),(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"enableTwoFactor",checked:c.enableTwoFactor,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0645\u0635\u0627\u062f\u0642\u0629 \u0627\u0644\u062b\u0646\u0627\u0626\u064a\u0629 (2FA)"})]})]}),(0,Qe.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:(0,Qe.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,Qe.jsx)("strong",{children:"\u26a0\ufe0f \u062a\u062d\u0630\u064a\u0631:"})," \u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0641\u0638 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0623\u0645\u0627\u0646 \u0628\u0639\u0646\u0627\u064a\u0629. \u0642\u062f \u064a\u0624\u062f\u064a \u062a\u063a\u064a\u064a\u0631 \u0628\u0639\u0636 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0625\u0644\u0649 \u062a\u0633\u062c\u064a\u0644 \u062e\u0631\u0648\u062c \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646."]})})]}),"backup"===s&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Vt,{className:"text-blue-600"}),"\u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(ma,{label:"\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a",name:"backupFrequency",value:c.backupFrequency,onChange:h,options:[{value:"daily",label:"\u064a\u0648\u0645\u064a\u0627\u064b"},{value:"weekly",label:"\u0623\u0633\u0628\u0648\u0639\u064a\u0627\u064b"},{value:"monthly",label:"\u0634\u0647\u0631\u064a\u0627\u064b"}]}),(0,Qe.jsx)(da,{label:"\u0648\u0642\u062a \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a",name:"backupTime",type:"time",value:c.backupTime,onChange:h})]}),(0,Qe.jsx)("div",{className:"space-y-3 pt-4 border-t",children:(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,Qe.jsx)("input",{type:"checkbox",name:"autoBackup",checked:c.autoBackup,onChange:h,className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsx)("span",{className:"text-gray-700",children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a"})]})}),(0,Qe.jsxs)("div",{className:"mt-6 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h4",{className:"font-semibold text-gray-800 text-lg",children:"\u0627\u0644\u0646\u0633\u062e\u0629 \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0627\u0644\u064a\u062f\u0648\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:c.lastBackup?"\u0622\u062e\u0631 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629: ".concat(new Date(c.lastBackup).toLocaleString("ar-EG")):"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0628\u0639\u062f"})]}),(0,Qe.jsxs)(ra,{variant:"primary",onClick:()=>{const t={settings:c,timestamp:(new Date).toISOString(),version:"1.0"},s=JSON.stringify(t,null,2),a=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="bero-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r);const l=Be(Be({},c),{},{lastBackup:(new Date).toISOString()});d(l),localStorage.setItem(ur,JSON.stringify(l)),e("\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0646\u0633\u062e\u0629 \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0628\u0646\u062c\u0627\u062d")},children:[(0,Qe.jsx)(Vt,{className:"ml-2"}),"\u0625\u0646\u0634\u0627\u0621 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0627\u0644\u0622\u0646"]})]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u064a\u0645\u0643\u0646\u0643 \u0625\u0646\u0634\u0627\u0621 \u0646\u0633\u062e\u0629 \u0627\u062d\u062a\u064a\u0627\u0637\u064a\u0629 \u0645\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0641\u064a \u0623\u064a \u0648\u0642\u062a. \u0633\u064a\u062a\u0645 \u062a\u0646\u0632\u064a\u0644 \u0645\u0644\u0641 JSON \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u062c\u0645\u064a\u0639 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a."})]})]})]}),n&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 shadow-2xl",children:[(0,Qe.jsxs)("div",{className:"text-center mb-6",children:[(0,Qe.jsx)("div",{className:"mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4",children:(0,Qe.jsx)(Ss,{className:"text-3xl text-blue-600"})}),(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0623\u0643\u064a\u062f \u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a\u061f \u0633\u064a\u062a\u0645 \u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0639\u0644\u0649 \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644."})]}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)(ra,{variant:"secondary",fullWidth:!0,onClick:()=>l(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)(ra,{variant:"success",fullWidth:!0,onClick:()=>{try{localStorage.setItem(ur,JSON.stringify(c)),u(c),o(!1),l(!1),e("\u062a\u0645 \u062d\u0641\u0638 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(s){console.error("Error saving settings:",s),t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a")}},children:[(0,Qe.jsx)(Ss,{className:"ml-2"}),"\u062d\u0641\u0638"]})]})]})})]})},hr="bero_integrations_status",pr=()=>{const{showSuccess:e,showWarning:t}=Ke(),s=ee(),{isAdmin:a}=We(),[n,l]=(0,r.useState)({}),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)({apiKey:"",apiSecret:"",webhookUrl:"",enabled:!0}),m=[{id:"fatura",name:"\u0641\u0627\u062a\u0648\u0631\u0629",description:"\u0631\u0628\u0637 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0644\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629 \u0648\u0627\u0644\u0627\u0645\u062a\u062b\u0627\u0644 \u0627\u0644\u0636\u0631\u064a\u0628\u064a",icon:(0,Qe.jsx)(vt,{className:"text-blue-600"}),color:"blue",features:["\u0641\u0648\u0627\u062a\u064a\u0631 \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629","\u0631\u0628\u0637 \u0636\u0631\u064a\u0628\u064a","\u062a\u0642\u0627\u0631\u064a\u0631 \u062a\u0644\u0642\u0627\u0626\u064a\u0629"],page:"/additional-options/external-platforms"},{id:"kartona",name:"\u0643\u0631\u062a\u0648\u0646\u0629",description:"\u0631\u0628\u0637 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629 \u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u062a\u062a\u0628\u0639 \u0627\u0644\u0634\u062d\u0646\u0627\u062a",icon:(0,Qe.jsx)(vt,{className:"text-purple-600"}),color:"purple",features:["\u0625\u062f\u0627\u0631\u0629 \u0645\u062e\u0632\u0648\u0646","\u062a\u062a\u0628\u0639 \u0634\u062d\u0646\u0627\u062a","\u062a\u0643\u0627\u0645\u0644 \u0645\u062a\u0627\u062c\u0631"],page:"/additional-options/external-platforms"},{id:"whatsapp",name:"\u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644",description:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0648\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0648\u0627\u0644\u062a\u0630\u0643\u064a\u0631\u0627\u062a \u0639\u0628\u0631 \u0648\u0627\u062a\u0633\u0627\u0628 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b",icon:(0,Qe.jsx)(ct,{className:"text-green-600"}),color:"green",features:["\u0625\u0631\u0633\u0627\u0644 \u0641\u0648\u0627\u062a\u064a\u0631","\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u062a\u0644\u0642\u0627\u0626\u064a\u0629","\u062f\u0639\u0645 \u0639\u0645\u0644\u0627\u0621"],page:"/additional-options/whatsapp-business"},{id:"api",name:"API \u0627\u0644\u0645\u062e\u0635\u0635",description:"\u0631\u0628\u0637 \u0627\u0644\u0646\u0638\u0627\u0645 \u0645\u0639 \u062a\u0637\u0628\u064a\u0642\u0627\u062a\u0643 \u0627\u0644\u062e\u0627\u0635\u0629 \u0639\u0628\u0631 \u0648\u0627\u062c\u0647\u0629 \u0628\u0631\u0645\u062c\u064a\u0629",icon:(0,Qe.jsx)(vs,{className:"text-orange-600"}),color:"orange",features:["REST API","Webhooks","\u062a\u0643\u0627\u0645\u0644 \u0645\u062e\u0635\u0635"],page:null}];if((0,r.useEffect)(()=>{h()},[]),!a())return(0,Qe.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Qe.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Qe.jsx)("div",{className:"text-red-500 mb-4",children:(0,Qe.jsx)(us,{className:"mx-auto h-12 w-12"})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0645\u062f\u064a\u0631 \u0641\u0642\u0637"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0627\u0644\u062a\u0643\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629 \u0645\u062a\u0627\u062d\u0629 \u0644\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645 \u0641\u0642\u0637."}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\u062f\u0648\u0631\u0643 \u0627\u0644\u062d\u0627\u0644\u064a: \u063a\u064a\u0631 \u0645\u062f\u064a\u0631 - \u0645\u0637\u0644\u0648\u0628: admin"}),(0,Qe.jsx)("button",{onClick:()=>window.location.href="#/dashboard",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]})});const h=()=>{try{const e=localStorage.getItem(hr);if(e)l(JSON.parse(e));else{const e={};m.forEach(t=>{e[t.id]={connected:!1,lastSync:null,syncCount:0,status:"disconnected"}}),l(e),localStorage.setItem(hr,JSON.stringify(e))}}catch(e){console.error("Error loading integrations status:",e)}},p=e=>{d(e),o(!0);const t=localStorage.getItem("bero_integration_".concat(e.id,"_config"));u(t?JSON.parse(t):{apiKey:"",apiSecret:"",webhookUrl:"",enabled:!0})},g=e=>{const t=n[e];return t&&t.connected?(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:[(0,Qe.jsx)(_t,{})," \u0645\u062a\u0635\u0644"]}):(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-medium",children:[(0,Qe.jsx)(Ps,{})," \u063a\u064a\u0631 \u0645\u062a\u0635\u0644"]})},f=Object.values(n).filter(e=>e.connected).length,b=Object.values(n).reduce((e,t)=>e+(t.syncCount||0),0);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062a\u0643\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0643\u0627\u0645\u0644\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:m.length})]}),(0,Qe.jsx)(ds,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u062a\u0643\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u0635\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:f})]}),(0,Qe.jsx)(_t,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:b})]}),(0,Qe.jsx)(Ls,{className:"text-3xl opacity-75"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg p-4 text-white",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-xl font-bold",children:"\u0645\u0645\u062a\u0627\u0632"})]}),(0,Qe.jsx)(It,{className:"text-3xl opacity-75"})]})})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:m.map(t=>{const a=n[t.id],r=(null===a||void 0===a?void 0:a.connected)||!1;return(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"flex flex-col h-full",children:[(0,Qe.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"text-5xl",children:t.icon}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 text-lg",children:t.name}),g(t.id)]})]})}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),(0,Qe.jsx)("div",{className:"mb-4",children:(0,Qe.jsx)("div",{className:"flex flex-wrap gap-2",children:t.features.map((e,t)=>(0,Qe.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs",children:e},t))})}),r&&a.lastSync&&(0,Qe.jsxs)("div",{className:"mb-4 p-3 bg-green-50 rounded-lg text-sm",children:[(0,Qe.jsxs)("p",{className:"text-gray-700",children:[(0,Qe.jsx)("strong",{children:"\u0622\u062e\u0631 \u0645\u0632\u0627\u0645\u0646\u0629:"})," ",new Date(a.lastSync).toLocaleString("ar-EG")]}),(0,Qe.jsxs)("p",{className:"text-gray-700",children:[(0,Qe.jsx)("strong",{children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0627\u062a:"})," ",a.syncCount]})]}),(0,Qe.jsx)("div",{className:"mt-auto flex gap-2",children:r?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(ra,{variant:"primary",size:"sm",fullWidth:!0,onClick:()=>(t=>{var s;const a=Be(Be({},n),{},{[t]:Be(Be({},n[t]),{},{lastSync:(new Date).toISOString(),syncCount:((null===(s=n[t])||void 0===s?void 0:s.syncCount)||0)+1})});l(a),localStorage.setItem(hr,JSON.stringify(a)),e("\u062a\u0645\u062a \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0628\u0646\u062c\u0627\u062d")})(t.id),children:[(0,Qe.jsx)(Ls,{className:"ml-2"}),"\u0645\u0632\u0627\u0645\u0646\u0629"]}),(0,Qe.jsxs)(ra,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>p(t),children:[(0,Qe.jsx)(Ot,{className:"ml-2"}),"\u0625\u0639\u062f\u0627\u062f\u0627\u062a"]}),(0,Qe.jsx)(ra,{variant:"danger",size:"sm",fullWidth:!0,onClick:()=>(t=>{const s=Be(Be({},n),{},{[t]:Be(Be({},n[t]),{},{connected:!1,status:"disconnected"})});l(s),localStorage.setItem(hr,JSON.stringify(s)),e("\u062a\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0646\u062c\u0627\u062d")})(t.id),children:"\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"})]}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(ra,{variant:"primary",size:"sm",fullWidth:!0,onClick:()=>p(t),children:[(0,Qe.jsx)(ds,{className:"ml-2"}),"\u0631\u0628\u0637 \u0627\u0644\u0622\u0646"]}),t.page&&(0,Qe.jsx)(ra,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>s(t.page),children:"\u0627\u0644\u0645\u0632\u064a\u062f"})]})})]})},t.id)})}),(0,Qe.jsx)(aa,{title:"\u0625\u0631\u0634\u0627\u062f\u0627\u062a \u0627\u0644\u0631\u0628\u0637 \u0648\u0627\u0644\u062a\u0643\u0627\u0645\u0644",icon:(0,Qe.jsx)(ds,{}),children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)("span",{className:"bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm",children:"1"}),"\u0627\u062e\u062a\u0631 \u0627\u0644\u062a\u0643\u0627\u0645\u0644 \u0627\u0644\u0645\u0646\u0627\u0633\u0628"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mr-8",children:"\u062d\u062f\u062f \u0627\u0644\u0645\u0646\u0635\u0629 \u0623\u0648 \u0627\u0644\u062e\u062f\u0645\u0629 \u0627\u0644\u062a\u064a \u062a\u0631\u064a\u062f \u0631\u0628\u0637\u0647\u0627 \u0645\u0639 \u0646\u0638\u0627\u0645 Bero System \u062d\u0633\u0628 \u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a\u0643."})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)("span",{className:"bg-green-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm",children:"2"}),"\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0645\u0641\u0627\u062a\u064a\u062d API"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mr-8",children:"\u0633\u062c\u0644 \u0641\u064a \u0627\u0644\u0645\u0646\u0635\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0648\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0645\u0641\u0627\u062a\u064a\u062d API (API Key & Secret) \u0645\u0646 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0647\u0645."})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)("span",{className:"bg-purple-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm",children:"3"}),"\u0623\u062f\u062e\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0631\u0628\u0637"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mr-8",children:'\u0627\u0636\u063a\u0637 \u0639\u0644\u0649 "\u0631\u0628\u0637 \u0627\u0644\u0622\u0646" \u0648\u0623\u062f\u062e\u0644 \u0645\u0641\u0627\u062a\u064a\u062d API \u0648\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629\u060c \u062b\u0645 \u0641\u0639\u0651\u0644 \u0627\u0644\u062a\u0643\u0627\u0645\u0644.'})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-orange-50 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)("span",{className:"bg-orange-600 text-white w-6 h-6 rounded-full flex items-center justify-center text-sm",children:"4"}),"\u0627\u0628\u062f\u0623 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mr-8",children:"\u0628\u0639\u062f \u0627\u0644\u0631\u0628\u0637 \u0627\u0644\u0646\u0627\u062c\u062d\u060c \u0642\u0645 \u0628\u0623\u0648\u0644 \u0639\u0645\u0644\u064a\u0629 \u0645\u0632\u0627\u0645\u0646\u0629 \u0644\u0646\u0642\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u064a\u0646 \u0627\u0644\u0646\u0638\u0627\u0645\u064a\u0646."})]})]})}),i&&c&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998] p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full p-6 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Qe.jsx)("div",{className:"text-4xl",children:c.icon}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["\u0625\u0639\u062f\u0627\u062f\u0627\u062a ",c.name]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:c.description})]})]})}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)(da,{label:"\u0645\u0641\u062a\u0627\u062d API",name:"apiKey",value:x.apiKey,onChange:e=>u(Be(Be({},x),{},{apiKey:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0641\u062a\u0627\u062d API",required:!0}),(0,Qe.jsx)(da,{label:"API Secret (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"apiSecret",type:"password",value:x.apiSecret,onChange:e=>u(Be(Be({},x),{},{apiSecret:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 API Secret"}),(0,Qe.jsx)(da,{label:"Webhook URL (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"webhookUrl",value:x.webhookUrl,onChange:e=>u(Be(Be({},x),{},{webhookUrl:e.target.value})),placeholder:"https://..."}),(0,Qe.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer p-4 bg-gray-50 rounded-lg",children:[(0,Qe.jsx)("input",{type:"checkbox",checked:x.enabled,onChange:e=>u(Be(Be({},x),{},{enabled:e.target.checked})),className:"w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-800 font-medium",children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u062a\u0643\u0627\u0645\u0644"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0627\u0628\u062f\u0623 \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a\u0629 \u0641\u0648\u0631 \u0627\u0644\u062d\u0641\u0638"})]})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,Qe.jsx)(ra,{variant:"secondary",fullWidth:!0,onClick:()=>{o(!1),d(null)},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsxs)(ra,{variant:"success",fullWidth:!0,onClick:()=>{if(!x.apiKey||x.apiKey.length<10)t("\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0645\u0641\u062a\u0627\u062d API \u0635\u062d\u064a\u062d");else try{var s;localStorage.setItem("bero_integration_".concat(c.id,"_config"),JSON.stringify(x));const t=Be(Be({},n),{},{[c.id]:{connected:!0,lastSync:(new Date).toISOString(),syncCount:((null===(s=n[c.id])||void 0===s?void 0:s.syncCount)||0)+1,status:"connected"}});l(t),localStorage.setItem(hr,JSON.stringify(t)),o(!1),e("\u062a\u0645 \u0631\u0628\u0637 ".concat(c.name," \u0628\u0646\u062c\u0627\u062d"))}catch(a){t("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a")}},children:[(0,Qe.jsx)(_t,{className:"ml-2"}),"\u062d\u0641\u0638 \u0648\u0631\u0628\u0637"]})]})]})})]})},gr=()=>{const{showSuccess:e,showError:t}=Ke(),[s,a]=(0,r.useState)({fatooraApiKey:"",fatooraConnected:!1,fatooraConnectedAt:null,fatooraSyncCount:0,fatooraLastSync:null,kartonaApiKey:"",kartonaConnected:!1,kartonaConnectedAt:null,kartonaSyncCount:0,kartonaLastSync:null}),[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("bero_platform_credentials"),t=localStorage.getItem("bero_platform_activity_log");if(e)try{a(JSON.parse(e))}catch(s){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0646\u0635\u0627\u062a:",s)}if(t)try{l(JSON.parse(t))}catch(s){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0633\u062c\u0644 \u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a:",s)}},[]);const x=e=>{localStorage.setItem("bero_platform_credentials",JSON.stringify(e))},u=(e,t,s)=>{const a=[{id:Date.now(),platform:e,action:t,status:s,timestamp:(new Date).toISOString()},...n].slice(0,50);var r;l(a),r=a,localStorage.setItem("bero_platform_activity_log",JSON.stringify(r))},m=r=>{const n=(new Date).toISOString();if("fatoora"===r){if(!s.fatooraApiKey||s.fatooraApiKey.length<10)return void t("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0645\u0639\u0631\u0651\u0641 API \u0635\u062d\u064a\u062d (\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 10 \u0623\u062d\u0631\u0641)");const r=Be(Be({},s),{},{fatooraConnected:!0,fatooraConnectedAt:n});a(r),x(r),u("\u0641\u0627\u062a\u0648\u0631\u0629","\u0631\u0628\u0637","\u0646\u062c\u062d"),e("\u062a\u0645 \u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d \u2713")}else if("kartona"===r){if(!s.kartonaApiKey||s.kartonaApiKey.length<10)return void t("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0645\u0639\u0631\u0651\u0641 API \u0635\u062d\u064a\u062d (\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 10 \u0623\u062d\u0631\u0641)");const r=Be(Be({},s),{},{kartonaConnected:!0,kartonaConnectedAt:n});a(r),x(r),u("\u0643\u0631\u062a\u0648\u0646\u0629","\u0631\u0628\u0637","\u0646\u062c\u062d"),e("\u062a\u0645 \u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629 \u0628\u0646\u062c\u0627\u062d \u2713")}},h=e=>{d(e),o(!0)},p=t=>{const r=(new Date).toISOString();if("fatoora"===t){const t=Be(Be({},s),{},{fatooraSyncCount:s.fatooraSyncCount+1,fatooraLastSync:r});a(t),x(t),u("\u0641\u0627\u062a\u0648\u0631\u0629","\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","\u0646\u062c\u062d"),e("\u062a\u0645\u062a \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0639 \u0641\u0627\u062a\u0648\u0631\u0629 \u0628\u0646\u062c\u0627\u062d")}else if("kartona"===t){const t=Be(Be({},s),{},{kartonaSyncCount:s.kartonaSyncCount+1,kartonaLastSync:r});a(t),x(t),u("\u0643\u0631\u062a\u0648\u0646\u0629","\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a","\u0646\u062c\u062d"),e("\u062a\u0645\u062a \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0639 \u0643\u0631\u062a\u0648\u0646\u0629 \u0628\u0646\u062c\u0627\u062d")}},g=e=>e?new Date(e).toLocaleString("ar-EG"):"-",f=(s.fatooraConnected?1:0)+(s.kartonaConnected?1:0),b=s.fatooraSyncCount+s.kartonaSyncCount;return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0645\u0646\u0635\u0627\u062a \u062e\u0627\u0631\u062c\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u0627\u0644\u0645\u0646\u0635\u0627\u062a \u0627\u0644\u0645\u062a\u0635\u0644\u0629"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold text-gray-800",children:[f," / 2"]})]}),(0,Qe.jsx)(vt,{className:"text-4xl text-blue-600 opacity-60"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:b})]}),(0,Qe.jsx)(Ls,{className:"text-4xl text-green-600 opacity-60"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:n.length})]}),(0,Qe.jsx)(rs,{className:"text-4xl text-purple-600 opacity-60"})]})})]}),(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)(aa,{children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,Qe.jsx)(vt,{className:"text-3xl text-blue-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"\u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629 \u0648\u0627\u0644\u0636\u0631\u064a\u0628\u064a\u0629"})]})]}),(0,Qe.jsx)("div",{children:s.fatooraConnected?(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold",children:[(0,Qe.jsx)(Lt,{})," \u0645\u062a\u0635\u0644"]}):(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-600 rounded-lg font-semibold",children:[(0,Qe.jsx)(Ts,{})," \u063a\u064a\u0631 \u0645\u062a\u0635\u0644"]})})]}),s.fatooraConnected&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 p-4 bg-blue-50 rounded-lg",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0631\u0628\u0637"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:g(s.fatooraConnectedAt)})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:s.fatooraSyncCount})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0622\u062e\u0631 \u0645\u0632\u0627\u0645\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:g(s.fatooraLastSync)})]})]}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)(da,{label:"\u0645\u0639\u0631\u0651\u0641 API \u0627\u0644\u062e\u0627\u0635 \u0628\u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629",name:"fatooraApiKey",value:s.fatooraApiKey,onChange:e=>a(Be(Be({},s),{},{fatooraApiKey:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0639\u0631\u0651\u0641 API (\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 10 \u0623\u062d\u0631\u0641)",disabled:s.fatooraConnected,type:s.fatooraConnected?"password":"text"}),(0,Qe.jsx)("div",{className:"flex gap-3 flex-wrap",children:s.fatooraConnected?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(ra,{variant:"success",onClick:()=>p("fatoora"),icon:(0,Qe.jsx)(Ls,{}),children:"\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}),(0,Qe.jsx)(ra,{variant:"danger",onClick:()=>h("fatoora"),children:"\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"})]}):(0,Qe.jsx)(ra,{variant:"primary",onClick:()=>m("fatoora"),icon:(0,Qe.jsx)(ds,{}),children:"\u0631\u0628\u0637 \u0627\u0644\u0622\u0646"})})]}),s.fatooraConnected&&(0,Qe.jsx)("div",{className:"mt-4 p-4 bg-green-50 border-r-4 border-green-500 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qe.jsx)(Lt,{className:"text-green-600 text-xl flex-shrink-0 mt-0.5"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-green-800 mb-1",children:"\u062a\u0645 \u0627\u0644\u0631\u0628\u0637 \u0628\u0646\u062c\u0627\u062d!"}),(0,Qe.jsx)("p",{className:"text-sm text-green-700",children:"\u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0627\u0641\u0642\u0629 \u0645\u0639 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0647\u064a\u0626\u0629 \u0627\u0644\u0636\u0631\u064a\u0628\u064a\u0629 \u0645\u0628\u0627\u0634\u0631\u0629 \u0645\u0646 \u0627\u0644\u0646\u0638\u0627\u0645."})]})]})})]}),(0,Qe.jsxs)(aa,{children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"bg-purple-100 p-3 rounded-lg",children:(0,Qe.jsx)(vt,{className:"text-3xl text-purple-600"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"\u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u0627\u0644\u0637\u0644\u0628\u0627\u062a"})]})]}),(0,Qe.jsx)("div",{children:s.kartonaConnected?(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold",children:[(0,Qe.jsx)(Lt,{})," \u0645\u062a\u0635\u0644"]}):(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-600 rounded-lg font-semibold",children:[(0,Qe.jsx)(Ts,{})," \u063a\u064a\u0631 \u0645\u062a\u0635\u0644"]})})]}),s.kartonaConnected&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 p-4 bg-purple-50 rounded-lg",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0631\u0628\u0637"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:g(s.kartonaConnectedAt)})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0632\u0627\u0645\u0646\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:s.kartonaSyncCount})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0622\u062e\u0631 \u0645\u0632\u0627\u0645\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:g(s.kartonaLastSync)})]})]}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)(da,{label:"\u0645\u0639\u0631\u0651\u0641 API \u0627\u0644\u062e\u0627\u0635 \u0628\u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629",name:"kartonaApiKey",value:s.kartonaApiKey,onChange:e=>a(Be(Be({},s),{},{kartonaApiKey:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0639\u0631\u0651\u0641 API (\u0644\u0627 \u064a\u0642\u0644 \u0639\u0646 10 \u0623\u062d\u0631\u0641)",disabled:s.kartonaConnected,type:s.kartonaConnected?"password":"text"}),(0,Qe.jsx)("div",{className:"flex gap-3 flex-wrap",children:s.kartonaConnected?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(ra,{variant:"success",onClick:()=>p("kartona"),icon:(0,Qe.jsx)(Ls,{}),children:"\u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}),(0,Qe.jsx)(ra,{variant:"danger",onClick:()=>h("kartona"),children:"\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"})]}):(0,Qe.jsx)(ra,{variant:"primary",onClick:()=>m("kartona"),icon:(0,Qe.jsx)(ds,{}),children:"\u0631\u0628\u0637 \u0627\u0644\u0622\u0646"})})]}),s.kartonaConnected&&(0,Qe.jsx)("div",{className:"mt-4 p-4 bg-purple-50 border-r-4 border-purple-500 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qe.jsx)(Lt,{className:"text-purple-600 text-xl flex-shrink-0 mt-0.5"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-purple-800 mb-1",children:"\u062a\u0645 \u0627\u0644\u0631\u0628\u0637 \u0628\u0646\u062c\u0627\u062d!"}),(0,Qe.jsx)("p",{className:"text-sm text-purple-700",children:"\u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u0622\u0646 \u0645\u0632\u0627\u0645\u0646\u0629 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0648\u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0645\u0639 \u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0641\u064a \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0641\u0639\u0644\u064a."})]})]})})]}),n.length>0&&(0,Qe.jsx)(aa,{title:"\u0633\u062c\u0644 \u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629",icon:(0,Qe.jsx)(rs,{}),children:(0,Qe.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map(e=>(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("\u0646\u062c\u062d"===e.status?"bg-green-500":"bg-red-500")}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("p",{className:"text-sm font-semibold text-gray-800",children:[e.action," - \u0645\u0646\u0635\u0629 ",e.platform]}),(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:g(e.timestamp)})]})]}),(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("\u0646\u062c\u062d"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status})]},e.id))})}),(0,Qe.jsx)(aa,{title:"\u062f\u0644\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f \u0627\u0644\u0633\u0631\u064a\u0639",icon:(0,Qe.jsx)(It,{}),children:(0,Qe.jsx)("div",{className:"space-y-4",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)(vt,{className:"text-blue-600"}),"\u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629"]}),(0,Qe.jsxs)("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-2",children:[(0,Qe.jsxs)("li",{children:["\u0633\u062c\u0644 \u0641\u064a ",(0,Qe.jsx)("a",{href:"https://fatoora.sa",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"fatoora.sa"})]}),(0,Qe.jsx)("li",{children:"\u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u2192 API"}),(0,Qe.jsx)("li",{children:"\u0627\u0646\u0633\u062e \u0645\u0641\u062a\u0627\u062d API"}),(0,Qe.jsx)("li",{children:"\u0627\u0644\u0635\u0642\u0647 \u0623\u0639\u0644\u0627\u0647 \u0648\u0627\u0631\u0628\u0637"})]})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,Qe.jsxs)("h4",{className:"font-semibold text-gray-800 mb-2 flex items-center gap-2",children:[(0,Qe.jsx)(vt,{className:"text-purple-600"}),"\u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629"]}),(0,Qe.jsxs)("ol",{className:"list-decimal list-inside text-sm text-gray-700 space-y-2",children:[(0,Qe.jsxs)("li",{children:["\u0633\u062c\u0644 \u0641\u064a ",(0,Qe.jsx)("a",{href:"https://kartona.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 underline",children:"kartona.com"})]}),(0,Qe.jsx)("li",{children:"\u0627\u0641\u062a\u062d \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u2192 \u0645\u0641\u0627\u062a\u064a\u062d API"}),(0,Qe.jsx)("li",{children:"\u0623\u0646\u0634\u0626 \u0645\u0641\u062a\u0627\u062d\u0627\u064b \u062c\u062f\u064a\u062f\u0627\u064b"}),(0,Qe.jsx)("li",{children:"\u0627\u0644\u0635\u0642\u0647 \u0623\u0639\u0644\u0627\u0647 \u0648\u0627\u0631\u0628\u0637"})]})]})]})})})]}),i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-yellow-100 rounded-full p-4",children:(0,Qe.jsx)(Xt,{className:"text-4xl text-yellow-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0623\u0643\u064a\u062f \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4 border border-yellow-200",children:[(0,Qe.jsxs)("p",{className:"text-gray-700 text-center",children:["\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0639 \u0645\u0646\u0635\u0629 ",(0,Qe.jsx)("span",{className:"font-bold",children:"fatoora"===c?"\u0641\u0627\u062a\u0648\u0631\u0629":"\u0643\u0631\u062a\u0648\u0646\u0629"}),"\u061f"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 text-center mt-2",children:"\u0633\u064a\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f \u0627\u0644\u0645\u062d\u0641\u0648\u0638\u0629"})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)("button",{onClick:()=>{const t=c;if("fatoora"===t){const t=Be(Be({},s),{},{fatooraApiKey:"",fatooraConnected:!1,fatooraConnectedAt:null});a(t),x(t),u("\u0641\u0627\u062a\u0648\u0631\u0629","\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644","\u0646\u062c\u062d"),e("\u062a\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0641\u0627\u062a\u0648\u0631\u0629")}else if("kartona"===t){const t=Be(Be({},s),{},{kartonaApiKey:"",kartonaConnected:!1,kartonaConnectedAt:null});a(t),x(t),u("\u0643\u0631\u062a\u0648\u0646\u0629","\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644","\u0646\u062c\u062d"),e("\u062a\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0639 \u0645\u0646\u0635\u0629 \u0643\u0631\u062a\u0648\u0646\u0629")}o(!1),d(null)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0646\u0639\u0645\u060c \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("button",{onClick:()=>{o(!1),d(null)},className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},fr=()=>{const{showSuccess:e,showError:t}=Ke(),[s,a]=(0,r.useState)({phoneNumber:"",apiKey:"",apiSecret:"",businessName:"",isConnected:!1,connectedAt:null,autoSendInvoices:!1,autoSendNotifications:!0,messagesSent:0,lastMessageDate:null}),[n,l]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=localStorage.getItem("bero_whatsapp_settings"),t=localStorage.getItem("bero_whatsapp_activity_log");if(e)try{a(JSON.parse(e))}catch(s){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0648\u0627\u062a\u0633\u0627\u0628:",s)}if(t)try{l(JSON.parse(t))}catch(s){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0633\u062c\u0644 \u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a:",s)}},[]);const x=e=>{localStorage.setItem("bero_whatsapp_settings",JSON.stringify(e))},u=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const a=[{id:Date.now(),action:e,status:t,details:s,timestamp:(new Date).toISOString()},...n].slice(0,50);var r;l(a),r=a,localStorage.setItem("bero_whatsapp_activity_log",JSON.stringify(r))},m=e=>{const{name:t,value:r,type:n,checked:l}=e.target,i=Be(Be({},s),{},{[t]:"checkbox"===n?l:r});a(i),s.isConnected&&x(i)},h=e=>e?new Date(e).toLocaleString("ar-EG"):"-";return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,Qe.jsx)(aa,{className:"".concat(s.isConnected?"bg-gradient-to-br from-green-50 to-green-100 border-green-200":"bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200"),children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:s.isConnected?"\u0645\u062a\u0635\u0644":"\u063a\u064a\u0631 \u0645\u062a\u0635\u0644"})]}),(0,Qe.jsx)(ct,{className:"text-4xl ".concat(s.isConnected?"text-green-600":"text-gray-400"," opacity-60")})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0631\u0633\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:s.messagesSent})]}),(0,Qe.jsx)(gs,{className:"text-4xl text-blue-600 opacity-60"})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:n.length})]}),(0,Qe.jsx)(rs,{className:"text-4xl text-purple-600 opacity-60"})]})})]}),(0,Qe.jsxs)(aa,{children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b mb-4",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-lg ".concat(s.isConnected?"bg-green-100":"bg-gray-100"),children:(0,Qe.jsx)(ct,{className:"text-4xl ".concat(s.isConnected?"text-green-600":"text-gray-400")})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"\u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644 API"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:s.isConnected?"\u0645\u062a\u0635\u0644 \u0645\u0646\u0630 ".concat(h(s.connectedAt)):"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0648\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0644\u0639\u0645\u0644\u0627\u0626\u0643"})]})]}),(0,Qe.jsx)("div",{children:s.isConnected?(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg font-semibold",children:[(0,Qe.jsx)(Lt,{})," \u0645\u062a\u0635\u0644"]}):(0,Qe.jsxs)("span",{className:"flex items-center gap-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg font-semibold",children:[(0,Qe.jsx)(Ts,{})," \u063a\u064a\u0631 \u0645\u062a\u0635\u0644"]})})]}),s.isConnected&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 p-4 bg-green-50 rounded-lg",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:s.phoneNumber})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u0644"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:s.businessName||"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-xs text-gray-600",children:"\u0622\u062e\u0631 \u0631\u0633\u0627\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:h(s.lastMessageDate)})]})]})]}),(0,Qe.jsx)(aa,{title:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0631\u0628\u0637",icon:(0,Qe.jsx)(cs,{}),className:"mt-6",children:(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsx)(da,{label:"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0639\u0645\u0644",name:"phoneNumber",value:s.phoneNumber,onChange:m,placeholder:"+964XXXXXXXXXX",icon:(0,Qe.jsx)(bs,{}),disabled:s.isConnected,required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0633\u0645 \u0627\u0644\u0639\u0645\u0644",name:"businessName",value:s.businessName,onChange:m,placeholder:"\u0627\u0633\u0645 \u0634\u0631\u0643\u062a\u0643",disabled:s.isConnected}),(0,Qe.jsx)(da,{label:"\u0645\u0641\u062a\u0627\u062d API",name:"apiKey",value:s.apiKey,onChange:m,placeholder:"\u0623\u062f\u062e\u0644 \u0645\u0641\u062a\u0627\u062d API (20 \u062d\u0631\u0641\u0627\u064b \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644)",icon:(0,Qe.jsx)(cs,{}),disabled:s.isConnected,type:s.isConnected?"password":"text",required:!0}),(0,Qe.jsx)(da,{label:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0633\u0631\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",name:"apiSecret",type:"password",value:s.apiSecret,onChange:m,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0633\u0631\u064a",disabled:s.isConnected})]}),(0,Qe.jsx)("div",{className:"flex gap-3 flex-wrap",children:s.isConnected?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(ra,{variant:"primary",onClick:()=>{s.isConnected?d(!0):t("\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0648\u0627\u062a\u0633\u0627\u0628 \u0623\u0648\u0644\u0627\u064b")},icon:(0,Qe.jsx)(gs,{}),children:"\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629"}),(0,Qe.jsx)(ra,{variant:"danger",onClick:()=>{o(!0)},children:"\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"})]}):(0,Qe.jsx)(ra,{variant:"success",onClick:()=>{if(!s.phoneNumber||!s.apiKey)return void t("\u0627\u0644\u0631\u062c\u0627\u0621 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");if(r=s.phoneNumber,!/^\+964\d{10}$/.test(r))return void t("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0635\u062d\u064a\u062d \u0628\u0635\u064a\u063a\u0629: +964XXXXXXXXXX");var r;if(s.apiKey.length<20)return void t("\u0645\u0641\u062a\u0627\u062d API \u063a\u064a\u0631 \u0635\u062d\u064a\u062d (\u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 20 \u062d\u0631\u0641\u0627\u064b \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644)");const n=(new Date).toISOString(),l=Be(Be({},s),{},{isConnected:!0,connectedAt:n});a(l),x(l),u("\u0631\u0628\u0637 \u0627\u0644\u062d\u0633\u0627\u0628","\u0646\u062c\u062d","\u0627\u0644\u0647\u0627\u062a\u0641: ".concat(s.phoneNumber)),e("\u062a\u0645 \u0627\u0644\u0631\u0628\u0637 \u0645\u0639 \u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644 \u0628\u0646\u062c\u0627\u062d \u2713")},icon:(0,Qe.jsx)(ct,{}),children:"\u0631\u0628\u0637 \u0648\u0627\u062a\u0633\u0627\u0628"})})]})}),s.isConnected&&(0,Qe.jsx)(aa,{title:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a\u0629",icon:(0,Qe.jsx)(It,{}),className:"mt-6",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u0631\u0633\u0627\u0644 \u0646\u0633\u062e\u0629 \u0645\u0646 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0644\u0644\u0639\u0645\u064a\u0644 \u0639\u0628\u0631 \u0648\u0627\u062a\u0633\u0627\u0628 \u0641\u0648\u0631 \u0625\u0635\u062f\u0627\u0631\u0647\u0627"})]}),(0,Qe.jsx)("input",{type:"checkbox",name:"autoSendInvoices",checked:s.autoSendInvoices,onChange:m,className:"w-5 h-5 text-green-600 rounded focus:ring-2 focus:ring-green-500"})]}),(0,Qe.jsxs)("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold text-gray-800",children:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u0631\u0633\u0627\u0644 \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0647\u0645\u0629 (\u0646\u0642\u0635 \u0627\u0644\u0645\u062e\u0632\u0648\u0646\u060c \u062a\u0646\u0628\u064a\u0647\u0627\u062a) \u0639\u0628\u0631 \u0648\u0627\u062a\u0633\u0627\u0628"})]}),(0,Qe.jsx)("input",{type:"checkbox",name:"autoSendNotifications",checked:s.autoSendNotifications,onChange:m,className:"w-5 h-5 text-green-600 rounded focus:ring-2 focus:ring-green-500"})]})]})}),n.length>0&&(0,Qe.jsx)(aa,{title:"\u0633\u062c\u0644 \u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629",icon:(0,Qe.jsx)(rs,{}),className:"mt-6",children:(0,Qe.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:n.map(e=>(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Qe.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("\u0646\u062c\u062d"===e.status?"bg-green-500":"bg-red-500")}),(0,Qe.jsxs)("div",{className:"flex-1",children:[(0,Qe.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:e.action}),e.details&&(0,Qe.jsx)("p",{className:"text-xs text-gray-500",children:e.details}),(0,Qe.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:h(e.timestamp)})]})]}),(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat("\u0646\u062c\u062d"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.status})]},e.id))})}),(0,Qe.jsx)(aa,{title:"\u062f\u0644\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f \u0627\u0644\u0643\u0627\u0645\u0644",icon:(0,Qe.jsx)(os,{}),className:"mt-6",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"p-4 bg-green-50 border-r-4 border-green-500 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0627\u0644\u062e\u0637\u0648\u0629 1: \u0625\u0646\u0634\u0627\u0621 \u062d\u0633\u0627\u0628 \u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-700",children:["\u0642\u0645 \u0628\u0632\u064a\u0627\u0631\u0629 ",(0,Qe.jsx)("a",{href:"https://business.whatsapp.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline hover:text-blue-800",children:"business.whatsapp.com"})," \u0648\u0623\u0646\u0634\u0626 \u062d\u0633\u0627\u0628\u0627\u064b \u062c\u062f\u064a\u062f\u0627\u064b \u0644\u0639\u0645\u0644\u0643."]})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-green-50 border-r-4 border-green-500 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0627\u0644\u062e\u0637\u0648\u0629 2: \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a WhatsApp Business API"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"\u0633\u062c\u0651\u0644 \u0641\u064a \u062e\u062f\u0645\u0629 WhatsApp Business API \u0645\u0646 \u062e\u0644\u0627\u0644 \u0645\u0648\u0641\u0631 \u0645\u0639\u062a\u0645\u062f:"}),(0,Qe.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mr-4",children:[(0,Qe.jsx)("li",{children:(0,Qe.jsx)("a",{href:"https://www.twilio.com/whatsapp",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"Twilio"})}),(0,Qe.jsx)("li",{children:(0,Qe.jsx)("a",{href:"https://www.messagebird.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"MessageBird"})}),(0,Qe.jsx)("li",{children:(0,Qe.jsx)("a",{href:"https://www.360dialog.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"360Dialog"})})]})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-green-50 border-r-4 border-green-500 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0627\u0644\u062e\u0637\u0648\u0629 3: \u0627\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"\u0628\u0639\u062f \u0627\u0644\u062a\u0633\u062c\u064a\u0644\u060c \u0633\u062a\u062d\u0635\u0644 \u0639\u0644\u0649:"}),(0,Qe.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1 mr-4",children:[(0,Qe.jsx)("li",{children:"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0639\u0645\u0644 \u0628\u0635\u064a\u063a\u0629 \u062f\u0648\u0644\u064a\u0629 (+964XXXXXXXXXX)"}),(0,Qe.jsx)("li",{children:"\u0645\u0641\u062a\u0627\u062d API (Access Token)"}),(0,Qe.jsx)("li",{children:"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0633\u0631\u064a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a \u062d\u0633\u0628 \u0627\u0644\u0645\u0632\u0648\u062f)"})]})]}),(0,Qe.jsxs)("div",{className:"p-4 bg-green-50 border-r-4 border-green-500 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0627\u0644\u062e\u0637\u0648\u0629 4: \u0627\u0644\u0631\u0628\u0637 \u0648\u0627\u0644\u0627\u062e\u062a\u0628\u0627\u0631"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700",children:'\u0623\u062f\u062e\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0641\u064a \u0627\u0644\u062d\u0642\u0648\u0644 \u0623\u0639\u0644\u0627\u0647\u060c \u0627\u0636\u063a\u0637 "\u0631\u0628\u0637 \u0648\u0627\u062a\u0633\u0627\u0628"\u060c \u062b\u0645 "\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629" \u0644\u0644\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u0627\u062a\u0635\u0627\u0644.'})]})]})}),(0,Qe.jsx)(aa,{className:"mt-6 bg-yellow-50 border border-yellow-200",children:(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsx)(Xt,{className:"text-yellow-600 text-xl flex-shrink-0 mt-1"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0645\u0647\u0645\u0629:"}),(0,Qe.jsxs)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:[(0,Qe.jsx)("li",{children:"\u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u062d\u0633\u0627\u0628 \u0648\u0627\u062a\u0633\u0627\u0628 \u0623\u0639\u0645\u0627\u0644 \u0645\u0639\u062a\u0645\u062f (WhatsApp Business API) \u0648\u0644\u064a\u0633 \u0627\u0644\u062a\u0637\u0628\u064a\u0642 \u0627\u0644\u0639\u0627\u062f\u064a"}),(0,Qe.jsx)("li",{children:"\u0642\u062f \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u062f\u0641\u0639 \u0631\u0633\u0648\u0645 \u0644\u0644\u0645\u0648\u0641\u0631 \u062d\u0633\u0628 \u0639\u062f\u062f \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0645\u0631\u0633\u0644\u0629 \u0634\u0647\u0631\u064a\u0627\u064b"}),(0,Qe.jsx)("li",{children:"\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0645\u062a\u062b\u0627\u0644\u0643 \u0644\u0633\u064a\u0627\u0633\u0627\u062a \u0648\u0627\u062a\u0633\u0627\u0628 \u0644\u0644\u0623\u0639\u0645\u0627\u0644 \u0648\u0639\u062f\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0626\u0644 \u063a\u064a\u0631 \u0645\u0631\u063a\u0648\u0628 \u0628\u0647\u0627"}),(0,Qe.jsx)("li",{children:"\u0627\u062d\u062a\u0641\u0638 \u0628\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f (API Keys) \u0641\u064a \u0645\u0643\u0627\u0646 \u0622\u0645\u0646 \u0648\u0644\u0627 \u062a\u0634\u0627\u0631\u0643\u0647\u0627 \u0645\u0639 \u0623\u062d\u062f"}),(0,Qe.jsx)("li",{children:"\u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a\u0629 \u062a\u064f\u0631\u0633\u0644 \u0641\u0642\u0637 \u0639\u0646\u062f \u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u062e\u064a\u0627\u0631\u0627\u062a \u0623\u0639\u0644\u0627\u0647"})]})]})]})}),i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-red-100 rounded-full p-4",children:(0,Qe.jsx)(Xt,{className:"text-4xl text-red-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u062a\u0623\u0643\u064a\u062f \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4 border border-yellow-200",children:[(0,Qe.jsx)("p",{className:"text-gray-700 text-center mb-2",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0639 \u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644\u061f"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"\u0633\u064a\u062a\u0645 \u062d\u0630\u0641 \u062c\u0645\u064a\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f \u0648\u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0644\u0644\u0631\u0633\u0627\u0626\u0644"})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsx)("button",{onClick:()=>{const t={phoneNumber:"",apiKey:"",apiSecret:"",businessName:"",isConnected:!1,connectedAt:null,autoSendInvoices:!1,autoSendNotifications:!0,messagesSent:0,lastMessageDate:null};a(t),x(t),u("\u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644","\u0646\u062c\u062d"),e("\u062a\u0645 \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0645\u0639 \u0648\u0627\u062a\u0633\u0627\u0628 \u0627\u0644\u0623\u0639\u0645\u0627\u0644"),o(!1)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0646\u0639\u0645\u060c \u0642\u0637\u0639 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),c&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9998]",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,Qe.jsx)("div",{className:"flex items-center justify-center mb-4",children:(0,Qe.jsx)("div",{className:"bg-blue-100 rounded-full p-4",children:(0,Qe.jsx)(gs,{className:"text-4xl text-blue-600"})})}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 text-center",children:"\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-4 border border-blue-200",children:[(0,Qe.jsx)("p",{className:"text-gray-700 text-center mb-2",children:"\u0633\u064a\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 \u0625\u0644\u0649 \u0627\u0644\u0631\u0642\u0645:"}),(0,Qe.jsx)("p",{className:"text-center font-bold text-lg text-blue-600",children:s.phoneNumber}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 text-center mt-2",children:'\u0627\u0644\u0631\u0633\u0627\u0644\u0629: "\u0645\u0631\u062d\u0628\u0627\u064b! \u0647\u0630\u0647 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 \u0645\u0646 \u0646\u0638\u0627\u0645 \u0628\u064a\u0631\u0648"'})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsxs)("button",{onClick:()=>{const t=(new Date).toISOString(),r=Be(Be({},s),{},{messagesSent:s.messagesSent+1,lastMessageDate:t});a(r),x(r),u("\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629","\u0646\u062c\u062d","\u0625\u0644\u0649: ".concat(s.phoneNumber)),e("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u062c\u0631\u064a\u0628\u064a\u0629 \u0628\u0646\u062c\u0627\u062d \u2713"),d(!1)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[(0,Qe.jsx)(gs,{}),"\u0625\u0631\u0633\u0627\u0644"]}),(0,Qe.jsx)("button",{onClick:()=>d(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},br=()=>{const e=[{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0648\u0646",icon:(0,Qe.jsx)("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),color:"from-blue-500 to-blue-600",reports:[{name:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062c\u0631\u062f",path:"/reports/inventory",description:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0648\u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u0641\u064a \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"},{name:"\u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u0623\u0635\u0646\u0627\u0641",path:"/reports/product-movement",description:"\u062a\u062a\u0628\u0639 \u062d\u0631\u0643\u0629 \u062f\u062e\u0648\u0644 \u0648\u062e\u0631\u0648\u062c \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0645\u062d\u062f\u062f\u0629"},{name:"\u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u0623\u0642\u0644 \u0645\u0646 \u062d\u062f \u0627\u0644\u0637\u0644\u0628",path:"/reports/low-stock",description:"\u0639\u0631\u0636 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u062a\u064a \u0648\u0635\u0644\u062a \u0644\u062d\u062f \u0627\u0644\u0637\u0644\u0628 \u0623\u0648 \u0623\u0642\u0644"}]},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",icon:(0,Qe.jsx)("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),color:"from-green-500 to-green-600",reports:[{name:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",path:"/reports/sales",description:"\u062a\u0642\u0631\u064a\u0631 \u0634\u0627\u0645\u0644 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629"},{name:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0639\u0645\u064a\u0644",path:"/reports/sales-by-customer",description:"\u062a\u062d\u0644\u064a\u0644 \u0645\u0628\u064a\u0639\u0627\u062a \u0643\u0644 \u0639\u0645\u064a\u0644 \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644\u0629"},{name:"\u0623\u0641\u0636\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0645\u0628\u064a\u0639\u0627\u064b",path:"/reports/top-selling",description:"\u062a\u0631\u062a\u064a\u0628 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0628\u0627\u0639\u0629"}]},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",icon:(0,Qe.jsx)("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),color:"from-purple-500 to-purple-600",reports:[{name:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",path:"/reports/purchases",description:"\u062a\u0642\u0631\u064a\u0631 \u0634\u0627\u0645\u0644 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629"},{name:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0648\u0631\u062f",path:"/reports/purchases-by-supplier",description:"\u062a\u062d\u0644\u064a\u0644 \u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0643\u0644 \u0645\u0648\u0631\u062f \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629"}]},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",icon:(0,Qe.jsx)("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),color:"from-yellow-500 to-yellow-600",reports:[{name:"\u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",path:"/reports/treasury",description:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0642\u0628\u0648\u0636\u0627\u062a \u0648\u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629"},{name:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629",path:"/reports/cash-flow",description:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629 \u0627\u0644\u062f\u0627\u062e\u0644\u0629 \u0648\u0627\u0644\u062e\u0627\u0631\u062c\u0629"}]},{title:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0645\u0627\u0644\u064a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-12 h-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),color:"from-red-500 to-red-600",reports:[{name:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631",path:"/reports/profit-loss",description:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631 \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629"}]}];return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,Qe.jsxs)("div",{className:"text-center mb-8",children:[(0,Qe.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-3",children:"\ud83d\udcca \u0645\u0631\u0643\u0632 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0648\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-600 text-lg",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0634\u0627\u0645\u0644\u0629 \u0648\u0645\u062a\u0642\u062f\u0645\u0629 \u0644\u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0645\u0639 \u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0648\u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0629"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-blue-100 text-sm",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:"3"})]}),(0,Qe.jsx)("svg",{className:"w-8 h-8 opacity-80",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-4 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-green-100 text-sm",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:"3"})]}),(0,Qe.jsx)("svg",{className:"w-8 h-8 opacity-80",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-4 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-purple-100 text-sm",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:"2"})]}),(0,Qe.jsx)("svg",{className:"w-8 h-8 opacity-80",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-4 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-orange-100 text-sm",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0645\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold",children:"2"})]}),(0,Qe.jsxs)("svg",{className:"w-8 h-8 opacity-80",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,Qe.jsx)("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),(0,Qe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]})]})})]})]}),(0,Qe.jsx)("div",{className:"space-y-8",children:e.map((e,t)=>(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r ".concat(e.color," p-6 text-white"),children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"bg-white bg-opacity-20 p-3 rounded-xl",children:e.icon}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h2",{className:"text-2xl font-bold",children:e.title}),(0,Qe.jsxs)("p",{className:"text-white opacity-90 text-sm mt-1",children:[e.reports.length," \u062a\u0642\u0631\u064a\u0631 \u0645\u062a\u0627\u062d"]})]})]})}),(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.reports.map((t,s)=>(0,Qe.jsxs)(Me,{to:t.path,className:"group block p-6 bg-gray-50 hover:bg-gray-100 rounded-xl transition-all duration-200 border border-gray-200 hover:border-gray-300 hover:shadow-md",children:[(0,Qe.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br ".concat(e.color," text-white flex items-center justify-center"),children:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("h3",{className:"font-bold text-gray-800 group-hover:text-gray-900",children:t.name})})]}),(0,Qe.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600 transform group-hover:translate-x-1 transition-all",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),(0,Qe.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.description})]},s))})})]},t))}),(0,Qe.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-6 mt-8",children:(0,Qe.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-500 text-white p-2 rounded-lg",children:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Qe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-blue-800 font-semibold mb-2",children:"\ud83d\udca1 \u0646\u0635\u0627\u0626\u062d \u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"}),(0,Qe.jsxs)("ul",{className:"text-blue-700 text-sm space-y-1",children:[(0,Qe.jsx)("li",{children:"\u2022 \u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0641\u0644\u0627\u062a\u0631 \u0644\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"}),(0,Qe.jsx)("li",{children:"\u2022 \u064a\u0645\u0643\u0646\u0643 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0628\u0635\u064a\u063a\u0629 CSV \u0623\u0648 \u0637\u0628\u0627\u0639\u062a\u0647\u0627"}),(0,Qe.jsx)("li",{children:"\u2022 \u0631\u0627\u062c\u0639 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0628\u0627\u0646\u062a\u0638\u0627\u0645 \u0644\u0645\u062a\u0627\u0628\u0639\u0629 \u0623\u062f\u0627\u0621 \u0627\u0644\u0639\u0645\u0644"})]})]})]})})]})})},vr=()=>{const{products:e,warehouses:t}=Ye(),[s,a]=(0,r.useState)("all"),[n,l]=(0,r.useState)("all"),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)({totalProducts:0,totalValue:0,totalQuantity:0,lowStockItems:0});(0,r.useEffect)(()=>{m()},[e,s,n,i]);const m=()=>{let a=[];e.forEach(e=>{if("all"===s){let r=0;t.forEach(t=>{var s;const a=(null===(s=e.stock)||void 0===s?void 0:s[t.id])||0;r+=a}),(r>0||"all"===s)&&a.push(Be(Be({},e),{},{currentStock:r,warehouse:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646",value:r*(e.price||0)}))}else{var r;const n=(null===(r=e.stock)||void 0===r?void 0:r[s])||0,l=t.find(e=>e.id===s);a.push(Be(Be({},e),{},{currentStock:n,warehouse:(null===l||void 0===l?void 0:l.name)||"",value:n*(e.price||0)}))}}),"all"!==n&&(a=a.filter(e=>e.category===n)),i&&(a=a.filter(e=>{var t;return e.name.toLowerCase().includes(i.toLowerCase())||(null===(t=e.barcode)||void 0===t?void 0:t.includes(i))}));const r=a.length,l=a.reduce((e,t)=>e+t.value,0),o=a.reduce((e,t)=>e+t.currentStock,0),c=a.filter(e=>e.currentStock<=(e.minStock||0)).length;d(a),u({totalProducts:r,totalValue:l,totalQuantity:o,lowStockItems:c})},h=[...new Set(e.map(e=>e.category))].filter(Boolean);return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062c\u0631\u062f",subtitle:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0648\u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629 \u0641\u064a \u0627\u0644\u0645\u062e\u0627\u0632\u0646",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=c.map(e=>[e.barcode||"-",e.name,e.category||"-",e.warehouse,e.currentStock,(e.price||0).toFixed(2),(e.value||0).toFixed(2)]);let t=["\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f","\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641","\u0627\u0644\u0641\u0626\u0629","\u0627\u0644\u0645\u062e\u0632\u0646","\u0627\u0644\u0643\u0645\u064a\u0629","\u0627\u0644\u0633\u0639\u0631","\u0627\u0644\u0642\u064a\u0645\u0629"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="inventory_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0635\u0646\u0627\u0641"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-2",children:x.totalProducts})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0643\u0645\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-2",children:x.totalQuantity})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[x.totalValue.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0623\u0635\u0646\u0627\u0641 \u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062d\u062f"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-2",children:x.lowStockItems})]})})]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),h.map(e=>(0,Qe.jsx)("option",{value:e,children:e},e))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0641\u0626\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0633\u0639\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.barcode||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.category||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.warehouse}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.currentStock}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[(e.price||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[(e.value||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.currentStock<=(e.minStock||0)?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"\u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062d\u062f"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"\u0645\u062a\u0648\u0641\u0631"})})]},t))})]}),0===c.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},jr=()=>{const{products:e,salesInvoices:t,purchaseInvoices:s,warehouses:a}=Ye(),[n,l]=(0,r.useState)("all"),[i,o]=(0,r.useState)("all"),[c,d]=(0,r.useState)(""),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)([]);(0,r.useEffect)(()=>{p()},[n,i,c,x]);const p=()=>{let r=[];null===t||void 0===t||t.forEach(t=>{var s;const l=new Date(t.date);c&&l<new Date(c)||x&&l>new Date(x)||null===(s=t.items)||void 0===s||s.forEach(s=>{if("all"!==n&&s.productId!==n)return;if("all"!==i&&t.warehouseId!==i)return;const l=e.find(e=>e.id===s.productId),o=a.find(e=>e.id===t.warehouseId);r.push({date:t.date,productName:(null===l||void 0===l?void 0:l.name)||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",type:"\u062e\u0631\u0648\u062c",quantity:-s.quantity,warehouse:(null===o||void 0===o?void 0:o.name)||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",reference:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0628\u064a\u0639\u0627\u062a #".concat(t.id),notes:t.notes||"-"})})}),null===s||void 0===s||s.forEach(t=>{var s;const l=new Date(t.date);c&&l<new Date(c)||x&&l>new Date(x)||null===(s=t.items)||void 0===s||s.forEach(s=>{if("all"!==n&&s.productId!==n)return;if("all"!==i&&t.warehouseId!==i)return;const l=e.find(e=>e.id===s.productId),o=a.find(e=>e.id===t.warehouseId);r.push({date:t.date,productName:(null===l||void 0===l?void 0:l.name)||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",type:"\u062f\u062e\u0648\u0644",quantity:s.quantity,warehouse:(null===o||void 0===o?void 0:o.name)||"\u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",reference:"\u0641\u0627\u062a\u0648\u0631\u0629 \u0645\u0634\u062a\u0631\u064a\u0627\u062a #".concat(t.id),notes:t.notes||"-"})})}),r.sort((e,t)=>new Date(t.date)-new Date(e.date)),h(r)};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u0623\u0635\u0646\u0627\u0641",subtitle:"\u062a\u062a\u0628\u0639 \u062d\u0631\u0643\u0629 \u062f\u062e\u0648\u0644 \u0648\u062e\u0631\u0648\u062c \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0645\u062d\u062f\u062f\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=m.map(e=>[e.date,e.productName,e.type,e.quantity,e.warehouse,e.reference,e.notes]);let t=["\u0627\u0644\u062a\u0627\u0631\u064a\u062e","\u0627\u0644\u0635\u0646\u0641","\u0627\u0644\u0646\u0648\u0639","\u0627\u0644\u0643\u0645\u064a\u0629","\u0627\u0644\u0645\u062e\u0632\u0646","\u0627\u0644\u0645\u0631\u062c\u0639","\u0645\u0644\u0627\u062d\u0638\u0627\u062a"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="product_movement_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0635\u0646\u0641"}),(0,Qe.jsxs)("select",{value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0646\u0627\u0641"}),e.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),a.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:x,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0635\u0646\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0631\u062c\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"\u062f\u062e\u0648\u0644"===e.type?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"\u062f\u062e\u0648\u0644"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"\u062e\u0631\u0648\u062c"})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat(e.quantity>0?"text-green-600":"text-red-600"),children:Math.abs(e.quantity)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.warehouse}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.notes})]},t))})]}),0===m.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},yr=()=>{const{products:e,warehouses:t}=Ye(),[s,a]=(0,r.useState)("all"),[n,l]=(0,r.useState)([]);(0,r.useEffect)(()=>{i()},[e,s]);const i=()=>{let a=[];e.forEach(e=>{if("all"===s)t.forEach(t=>{var s;const r=(null===(s=e.stock)||void 0===s?void 0:s[t.id])||0,n=e.minStock||0;r<=n&&a.push(Be(Be({},e),{},{currentStock:r,warehouse:t.name,deficit:n-r}))});else{var r;const n=(null===(r=e.stock)||void 0===r?void 0:r[s])||0,l=e.minStock||0;if(n<=l){const r=t.find(e=>e.id===s);a.push(Be(Be({},e),{},{currentStock:n,warehouse:(null===r||void 0===r?void 0:r.name)||"",deficit:l-n}))}}}),l(a)};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u0623\u0642\u0644 \u0645\u0646 \u062d\u062f \u0627\u0644\u0637\u0644\u0628",subtitle:"\u0639\u0631\u0636 \u0627\u0644\u0623\u0635\u0646\u0627\u0641 \u0627\u0644\u062a\u064a \u0648\u0635\u0644\u062a \u0644\u062d\u062f \u0627\u0644\u0637\u0644\u0628 \u0623\u0648 \u0623\u0642\u0644",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=n.map(e=>[e.barcode||"-",e.name,e.warehouse,e.currentStock,e.minStock||0,e.deficit]);let t=["\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f","\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641","\u0627\u0644\u0645\u062e\u0632\u0646","\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629","\u062d\u062f \u0627\u0644\u0637\u0644\u0628","\u0627\u0644\u0646\u0642\u0635"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="low_stock_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"mb-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"w-full max-w-xs px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u062d\u062f \u0627\u0644\u0637\u0644\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0646\u0642\u0635"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.barcode||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.warehouse}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.currentStock}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.minStock||0}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-red-600",children:e.deficit}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:0===e.currentStock?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-600 text-white",children:"\u0646\u0641\u0630\u062a \u0627\u0644\u0643\u0645\u064a\u0629"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800",children:"\u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062d\u062f"})})]},t))})]}),0===n.length&&(0,Qe.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Qe.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Qe.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0635\u0646\u0627\u0641 \u0623\u0642\u0644 \u0645\u0646 \u062d\u062f \u0627\u0644\u0637\u0644\u0628"})]})]})]})},Nr=()=>{const{salesInvoices:e,customers:t,products:s}=Ye(),[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("all"),[d,x]=(0,r.useState)([]),[u,m]=(0,r.useState)({totalInvoices:0,totalAmount:0,totalPaid:0,totalRemaining:0});(0,r.useEffect)(()=>{h()},[e,a,l,o]);const h=()=>{let t=e||[];a&&(t=t.filter(e=>new Date(e.date)>=new Date(a))),l&&(t=t.filter(e=>new Date(e.date)<=new Date(l))),"all"!==o&&(t=t.filter(e=>e.customerId===o));const s=t.length,r=t.reduce((e,t)=>e+(t.total||0),0),n=t.reduce((e,t)=>e+(t.paid||0),0),i=r-n;x(t),m({totalInvoices:s,totalAmount:r,totalPaid:n,totalRemaining:i})},p=e=>{const s=null===t||void 0===t?void 0:t.find(t=>t.id===e);return(null===s||void 0===s?void 0:s.name)||"\u0639\u0645\u064a\u0644 \u063a\u064a\u0631 \u0645\u0633\u062c\u0644"};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",subtitle:"\u062a\u0642\u0631\u064a\u0631 \u0634\u0627\u0645\u0644 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=d.map(e=>{var t,s;return[e.id,e.date,p(e.customerId),(null===(t=e.total)||void 0===t?void 0:t.toFixed(2))||"0.00",(null===(s=e.paid)||void 0===s?void 0:s.toFixed(2))||"0.00",(e.total-e.paid).toFixed(2),e.paid>=e.total?"\u0645\u062f\u0641\u0648\u0639":"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639"]});let t=["\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629","\u0627\u0644\u062a\u0627\u0631\u064a\u062e","\u0627\u0644\u0639\u0645\u064a\u0644","\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a","\u0627\u0644\u0645\u062f\u0641\u0648\u0639","\u0627\u0644\u0645\u062a\u0628\u0642\u064a","\u0627\u0644\u062d\u0627\u0644\u0629"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="sales_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-2",children:u.totalInvoices})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[u.totalAmount.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[u.totalPaid.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[u.totalRemaining.toFixed(2)," \u062c.\u0645"]})]})})]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),null===t||void 0===t?void 0:t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:a,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(e.customerId)}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[(e.total||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[(e.paid||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:[((e.total||0)-(e.paid||0)).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(e.paid||0)>=(e.total||0)?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"\u0645\u062f\u0641\u0648\u0639"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639"})})]},e.id))})]}),0===d.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},wr=()=>{const{salesInvoices:e,customers:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{c()},[e,t,s,n]);const c=()=>{const a={};let r=e||[];s&&(r=r.filter(e=>new Date(e.date)>=new Date(s))),n&&(r=r.filter(e=>new Date(e.date)<=new Date(n))),r.forEach(e=>{const t=e.customerId||"unknown";a[t]||(a[t]={customerId:t,invoiceCount:0,totalAmount:0,totalPaid:0,totalRemaining:0}),a[t].invoiceCount+=1,a[t].totalAmount+=e.total||0,a[t].totalPaid+=e.paid||0,a[t].totalRemaining+=(e.total||0)-(e.paid||0)});const l=Object.values(a).map(e=>{const s=null===t||void 0===t?void 0:t.find(t=>t.id===e.customerId);return Be(Be({},e),{},{customerName:(null===s||void 0===s?void 0:s.name)||"\u0639\u0645\u064a\u0644 \u063a\u064a\u0631 \u0645\u0633\u062c\u0644"})});l.sort((e,t)=>t.totalAmount-e.totalAmount),o(l)};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0639\u0645\u064a\u0644",subtitle:"\u062a\u062d\u0644\u064a\u0644 \u0645\u0628\u064a\u0639\u0627\u062a \u0643\u0644 \u0639\u0645\u064a\u0644 \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=i.map(e=>[e.customerName,e.invoiceCount,e.totalAmount.toFixed(2),e.totalPaid.toFixed(2),e.totalRemaining.toFixed(2)]);let t=["\u0627\u0644\u0639\u0645\u064a\u0644","\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","\u0627\u0644\u0645\u062f\u0641\u0648\u0639","\u0627\u0644\u0645\u062a\u0628\u0642\u064a"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="sales_by_customer_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062a\u0628\u0642\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.customerName}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.invoiceCount}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.totalAmount.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[e.totalPaid.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:[e.totalRemaining.toFixed(2)," \u062c.\u0645"]})]},t))})]}),0===i.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},Sr=()=>{const{salesInvoices:e,products:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)([]),[c,d]=(0,r.useState)("quantity");(0,r.useEffect)(()=>{x()},[e,t,s,n,c]);const x=()=>{const a={};let r=e||[];s&&(r=r.filter(e=>new Date(e.date)>=new Date(s))),n&&(r=r.filter(e=>new Date(e.date)<=new Date(n))),r.forEach(e=>{var t;null===(t=e.items)||void 0===t||t.forEach(e=>{const t=e.productId;a[t]||(a[t]={productId:t,totalQuantity:0,totalAmount:0,invoiceCount:0}),a[t].totalQuantity+=e.quantity||0,a[t].totalAmount+=(e.quantity||0)*(e.price||0),a[t].invoiceCount+=1})});const l=Object.values(a).map(e=>{const s=null===t||void 0===t?void 0:t.find(t=>t.id===e.productId);return Be(Be({},e),{},{productName:(null===s||void 0===s?void 0:s.name)||"\u0635\u0646\u0641 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641",barcode:(null===s||void 0===s?void 0:s.barcode)||"-"})});"quantity"===c?l.sort((e,t)=>t.totalQuantity-e.totalQuantity):l.sort((e,t)=>t.totalAmount-e.totalAmount),o(l)};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0623\u0641\u0636\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0645\u0628\u064a\u0639\u0627\u064b",subtitle:"\u062a\u0631\u062a\u064a\u0628 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0628\u0627\u0639\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=i.map(e=>[e.barcode,e.productName,e.totalQuantity,e.totalAmount.toFixed(2),e.invoiceCount]);let t=["\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f","\u0627\u0644\u0635\u0646\u0641","\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0628\u0627\u0639\u0629","\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a","\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="top_selling_products_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0631\u062a\u064a\u0628 \u062d\u0633\u0628"}),(0,Qe.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"quantity",children:"\u0627\u0644\u0643\u0645\u064a\u0629"}),(0,Qe.jsx)("option",{value:"amount",children:"\u0627\u0644\u0645\u0628\u0644\u063a"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0631\u062a\u064a\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0633\u0645 \u0627\u0644\u0635\u0646\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0628\u0627\u0639\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:t+1}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.barcode}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.productName}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.totalQuantity}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:[e.totalAmount.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.invoiceCount})]},t))})]}),0===i.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},kr=()=>{const{purchaseInvoices:e,suppliers:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)("all"),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)({totalInvoices:0,totalAmount:0,totalPaid:0,totalRemaining:0});(0,r.useEffect)(()=>{m()},[e,s,n,i]);const m=()=>{let t=e||[];s&&(t=t.filter(e=>new Date(e.date)>=new Date(s))),n&&(t=t.filter(e=>new Date(e.date)<=new Date(n))),"all"!==i&&(t=t.filter(e=>e.supplierId===i));const a=t.length,r=t.reduce((e,t)=>e+(t.total||0),0),l=t.reduce((e,t)=>e+(t.paid||0),0),o=r-l;d(t),u({totalInvoices:a,totalAmount:r,totalPaid:l,totalRemaining:o})},h=e=>{const s=null===t||void 0===t?void 0:t.find(t=>t.id===e);return(null===s||void 0===s?void 0:s.name)||"\u0645\u0648\u0631\u062f \u063a\u064a\u0631 \u0645\u0633\u062c\u0644"};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a",subtitle:"\u062a\u0642\u0631\u064a\u0631 \u0634\u0627\u0645\u0644 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=c.map(e=>{var t,s;return[e.id,e.date,h(e.supplierId),(null===(t=e.total)||void 0===t?void 0:t.toFixed(2))||"0.00",(null===(s=e.paid)||void 0===s?void 0:s.toFixed(2))||"0.00",(e.total-e.paid).toFixed(2),e.paid>=e.total?"\u0645\u062f\u0641\u0648\u0639":"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639"]});let t=["\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629","\u0627\u0644\u062a\u0627\u0631\u064a\u062e","\u0627\u0644\u0645\u0648\u0631\u062f","\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a","\u0627\u0644\u0645\u062f\u0641\u0648\u0639","\u0627\u0644\u0645\u062a\u0628\u0642\u064a","\u0627\u0644\u062d\u0627\u0644\u0629"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="purchases_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold mt-2",children:x.totalInvoices})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[x.totalAmount.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[x.totalPaid.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[x.totalRemaining.toFixed(2)," \u062c.\u0645"]})]})})]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),null===t||void 0===t?void 0:t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.id]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:h(e.supplierId)}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[(e.total||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[(e.paid||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:[((e.total||0)-(e.paid||0)).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(e.paid||0)>=(e.total||0)?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"\u0645\u062f\u0641\u0648\u0639"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"\u063a\u064a\u0631 \u0645\u062f\u0641\u0648\u0639"})})]},e.id))})]}),0===c.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},Cr=()=>{const{purchaseInvoices:e,suppliers:t}=Ye(),[s,a]=(0,r.useState)(""),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{c()},[e,t,s,n]);const c=()=>{const a={};let r=e||[];s&&(r=r.filter(e=>new Date(e.date)>=new Date(s))),n&&(r=r.filter(e=>new Date(e.date)<=new Date(n))),r.forEach(e=>{const t=e.supplierId||"unknown";a[t]||(a[t]={supplierId:t,invoiceCount:0,totalAmount:0,totalPaid:0,totalRemaining:0}),a[t].invoiceCount+=1,a[t].totalAmount+=e.total||0,a[t].totalPaid+=e.paid||0,a[t].totalRemaining+=(e.total||0)-(e.paid||0)});const l=Object.values(a).map(e=>{const s=null===t||void 0===t?void 0:t.find(t=>t.id===e.supplierId);return Be(Be({},e),{},{supplierName:(null===s||void 0===s?void 0:s.name)||"\u0645\u0648\u0631\u062f \u063a\u064a\u0631 \u0645\u0633\u062c\u0644"})});l.sort((e,t)=>t.totalAmount-e.totalAmount),o(l)};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0645\u0648\u0631\u062f",subtitle:"\u062a\u062d\u0644\u064a\u0644 \u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0643\u0644 \u0645\u0648\u0631\u062f \u0648\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=i.map(e=>[e.supplierName,e.invoiceCount,e.totalAmount.toFixed(2),e.totalPaid.toFixed(2),e.totalRemaining.toFixed(2)]);let t=["\u0627\u0644\u0645\u0648\u0631\u062f","\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631","\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a","\u0627\u0644\u0645\u062f\u0641\u0648\u0639","\u0627\u0644\u0645\u062a\u0628\u0642\u064a"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="purchases_by_supplier_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062a\u0628\u0642\u064a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.supplierName}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.invoiceCount}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.totalAmount.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600",children:[e.totalPaid.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600",children:[e.totalRemaining.toFixed(2)," \u062c.\u0645"]})]},t))})]}),0===i.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},Ir=()=>{const{treasuryTransactions:e}=Ye(),[t,s]=(0,r.useState)(""),[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)("all"),[o,c]=(0,r.useState)([]),[d,x]=(0,r.useState)({totalReceipts:0,totalPayments:0,balance:0});(0,r.useEffect)(()=>{u()},[e,t,a,l]);const u=()=>{let s=e||[];t&&(s=s.filter(e=>new Date(e.date)>=new Date(t))),a&&(s=s.filter(e=>new Date(e.date)<=new Date(a))),"all"!==l&&(s=s.filter(e=>e.type===l));const r=s.filter(e=>"receipt"===e.type).reduce((e,t)=>e+(t.amount||0),0),n=s.filter(e=>"payment"===e.type).reduce((e,t)=>e+(t.amount||0),0),i=r-n;c(s.sort((e,t)=>new Date(t.date)-new Date(e.date))),x({totalReceipts:r,totalPayments:n,balance:i})};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629",subtitle:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0642\u0628\u0648\u0636\u0627\u062a \u0648\u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=o.map(e=>{var t;return[e.date,"receipt"===e.type?"\u0645\u0642\u0628\u0648\u0636":"\u0645\u062f\u0641\u0648\u0639",(null===(t=e.amount)||void 0===t?void 0:t.toFixed(2))||"0.00",e.description||"-",e.reference||"-"]});let t=["\u0627\u0644\u062a\u0627\u0631\u064a\u062e","\u0627\u0644\u0646\u0648\u0639","\u0627\u0644\u0645\u0628\u0644\u063a","\u0627\u0644\u0628\u064a\u0627\u0646","\u0627\u0644\u0645\u0631\u062c\u0639"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="treasury_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0642\u0628\u0648\u0636\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[d.totalReceipts.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[d.totalPayments.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r ".concat(d.balance>=0?"from-blue-500 to-blue-600":"from-orange-500 to-orange-600"," text-white"),children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0646\u0642\u062f\u064a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[d.balance.toFixed(2)," \u062c.\u0645"]})]})})]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062d\u0631\u0643\u0629"}),(0,Qe.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0631\u0643\u0627\u062a"}),(0,Qe.jsx)("option",{value:"receipt",children:"\u0645\u0642\u0628\u0648\u0636\u0627\u062a"}),(0,Qe.jsx)("option",{value:"payment",children:"\u0645\u062f\u0641\u0648\u0639\u0627\u062a"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:t,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:a,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)(aa,{className:"mt-6 overflow-x-auto",children:[(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0628\u064a\u0627\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0631\u062c\u0639"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((e,t)=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("ar-EG")}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"receipt"===e.type?(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"\u0645\u0642\u0628\u0648\u0636"}):(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:"\u0645\u062f\u0641\u0648\u0639"})}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium ".concat("receipt"===e.type?"text-green-600":"text-red-600"),children:[(e.amount||0).toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500",children:e.description||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference||"-"})]},t))})]}),0===o.length&&(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0644\u0639\u0631\u0636\u0647\u0627"})]})]})},Dr=()=>{var e,t,s,a,n,l,i,o,c,d,x,u,m,h;const{treasuryTransactions:p,salesInvoices:g,purchaseInvoices:f}=Ye(),[b,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)({salesCash:0,purchasesCash:0,otherReceipts:0,otherPayments:0,netCashFlow:0});(0,r.useEffect)(()=>{S()},[p,g,f,b,j]);const S=()=>{let e=g||[],t=f||[],s=p||[];b&&(e=e.filter(e=>new Date(e.date)>=new Date(b)),t=t.filter(e=>new Date(e.date)>=new Date(b)),s=s.filter(e=>new Date(e.date)>=new Date(b))),j&&(e=e.filter(e=>new Date(e.date)<=new Date(j)),t=t.filter(e=>new Date(e.date)<=new Date(j)),s=s.filter(e=>new Date(e.date)<=new Date(j)));const a=e.reduce((e,t)=>e+(t.paid||0),0),r=t.reduce((e,t)=>e+(t.paid||0),0),n=s.filter(e=>"receipt"===e.type).reduce((e,t)=>e+(t.amount||0),0),l=s.filter(e=>"payment"===e.type).reduce((e,t)=>e+(t.amount||0),0),i=a+n,o=r+l;w({salesCash:a,purchasesCash:r,otherReceipts:n,otherPayments:l,totalInflow:i,totalOutflow:o,netCashFlow:i-o})};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629",subtitle:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629 \u0627\u0644\u062f\u0627\u062e\u0644\u0629 \u0648\u0627\u0644\u062e\u0627\u0631\u062c\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=[["\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062f\u0627\u062e\u0644\u0629",""],["\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629",N.salesCash.toFixed(2)],["\u0645\u0642\u0628\u0648\u0636\u0627\u062a \u0623\u062e\u0631\u0649",N.otherReceipts.toFixed(2)],["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062f\u0627\u062e\u0644\u0629",N.totalInflow.toFixed(2)],["",""],["\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u0629",""],["\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629",N.purchasesCash.toFixed(2)],["\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0623\u062e\u0631\u0649",N.otherPayments.toFixed(2)],["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u0629",N.totalOutflow.toFixed(2)],["",""],["\u0635\u0627\u0641\u064a \u0627\u0644\u062a\u062f\u0641\u0642 \u0627\u0644\u0646\u0642\u062f\u064a",N.netCashFlow.toFixed(2)]];let t=["\u0627\u0644\u0628\u064a\u0627\u0646","\u0627\u0644\u0645\u0628\u0644\u063a"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="cash_flow_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:b,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:j,onChange:e=>y(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,Qe.jsxs)(aa,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062f\u0627\u062e\u0644\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-green-400",children:[(0,Qe.jsx)("span",{className:"text-sm opacity-90",children:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629"}),(0,Qe.jsxs)("span",{className:"font-bold",children:[null===(e=N.salesCash)||void 0===e?void 0:e.toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-green-400",children:[(0,Qe.jsx)("span",{className:"text-sm opacity-90",children:"\u0645\u0642\u0628\u0648\u0636\u0627\u062a \u0623\u062e\u0631\u0649"}),(0,Qe.jsxs)("span",{className:"font-bold",children:[null===(t=N.otherReceipts)||void 0===t?void 0:t.toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,Qe.jsx)("span",{className:"font-bold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold",children:[null===(s=N.totalInflow)||void 0===s?void 0:s.toFixed(2)," \u062c.\u0645"]})]})]})]}),(0,Qe.jsxs)(aa,{className:"bg-gradient-to-r from-red-500 to-red-600 text-white",children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold mb-4",children:"\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-red-400",children:[(0,Qe.jsx)("span",{className:"text-sm opacity-90",children:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629"}),(0,Qe.jsxs)("span",{className:"font-bold",children:[null===(a=N.purchasesCash)||void 0===a?void 0:a.toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b border-red-400",children:[(0,Qe.jsx)("span",{className:"text-sm opacity-90",children:"\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0623\u062e\u0631\u0649"}),(0,Qe.jsxs)("span",{className:"font-bold",children:[null===(n=N.otherPayments)||void 0===n?void 0:n.toFixed(2)," \u062c.\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center pt-2",children:[(0,Qe.jsx)("span",{className:"font-bold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold",children:[null===(l=N.totalOutflow)||void 0===l?void 0:l.toFixed(2)," \u062c.\u0645"]})]})]})]})]}),(0,Qe.jsx)(aa,{className:"mt-6 bg-gradient-to-r ".concat(N.netCashFlow>=0?"from-blue-500 to-blue-600":"from-orange-500 to-orange-600"," text-white"),children:(0,Qe.jsxs)("div",{className:"text-center py-8",children:[(0,Qe.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u062a\u062f\u0641\u0642 \u0627\u0644\u0646\u0642\u062f\u064a"}),(0,Qe.jsxs)("p",{className:"text-5xl font-bold",children:[null===(i=N.netCashFlow)||void 0===i?void 0:i.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("p",{className:"mt-4 text-sm opacity-90",children:N.netCashFlow>=0?"\u062a\u062f\u0641\u0642 \u0646\u0642\u062f\u064a \u0625\u064a\u062c\u0627\u0628\u064a":"\u062a\u062f\u0641\u0642 \u0646\u0642\u062f\u064a \u0633\u0644\u0628\u064a"})]})}),(0,Qe.jsxs)(aa,{className:"mt-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u0645\u0644\u062e\u0635 \u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-semibold text-green-800 mb-2",children:"\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062f\u0627\u062e\u0644\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,Qe.jsx)("div",{children:"\u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629:"}),(0,Qe.jsxs)("div",{className:"text-right font-medium",children:[null===(o=N.salesCash)||void 0===o?void 0:o.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("div",{children:"\u0645\u0642\u0628\u0648\u0636\u0627\u062a \u0623\u062e\u0631\u0649:"}),(0,Qe.jsxs)("div",{className:"text-right font-medium",children:[null===(c=N.otherReceipts)||void 0===c?void 0:c.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("div",{className:"font-bold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-green-700",children:[null===(d=N.totalInflow)||void 0===d?void 0:d.toFixed(2)," \u062c.\u0645"]})]})]}),(0,Qe.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"\u0627\u0644\u062a\u062f\u0641\u0642\u0627\u062a \u0627\u0644\u062e\u0627\u0631\u062c\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,Qe.jsx)("div",{children:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a\u0627\u062a \u0627\u0644\u0646\u0642\u062f\u064a\u0629:"}),(0,Qe.jsxs)("div",{className:"text-right font-medium",children:[null===(x=N.purchasesCash)||void 0===x?void 0:x.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("div",{children:"\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0623\u062e\u0631\u0649:"}),(0,Qe.jsxs)("div",{className:"text-right font-medium",children:[null===(u=N.otherPayments)||void 0===u?void 0:u.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("div",{className:"font-bold",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-red-700",children:[null===(m=N.totalOutflow)||void 0===m?void 0:m.toFixed(2)," \u062c.\u0645"]})]})]}),(0,Qe.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("div",{className:"font-bold text-lg",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u062a\u062f\u0641\u0642 \u0627\u0644\u0646\u0642\u062f\u064a:"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-lg ".concat(N.netCashFlow>=0?"text-blue-700":"text-orange-700"),children:[null===(h=N.netCashFlow)||void 0===h?void 0:h.toFixed(2)," \u062c.\u0645"]})]})})]})]})]})},_r=()=>{const{salesInvoices:e,purchaseInvoices:t,products:s}=Ye(),[a,n]=(0,r.useState)(""),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)({totalRevenue:0,totalCost:0,grossProfit:0,grossProfitMargin:0,netProfit:0});(0,r.useEffect)(()=>{d()},[e,t,s,a,l]);const d=()=>{let r=e||[],n=t||[];a&&(r=r.filter(e=>new Date(e.date)>=new Date(a)),n=n.filter(e=>new Date(e.date)>=new Date(a))),l&&(r=r.filter(e=>new Date(e.date)<=new Date(l)),n=n.filter(e=>new Date(e.date)<=new Date(l)));const i=r.reduce((e,t)=>e+(t.total||0),0);let o=0;r.forEach(e=>{var t;null===(t=e.items)||void 0===t||t.forEach(e=>{const t=null===s||void 0===s?void 0:s.find(t=>t.id===e.productId),a=(null===t||void 0===t?void 0:t.costPrice)||0;o+=a*(e.quantity||0)})});const d=i-o;c({totalRevenue:i,totalCost:o,grossProfit:d,grossProfitMargin:i>0?d/i*100:0,netProfit:d})};return(0,Qe.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631",subtitle:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0623\u0631\u0628\u0627\u062d \u0648\u0627\u0644\u062e\u0633\u0627\u0626\u0631 \u062e\u0644\u0627\u0644 \u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629 \u0645\u062d\u062f\u062f\u0629",icon:(0,Qe.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),actions:[{label:"\u0637\u0628\u0627\u0639\u0629",onClick:()=>{window.print()},variant:"secondary"},{label:"\u062a\u0635\u062f\u064a\u0631 Excel",onClick:()=>{const e=[["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a",o.totalRevenue.toFixed(2)],["\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629",o.totalCost.toFixed(2)],["\u0645\u062c\u0645\u0644 \u0627\u0644\u0631\u0628\u062d",o.grossProfit.toFixed(2)],["\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a",o.grossProfitMargin.toFixed(2)+"%"],["\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d",o.netProfit.toFixed(2)]];let t=["\u0627\u0644\u0628\u064a\u0627\u0646","\u0627\u0644\u0645\u0628\u0644\u063a"].join(",")+"\n";e.forEach(e=>{t+=e.join(",")+"\n"});const s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");a.href=URL.createObjectURL(s),a.download="profit_loss_report_".concat((new Date).toISOString().split("T")[0],".csv"),a.click()},variant:"primary"}]}),(0,Qe.jsx)(aa,{className:"mt-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:a,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[o.totalRevenue.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u062a\u0643\u0644\u0646\u0641\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[o.totalCost.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)(aa,{className:"bg-gradient-to-r ".concat(o.netProfit>=0?"from-green-500 to-green-600":"from-red-500 to-red-600"," text-white"),children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm opacity-90",children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d"}),(0,Qe.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[o.netProfit.toFixed(2)," \u062c.\u0645"]})]})})]}),(0,Qe.jsxs)(aa,{className:"mt-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u062f\u062e\u0644"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("div",{className:"font-semibold text-blue-800",children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,Qe.jsx)("div",{}),(0,Qe.jsx)("div",{className:"pr-4",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a:"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-blue-700",children:[o.totalRevenue.toFixed(2)," \u062c.\u0645"]})]})}),(0,Qe.jsx)("div",{className:"bg-orange-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("div",{className:"font-semibold text-orange-800",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629 \u0627\u0644\u0645\u0628\u0627\u0639\u0629"}),(0,Qe.jsx)("div",{}),(0,Qe.jsx)("div",{className:"pr-4",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629:"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-orange-700",children:["(",o.totalCost.toFixed(2),") \u062c.\u0645"]})]})}),(0,Qe.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("div",{className:"font-bold text-green-800",children:"\u0645\u062c\u0645\u0644 \u0627\u0644\u0631\u0628\u062d"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-green-700 text-lg",children:[o.grossProfit.toFixed(2)," \u062c.\u0645"]}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsxs)("div",{className:"text-right font-semibold text-green-700",children:[o.grossProfitMargin.toFixed(2),"%"]})]})}),(0,Qe.jsx)("div",{className:"p-4 rounded-lg ".concat(o.netProfit>=0?"bg-green-100":"bg-red-100"),children:(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qe.jsx)("div",{className:"font-bold text-xl ".concat(o.netProfit>=0?"text-green-800":"text-red-800"),children:"\u0635\u0627\u0641\u064a \u0627\u0644\u0631\u0628\u062d / (\u0627\u0644\u062e\u0633\u0627\u0631\u0629)"}),(0,Qe.jsxs)("div",{className:"text-right font-bold text-2xl ".concat(o.netProfit>=0?"text-green-700":"text-red-700"),children:[o.netProfit>=0?"":"(",Math.abs(o.netProfit).toFixed(2)," \u062c.\u0645",o.netProfit>=0?"":")"]})]})})]})]}),(0,Qe.jsxs)(aa,{className:"mt-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Qe.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-700",children:[(0,Qe.jsx)("li",{children:"\u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u064a\u0639\u062a\u0645\u062f \u0639\u0644\u0649 \u0627\u0644\u0641\u062a\u0631\u0629 \u0627\u0644\u0632\u0645\u0646\u064a\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsx)("li",{children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0628\u0636\u0627\u0639\u0629 \u062a\u0639\u062a\u0645\u062f \u0639\u0644\u0649 \u0633\u0639\u0631 \u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u062d\u062f\u062f \u0641\u064a \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0646\u062a\u062c"}),(0,Qe.jsx)("li",{children:"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d \u064a\u062d\u0633\u0628 \u0628\u0642\u0633\u0645\u0629 \u0645\u062c\u0645\u0644 \u0627\u0644\u0631\u0628\u062d \u0639\u0644\u0649 \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u064a\u0639\u0627\u062a"}),(0,Qe.jsx)("li",{children:"\u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0644\u0627 \u064a\u062a\u0636\u0645\u0646 \u0627\u0644\u0645\u0635\u0627\u0631\u064a\u0641 \u0627\u0644\u062a\u0634\u063a\u064a\u0644\u064a\u0629 \u0627\u0644\u0623\u062e\u0631\u0649"})]})})]})]})},Lr=()=>{const{products:e,warehouses:t,addInventoryTransaction:s}=Ye(),{showWarning:a,showSuccess:n}=Ke(),[l,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),[d,x]=(0,r.useState)(""),[u,m]=(0,r.useState)("increase"),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),j=e.filter(e=>{var t;return e.name.toLowerCase().includes(d.toLowerCase())||(null===(t=e.barcode)||void 0===t?void 0:t.includes(d))}),y=()=>{var e;return l&&o&&(null===(e=l.stock)||void 0===e?void 0:e[o])||0},N=()=>{const e=y(),t=parseFloat(h)||0;return"increase"===u?e+t:e-t};return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-blue-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(bt,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0641\u0631\u0648\u0642\u0627\u062a \u0628\u064a\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0641\u0639\u0644\u064a \u0648\u0627\u0644\u062f\u0641\u062a\u0631\u064a"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(ks,{className:"text-purple-500"}),"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c"]}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:d,onChange:e=>x(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none transition-all"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),d&&(0,Qe.jsx)("div",{className:"mt-4 max-h-64 overflow-y-auto border-2 border-gray-200 rounded-xl",children:j.length>0?j.map(e=>(0,Qe.jsxs)("button",{onClick:()=>(e=>{i(e),x("")})(e),className:"w-full p-4 hover:bg-purple-50 transition-colors text-right border-b last:border-b-0 flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.barcode})]}),(0,Qe.jsx)(js,{className:"text-purple-500"})]},e.id)):(0,Qe.jsx)("div",{className:"p-8 text-center text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})})]}),l&&(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-white rounded-2xl shadow-lg p-6 border-2 border-purple-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0645\u062d\u062f\u062f"}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062a\u062c:"}),(0,Qe.jsx)("span",{className:"font-bold text-gray-800",children:l.name})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f:"}),(0,Qe.jsx)("span",{className:"font-mono text-gray-800",children:l.barcode})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0641\u0626\u0629:"}),(0,Qe.jsx)("span",{className:"text-gray-800",children:l.category})]})]})]}),l&&(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l||!o||!h||!g)return void a("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const t=parseFloat(h);if(t<=0)return void a("\u0627\u0644\u0643\u0645\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631");const s=N();if(s<0)return void a("\u0644\u0627 \u064a\u0645\u0643\u0646 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0633\u0627\u0644\u0628\u0629");const r={type:"adjustment",productId:l.id,warehouseId:o,adjustmentType:u,quantity:t,oldStock:y(),newStock:s,reason:g,notes:b,date:(new Date).toISOString()};console.log("\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0629:",r),n("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),i(null),c(""),p(""),f(""),v("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Xs,{className:"inline ml-2 text-purple-500"}),"\u0627\u0644\u0645\u062e\u0632\u0646 *"]}),(0,Qe.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646..."}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),o&&(0,Qe.jsx)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:y()})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 *"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>m("increase"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("increase"===u?"bg-green-500 border-green-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-green-500"),children:"\u0632\u064a\u0627\u062f\u0629 (+)"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>m("decrease"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("decrease"===u?"bg-red-500 border-red-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-red-500"),children:"\u0646\u0642\u0635 (-)"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"number",value:h,onChange:e=>p(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629...",required:!0})]}),o&&h&&(0,Qe.jsxs)("div",{className:"rounded-xl p-4 border-2 ".concat(N()<0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629:"}),(0,Qe.jsx)("span",{className:"text-2xl font-bold ".concat(N()<0?"text-red-600":"text-green-600"),children:N()})]}),N()<0&&(0,Qe.jsxs)("div",{className:"mt-2 flex items-center gap-2 text-red-600 text-sm",children:[(0,Qe.jsx)(Xt,{}),(0,Qe.jsx)("span",{children:"\u062a\u062d\u0630\u064a\u0631: \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0633\u0627\u0644\u0628\u0629!"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0633\u0628\u0628 *"}),(0,Qe.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"\u062c\u0631\u062f",children:"\u062c\u0631\u062f \u062f\u0648\u0631\u064a"}),(0,Qe.jsx)("option",{value:"\u0641\u0631\u0642_\u0639\u062f",children:"\u0641\u0631\u0642 \u0641\u064a \u0627\u0644\u0639\u062f"}),(0,Qe.jsx)("option",{value:"\u062e\u0637\u0623_\u0625\u062f\u062e\u0627\u0644",children:"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0625\u062f\u062e\u0627\u0644"}),(0,Qe.jsx)("option",{value:"\u062a\u0644\u0641",children:"\u062a\u0644\u0641 \u062c\u0632\u0626\u064a"}),(0,Qe.jsx)("option",{value:"\u0641\u0642\u062f\u0627\u0646",children:"\u0641\u0642\u062f\u0627\u0646"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:b,onChange:e=>v(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-4 rounded-xl font-bold hover:from-purple-600 hover:to-purple-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})]}),(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcdd \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0645\u0647\u0645\u0629"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0633\u062a\u062e\u062f\u0645 \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0644\u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0641\u0631\u0648\u0642\u0627\u062a \u0628\u064a\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u0641\u0639\u0644\u064a \u0648\u0627\u0644\u0645\u0633\u062c\u0644 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062c\u0628 \u0625\u062c\u0631\u0627\u0621 \u062c\u0631\u062f \u0641\u0639\u0644\u064a \u0642\u0628\u0644 \u0639\u0645\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a \u0641\u064a \u0633\u062c\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 \u0628\u0639\u062f \u062d\u0641\u0638\u0647\u0627"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-2xl shadow-lg p-6 border-2 border-amber-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u26a0\ufe0f \u062a\u0646\u0628\u064a\u0647\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0623\u0643\u062f \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0642\u0628\u0644 \u0627\u0644\u062d\u0641\u0638"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628 \u0627\u0644\u0645\u0646\u0627\u0633\u0628 \u0644\u0644\u062a\u0633\u0648\u064a\u0629"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062a\u0648\u0636\u064a\u062d\u064a\u0629 \u0639\u0646\u062f \u0627\u0644\u062d\u0627\u062c\u0629"})]})]})]})]})]})]})})},Er=()=>{const{accounts:e,addAccount:t,updateAccount:s,deleteAccount:a}=Ye(),[n,l]=(0,r.useState)(new Set),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)({code:"",name:"",nameEn:"",type:"",nature:"debit",parentId:"",description:"",allowPosting:!0,isActive:!0}),f=[{value:"asset",label:"\u0627\u0644\u0623\u0635\u0648\u0644",color:"bg-blue-100 text-blue-800"},{value:"liability",label:"\u0627\u0644\u062e\u0635\u0648\u0645",color:"bg-red-100 text-red-800"},{value:"equity",label:"\u062d\u0642\u0648\u0642 \u0627\u0644\u0645\u0644\u0643\u064a\u0629",color:"bg-green-100 text-green-800"},{value:"revenue",label:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a",color:"bg-purple-100 text-purple-800"},{value:"expense",label:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",color:"bg-orange-100 text-orange-800"},{value:"gain",label:"\u0627\u0644\u0623\u0631\u0628\u0627\u062d",color:"bg-emerald-100 text-emerald-800"},{value:"loss",label:"\u0627\u0644\u062e\u0633\u0627\u0626\u0631",color:"bg-pink-100 text-pink-800"}],b=e.filter(e=>(!m||e.type===m)&&!(x&&!e.name.toLowerCase().includes(x.toLowerCase())&&!e.code.toLowerCase().includes(x.toLowerCase()))).sort((e,t)=>e.code.localeCompare(t.code)),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.filter(e=>e.parentId===t).sort((e,t)=>e.code.localeCompare(t.code)).map(t=>Be(Be({},t),{},{children:v(e,t.id,s+1)}))},j=v(b),y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(d(e),g({code:e.code,name:e.name,nameEn:e.nameEn||"",type:e.type,nature:e.nature,parentId:e.parentId||"",description:e.description||"",allowPosting:e.allowPosting,isActive:e.isActive})):(d(null),g({code:"",name:"",nameEn:"",type:"",nature:"debit",parentId:"",description:"",allowPosting:!0,isActive:!0})),o(!0)},N=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map(e=>{var s;return(0,Qe.jsxs)("div",{className:"w-full",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 hover:bg-gray-50 ".concat(t>0?"ml-"+20*t:""),style:{marginRight:20*t},children:[(0,Qe.jsxs)("div",{className:"flex items-center flex-1",children:[e.children&&e.children.length>0&&(0,Qe.jsx)("button",{onClick:()=>(e=>{const t=new Set(n);t.has(e)?t.delete(e):t.add(e),l(t)})(e.id),className:"mr-2 p-1 text-gray-400 hover:text-gray-600",children:n.has(e.id)?(0,Qe.jsx)(Et,{className:"w-4 h-4"}):(0,Qe.jsx)(Mt,{className:"w-4 h-4"})}),(0,Qe.jsx)("div",{className:"w-20 text-sm font-medium text-gray-600 ml-3",children:e.code}),(0,Qe.jsxs)("div",{className:"flex-1 flex items-center",children:[e.children&&e.children.length>0?n.has(e.id)?(0,Qe.jsx)(ts,{className:"w-4 h-4 text-orange-500 mr-2"}):(0,Qe.jsx)(ss,{className:"w-4 h-4 text-orange-500 mr-2"}):(0,Qe.jsx)("div",{className:"w-4 h-4 mr-2"}),(0,Qe.jsx)("span",{className:"text-sm font-medium text-gray-900 ml-2",children:e.name})]}),(0,Qe.jsx)("div",{className:"ml-4",children:f.find(t=>t.value===e.type)&&(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(f.find(t=>t.value===e.type).color),children:f.find(t=>t.value===e.type).label})}),(0,Qe.jsx)("div",{className:"w-24 text-sm text-left text-gray-600",children:(null===(s=e.balance)||void 0===s?void 0:s.toFixed(2))||"0.00"}),(0,Qe.jsx)("div",{className:"w-16 text-center",children:e.isActive?(0,Qe.jsx)("span",{className:"text-xs text-green-600",children:"\u0646\u0634\u0637"}):(0,Qe.jsx)("span",{className:"text-xs text-red-600",children:"\u0645\u0639\u0637\u0644"})})]}),(0,Qe.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,Qe.jsx)("button",{onClick:()=>y(e),className:"p-2 text-gray-400 hover:text-orange-500",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{className:"w-4 h-4"})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u062d\u0633\u0627\u0628 "'.concat(e.name,'"\u061f')))try{a(e.id)}catch(t){alert("\u062e\u0637\u0623: "+t.message)}})(e),className:"p-2 text-gray-400 hover:text-red-500",title:"\u062d\u0630\u0641",disabled:e.isSystem,children:(0,Qe.jsx)(Os,{className:"w-4 h-4"})})]})]}),e.children&&e.children.length>0&&n.has(e.id)&&(0,Qe.jsx)("div",{children:N(e.children,t+1)})]},e.id)})};return(0,Qe.jsxs)("div",{className:"p-6 bg-white min-h-screen",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u062f\u0644\u064a\u0644 \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"}),(0,Qe.jsxs)("button",{onClick:()=>y(),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 flex items-center",children:[(0,Qe.jsx)(js,{className:"w-4 h-4 ml-2"}),"\u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f"]})]}),(0,Qe.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u062d\u0633\u0627\u0628\u0627\u062a"}),(0,Qe.jsx)("input",{type:"text",value:x,onChange:e=>u(e.target.value),placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u0631\u0645\u0632 \u0623\u0648 \u0627\u0644\u0627\u0633\u0645...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),f.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]})}),(0,Qe.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,Qe.jsx)("div",{className:"bg-orange-50 px-4 py-3 border-b border-gray-200",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-7 gap-4 text-sm font-medium text-gray-700",children:[(0,Qe.jsx)("div",{children:"\u0627\u0644\u0631\u0645\u0632"}),(0,Qe.jsx)("div",{className:"col-span-2",children:"\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"})]})}),(0,Qe.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===b.length?(0,Qe.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062d\u0633\u0627\u0628\u0627\u062a"}):N(j)})]}),(0,Qe.jsx)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:f.map(t=>{const s=e.filter(e=>e.type===t.value).length;return(0,Qe.jsxs)("div",{className:"bg-white p-4 border border-gray-200 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s}),(0,Qe.jsx)("div",{className:"text-sm ".concat(t.color," px-2 py-1 rounded-full inline-block mt-1"),children:t.label})]},t.value)})}),i&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-screen overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c?"\u062a\u0639\u062f\u064a\u0644 \u062d\u0633\u0627\u0628":"\u062d\u0633\u0627\u0628 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{const e=Be(Be({},p),{},{parentId:p.parentId?parseInt(p.parentId):null});c?s(c.id,e):t(e),o(!1),d(null)}catch(a){alert("\u062e\u0637\u0623: "+a.message)}},className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0631\u0645\u0632 \u0627\u0644\u062d\u0633\u0627\u0628 *"}),(0,Qe.jsx)("input",{type:"text",value:p.code,onChange:e=>g(Be(Be({},p),{},{code:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u062d\u0633\u0627\u0628 *"}),(0,Qe.jsx)("input",{type:"text",value:p.name,onChange:e=>g(Be(Be({},p),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u062d\u0633\u0627\u0628 *"}),(0,Qe.jsxs)("select",{value:p.type,onChange:e=>{const t=f.find(t=>t.value===e.target.value);g(Be(Be({},p),{},{type:e.target.value,nature:t?"asset"===t.value||"expense"===t.value||"loss"===t.value?"debit":"credit":"debit"}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0646\u0648\u0639"}),f.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u0623\u0628"}),(0,Qe.jsxs)("select",{value:p.parentId,onChange:e=>g(Be(Be({},p),{},{parentId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[(0,Qe.jsx)("option",{value:"",children:"\u0628\u062f\u0648\u0646 \u062d\u0633\u0627\u0628 \u0623\u0628"}),e.filter(e=>e.level<3).map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.code," - ",e.name]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0628\u064a\u0639\u0629 \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsxs)("select",{value:p.nature,onChange:e=>g(Be(Be({},p),{},{nature:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[(0,Qe.jsx)("option",{value:"debit",children:"\u0645\u062f\u064a\u0646"}),(0,Qe.jsx)("option",{value:"credit",children:"\u062f\u0627\u0626\u0646"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsxs)("div",{className:"flex space-x-4 rtl:space-x-reverse",children:[(0,Qe.jsxs)("label",{className:"flex items-center",children:[(0,Qe.jsx)("input",{type:"radio",name:"isActive",value:"true",checked:!0===p.isActive,onChange:()=>g(Be(Be({},p),{},{isActive:!0})),className:"ml-2"}),"\u0646\u0634\u0637"]}),(0,Qe.jsxs)("label",{className:"flex items-center",children:[(0,Qe.jsx)("input",{type:"radio",name:"isActive",value:"false",checked:!1===p.isActive,onChange:()=>g(Be(Be({},p),{},{isActive:!1})),className:"ml-2"}),"\u0645\u0639\u0637\u0644"]})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0648\u0635\u0641 \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsx)("textarea",{value:p.description,onChange:e=>g(Be(Be({},p),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",rows:"3"})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-4 rtl:space-x-reverse pt-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600",children:c?"\u062a\u062d\u062f\u064a\u062b":"\u0625\u0636\u0627\u0641\u0629"})]})]})]})})]})},Mr=()=>(0,Qe.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Qe.jsx)(Er,{})}),Pr=()=>{const{accounts:e,journalEntries:t,createJournalEntry:s}=Ye(),[a,n]=(0,r.useState)(!1),[l,i]=(0,r.useState)({date:(new Date).toISOString().split("T")[0],description:"",reference:"",entries:[]}),[o,c]=(0,r.useState)({accountId:"",description:"",debit:"",credit:""}),d=l.entries.reduce((e,t)=>e+(t.debit||0),0),x=l.entries.reduce((e,t)=>e+(t.credit||0),0),u=Math.abs(d-x)<.01,m=t=>{const s=e.find(e=>e.id===t);if(!s)return 0;const a=l.entries.filter(e=>e.accountId===t);let r=s.balance||0;return a.forEach(e=>{e.debit>0&&("debit"===s.nature?r+=e.debit:r-=e.debit),e.credit>0&&("credit"===s.nature?r+=e.credit:r-=e.credit)}),r};return(0,Qe.jsxs)("div",{className:"p-6 bg-white min-h-screen",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0627\u0644\u0642\u064a\u0648\u062f \u0627\u0644\u064a\u0648\u0645\u064a\u0629"}),(0,Qe.jsxs)("button",{onClick:()=>n(!0),className:"bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 flex items-center",children:[(0,Qe.jsx)(js,{className:"w-4 h-4 ml-2"}),"\u0642\u064a\u062f \u062c\u062f\u064a\u062f"]})]}),(0,Qe.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,Qe.jsx)("div",{className:"bg-orange-50 px-4 py-3 border-b border-gray-200",children:(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\u0627\u0644\u0642\u064a\u0648\u062f \u0627\u0644\u0645\u062d\u0627\u0633\u0628\u064a\u0629"})}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0631\u0642\u0645 \u0627\u0644\u0642\u064a\u062f"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u062f\u064a\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062f\u0627\u0626\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",e.entryNumber]}),(0,Qe.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(e.date).toLocaleDateString("ar-SA")}),(0,Qe.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[(0,Qe.jsx)("div",{className:"max-w-xs truncate",title:e.description,children:e.description}),e.reference&&(0,Qe.jsxs)("div",{className:"text-xs text-gray-400",children:["\u0645\u0631\u062c\u0639: ",e.reference]})]}),(0,Qe.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-left",children:e.totalDebit.toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900 text-left",children:e.totalCredit.toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("posted"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"posted"===e.status?"\u0645\u064f\u0631\u062d\u0644":"\u0645\u0633\u0648\u062f\u0629"})}),(0,Qe.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsx)("button",{onClick:()=>(e=>{i({date:(new Date).toISOString().split("T")[0],description:"\u0646\u0633\u062e \u0645\u0646 \u0627\u0644\u0642\u064a\u062f \u0631\u0642\u0645 ".concat(e.entryNumber),reference:"",entries:e.entries.map(e=>Be(Be({},e),{},{id:Date.now()+Math.random()}))}),n(!0)})(e),className:"text-orange-600 hover:text-orange-900 ml-3",title:"\u0646\u0633\u062e \u0627\u0644\u0642\u064a\u062f",children:(0,Qe.jsx)(Gt,{className:"w-4 h-4"})})})]},e.id))})]})}),0===t.length&&(0,Qe.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0642\u064a\u0648\u062f \u0645\u062d\u0627\u0633\u0628\u064a\u0629"})]}),a&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-6xl max-h-screen overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"\u0642\u064a\u062f \u064a\u0648\u0645\u064a \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 text-xl",children:"\u2715"})]})}),(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),u)if(l.entries.length<2)alert("\u064a\u062c\u0628 \u0623\u0646 \u064a\u062d\u062a\u0648\u064a \u0627\u0644\u0642\u064a\u062f \u0639\u0644\u0649 \u0633\u0637\u0631\u064a\u0646 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644");else try{const e={date:l.date,description:l.description,reference:l.reference,entries:l.entries.map(e=>({accountId:e.accountId,description:e.description,debit:e.debit,credit:e.credit})),totalDebit:d,totalCredit:x};s(e),i({date:(new Date).toISOString().split("T")[0],description:"",reference:"",entries:[]}),n(!1),alert("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0642\u064a\u062f \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623: "+t.message)}else alert("\u0627\u0644\u0642\u064a\u062f \u063a\u064a\u0631 \u0645\u062a\u0648\u0627\u0632\u0646: \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u064a\u0646 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0633\u0627\u0648\u064a \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062f\u0627\u0626\u0646")},className:"p-6 space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0642\u064a\u062f *"}),(0,Qe.jsx)("input",{type:"date",value:l.date,onChange:e=>i(Be(Be({},l),{},{date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",required:!0})]}),(0,Qe.jsxs)("div",{className:"md:col-span-2",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641 *"}),(0,Qe.jsx)("input",{type:"text",value:l.description,onChange:e=>i(Be(Be({},l),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"\u0648\u0635\u0641 \u0627\u0644\u0642\u064a\u062f \u0627\u0644\u0645\u062d\u0627\u0633\u0628\u064a",required:!0})]}),(0,Qe.jsxs)("div",{className:"md:col-span-3",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0631\u062c\u0639"}),(0,Qe.jsx)("input",{type:"text",value:l.reference,onChange:e=>i(Be(Be({},l),{},{reference:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0641\u0627\u062a\u0648\u0631\u0629 \u0623\u0648 \u0627\u0644\u0645\u0631\u062c\u0639"})]})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"\u0625\u0636\u0627\u0641\u0629 \u0633\u0637\u0631 \u062c\u062f\u064a\u062f \u0644\u0644\u0642\u064a\u062f"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[(0,Qe.jsx)("div",{className:"md:col-span-2",children:(0,Qe.jsxs)("select",{value:o.accountId,onChange:e=>c(Be(Be({},o),{},{accountId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062d\u0633\u0627\u0628"}),e.filter(e=>e.isActive&&e.allowPosting).map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.code," - ",e.name]},e.id))]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("input",{type:"text",value:o.description,onChange:e=>c(Be(Be({},o),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"\u0627\u0644\u0648\u0635\u0641"})}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("input",{type:"number",step:"0.01",value:o.debit,onChange:e=>c(Be(Be({},o),{},{debit:e.target.value,credit:e.target.value&&parseFloat(e.target.value)>0?"":o.credit})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"\u0627\u0644\u0645\u062f\u064a\u0646"})}),(0,Qe.jsxs)("div",{className:"flex items-center space-x-2 rtl:space-x-reverse",children:[(0,Qe.jsx)("input",{type:"number",step:"0.01",value:o.credit,onChange:e=>c(Be(Be({},o),{},{credit:e.target.value,debit:e.target.value&&parseFloat(e.target.value)>0?"":o.debit})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"\u0627\u0644\u062f\u0627\u0626\u0646"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>{var t;if(!o.accountId||!o.debit&&!o.credit)return void alert("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u062d\u0633\u0627\u0628 \u0648\u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a");if(o.debit&&o.credit)return void alert("\u0644\u0627 \u064a\u0645\u0643\u0646 \u0625\u062f\u062e\u0627\u0644 \u0645\u062f\u064a\u0646 \u0648\u062f\u0627\u0626\u0646 \u0641\u064a \u0646\u0641\u0633 \u0627\u0644\u0633\u0637\u0631");const s={id:Date.now(),accountId:parseInt(o.accountId),description:o.description,debit:parseFloat(o.debit)||0,credit:parseFloat(o.credit)||0,accountName:(null===(t=e.find(e=>e.id===parseInt(o.accountId)))||void 0===t?void 0:t.name)||""};i(Be(Be({},l),{},{entries:[...l.entries,s]})),c({accountId:"",description:"",debit:"",credit:""})},className:"bg-orange-500 text-white p-2 rounded-md hover:bg-orange-600",title:"\u0625\u0636\u0627\u0641\u0629 \u0633\u0637\u0631",children:(0,Qe.jsx)(js,{className:"w-4 h-4"})})]})]})]}),l.entries.length>0&&(0,Qe.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Qe.jsx)("div",{className:"bg-gray-50 px-4 py-2 border-b border-gray-200",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-6 gap-4 text-sm font-medium text-gray-700",children:[(0,Qe.jsx)("div",{children:"\u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0645\u062f\u064a\u0646"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u062f\u0627\u0626\u0646"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("div",{children:"\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"})]})}),(0,Qe.jsx)("div",{className:"max-h-60 overflow-y-auto",children:l.entries.map((t,s)=>{var a;return(0,Qe.jsxs)("div",{className:"grid grid-cols-6 gap-4 px-4 py-2 text-sm ".concat(s%2===0?"bg-white":"bg-gray-50"),children:[(0,Qe.jsxs)("div",{className:"text-gray-900",children:[(0,Qe.jsx)("div",{className:"font-medium",children:t.accountName}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:null===(a=e.find(e=>e.id===t.accountId))||void 0===a?void 0:a.code})]}),(0,Qe.jsx)("div",{className:"text-gray-600",children:t.description}),(0,Qe.jsx)("div",{className:"text-left text-gray-900",children:t.debit>0?t.debit.toFixed(2):"-"}),(0,Qe.jsx)("div",{className:"text-left text-gray-900",children:t.credit>0?t.credit.toFixed(2):"-"}),(0,Qe.jsx)("div",{className:"text-left text-gray-600",children:m(t.accountId).toFixed(2)}),(0,Qe.jsx)("div",{children:(0,Qe.jsx)("button",{type:"button",onClick:()=>{return e=t.id,void i(Be(Be({},l),{},{entries:l.entries.filter(t=>t.id!==e)}));var e},className:"text-red-500 hover:text-red-700",children:(0,Qe.jsx)(Os,{className:"w-4 h-4"})})})]},t.id)})}),(0,Qe.jsx)("div",{className:"bg-gray-100 px-4 py-3 border-t border-gray-200",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-6 gap-4",children:[(0,Qe.jsx)("div",{className:"col-span-2"}),(0,Qe.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["\u0627\u0644\u0645\u062c\u0645\u0648\u0639: ",d.toFixed(2)]}),(0,Qe.jsxs)("div",{className:"text-sm font-medium text-gray-700",children:["\u0627\u0644\u0645\u062c\u0645\u0648\u0639: ",x.toFixed(2)]}),(0,Qe.jsxs)("div",{className:"text-sm font-medium ".concat(u?"text-green-600":"text-red-600"),children:["\u0627\u0644\u0641\u0631\u0642: ",Math.abs(d-x).toFixed(2)]}),(0,Qe.jsx)("div",{})]})})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-4 rtl:space-x-reverse pt-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",disabled:!u||l.entries.length<2,className:"px-4 py-2 rounded-md text-white ".concat(u&&l.entries.length>=2?"bg-orange-500 hover:bg-orange-600":"bg-gray-400 cursor-not-allowed"),children:"\u062d\u0641\u0638 \u0627\u0644\u0642\u064a\u062f"})]})]})]})})]})},Tr=()=>(0,Qe.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Qe.jsx)(Pr,{})}),zr=e=>{var t,s,a,n,l,i,o;let{onNavigate:c}=e;const{employees:d,departments:x,positions:u,addEmployee:m,updateEmployee:h,deleteEmployee:p,getEmployeeProfile:g}=Ye(),[f,b]=(0,r.useState)([]),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)("name"),[I,D]=(0,r.useState)("asc"),[_,L]=(0,r.useState)(!1),[E,M]=(0,r.useState)(!1),[P,T]=(0,r.useState)(!1),[z,O]=(0,r.useState)(null),[A,F]=(0,r.useState)({firstName:"",lastName:"",email:"",phone:"",nationalId:"",dateOfBirth:"",hireDate:"",departmentId:"",positionId:"",basicSalary:"",address:"",emergencyContact:"",emergencyPhone:"",qualification:"",experience:"",gender:"male",nationality:"saudi",status:"active"});(0,r.useEffect)(()=>{R()},[d,v,y,w,k,I]);const R=()=>{let e=[...d];v&&(e=e.filter(e=>{var t,s,a,r;return(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(v.toLowerCase()))||(null===(a=e.email)||void 0===a?void 0:a.toLowerCase().includes(v.toLowerCase()))||(null===(r=e.employeeNumber)||void 0===r?void 0:r.includes(v))})),y&&(e=e.filter(e=>e.departmentId===parseInt(y))),w&&(e=e.filter(e=>e.status===w)),e.sort((e,t)=>{let s=e[k]||"",a=t[k]||"";if("department"===k){const r=x.find(t=>t.id===e.departmentId),n=x.find(e=>e.id===t.departmentId);s=(null===r||void 0===r?void 0:r.name)||"",a=(null===n||void 0===n?void 0:n.name)||""}if("position"===k){const r=u.find(t=>t.id===e.positionId),n=u.find(e=>e.id===t.positionId);s=(null===r||void 0===r?void 0:r.title)||"",a=(null===n||void 0===n?void 0:n.title)||""}return"string"===typeof s?"asc"===I?s.localeCompare(a,"ar"):a.localeCompare(s,"ar"):"asc"===I?s-a:a-s}),b(e)},V=()=>{F({firstName:"",lastName:"",email:"",phone:"",nationalId:"",dateOfBirth:"",hireDate:"",departmentId:"",positionId:"",basicSalary:"",address:"",emergencyContact:"",emergencyPhone:"",qualification:"",experience:"",gender:"male",nationality:"saudi",status:"active"})},B=e=>{O(e),F({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",phone:e.phone||"",nationalId:e.nationalId||"",dateOfBirth:e.dateOfBirth||"",hireDate:e.hireDate||"",departmentId:e.departmentId||"",positionId:e.positionId||"",basicSalary:e.basicSalary||"",address:e.address||"",emergencyContact:e.emergencyContact||"",emergencyPhone:e.emergencyPhone||"",qualification:e.qualification||"",experience:e.experience||"",gender:e.gender||"male",nationality:e.nationality||"saudi",status:e.status||"active"}),M(!0)},q=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on_leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Q=e=>{switch(e){case"active":return"\u0646\u0634\u0637";case"inactive":return"\u063a\u064a\u0631 \u0646\u0634\u0637";case"on_leave":return"\u0641\u064a \u0625\u062c\u0627\u0632\u0629";default:return e}};return(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(Ws,{className:"text-2xl text-orange-500"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646 \u0648\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"})]})]}),(0,Qe.jsxs)("div",{className:"flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u064a,\u0627\u0644\u0627\u0633\u0645,\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a,\u0627\u0644\u0647\u0627\u062a\u0641,\u0627\u0644\u0642\u0633\u0645,\u0627\u0644\u0645\u0646\u0635\u0628,\u0627\u0644\u0631\u0627\u062a\u0628,\u0627\u0644\u062d\u0627\u0644\u0629\n"+f.map(e=>{const t=x.find(t=>t.id===e.departmentId),s=u.find(t=>t.id===e.positionId);return"".concat(e.employeeNumber||"",',"').concat(e.firstName||""," ").concat(e.lastName||"",'",').concat(e.email||"",",").concat(e.phone||"",",").concat((null===t||void 0===t?void 0:t.name)||"",",").concat((null===s||void 0===s?void 0:s.title)||"",",").concat(e.basicSalary||"",",").concat(e.status||"")}).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","employees.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"flex items-center gap-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:[(0,Qe.jsx)(qt,{}),"\u062a\u0635\u062f\u064a\u0631"]}),(0,Qe.jsxs)("button",{onClick:()=>{V(),L(!0)},className:"flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0638\u0641"]})]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-3 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645\u060c \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a\u060c \u0623\u0648 \u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u064a...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:v,onChange:e=>j(e.target.value)})]}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:y,onChange:e=>N(e.target.value),children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0642\u0633\u0627\u0645"}),x.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:w,onChange:e=>S(e.target.value),children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"on_leave",children:"\u0641\u064a \u0625\u062c\u0627\u0632\u0629"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:k,onChange:e=>C(e.target.value),children:[(0,Qe.jsx)("option",{value:"name",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0627\u0633\u0645"}),(0,Qe.jsx)("option",{value:"employeeNumber",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u064a"}),(0,Qe.jsx)("option",{value:"department",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsx)("option",{value:"position",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsx)("option",{value:"basicSalary",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("option",{value:"hireDate",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0639\u064a\u064a\u0646"})]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,Qe.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-blue-600 text-sm",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:f.length})]}),(0,Qe.jsx)(Ws,{className:"text-blue-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-green-600 text-sm",children:"\u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646 \u0627\u0644\u0646\u0634\u0637\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-800",children:f.filter(e=>"active"===e.status).length})]}),(0,Qe.jsx)(Qs,{className:"text-green-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-yellow-600 text-sm",children:"\u0641\u064a \u0625\u062c\u0627\u0632\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-yellow-800",children:f.filter(e=>"on_leave"===e.status).length})]}),(0,Qe.jsx)(St,{className:"text-yellow-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-purple-600 text-sm",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-purple-800",children:f.length>0?Math.round(f.reduce((e,t)=>e+(parseFloat(t.basicSalary)||0),0)/f.length):0})]}),(0,Qe.jsx)(hs,{className:"text-purple-500 text-xl"})]})})]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u0633\u0645/\u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===f.length?(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0648\u0638\u0641\u064a\u0646 \u0645\u0633\u062c\u0644\u064a\u0646"})}):f.map(e=>{var t,s;const a=x.find(t=>t.id===e.departmentId),r=u.find(t=>t.id===e.positionId);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsxs)("div",{className:"h-10 w-10 rounded-full bg-orange-500 flex items-center justify-center text-white font-bold",children:[(null===(t=e.firstName)||void 0===t?void 0:t.charAt(0))||"",(null===(s=e.lastName)||void 0===s?void 0:s.charAt(0))||""]}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.nationalId})]})]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.employeeNumber||"-"}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-900",children:(null===a||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:(null===r||void 0===r?void 0:r.title)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Qe.jsxs)("div",{className:"text-sm text-gray-900 flex items-center gap-1",children:[(0,Qe.jsx)(bs,{className:"text-xs text-gray-400"}),e.phone||"-"]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[(0,Qe.jsx)(Ht,{className:"text-xs text-gray-400"}),e.email||"-"]})]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qe.jsx)(hs,{className:"text-xs text-green-500"}),parseFloat(e.basicSalary||0).toLocaleString()," \u0631\u064a\u0627\u0644"]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(q(e.status)),children:Q(e.status)})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(async e=>{try{const t=g(e.id);O(t),T(!0)}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641: "+t.message)}})(e),className:"text-blue-600 hover:text-blue-900 p-1",title:"\u0639\u0631\u0636 \u0627\u0644\u0645\u0644\u0641",children:(0,Qe.jsx)($t,{})}),(0,Qe.jsx)("button",{onClick:()=>B(e),className:"text-yellow-600 hover:text-yellow-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0638\u0641 "'.concat(e.firstName," ").concat(e.lastName,'"\u061f')))try{p(e.id),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0648\u0638\u0641: "+t.message)}})(e),className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id)})})]})})}),_&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0648\u0638\u0641 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{m(A),L(!1),V(),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0648\u0638\u0641: "+t.message)}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.firstName,onChange:e=>F(Be(Be({},A),{},{firstName:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062e\u064a\u0631 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.lastName,onChange:e=>F(Be(Be({},A),{},{lastName:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a *"}),(0,Qe.jsx)("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.email,onChange:e=>F(Be(Be({},A),{},{email:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,Qe.jsx)("input",{type:"tel",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.phone,onChange:e=>F(Be(Be({},A),{},{phone:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.nationalId,onChange:e=>F(Be(Be({},A),{},{nationalId:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"}),(0,Qe.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.dateOfBirth,onChange:e=>F(Be(Be({},A),{},{dateOfBirth:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062c\u0646\u0633"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.gender,onChange:e=>F(Be(Be({},A),{},{gender:e.target.value})),children:[(0,Qe.jsx)("option",{value:"male",children:"\u0630\u0643\u0631"}),(0,Qe.jsx)("option",{value:"female",children:"\u0623\u0646\u062b\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.nationality,onChange:e=>F(Be(Be({},A),{},{nationality:e.target.value})),children:[(0,Qe.jsx)("option",{value:"saudi",children:"\u0633\u0639\u0648\u062f\u064a"}),(0,Qe.jsx)("option",{value:"non_saudi",children:"\u063a\u064a\u0631 \u0633\u0639\u0648\u062f\u064a"})]})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0639\u064a\u064a\u0646 *"}),(0,Qe.jsx)("input",{type:"date",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.hireDate,onChange:e=>F(Be(Be({},A),{},{hireDate:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u0633\u0645 *"}),(0,Qe.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.departmentId,onChange:e=>F(Be(Be({},A),{},{departmentId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645"}),x.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.positionId,onChange:e=>F(Be(Be({},A),{},{positionId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0635\u0628"}),u.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a *"}),(0,Qe.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.basicSalary,onChange:e=>F(Be(Be({},A),{},{basicSalary:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0624\u0647\u0644 \u0627\u0644\u0639\u0644\u0645\u064a"}),(0,Qe.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.qualification,onChange:e=>F(Be(Be({},A),{},{qualification:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0633\u0646\u0648\u0627\u062a \u0627\u0644\u062e\u0628\u0631\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.experience,onChange:e=>F(Be(Be({},A),{},{experience:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.status,onChange:e=>F(Be(Be({},A),{},{status:e.target.value})),children:[(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"on_leave",children:"\u0641\u064a \u0625\u062c\u0627\u0632\u0629"})]})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u0637\u0627\u0631\u0626"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.emergencyContact,onChange:e=>F(Be(Be({},A),{},{emergencyContact:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0647\u0627\u062a\u0641 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.emergencyPhone,onChange:e=>F(Be(Be({},A),{},{emergencyPhone:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Qe.jsx)("textarea",{rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.address,onChange:e=>F(Be(Be({},A),{},{address:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>L(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"\u062d\u0641\u0638 \u0627\u0644\u0645\u0648\u0638\u0641"})]})]})]})})}),E&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{h(z.id,A),M(!1),O(null),V(),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0645\u0648\u0638\u0641: "+t.message)}},className:"space-y-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.firstName,onChange:e=>F(Be(Be({},A),{},{firstName:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062e\u064a\u0631 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.lastName,onChange:e=>F(Be(Be({},A),{},{lastName:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a *"}),(0,Qe.jsx)("input",{type:"email",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.email,onChange:e=>F(Be(Be({},A),{},{email:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,Qe.jsx)("input",{type:"tel",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.phone,onChange:e=>F(Be(Be({},A),{},{phone:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.nationalId,onChange:e=>F(Be(Be({},A),{},{nationalId:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"}),(0,Qe.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.dateOfBirth,onChange:e=>F(Be(Be({},A),{},{dateOfBirth:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062c\u0646\u0633"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.gender,onChange:e=>F(Be(Be({},A),{},{gender:e.target.value})),children:[(0,Qe.jsx)("option",{value:"male",children:"\u0630\u0643\u0631"}),(0,Qe.jsx)("option",{value:"female",children:"\u0623\u0646\u062b\u0649"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.nationality,onChange:e=>F(Be(Be({},A),{},{nationality:e.target.value})),children:[(0,Qe.jsx)("option",{value:"saudi",children:"\u0633\u0639\u0648\u062f\u064a"}),(0,Qe.jsx)("option",{value:"non_saudi",children:"\u063a\u064a\u0631 \u0633\u0639\u0648\u062f\u064a"})]})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0639\u064a\u064a\u0646 *"}),(0,Qe.jsx)("input",{type:"date",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.hireDate,onChange:e=>F(Be(Be({},A),{},{hireDate:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u0633\u0645 *"}),(0,Qe.jsxs)("select",{required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.departmentId,onChange:e=>F(Be(Be({},A),{},{departmentId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645"}),x.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.positionId,onChange:e=>F(Be(Be({},A),{},{positionId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u0635\u0628"}),u.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.title},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a *"}),(0,Qe.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.basicSalary,onChange:e=>F(Be(Be({},A),{},{basicSalary:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0624\u0647\u0644 \u0627\u0644\u0639\u0644\u0645\u064a"}),(0,Qe.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.qualification,onChange:e=>F(Be(Be({},A),{},{qualification:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0633\u0646\u0648\u0627\u062a \u0627\u0644\u062e\u0628\u0631\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.experience,onChange:e=>F(Be(Be({},A),{},{experience:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.status,onChange:e=>F(Be(Be({},A),{},{status:e.target.value})),children:[(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"on_leave",children:"\u0641\u064a \u0625\u062c\u0627\u0632\u0629"})]})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4 border-b pb-2",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u0637\u0627\u0631\u0626"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.emergencyContact,onChange:e=>F(Be(Be({},A),{},{emergencyContact:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0647\u0627\u062a\u0641 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"tel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.emergencyPhone,onChange:e=>F(Be(Be({},A),{},{emergencyPhone:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,Qe.jsx)("textarea",{rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:A.address,onChange:e=>F(Be(Be({},A),{},{address:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>M(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"})]})]})]})})}),P&&z&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsx)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a \u0644\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white p-6 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-6",children:[(0,Qe.jsxs)("div",{className:"h-24 w-24 rounded-full bg-white bg-opacity-20 flex items-center justify-center text-3xl font-bold",children:[(null===(t=z.firstName)||void 0===t?void 0:t.charAt(0))||"",(null===(s=z.lastName)||void 0===s?void 0:s.charAt(0))||""]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("h3",{className:"text-2xl font-bold",children:[z.firstName," ",z.lastName]}),(0,Qe.jsxs)("p",{className:"text-orange-100",children:["\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u064a: ",z.employeeNumber||"-"]}),(0,Qe.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,Qe.jsx)("span",{className:"bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:(null===(a=x.find(e=>e.id===z.departmentId))||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("span",{className:"px-3 py-1 rounded-full text-sm ".concat(q(z.status)),children:Q(z.status)})]})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(Qs,{className:"text-orange-500"}),"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.email||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.phone||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.nationalId||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.dateOfBirth||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062c\u0646\u0633:"}),(0,Qe.jsx)("span",{className:"font-medium",children:"male"===z.gender?"\u0630\u0643\u0631":"\u0623\u0646\u062b\u0649"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"font-medium",children:"saudi"===z.nationality?"\u0633\u0639\u0648\u062f\u064a":"\u063a\u064a\u0631 \u0633\u0639\u0648\u062f\u064a"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(ls,{className:"text-orange-500"}),"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0642\u0633\u0645:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(n=x.find(e=>e.id===z.departmentId))||void 0===n?void 0:n.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0646\u0635\u0628:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(l=u.find(e=>e.id===z.positionId))||void 0===l?void 0:l.title)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0639\u064a\u064a\u0646:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.hireDate||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a:"}),(0,Qe.jsxs)("span",{className:"font-medium text-green-600",children:[parseFloat(z.basicSalary||0).toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0624\u0647\u0644 \u0627\u0644\u0639\u0644\u0645\u064a:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.qualification||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0633\u0646\u0648\u0627\u062a \u0627\u0644\u062e\u0628\u0631\u0629:"}),(0,Qe.jsxs)("span",{className:"font-medium",children:[z.experience||"0"," \u0633\u0646\u0629"]})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(St,{className:"text-blue-500"}),"\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0627\u0644\u062d\u0636\u0648\u0631 \u0627\u0644\u0634\u0647\u0631\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u062d\u0636\u0648\u0631:"}),(0,Qe.jsxs)("span",{className:"font-medium text-blue-600",children:[(null===(i=z.currentMonthAttendance)||void 0===i?void 0:i.length)||0," \u064a\u0648\u0645"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0633\u0627\u0639\u0627\u062a:"}),(0,Qe.jsxs)("span",{className:"font-medium text-blue-600",children:[(null===(o=z.totalWorkingHours)||void 0===o?void 0:o.toFixed(2))||"0"," \u0633\u0627\u0639\u0629"]})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(bs,{className:"text-red-500"}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u0637\u0627\u0631\u0626"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0633\u0645 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.emergencyContact||"-"})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0647\u0627\u062a\u0641 \u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644:"}),(0,Qe.jsx)("span",{className:"font-medium",children:z.emergencyPhone||"-"})]})]})]})]}),z.address&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h4",{className:"font-bold text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(ms,{className:"text-gray-500"}),"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:z.address})]}),(0,Qe.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,Qe.jsx)("button",{onClick:()=>T(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"\u0625\u063a\u0644\u0627\u0642"}),(0,Qe.jsx)("button",{onClick:()=>{T(!1),B(z)},className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"})]})]})]})})})]})},Or=e=>{let{onNavigate:t}=e;const{employees:s,departments:a,positions:n,addDepartment:l,updateDepartment:i,deleteDepartment:o}=Ye(),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)("departments"),[p,g]=(0,r.useState)(new Set),[f,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[k,C]=(0,r.useState)(null),[I,D]=(0,r.useState)(null),[_,L]=(0,r.useState)({name:"",description:"",parentId:"",managerId:"",budget:"",location:"",status:"active"}),[E,M]=(0,r.useState)({title:"",description:"",departmentId:"",level:1,minSalary:"",maxSalary:"",requirements:"",responsibilities:"",status:"active"});(0,r.useEffect)(()=>{P()},[a,x]);const P=()=>{let e=[...a];x&&(e=e.filter(e=>{var t,s;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))})),d(e)},T=()=>{L({name:"",description:"",parentId:"",managerId:"",budget:"",location:"",status:"active"})},z=()=>{M({title:"",description:"",departmentId:"",level:1,minSalary:"",maxSalary:"",requirements:"",responsibilities:"",status:"active"})},O=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"active":return"\u0646\u0634\u0637";case"inactive":return"\u063a\u064a\u0631 \u0646\u0634\u0637";default:return e}},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const a=e.children&&e.children.length>0,r=p.has(e.id),n=s.filter(t=>t.departmentId===e.id).length;return(0,Qe.jsxs)("div",{className:"select-none",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded cursor-pointer",style:{paddingRight:"".concat(20*t+8,"px")},onClick:()=>a&&(e=>{const t=new Set(p);t.has(e)?t.delete(e):t.add(e),g(t)})(e.id),children:[(0,Qe.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[a?r?(0,Qe.jsx)(Et,{className:"text-xs text-gray-500"}):(0,Qe.jsx)(Mt,{className:"text-xs text-gray-500"}):(0,Qe.jsx)("div",{className:"w-3"}),r?(0,Qe.jsx)(ts,{className:"text-orange-500"}):(0,Qe.jsx)(ss,{className:"text-orange-500"}),(0,Qe.jsx)("span",{className:"font-medium text-gray-800",children:e.name}),(0,Qe.jsxs)("span",{className:"text-sm text-gray-500",children:["(",n," \u0645\u0648\u0638\u0641)"]}),(0,Qe.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(O(e.status)),children:A(e.status)})]}),(0,Qe.jsxs)("div",{className:"flex gap-1",children:[(0,Qe.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),C(s=e),L({name:s.name||"",description:s.description||"",parentId:s.parentId||"",managerId:s.managerId||"",budget:s.budget||"",location:s.location||"",status:s.status||"active"}),j(!0)},className:"text-yellow-600 hover:text-yellow-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{className:"text-xs"})}),(0,Qe.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0642\u0633\u0645 "'.concat(e.name,'"\u061f')))try{o(e.id),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0642\u0633\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0642\u0633\u0645: "+t.message)}})(e)},className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{className:"text-xs"})})]})]}),a&&r&&(0,Qe.jsx)("div",{children:e.children.map(e=>F(e,t+1))})]},e.id)},R=(e=>{const t=[],s=new Map;return e.forEach(e=>{s.set(e.id,Be(Be({},e),{},{children:[]}))}),e.forEach(e=>{const a=s.get(e.id);if(e.parentId){const t=s.get(e.parentId);t&&t.children.push(a)}else t.push(a)}),t})(c);return(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(_s,{className:"text-2xl text-orange-500"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062a\u0646\u0638\u064a\u0645"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0642\u0633\u0627\u0645 \u0648\u0627\u0644\u0645\u0646\u0627\u0635\u0628 \u0648\u0627\u0644\u0647\u064a\u0643\u0644 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a"})]})]}),(0,Qe.jsx)("div",{className:"flex gap-3",children:"departments"===m?(0,Qe.jsxs)("button",{onClick:()=>{T(),b(!0)},className:"flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645"]}):(0,Qe.jsxs)("button",{onClick:()=>{z(),N(!0)},className:"flex items-center gap-2 bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0635\u0628"]})})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,Qe.jsxs)("div",{className:"flex border-b mb-6",children:[(0,Qe.jsx)("button",{onClick:()=>h("departments"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("departments"===m?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)(vt,{}),"\u0627\u0644\u0623\u0642\u0633\u0627\u0645"]})}),(0,Qe.jsx)("button",{onClick:()=>h("positions"),className:"px-4 py-2 font-medium border-b-2 transition-colors ".concat("positions"===m?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"),children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)(Qs,{}),"\u0627\u0644\u0645\u0646\u0627\u0635\u0628"]})})]}),(0,Qe.jsxs)("div",{className:"relative mb-6",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-3 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"departments"===m?"\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0642\u0633\u0627\u0645...":"\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0646\u0627\u0635\u0628...",className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:x,onChange:e=>u(e.target.value)})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-blue-600 text-sm",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0642\u0633\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-800",children:a.length})]}),(0,Qe.jsx)(vt,{className:"text-blue-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-green-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-green-600 text-sm",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u0627\u0635\u0628"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-800",children:n.length})]}),(0,Qe.jsx)(Qs,{className:"text-green-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-purple-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-purple-600 text-sm",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-purple-800",children:s.length})]}),(0,Qe.jsx)(Ws,{className:"text-purple-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-yellow-600 text-sm",children:"\u0627\u0644\u0623\u0642\u0633\u0627\u0645 \u0627\u0644\u0646\u0634\u0637\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-yellow-800",children:a.filter(e=>"active"===e.status).length})]}),(0,Qe.jsx)(As,{className:"text-yellow-500 text-xl"})]})})]})]}),"departments"===m?(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-sm",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"\u0627\u0644\u0647\u064a\u0643\u0644 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a"}),0===R.length?(0,Qe.jsx)("div",{className:"text-center py-12 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0642\u0633\u0627\u0645 \u0645\u0633\u062c\u0644\u0629"}):(0,Qe.jsx)("div",{className:"border rounded-lg bg-gray-50",children:R.map(e=>F(e))})]})}):(0,Qe.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0633\u062a\u0648\u0649"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0646\u0637\u0627\u0642 \u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[n.filter(e=>{var t,s;return!x||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))}).map(e=>{const t=a.find(t=>t.id===e.departmentId);return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title||"-"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.description||"-"})]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===t||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Qe.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:["\u0645\u0633\u062a\u0648\u0649 ",e.level||1]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{children:["\u0645\u0646: ",parseFloat(e.minSalary||0).toLocaleString()," \u0631\u064a\u0627\u0644"]}),(0,Qe.jsxs)("div",{children:["\u0625\u0644\u0649: ",parseFloat(e.maxSalary||0).toLocaleString()," \u0631\u064a\u0627\u0644"]})]})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(O(e.status)),children:A(e.status)})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{D(e),M({title:e.title||"",description:e.description||"",departmentId:e.departmentId||"",level:e.level||1,minSalary:e.minSalary||"",maxSalary:e.maxSalary||"",requirements:e.requirements||"",responsibilities:e.responsibilities||"",status:e.status||"active"}),S(!0)})(e),className:"text-yellow-600 hover:text-yellow-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{if(window.confirm('\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u0635\u0628 "'.concat(e.title,'"\u061f')))try{alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u0635\u0628 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0645\u0646\u0635\u0628: "+t.message)}})(e),className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id)}),0===n.filter(e=>{var t,s;return!x||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))}).length&&(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u0627\u0635\u0628 \u0645\u0633\u062c\u0644\u0629"})})]})]})})}),f&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0642\u0633\u0645 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{l(_),b(!1),T(),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0642\u0633\u0645 \u0628\u0646\u062c\u0627\u062d")}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0642\u0633\u0645: "+t.message)}},className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0642\u0633\u0645 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.name,onChange:e=>L(Be(Be({},_),{},{name:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0623\u0628"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.parentId,onChange:e=>L(Be(Be({},_),{},{parentId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0642\u0633\u0645 \u0631\u0626\u064a\u0633\u064a"}),a.filter(e=>!e.parentId).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.managerId,onChange:e=>L(Be(Be({},_),{},{managerId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062f\u064a\u0631"}),s.filter(e=>"active"===e.status).map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.budget,onChange:e=>L(Be(Be({},_),{},{budget:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,Qe.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.location,onChange:e=>L(Be(Be({},_),{},{location:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.status,onChange:e=>L(Be(Be({},_),{},{status:e.target.value})),children:[(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("textarea",{rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:_.description,onChange:e=>L(Be(Be({},_),{},{description:e.target.value}))})]}),(0,Qe.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"\u062d\u0641\u0638 \u0627\u0644\u0642\u0633\u0645"})]})]})]})})}),y&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qe.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0635\u0628 \u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Qe.jsxs)("form",{onSubmit:e=>{e.preventDefault();try{alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u0635\u0628 \u0628\u0646\u062c\u0627\u062d"),N(!1),z()}catch(t){alert("\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u0635\u0628: "+t.message)}},className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0635\u0628 *"}),(0,Qe.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.title,onChange:e=>M(Be(Be({},E),{},{title:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.departmentId,onChange:e=>M(Be(Be({},E),{},{departmentId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0642\u0633\u0645"}),a.filter(e=>"active"===e.status).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0633\u062a\u0648\u0649"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.level,onChange:e=>M(Be(Be({},E),{},{level:parseInt(e.target.value)})),children:[(0,Qe.jsx)("option",{value:1,children:"\u0645\u0633\u062a\u0648\u0649 1"}),(0,Qe.jsx)("option",{value:2,children:"\u0645\u0633\u062a\u0648\u0649 2"}),(0,Qe.jsx)("option",{value:3,children:"\u0645\u0633\u062a\u0648\u0649 3"}),(0,Qe.jsx)("option",{value:4,children:"\u0645\u0633\u062a\u0648\u0649 4"}),(0,Qe.jsx)("option",{value:5,children:"\u0645\u0633\u062a\u0648\u0649 5"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0644\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.minSalary,onChange:e=>M(Be(Be({},E),{},{minSalary:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("input",{type:"number",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.maxSalary,onChange:e=>M(Be(Be({},E),{},{maxSalary:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.status,onChange:e=>M(Be(Be({},E),{},{status:e.target.value})),children:[(0,Qe.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0646\u0635\u0628"}),(0,Qe.jsx)("textarea",{rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.description,onChange:e=>M(Be(Be({},E),{},{description:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u062a\u0637\u0644\u0628\u0627\u062a"}),(0,Qe.jsx)("textarea",{rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.requirements,onChange:e=>M(Be(Be({},E),{},{requirements:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644\u064a\u0627\u062a"}),(0,Qe.jsx)("textarea",{rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500",value:E.responsibilities,onChange:e=>M(Be(Be({},E),{},{responsibilities:e.target.value}))})]}),(0,Qe.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>N(!1),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)("button",{type:"submit",className:"px-6 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600",children:"\u062d\u0641\u0638 \u0627\u0644\u0645\u0646\u0635\u0628"})]})]})]})})})]})},Ar=e=>{let{onNavigate:t}=e;const{employees:s,departments:a,attendanceRecords:n,addAttendanceRecord:l,updateAttendanceRecord:i,deleteAttendanceRecord:o,getAttendanceByEmployee:c,getMonthlyAttendanceReport:d}=Ye(),[x,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)("date"),[w,S]=(0,r.useState)("desc"),[k,C]=(0,r.useState)(!1),[I,D]=(0,r.useState)(!1),[_,L]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),[P,T]=(0,r.useState)({employeeId:"",date:(new Date).toISOString().split("T")[0],checkIn:"",checkOut:"",breakStart:"",breakEnd:"",status:"present",overtimeHours:0,lateMinutes:0,earlyLeaveMinutes:0,notes:""}),[z,O]=(0,r.useState)({totalDays:0,presentDays:0,absentDays:0,lateDays:0,overtimeHours:0});(0,r.useEffect)(()=>{A()},[n,m,p,f,v,y,w]);const A=()=>{let e=[...n];if(m){const t=s.find(e=>{var t,s;return(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))});t&&(e=e.filter(e=>e.employeeId===t.id))}p&&(e=e.filter(e=>e.employeeId===parseInt(p))),f&&(e=e.filter(e=>e.date===f)),v&&(e=e.filter(e=>e.status===v)),e.sort((e,t)=>{let s=e[y],a=t[y];return"date"===y&&(s=new Date(s),a=new Date(a)),"asc"===w?s<a?-1:s>a?1:0:s>a?-1:s<a?1:0}),u(e),F(e)},F=e=>{const t=e.filter(e=>!p||e.employeeId===parseInt(p)),s=t.length,a=t.filter(e=>"present"===e.status).length,r=t.filter(e=>"absent"===e.status).length,n=t.filter(e=>e.lateMinutes>0).length,l=t.reduce((e,t)=>e+(t.overtimeHours||0),0);O({totalDays:s,presentDays:a,absentDays:r,lateDays:n,overtimeHours:l})},R=e=>{const t=s.find(t=>t.id===e);return t?"".concat(t.firstName," ").concat(t.lastName):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},V=e=>{const t=s.find(t=>t.id===e);if(!t)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";const r=a.find(e=>e.id===t.departmentId);return r?r.name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},B=e=>{if(!e.checkIn||!e.checkOut)return 0;const t=new Date("".concat(e.date,"T").concat(e.checkIn));let s=(new Date("".concat(e.date,"T").concat(e.checkOut))-t)/36e5;if(e.breakStart&&e.breakEnd){const t=new Date("".concat(e.date,"T").concat(e.breakStart));s-=(new Date("".concat(e.date,"T").concat(e.breakEnd))-t)/36e5}return Math.max(0,s)},q=()=>{T({employeeId:"",date:(new Date).toISOString().split("T")[0],checkIn:"",checkOut:"",breakStart:"",breakEnd:"",status:"present",overtimeHours:0,lateMinutes:0,earlyLeaveMinutes:0,notes:""}),M(null)};return(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(zt,{className:"text-2xl text-orange-500"}),(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062d\u0636\u0648\u0631 \u0648\u0627\u0644\u0627\u0646\u0635\u0631\u0627\u0641"})]}),(0,Qe.jsxs)("button",{onClick:()=>C(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(js,{})," \u062a\u0633\u062c\u064a\u0644 \u062d\u0636\u0648\u0631"]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u064a\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:z.totalDays})]}),(0,Qe.jsx)(St,{className:"text-orange-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u062d\u0636\u0648\u0631"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-600",children:z.presentDays})]}),(0,Qe.jsx)(Nt,{className:"text-green-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u063a\u064a\u0627\u0628"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-red-600",children:z.absentDays})]}),(0,Qe.jsx)(wt,{className:"text-red-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0623\u064a\u0627\u0645 \u0627\u0644\u062a\u0623\u062e\u064a\u0631"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:z.lateDays})]}),(0,Qe.jsx)(Vs,{className:"text-yellow-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0633\u0627\u0639\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:z.overtimeHours.toFixed(1)})]}),(0,Qe.jsx)(hs,{className:"text-blue-500 text-xl"})]})})]})]}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0645\u0648\u0638\u0641...",value:m,onChange:e=>h(e.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),s.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),(0,Qe.jsx)("input",{type:"date",value:f,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"present",children:"\u062d\u0627\u0636\u0631"}),(0,Qe.jsx)("option",{value:"absent",children:"\u063a\u0627\u0626\u0628"}),(0,Qe.jsx)("option",{value:"late",children:"\u0645\u062a\u0623\u062e\u0631"}),(0,Qe.jsx)("option",{value:"half-day",children:"\u0646\u0635\u0641 \u064a\u0648\u0645"})]}),(0,Qe.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"date",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("option",{value:"employeeId",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("option",{value:"status",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("option",{value:"workHours",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644"})]}),(0,Qe.jsxs)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,\u0627\u0644\u062a\u0627\u0631\u064a\u062e,\u0627\u0644\u0645\u0648\u0638\u0641,\u0627\u0644\u0642\u0633\u0645,\u0648\u0642\u062a \u0627\u0644\u062f\u062e\u0648\u0644,\u0648\u0642\u062a \u0627\u0644\u062e\u0631\u0648\u062c,\u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644,\u0627\u0644\u062d\u0627\u0644\u0629,\u0627\u0644\u062a\u0623\u062e\u064a\u0631 (\u062f\u0642\u064a\u0642\u0629),\u0633\u0627\u0639\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629,\u0645\u0644\u0627\u062d\u0638\u0627\u062a\n"+x.map(e=>"".concat(e.date,",").concat(R(e.employeeId),",").concat(V(e.employeeId),",").concat(e.checkIn||"",",").concat(e.checkOut||"",",").concat(e.workHours||0,",").concat(e.status,",").concat(e.lateMinutes||0,",").concat(e.overtimeHours||0,",").concat(e.notes||"")).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","attendance_records.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(qt,{})," \u062a\u0635\u062f\u064a\u0631"]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0648\u0642\u062a \u0627\u0644\u062f\u062e\u0648\u0644"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0648\u0642\u062a \u0627\u0644\u062e\u0631\u0648\u062c"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.date}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:R(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:V(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.checkIn||"-"}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.checkOut||"-"}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.workHours?e.workHours.toFixed(1):0," \u0633\u0627\u0639\u0629"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("present"===e.status?"bg-green-100 text-green-800":"absent"===e.status?"bg-red-100 text-red-800":"late"===e.status?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"present"===e.status?"\u062d\u0627\u0636\u0631":"absent"===e.status?"\u063a\u0627\u0626\u0628":"late"===e.status?"\u0645\u062a\u0623\u062e\u0631":"\u0646\u0635\u0641 \u064a\u0648\u0645"})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{M(e),T({employeeId:e.employeeId.toString(),date:e.date,checkIn:e.checkIn||"",checkOut:e.checkOut||"",breakStart:e.breakStart||"",breakEnd:e.breakEnd||"",status:e.status,overtimeHours:e.overtimeHours||0,lateMinutes:e.lateMinutes||0,earlyLeaveMinutes:e.earlyLeaveMinutes||0,notes:e.notes||""}),D(!0)})(e),className:"text-orange-600 hover:text-orange-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u062d\u0636\u0648\u0631 \u0647\u0630\u0627\u061f")&&(o(t),alert("\u062a\u0645 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u062d\u0636\u0648\u0631 \u0628\u0646\u062c\u0627\u062d")));var t},className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id))})]})}),0===x.length&&(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(zt,{className:"mx-auto text-4xl text-gray-400 mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0633\u062c\u0644\u0627\u062a \u062d\u0636\u0648\u0631 \u0645\u0633\u062c\u0644\u0629"})]})]}),(k||I)&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:k?"\u062a\u0633\u062c\u064a\u0644 \u062d\u0636\u0648\u0631 \u062c\u062f\u064a\u062f":"\u062a\u0639\u062f\u064a\u0644 \u0633\u062c\u0644 \u0627\u0644\u062d\u0636\u0648\u0631"})}),(0,Qe.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0648\u0638\u0641 *"}),(0,Qe.jsxs)("select",{value:P.employeeId,onChange:e=>T(Be(Be({},P),{},{employeeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0638\u0641"}),s.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e *"}),(0,Qe.jsx)("input",{type:"date",value:P.date,onChange:e=>T(Be(Be({},P),{},{date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0648\u0642\u062a \u0627\u0644\u062f\u062e\u0648\u0644"}),(0,Qe.jsx)("input",{type:"time",value:P.checkIn,onChange:e=>T(Be(Be({},P),{},{checkIn:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0648\u0642\u062a \u0627\u0644\u062e\u0631\u0648\u062c"}),(0,Qe.jsx)("input",{type:"time",value:P.checkOut,onChange:e=>T(Be(Be({},P),{},{checkOut:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0627\u0633\u062a\u0631\u0627\u062d\u0629"}),(0,Qe.jsx)("input",{type:"time",value:P.breakStart,onChange:e=>T(Be(Be({},P),{},{breakStart:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0627\u0633\u062a\u0631\u0627\u062d\u0629"}),(0,Qe.jsx)("input",{type:"time",value:P.breakEnd,onChange:e=>T(Be(Be({},P),{},{breakEnd:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:P.status,onChange:e=>T(Be(Be({},P),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"present",children:"\u062d\u0627\u0636\u0631"}),(0,Qe.jsx)("option",{value:"absent",children:"\u063a\u0627\u0626\u0628"}),(0,Qe.jsx)("option",{value:"late",children:"\u0645\u062a\u0623\u062e\u0631"}),(0,Qe.jsx)("option",{value:"half-day",children:"\u0646\u0635\u0641 \u064a\u0648\u0645"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062f\u0642\u0627\u0626\u0642 \u0627\u0644\u062a\u0623\u062e\u064a\u0631"}),(0,Qe.jsx)("input",{type:"number",min:"0",value:P.lateMinutes,onChange:e=>T(Be(Be({},P),{},{lateMinutes:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0633\u0627\u0639\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",step:"0.5",min:"0",value:P.overtimeHours,onChange:e=>T(Be(Be({},P),{},{overtimeHours:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062f\u0642\u0627\u0626\u0642 \u0627\u0644\u0645\u063a\u0627\u062f\u0631\u0629 \u0627\u0644\u0645\u0628\u0643\u0631\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",value:P.earlyLeaveMinutes,onChange:e=>T(Be(Be({},P),{},{earlyLeaveMinutes:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:P.notes,onChange:e=>T(Be(Be({},P),{},{notes:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"font-medium text-gray-800 mb-2",children:"\u0645\u0644\u062e\u0635 \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644:"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:(0,Qe.jsxs)("p",{children:["\u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0645\u062d\u0633\u0648\u0628\u0629: ",B(P).toFixed(1)," \u0633\u0627\u0639\u0629"]})})]})]}),(0,Qe.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{if(!P.employeeId||!P.date)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=B(P),t=Be(Be({},P),{},{workHours:e,createdAt:(new Date).toISOString()});k?(l(t),alert("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062d\u0636\u0648\u0631 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0646\u062c\u0627\u062d")):I&&(i(E.id,t),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0633\u062c\u0644 \u0627\u0644\u062d\u0636\u0648\u0631 \u0628\u0646\u062c\u0627\u062d")),q(),C(!1),D(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(_t,{}),k?"\u062a\u0633\u062c\u064a\u0644":"\u062a\u062d\u062f\u064a\u062b"]}),(0,Qe.jsx)("button",{onClick:()=>{q(),C(!1),D(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})})]})},Fr=e=>{let{onNavigate:t}=e;const{employees:s,leaves:a,leaveTypes:n,departments:l,addLeave:i,updateLeave:o,deleteLeave:c,getLeavesByEmployee:d,getLeaveBalance:x,getLeavesByStatus:u,getLeavesByDateRange:m}=Ye(),[h,p]=(0,r.useState)([]),[g,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,k]=(0,r.useState)(""),[C,I]=(0,r.useState)(""),[D,_]=(0,r.useState)("requestDate"),[L,E]=(0,r.useState)("desc"),[M,P]=(0,r.useState)(!1),[T,z]=(0,r.useState)(!1),[O,A]=(0,r.useState)(!1),[F,R]=(0,r.useState)(null),[V,B]=(0,r.useState)(null),[q,Q]=(0,r.useState)({employeeId:"",leaveTypeId:"",startDate:"",endDate:"",requestDate:(new Date).toISOString().split("T")[0],reason:"",emergencyContact:"",status:"pending",approvedBy:"",approvalDate:"",annualLeaveCount:0,accruedLeaveCount:0,notes:""}),[H,W]=(0,r.useState)({totalRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0,totalLeaveDays:0});(0,r.useEffect)(()=>{U()},[a,g,b,j,N,S,C,D,L]);const U=()=>{let e=[...a];if(g){const t=s.find(e=>{var t,s;return(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||(null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))});t&&(e=e.filter(e=>e.employeeId===t.id))}b&&(e=e.filter(e=>e.employeeId===parseInt(b))),j&&(e=e.filter(e=>e.status===j)),N&&(e=e.filter(e=>e.leaveTypeId===parseInt(N))),S&&(e=e.filter(e=>e.startDate>=S)),C&&(e=e.filter(e=>e.endDate<=C)),e.sort((e,t)=>{let s=e[D],a=t[D];return"startDate"!==D&&"endDate"!==D&&"requestDate"!==D||(s=new Date(s),a=new Date(a)),"asc"===L?s<a?-1:s>a?1:0:s>a?-1:s<a?1:0}),p(e),X(e)},X=e=>{const t=e.length,s=e.filter(e=>"pending"===e.status).length,a=e.filter(e=>"approved"===e.status).length,r=e.filter(e=>"rejected"===e.status).length,n=e.filter(e=>"approved"===e.status).reduce((e,t)=>e+Y(t),0);W({totalRequests:t,pendingRequests:s,approvedRequests:a,rejectedRequests:r,totalLeaveDays:n})},K=e=>{const t=s.find(t=>t.id===e);return t?"".concat(t.firstName," ").concat(t.lastName):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},$=e=>{const t=s.find(t=>t.id===e);if(!t)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";const a=l.find(e=>e.id===t.departmentId);return a?a.name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},G=e=>{const t=n.find(t=>t.id===e);return t?t.name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},Y=e=>{const t=new Date(e.startDate),s=new Date(e.endDate).getTime()-t.getTime();return Math.ceil(s/864e5)+1},J=()=>{Q({employeeId:"",leaveTypeId:"",startDate:"",endDate:"",requestDate:(new Date).toISOString().split("T")[0],reason:"",emergencyContact:"",status:"pending",approvedBy:"",approvalDate:"",annualLeaveCount:0,accruedLeaveCount:0,notes:""}),R(null)};return(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(yt,{className:"text-2xl text-orange-500"}),(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u062c\u0627\u0632\u0627\u062a"})]}),(0,Qe.jsx)("div",{className:"flex gap-2",children:(0,Qe.jsxs)("button",{onClick:()=>P(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(js,{})," \u0637\u0644\u0628 \u0625\u062c\u0627\u0632\u0629 \u062c\u062f\u064a\u062f"]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0637\u0644\u0628\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:H.totalRequests})]}),(0,Qe.jsx)(yt,{className:"text-orange-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:H.pendingRequests})]}),(0,Qe.jsx)(zt,{className:"text-yellow-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0645\u0642\u0628\u0648\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-600",children:H.approvedRequests})]}),(0,Qe.jsx)(_t,{className:"text-green-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0645\u0631\u0641\u0648\u0636\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-red-600",children:H.rejectedRequests})]}),(0,Qe.jsx)(Ps,{className:"text-red-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u064a\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:H.totalLeaveDays})]}),(0,Qe.jsx)(Nt,{className:"text-blue-500 text-xl"})]})})]})]}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0645\u0648\u0638\u0641...",value:g,onChange:e=>f(e.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),s.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),(0,Qe.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0627\u062a"}),n.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Qe.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("option",{value:"approved",children:"\u0645\u0642\u0628\u0648\u0644"}),(0,Qe.jsx)("option",{value:"rejected",children:"\u0645\u0631\u0641\u0648\u0636"})]}),(0,Qe.jsx)("input",{type:"date",value:S,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("input",{type:"date",value:C,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsxs)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628,\u0627\u0644\u0645\u0648\u0638\u0641,\u0627\u0644\u0642\u0633\u0645,\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629,\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629,\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629,\u0639\u062f\u062f \u0627\u0644\u0623\u064a\u0627\u0645,\u0627\u0644\u062d\u0627\u0644\u0629,\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629,\u0627\u0644\u0645\u0642\u062a\u0631\u062d\n"+h.map(e=>"".concat(e.requestDate,",").concat(K(e.employeeId),",").concat($(e.employeeId),",").concat(G(e.leaveTypeId),",").concat(e.startDate,",").concat(e.endDate,",").concat(e.leaveDays,",").concat(e.status,",").concat(e.approvalDate||"",",").concat(e.approvedBy||"")).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","leave_requests.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(qt,{})," \u062a\u0635\u062f\u064a\u0631"]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0641\u062a\u0631\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0623\u064a\u0627\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(e=>(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.requestDate}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:K(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:G(e.leaveTypeId)}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.startDate," - ",e.endDate]}),(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.leaveDays," \u064a\u0648\u0645"]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"approved"===e.status?"\u0645\u0642\u0628\u0648\u0644":"rejected"===e.status?"\u0645\u0631\u0641\u0648\u0636":"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===e.status&&(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{const t=Be(Be({},e),{},{status:"approved",approvedBy:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0648\u0627\u0631\u062f \u0627\u0644\u0628\u0634\u0631\u064a\u0629",approvalDate:(new Date).toISOString().split("T")[0]});o(e.id,t),alert("\u062a\u0645 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0628\u0646\u062c\u0627\u062d")})(e),className:"text-green-600 hover:text-green-900 p-1",title:"\u0645\u0648\u0627\u0641\u0642\u0629",children:(0,Qe.jsx)(_t,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{const t=prompt("\u0633\u0628\u0628 \u0631\u0641\u0636 \u0627\u0644\u0637\u0644\u0628:");if(t){const s=Be(Be({},e),{},{status:"rejected",approvedBy:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0648\u0627\u0631\u062f \u0627\u0644\u0628\u0634\u0631\u064a\u0629",approvalDate:(new Date).toISOString().split("T")[0],rejectionReason:t});o(e.id,s),alert("\u062a\u0645 \u0631\u0641\u0636 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629")}})(e),className:"text-red-600 hover:text-red-900 p-1",title:"\u0631\u0641\u0636",children:(0,Qe.jsx)(Ps,{})})]}),(0,Qe.jsx)("button",{onClick:()=>(e=>{R(e),Q({employeeId:e.employeeId.toString(),leaveTypeId:e.leaveTypeId.toString(),startDate:e.startDate,endDate:e.endDate,requestDate:e.requestDate,reason:e.reason||"",emergencyContact:e.emergencyContact||"",status:e.status,approvedBy:e.approvedBy||"",approvalDate:e.approvalDate||"",annualLeaveCount:e.annualLeaveCount||0,accruedLeaveCount:e.accruedLeaveCount||0,notes:e.notes||""}),z(!0)})(e),className:"text-orange-600 hover:text-orange-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0647\u0630\u0627\u061f")&&(c(t),alert("\u062a\u0645 \u062d\u0630\u0641 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0628\u0646\u062c\u0627\u062d")));var t},className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id))})]})}),0===h.length&&(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(yt,{className:"mx-auto text-4xl text-gray-400 mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0637\u0644\u0628\u0627\u062a \u0625\u062c\u0627\u0632\u0629 \u0645\u0633\u062c\u0644\u0629"})]})]}),(M||T)&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:M?"\u0637\u0644\u0628 \u0625\u062c\u0627\u0632\u0629 \u062c\u062f\u064a\u062f":"\u062a\u0639\u062f\u064a\u0644 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"})}),(0,Qe.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0648\u0638\u0641 *"}),(0,Qe.jsxs)("select",{value:q.employeeId,onChange:e=>Q(Be(Be({},q),{},{employeeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0638\u0641"}),s.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 *"}),(0,Qe.jsxs)("select",{value:q.leaveTypeId,onChange:e=>Q(Be(Be({},q),{},{leaveTypeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"}),n.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"date",value:q.startDate,onChange:e=>Q(Be(Be({},q),{},{startDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"date",value:q.endDate,onChange:e=>Q(Be(Be({},q),{},{endDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628"}),(0,Qe.jsx)("input",{type:"date",value:q.requestDate,onChange:e=>Q(Be(Be({},q),{},{requestDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:q.status,onChange:e=>Q(Be(Be({},q),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("option",{value:"approved",children:"\u0645\u0642\u0628\u0648\u0644"}),(0,Qe.jsx)("option",{value:"rejected",children:"\u0645\u0631\u0641\u0648\u0636"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0635\u0627\u0631\u064a\u062d \u0627\u0644\u0633\u0646\u0648\u064a\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",value:q.annualLeaveCount,onChange:e=>Q(Be(Be({},q),{},{annualLeaveCount:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0635\u0627\u0631\u064a\u062d \u0627\u0644\u0645\u062a\u0631\u0627\u0643\u0645\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629"}),(0,Qe.jsx)("input",{type:"number",min:"0",value:q.accruedLeaveCount,onChange:e=>Q(Be(Be({},q),{},{accruedLeaveCount:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0633\u0628\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629"}),(0,Qe.jsx)("textarea",{value:q.reason,onChange:e=>Q(Be(Be({},q),{},{reason:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0634\u0631\u062d \u0633\u0628\u0628 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062c\u0647\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0641\u064a \u0627\u0644\u0637\u0648\u0627\u0631\u0626"}),(0,Qe.jsx)("input",{type:"text",value:q.emergencyContact,onChange:e=>Q(Be(Be({},q),{},{emergencyContact:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0627\u0633\u0645 \u0648\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641..."})]}),q.startDate&&q.endDate&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"font-medium text-gray-800 mb-2",children:"\u0645\u0644\u062e\u0635 \u0627\u0644\u0625\u062c\u0627\u0632\u0629:"}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Qe.jsxs)("p",{children:["\u0639\u062f\u062f \u0623\u064a\u0627\u0645 \u0627\u0644\u0625\u062c\u0627\u0632\u0629: ",Y(q)," \u064a\u0648\u0645"]}),(0,Qe.jsxs)("p",{children:["\u0627\u0644\u0645\u062f\u0629: ",q.startDate," - ",q.endDate]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:q.notes,onChange:e=>Q(Be(Be({},q),{},{notes:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]}),(0,Qe.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{if(!q.employeeId||!q.leaveTypeId||!q.startDate||!q.endDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=Y(q),t=Be(Be({},q),{},{leaveDays:e,createdAt:(new Date).toISOString()});M?(i(t),alert("\u062a\u0645 \u062a\u0642\u062f\u064a\u0645 \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0628\u0646\u062c\u0627\u062d")):T&&(o(F.id,t),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0637\u0644\u0628 \u0627\u0644\u0625\u062c\u0627\u0632\u0629 \u0628\u0646\u062c\u0627\u062d")),J(),P(!1),z(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(_t,{}),M?"\u062a\u0642\u062f\u064a\u0645 \u0627\u0644\u0637\u0644\u0628":"\u062a\u062d\u062f\u064a\u062b"]}),(0,Qe.jsx)("button",{onClick:()=>{J(),P(!1),z(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),O&&V&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full",children:[(0,Qe.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Qe.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["\u0631\u0635\u064a\u062f \u0625\u062c\u0627\u0632\u0627\u062a ",K(V.id)]})}),(0,Qe.jsx)("div",{className:"p-6 space-y-4",children:(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0635\u0627\u0631\u064a\u062d:"}),(0,Qe.jsx)("div",{className:"space-y-2 text-sm",children:n.map(e=>{const t=a.filter(t=>t.employeeId===V.id&&t.leaveTypeId===e.id&&"approved"===t.status).reduce((e,t)=>e+t.leaveDays,0),s=(e.annualLimit||0)-t;return(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsxs)("span",{children:[e.name,":"]}),(0,Qe.jsxs)("span",{className:"font-medium",children:[t," \u0645\u0633\u062a\u062e\u062f\u0645 / ",e.annualLimit||0," \u0645\u062a\u0627\u062d (\u0628\u0627\u0642\u064a: ",s,")"]})]},e.id)})})]})}),(0,Qe.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,Qe.jsx)("button",{onClick:()=>{A(!1),B(null)},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},Rr=e=>{var t,s,a,n,l,i,o,c,d,x;let{onNavigate:u}=e;const{employees:m,salaries:h,salaryComponents:p,attendanceRecords:g,departments:f,positions:b,addSalary:v,updateSalary:j,deleteSalary:y,getSalariesByEmployee:N,getMonthlySalaryReport:w,calculateMonthlySalary:S}=Ye(),[k,C]=(0,r.useState)([]),[I,D]=(0,r.useState)(""),[_,L]=(0,r.useState)(""),[E,M]=(0,r.useState)(""),[P,T]=(0,r.useState)(""),[z,O]=(0,r.useState)(""),[A,F]=(0,r.useState)("month"),[R,V]=(0,r.useState)("desc"),[B,q]=(0,r.useState)(!1),[Q,H]=(0,r.useState)(!1),[W,U]=(0,r.useState)(!1),[X,K]=(0,r.useState)(null),[$,G]=(0,r.useState)({employeeId:"",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),basicSalary:0,allowances:[],deductions:[],overtimeAmount:0,bonusAmount:0,lateDeduction:0,absentDeduction:0,totalAllowances:0,totalDeductions:0,netSalary:0,grossSalary:0,paymentStatus:"pending",paymentDate:"",paymentMethod:"",paymentReference:"",notes:""}),[Y,J]=(0,r.useState)({totalSalaries:0,totalAmount:0,paidSalaries:0,pendingSalaries:0,avgSalary:0}),[Z]=(0,r.useState)([{id:1,name:"\u0628\u062f\u0644 \u0627\u0644\u0633\u0643\u0646",type:"allowance",amount:500},{id:2,name:"\u0628\u062f\u0644 \u0627\u0644\u0646\u0642\u0644",type:"allowance",amount:200},{id:3,name:"\u0628\u062f\u0644 \u0627\u0644\u0627\u062a\u0635\u0627\u0644\u0627\u062a",type:"allowance",amount:100},{id:4,name:"\u0628\u062f\u0644 \u0627\u0644\u0648\u062c\u0628\u0627\u062a",type:"allowance",amount:150}]),[ee]=(0,r.useState)([{id:1,name:"\u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0627\u0644\u0637\u0628\u064a",type:"deduction",amount:150},{id:2,name:"\u0635\u0646\u062f\u0648\u0642 \u0627\u0644\u062a\u0642\u0627\u0639\u062f",type:"deduction",amount:300},{id:3,name:"\u0636\u0631\u064a\u0628\u0629 \u0627\u0644\u062f\u062e\u0644",type:"deduction",amount:0},{id:4,name:"\u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u062e\u0631\u0649",type:"deduction",amount:0}]);(0,r.useEffect)(()=>{te()},[h,I,_,E,P,z,A,R]);const te=()=>{let e=[...h];if(I){const t=m.find(e=>{var t,s;return(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes(I.toLowerCase()))||(null===(s=e.lastName)||void 0===s?void 0:s.toLowerCase().includes(I.toLowerCase()))});t&&(e=e.filter(e=>e.employeeId===t.id))}_&&(e=e.filter(e=>e.employeeId===parseInt(_))),E&&(e=e.filter(e=>e.month===parseInt(E))),P&&(e=e.filter(e=>e.year===parseInt(P))),z&&(e=e.filter(e=>e.paymentStatus===z)),e.sort((e,t)=>{let s=e[A],a=t[A];return"month"===A&&(s=100*e.year+e.month,a=100*t.year+t.month),"asc"===R?s<a?-1:s>a?1:0:s>a?-1:s<a?1:0}),C(e),se(e)},se=e=>{const t=e.length,s=e.reduce((e,t)=>e+(t.netSalary||0),0),a=e.filter(e=>"paid"===e.paymentStatus).length,r=e.filter(e=>"pending"===e.paymentStatus).length;J({totalSalaries:t,totalAmount:s,paidSalaries:a,pendingSalaries:r,avgSalary:t>0?s/t:0})},ae=e=>{const t=m.find(t=>t.id===e);return t?"".concat(t.firstName," ").concat(t.lastName):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},re=e=>{const t=m.find(t=>t.id===e);if(!t)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";const s=f.find(e=>e.id===t.departmentId);return s?s.name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},ne=e=>{const t=m.find(t=>t.id===e);return(null===t||void 0===t?void 0:t.basicSalary)||0},le=()=>{G({employeeId:"",month:(new Date).getMonth()+1,year:(new Date).getFullYear(),basicSalary:0,allowances:[],deductions:[],overtimeAmount:0,bonusAmount:0,lateDeduction:0,absentDeduction:0,totalAllowances:0,totalDeductions:0,netSalary:0,grossSalary:0,paymentStatus:"pending",paymentDate:"",paymentMethod:"",paymentReference:"",notes:""}),K(null)},ie=e=>["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"][e-1]||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";return(0,Qe.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",dir:"rtl",children:[(0,Qe.jsxs)("div",{className:"mb-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qe.jsx)(ps,{className:"text-2xl text-orange-500"}),(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0631\u0648\u0627\u062a\u0628"})]}),(0,Qe.jsx)("div",{className:"flex gap-2",children:(0,Qe.jsxs)("button",{onClick:()=>q(!0),className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(js,{})," \u062d\u0633\u0627\u0628 \u0631\u0627\u062a\u0628 \u062c\u062f\u064a\u062f"]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0633\u062c\u0644\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:Y.totalSalaries})]}),(0,Qe.jsx)(Jt,{className:"text-orange-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-green-600",children:Y.totalAmount.toLocaleString()})]}),(0,Qe.jsx)(hs,{className:"text-green-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:Y.paidSalaries})]}),(0,Qe.jsx)(Ft,{className:"text-blue-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:Y.pendingSalaries})]}),(0,Qe.jsx)(jt,{className:"text-yellow-500 text-xl"})]})}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:Y.avgSalary.toLocaleString()})]}),(0,Qe.jsx)(Ct,{className:"text-purple-500 text-xl"})]})})]})]}),(0,Qe.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:[(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)(ks,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0645\u0648\u0638\u0641...",value:I,onChange:e=>D(e.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("select",{value:_,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646"}),m.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]}),(0,Qe.jsxs)("select",{value:E,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0647\u0648\u0631"}),Array.from({length:12},(e,t)=>(0,Qe.jsx)("option",{value:t+1,children:ie(t+1)},t+1))]}),(0,Qe.jsxs)("select",{value:P,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0633\u0646\u0648\u0627\u062a"}),Array.from({length:5},(e,t)=>(0,Qe.jsx)("option",{value:2024+t,children:2024+t},2024+t))]}),(0,Qe.jsxs)("select",{value:z,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("option",{value:"paid",children:"\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a\u0629"})]}),(0,Qe.jsxs)("select",{value:A,onChange:e=>F(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"month",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0634\u0647\u0631"}),(0,Qe.jsx)("option",{value:"employeeId",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("option",{value:"netSalary",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u0631\u0627\u062a\u0628"}),(0,Qe.jsx)("option",{value:"paymentStatus",children:"\u062a\u0631\u062a\u064a\u0628 \u0628\u0627\u0644\u062d\u0627\u0644\u0629"})]}),(0,Qe.jsxs)("button",{onClick:()=>{const e="data:text/csv;charset=utf-8,\u0627\u0644\u0634\u0647\u0631,\u0627\u0644\u0633\u0646\u0629,\u0627\u0644\u0645\u0648\u0638\u0641,\u0627\u0644\u0642\u0633\u0645,\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a,\u0627\u0644\u0628\u062f\u0644\u0627\u062a,\u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a,\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a,\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0635\u0627\u0641\u064a,\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639\n"+k.map(e=>"".concat(e.month,",").concat(e.year,",").concat(ae(e.employeeId),",").concat(re(e.employeeId),",").concat(e.basicSalary,",").concat(e.totalAllowances,",").concat(e.totalDeductions,",").concat(e.grossSalary,",").concat(e.netSalary,",").concat(e.paymentStatus)).join("\n"),t=encodeURI(e),s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("download","salary_records.csv"),document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(qt,{})," \u062a\u0635\u062f\u064a\u0631"]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gray-50",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0634\u0647\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0645\u0648\u0638\u0641"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0642\u0633\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0628\u062f\u0644\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0635\u0627\u0641\u064a"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,Qe.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var t,s,a,r;return(0,Qe.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qe.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[ie(e.month)," ",e.year]}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:ae(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re(e.employeeId)}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(t=e.basicSalary)||void 0===t?void 0:t.toLocaleString())||0}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(s=e.totalAllowances)||void 0===s?void 0:s.toLocaleString())||0}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(null===(a=e.totalDeductions)||void 0===a?void 0:a.toLocaleString())||0}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600",children:(null===(r=e.netSalary)||void 0===r?void 0:r.toLocaleString())||0}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qe.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat("paid"===e.paymentStatus?"bg-green-100 text-green-800":"cancelled"===e.paymentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"paid"===e.paymentStatus?"\u0645\u062f\u0641\u0648\u0639\u0629":"cancelled"===e.paymentStatus?"\u0645\u0644\u063a\u064a\u0629":"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"})}),(0,Qe.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qe.jsx)("button",{onClick:()=>(e=>{K(e),U(!0)})(e),className:"text-blue-600 hover:text-blue-900 p-1",title:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644",children:(0,Qe.jsx)($t,{})}),(0,Qe.jsx)("button",{onClick:()=>(e=>{K(e),G({employeeId:e.employeeId.toString(),month:e.month,year:e.year,basicSalary:e.basicSalary,allowances:e.allowances||[],deductions:e.deductions||[],overtimeAmount:e.overtimeAmount||0,bonusAmount:e.bonusAmount||0,lateDeduction:e.lateDeduction||0,absentDeduction:e.absentDeduction||0,totalAllowances:e.totalAllowances||0,totalDeductions:e.totalDeductions||0,netSalary:e.netSalary||0,grossSalary:e.grossSalary||0,paymentStatus:e.paymentStatus,paymentDate:e.paymentDate||"",paymentMethod:e.paymentMethod||"",paymentReference:e.paymentReference||"",notes:e.notes||""}),H(!0)})(e),className:"text-orange-600 hover:text-orange-900 p-1",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,Qe.jsx)(Qt,{})}),(0,Qe.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u0631\u0627\u062a\u0628 \u0647\u0630\u0627\u061f")&&(y(t),alert("\u062a\u0645 \u062d\u0630\u0641 \u0633\u062c\u0644 \u0627\u0644\u0631\u0627\u062a\u0628 \u0628\u0646\u062c\u0627\u062d")));var t},className:"text-red-600 hover:text-red-900 p-1",title:"\u062d\u0630\u0641",children:(0,Qe.jsx)(Os,{})})]})})]},e.id)})})]})}),0===k.length&&(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(ps,{className:"mx-auto text-4xl text-gray-400 mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0633\u062c\u0644\u0627\u062a \u0631\u0648\u0627\u062a\u0628 \u0645\u0633\u062c\u0644\u0629"})]})]}),(B||Q)&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,Qe.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Qe.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:B?"\u062d\u0633\u0627\u0628 \u0631\u0627\u062a\u0628 \u062c\u062f\u064a\u062f":"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0631\u0627\u062a\u0628"})}),(0,Qe.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0648\u0638\u0641 *"}),(0,Qe.jsxs)("select",{value:$.employeeId,onChange:e=>G(Be(Be({},$),{},{employeeId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0638\u0641"}),m.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.firstName," ",e.lastName]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0634\u0647\u0631 *"}),(0,Qe.jsx)("select",{value:$.month,onChange:e=>G(Be(Be({},$),{},{month:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:Array.from({length:12},(e,t)=>(0,Qe.jsx)("option",{value:t+1,children:ie(t+1)},t+1))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0633\u0646\u0629 *"}),(0,Qe.jsx)("select",{value:$.year,onChange:e=>G(Be(Be({},$),{},{year:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0,children:Array.from({length:5},(e,t)=>(0,Qe.jsx)("option",{value:2024+t,children:2024+t},2024+t))})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h3",{className:"font-medium text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Bt,{className:"text-green-600"}),"\u0645\u0643\u0648\u0646\u0627\u062a \u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0625\u064a\u062c\u0627\u0628\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a"}),(0,Qe.jsx)("input",{type:"number",value:$.basicSalary,onChange:e=>G(Be(Be({},$),{},{basicSalary:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0628\u062f\u0644 \u0627\u0644\u0633\u0643\u0646"}),(0,Qe.jsx)("input",{type:"number",value:(null===(t=Z.find(e=>"\u0628\u062f\u0644 \u0627\u0644\u0633\u0643\u0646"===e.name))||void 0===t?void 0:t.amount)||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0628\u062f\u0644 \u0627\u0644\u0646\u0642\u0644"}),(0,Qe.jsx)("input",{type:"number",value:(null===(s=Z.find(e=>"\u0628\u062f\u0644 \u0627\u0644\u0646\u0642\u0644"===e.name))||void 0===s?void 0:s.amount)||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0633\u0627\u0639\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",step:"0.5",value:$.overtimeAmount,onChange:e=>G(Be(Be({},$),{},{overtimeAmount:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0643\u0627\u0641\u0622\u062a"}),(0,Qe.jsx)("input",{type:"number",value:$.bonusAmount,onChange:e=>G(Be(Be({},$),{},{bonusAmount:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h3",{className:"font-medium text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Ft,{className:"text-red-600"}),"\u0645\u0643\u0648\u0646\u0627\u062a \u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0633\u0644\u0628\u064a\u0629"]}),(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0627\u0644\u0637\u0628\u064a"}),(0,Qe.jsx)("input",{type:"number",value:(null===(a=ee.find(e=>"\u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0627\u0644\u0637\u0628\u064a"===e.name))||void 0===a?void 0:a.amount)||0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0635\u0646\u062f\u0648\u0642 \u0627\u0644\u062a\u0642\u0627\u0639\u062f"}),(0,Qe.jsx)("input",{type:"number",value:Math.round(.05*($.basicSalary||0)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062e\u0635\u0645 \u0627\u0644\u062a\u0623\u062e\u064a\u0631"}),(0,Qe.jsx)("input",{type:"number",value:$.lateDeduction,onChange:e=>G(Be(Be({},$),{},{lateDeduction:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062e\u0635\u0645 \u0627\u0644\u063a\u064a\u0627\u0628"}),(0,Qe.jsx)("input",{type:"number",value:$.absentDeduction,onChange:e=>G(Be(Be({},$),{},{absentDeduction:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h3",{className:"font-medium text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(jt,{className:"text-orange-600"}),"\u0645\u0644\u062e\u0635 \u0627\u0644\u0631\u0627\u062a\u0628"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("p",{className:"text-xl font-bold text-green-600",children:($.basicSalary+($.overtimeAmount||0)+($.bonusAmount||0)+Z.reduce((e,t)=>e+t.amount,0)).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-xl font-bold text-red-600",children:(ee.reduce((e,t)=>e+t.amount,0)+Math.round(.05*($.basicSalary||0))+($.lateDeduction||0)+($.absentDeduction||0)).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0635\u0627\u0641\u064a"}),(0,Qe.jsx)("p",{className:"text-xl font-bold text-blue-600",children:($.basicSalary+($.overtimeAmount||0)+($.bonusAmount||0)+Z.reduce((e,t)=>e+t.amount,0)-ee.reduce((e,t)=>e+t.amount,0)-Math.round(.05*($.basicSalary||0))-($.lateDeduction||0)-($.absentDeduction||0)).toLocaleString()})]}),(0,Qe.jsx)("div",{className:"flex justify-center items-center",children:(0,Qe.jsxs)("button",{onClick:()=>{if(!$.employeeId||!$.month||!$.year)return void alert("\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0645\u0648\u0638\u0641 \u0648\u0627\u0644\u0634\u0647\u0631 \u0648\u0627\u0644\u0633\u0646\u0629 \u0623\u0648\u0644\u0627\u064b");const e=((e,t,s)=>{const a=m.find(t=>t.id===parseInt(e));if(!a)return{grossSalary:0,deductions:0,netSalary:0};const r=a.basicSalary||0,n=g.filter(a=>a.employeeId===parseInt(e)&&a.date>="".concat(s,"-").concat(String(t).padStart(2,"0"),"-01")&&a.date<="".concat(s,"-").concat(String(t).padStart(2,"0"),"-31")),l=n.length,i=n.filter(e=>"present"===e.status).length,o=n.filter(e=>"absent"===e.status).length,c=Z.reduce((e,t)=>e+t.amount,0),d=150+Math.round(.05*r)+r/22*o+.5*n.reduce((e,t)=>e+(t.lateMinutes||0),0),x=r+c;return{grossSalary:x,deductions:d,netSalary:x-d,presentDays:i,absentDays:o,totalDays:l}})($.employeeId,$.month,$.year);G(Be(Be({},$),{},{basicSalary:ne($.employeeId),totalAllowances:Z.reduce((e,t)=>e+t.amount,0),totalDeductions:e.deductions,grossSalary:e.grossSalary,netSalary:e.netSalary,absentDeduction:ne($.employeeId)/22*e.absentDays})),alert("\u062a\u0645 \u062d\u0633\u0627\u0628 \u0627\u0644\u0631\u0627\u062a\u0628 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b")},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(jt,{}),"\u062d\u0633\u0627\u0628 \u062a\u0644\u0642\u0627\u0626\u064a"]})})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsxs)("select",{value:$.paymentStatus,onChange:e=>G(Be(Be({},$),{},{paymentStatus:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,Qe.jsx)("option",{value:"paid",children:"\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a\u0629"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("input",{type:"date",value:$.paymentDate,onChange:e=>G(Be(Be({},$),{},{paymentDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsxs)("select",{value:$.paymentMethod,onChange:e=>G(Be(Be({},$),{},{paymentMethod:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,Qe.jsx)("option",{value:"bank_transfer",children:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"}),(0,Qe.jsx)("option",{value:"check",children:"\u0634\u064a\u0643"}),(0,Qe.jsx)("option",{value:"digital",children:"\u0645\u062d\u0641\u0638\u0629 \u0631\u0642\u0645\u064a\u0629"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639"}),(0,Qe.jsx)("input",{type:"text",value:$.paymentReference,onChange:e=>G(Be(Be({},$),{},{paymentReference:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0631\u0642\u0645 \u0645\u0631\u062c\u0639 \u0627\u0644\u062f\u0641\u0639..."})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:$.notes,onChange:e=>G(Be(Be({},$),{},{notes:e.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]})]}),(0,Qe.jsxs)("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[(0,Qe.jsxs)("button",{onClick:()=>{if(!$.employeeId||!$.month||!$.year)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");if(h.find(e=>e.employeeId===parseInt($.employeeId)&&e.month===$.month&&e.year===$.year)&&!Q)return void alert("\u064a\u0648\u062c\u062f \u0631\u0627\u062a\u0628 \u0645\u0633\u062c\u0644 \u0628\u0627\u0644\u0641\u0639\u0644 \u0644\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631");const e=Be(Be({},$),{},{grossSalary:$.basicSalary+$.totalAllowances,createdAt:(new Date).toISOString()});B?(v(e),alert("\u062a\u0645 \u062d\u0633\u0627\u0628 \u0627\u0644\u0631\u0627\u062a\u0628 \u0628\u0646\u062c\u0627\u062d")):Q&&(j(X.id,e),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0631\u0627\u062a\u0628 \u0628\u0646\u062c\u0627\u062d")),le(),q(!1),H(!1)},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Qe.jsx)(Bt,{}),B?"\u062d\u0633\u0627\u0628 \u0627\u0644\u0631\u0627\u062a\u0628":"\u062a\u062d\u062f\u064a\u062b"]}),(0,Qe.jsx)("button",{onClick:()=>{le(),q(!1),H(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),W&&X&&(0,Qe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,Qe.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[(0,Qe.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Qe.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:["\u062a\u0641\u0627\u0635\u064a\u0644 \u0631\u0627\u062a\u0628 ",ae(X.employeeId)]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:[ie(X.month)," ",X.year]})]}),(0,Qe.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h3",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(Bt,{className:"text-green-600"}),"\u0645\u0643\u0648\u0646\u0627\u062a \u0627\u0644\u0631\u0627\u062a\u0628"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0623\u0633\u0627\u0633\u064a:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(n=X.basicSalary)||void 0===n?void 0:n.toLocaleString())||0})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0628\u062f\u0644 \u0627\u0644\u0633\u0643\u0646:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(l=Z.find(e=>"\u0628\u062f\u0644 \u0627\u0644\u0633\u0643\u0646"===e.name))||void 0===l||null===(i=l.amount)||void 0===i?void 0:i.toLocaleString())||0})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0628\u062f\u0644 \u0627\u0644\u0646\u0642\u0644:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(o=Z.find(e=>"\u0628\u062f\u0644 \u0627\u0644\u0646\u0642\u0644"===e.name))||void 0===o||null===(c=o.amount)||void 0===c?void 0:c.toLocaleString())||0})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0633\u0627\u0639\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(X.overtimeAmount||0).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0645\u0643\u0627\u0641\u0622\u062a:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(X.bonusAmount||0).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"border-t pt-2 flex justify-between font-bold",children:[(0,Qe.jsx)("span",{children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,Qe.jsx)("span",{children:(X.grossSalary||0).toLocaleString()})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("h3",{className:"font-medium text-gray-800 mb-3 flex items-center gap-2",children:[(0,Qe.jsx)(Ft,{className:"text-red-600"}),"\u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a"]}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0627\u0644\u0637\u0628\u064a:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(null===(d=ee.find(e=>"\u0627\u0644\u062a\u0623\u0645\u064a\u0646 \u0627\u0644\u0637\u0628\u064a"===e.name))||void 0===d||null===(x=d.amount)||void 0===x?void 0:x.toLocaleString())||0})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0635\u0646\u062f\u0648\u0642 \u0627\u0644\u062a\u0642\u0627\u0639\u062f:"}),(0,Qe.jsx)("span",{className:"font-medium",children:Math.round(.05*(X.basicSalary||0)).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u062e\u0635\u0645 \u0627\u0644\u062a\u0623\u062e\u064a\u0631:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(X.lateDeduction||0).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u062e\u0635\u0645 \u0627\u0644\u063a\u064a\u0627\u0628:"}),(0,Qe.jsx)("span",{className:"font-medium",children:(X.absentDeduction||0).toLocaleString()})]}),(0,Qe.jsxs)("div",{className:"border-t pt-2 flex justify-between font-bold",children:[(0,Qe.jsx)("span",{children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062e\u0635\u0648\u0645\u0627\u062a:"}),(0,Qe.jsx)("span",{children:((X.totalDeductions||0)+Math.round(.05*(X.basicSalary||0))+(X.lateDeduction||0)+(X.absentDeduction||0)).toLocaleString()})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"\u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0627\u0644\u0646\u0647\u0627\u0626\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\u0627\u0644\u0631\u0627\u062a\u0628 \u0627\u0644\u0635\u0627\u0641\u064a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:(X.netSalary||0).toLocaleString()})]})]}),X.paymentStatus&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062f\u0641\u0639"}),(0,Qe.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("paid"===X.paymentStatus?"bg-green-100 text-green-800":"cancelled"===X.paymentStatus?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"paid"===X.paymentStatus?"\u0645\u062f\u0641\u0648\u0639\u0629":"cancelled"===X.paymentStatus?"\u0645\u0644\u063a\u064a\u0629":"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"})]}),X.paymentDate&&(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639:"}),(0,Qe.jsx)("span",{className:"font-medium",children:X.paymentDate})]}),X.paymentMethod&&(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639:"}),(0,Qe.jsx)("span",{className:"font-medium",children:X.paymentMethod})]}),X.paymentReference&&(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639:"}),(0,Qe.jsx)("span",{className:"font-medium",children:X.paymentReference})]})]})]})]}),(0,Qe.jsx)("div",{className:"p-6 border-t border-gray-200",children:(0,Qe.jsx)("button",{onClick:()=>{U(!1),K(null)},className:"bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg transition-colors",children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},Vr=()=>{const{productionOrders:e,addProductionOrder:t,updateProductionOrder:s,updateProductionOrderStatus:a,getProductionOrdersByStatus:n,products:l,workCenters:i,bomItems:o,getBomItemsByProduct:c}=Ye(),[d,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[h,p]=(0,r.useState)("All"),[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)({productId:"",quantity:"",plannedStartDate:"",plannedEndDate:"",priority:"Medium",workCenterId:"",description:""}),j=[{value:"Created",label:"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621"},{value:"Planned",label:"\u0645\u062e\u0637\u0637"},{value:"Scheduled",label:"\u0645\u062c\u062f\u0648\u0644"},{value:"Released",label:"\u0645\u0637\u0644\u0642"},{value:"In Progress",label:"\u0642\u064a\u062f \u0627\u0644\u062a\u0634\u063a\u064a\u0644"},{value:"Completed",label:"\u0645\u0643\u062a\u0645\u0644"},{value:"Closed",label:"\u0645\u063a\u0644\u0642"},{value:"Hold",label:"\u0645\u0639\u0644\u0642"},{value:"Cancelled",label:"\u0645\u0644\u063a\u064a"}],y=[{value:"Low",label:"\u0645\u0646\u062e\u0641\u0636"},{value:"Medium",label:"\u0645\u062a\u0648\u0633\u0637"},{value:"High",label:"\u0639\u0627\u0644\u064a"},{value:"Urgent",label:"\u0639\u0627\u062c\u0644"}],N="All"===h?e:n(h),w=()=>{v({productId:"",quantity:"",plannedStartDate:"",plannedEndDate:"",priority:"Medium",workCenterId:"",description:""}),m(null)},S=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(m(e),v({productId:e.productId||"",quantity:e.quantity||"",plannedStartDate:e.plannedStartDate||"",plannedEndDate:e.plannedEndDate||"",priority:e.priority||"Medium",workCenterId:e.workCenterId||"",description:e.description||""})):w(),x(!0)},k=()=>{x(!1),w()},C=e=>{if(e.progress)return e.progress;return{Created:10,Planned:25,Scheduled:40,Released:50,"In Progress":75,Completed:100,Closed:100,Hold:e.progress||0,Cancelled:0}[e.status]||0},I=e=>{const t=l.find(t=>t.id===e);return t?t.name:"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},D=e=>{if(!e)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";const t=i.find(t=>t.id===e);return t?t.name:"\u0645\u0631\u0643\u0632 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},_=[{header:"\u0631\u0642\u0645 \u0627\u0644\u0623\u0645\u0631",accessor:"orderNumber",render:(e,t)=>(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"font-medium text-gray-900",children:["#",t.id]}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:new Date(t.createdAt).toLocaleDateString("ar")})]})},{header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"productId",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:I(e)})},{header:"\u0627\u0644\u0643\u0645\u064a\u0629",accessor:"quantity",render:e=>(0,Qe.jsxs)("div",{className:"text-gray-900",children:[e," \u0648\u062d\u062f\u0629"]})},{header:"\u0627\u0644\u0645\u0631\u0643\u0632",accessor:"workCenterId",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:D(e)})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:(e,t)=>{return(0,Qe.jsxs)("div",{className:"space-y-2",children:[(0,Qe.jsx)("select",{value:e,onChange:e=>{return s=t.id,r=e.target.value,void a(s,r);var s,r},className:"px-2 py-1 rounded-full text-xs font-medium ".concat((s=e,{Created:"bg-blue-100 text-blue-800",Planned:"bg-yellow-100 text-yellow-800",Scheduled:"bg-indigo-100 text-indigo-800",Released:"bg-purple-100 text-purple-800","In Progress":"bg-green-100 text-green-800",Completed:"bg-emerald-100 text-emerald-800",Closed:"bg-gray-100 text-gray-800",Hold:"bg-orange-100 text-orange-800",Cancelled:"bg-red-100 text-red-800"}[s]||"bg-gray-100 text-gray-800")),children:j.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Qe.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qe.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(C(t),"%")}})}),(0,Qe.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:[C(t),"%"]})]});var s}},{header:"\u0627\u0644\u062a\u0648\u0627\u0631\u064a\u062e",accessor:"dates",render:(e,t)=>(0,Qe.jsxs)("div",{className:"text-sm",children:[(0,Qe.jsxs)("div",{className:"text-gray-900",children:["\u0627\u0644\u0628\u062f\u0621: ",t.plannedStartDate?new Date(t.plannedStartDate).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),(0,Qe.jsxs)("div",{className:"text-gray-900",children:["\u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621: ",t.plannedEndDate?new Date(t.plannedEndDate).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]})},{header:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629",accessor:"priority",render:e=>{var t;return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Urgent"===e?"bg-red-100 text-red-800":"High"===e?"bg-orange-100 text-orange-800":"Medium"===e?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:(null===(t=y.find(t=>t.value===e))||void 0===t?void 0:t.label)||e})}},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)("button",{onClick:()=>S(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Qe.jsx)("button",{onClick:()=>{window.confirm&&window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0647\u0630\u0627\u061f")&&console.log("\u062d\u0630\u0641 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c:",t.id)},className:"text-red-600 hover:text-red-800 text-sm",children:"\u062d\u0630\u0641"})]})}];return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0625\u0646\u0634\u0627\u0621 \u0648\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u062a\u062a\u0628\u0639 \u062d\u0627\u0644\u062a\u0647\u0627"})]}),(0,Qe.jsx)(ra,{onClick:()=>S(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"\u0623\u0645\u0631 \u0625\u0646\u062a\u0627\u062c \u062c\u062f\u064a\u062f"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n("In Progress").length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0642\u064a\u062f \u0627\u0644\u062a\u0634\u063a\u064a\u0644"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:n("Scheduled").length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0645\u062c\u062f\u0648\u0644\u0629"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:n("Completed").length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0645\u0643\u062a\u0645\u0644\u0629"})]})]}),(0,Qe.jsx)(aa,{className:"p-4",children:(0,Qe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Qe.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Qe.jsxs)(ma,{value:h,onChange:e=>p(e.target.value),className:"w-48",children:[(0,Qe.jsx)("option",{value:"All",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),j.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0639\u0631\u0636 ",N.length," \u0645\u0646 ",e.length," \u0623\u0645\u0631"]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)(ja,{columns:_,data:N,className:"min-w-full"})}),(0,Qe.jsx)(ga,{isOpen:d,onClose:k,title:u?"\u062a\u0639\u062f\u064a\u0644 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c":"\u0623\u0645\u0631 \u0625\u0646\u062a\u0627\u062c \u062c\u062f\u064a\u062f",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c *"}),(0,Qe.jsxs)(ma,{value:b.productId,onChange:e=>v(Be(Be({},b),{},{productId:e.target.value})),required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"}),l.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 *"}),(0,Qe.jsx)(da,{type:"number",value:b.quantity,onChange:e=>v(Be(Be({},b),{},{quantity:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0621 \u0627\u0644\u0645\u062e\u0637\u0637"}),(0,Qe.jsx)(da,{type:"date",value:b.plannedStartDate,onChange:e=>v(Be(Be({},b),{},{plannedStartDate:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0645\u062e\u0637\u0637"}),(0,Qe.jsx)(da,{type:"date",value:b.plannedEndDate,onChange:e=>v(Be(Be({},b),{},{plannedEndDate:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,Qe.jsx)(ma,{value:b.priority,onChange:e=>v(Be(Be({},b),{},{priority:e.target.value})),children:y.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0631\u0643\u0632 \u0627\u0644\u0639\u0645\u0644"}),(0,Qe.jsxs)(ma,{value:b.workCenterId,onChange:e=>v(Be(Be({},b),{},{workCenterId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0645\u0631\u0643\u0632 \u0627\u0644\u0639\u0645\u0644"}),i.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("textarea",{value:b.description,onChange:e=>v(Be(Be({},b),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u0648\u0635\u0641 \u0625\u0636\u0627\u0641\u064a \u0644\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]}),b.productId&&(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0645\u0648\u0627\u062f \u0645\u0637\u0644\u0648\u0628\u0629:"}),(0,Qe.jsx)("div",{className:"space-y-2",children:c(b.productId).map(e=>{const t=l.find(t=>t.id===e.materialId);return(0,Qe.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,Qe.jsx)("span",{children:(null===t||void 0===t?void 0:t.name)||"\u0645\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629"}),(0,Qe.jsxs)("span",{className:"text-gray-600",children:[e.quantity*(parseInt(b.quantity)||0)," ",(null===t||void 0===t?void 0:t.unit)||""]})]},e.id)})})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,Qe.jsx)(ra,{onClick:k,className:"bg-gray-300 hover:bg-gray-400 text-gray-700",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:async()=>{if(b.productId&&b.quantity){f(!0);try{u?s(u.id,b):t(b),k()}catch(e){console.error("\u062e\u0637\u0623 \u0641\u064a \u062d\u0641\u0638 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c:",e),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062d\u0641\u0638 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c")}finally{f(!1)}}else alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},disabled:g,className:"bg-blue-600 hover:bg-blue-700 text-white",children:g?"\u062c\u0627\u0631\u064a \u0627\u0644\u062d\u0641\u0638...":"\u062d\u0641\u0638"})]})]})})]})},Br=()=>{const{productionPlans:e,addProductionPlan:t,updateProductionPlan:s,products:a,workCenters:n,productionOrders:l,bomItems:i,generateMRPRequirements:o,getBomItemsByProduct:c}=Ye(),[d,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[g,f]=(0,r.useState)([]),[b,v]=(0,r.useState)([]),[j,y]=(0,r.useState)({name:"",description:"",period:"Monthly",startDate:"",endDate:""}),[N,w]=(0,r.useState)({productId:"",quantity:"",requiredDate:""}),S=[{value:"Weekly",label:"\u0623\u0633\u0628\u0648\u0639\u064a"},{value:"Monthly",label:"\u0634\u0647\u0631\u064a"},{value:"Quarterly",label:"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a"},{value:"Yearly",label:"\u0633\u0646\u0648\u064a"}],k=function(){p(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),v([]),m(!0)},C=[{header:"\u0627\u0644\u0645\u0627\u062f\u0629",accessor:"materialName",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e})},{header:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",accessor:"requiredQuantity",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e})},{header:"\u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u0627\u0644\u062d\u0627\u0644\u064a",accessor:"currentStock",render:e=>(0,Qe.jsx)("div",{className:"font-medium ".concat(e<20?"text-red-600":"text-green-600"),children:e})},{header:"\u0627\u0644\u0646\u0642\u0635",accessor:"shortage",render:e=>{const t=Math.max(0,e);return(0,Qe.jsx)("div",{className:"font-medium ".concat(t>0?"text-red-600":"text-green-600"),children:t})}},{header:"\u0646\u0642\u0637\u0629 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0637\u0644\u0628",accessor:"reorderPoint",render:e=>(0,Qe.jsx)("div",{className:"text-gray-600",children:e})},{header:"\u0632\u0645\u0646 \u0627\u0644\u062a\u0648\u0631\u064a\u062f",accessor:"leadTime",render:e=>(0,Qe.jsxs)("div",{className:"text-gray-600",children:[e," \u064a\u0648\u0645"]})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",accessor:"action",render:(e,t)=>t.shortage>0||t.currentStock<t.reorderPoint?(0,Qe.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs",children:"\u0637\u0644\u0628 \u0634\u0631\u0627\u0621"}):(0,Qe.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"\u0645\u062a\u0648\u0641\u0631"})}],I=[{header:"\u0645\u0631\u0643\u0632 \u0627\u0644\u0639\u0645\u0644",accessor:"workCenterName",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e})},{header:"\u0631\u0642\u0645 \u0627\u0644\u0623\u0645\u0631",accessor:"orderId",render:e=>(0,Qe.jsxs)("div",{className:"text-blue-600 font-medium",children:["#",e]})},{header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"productName",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e})},{header:"\u0627\u0644\u0643\u0645\u064a\u0629",accessor:"quantity",render:e=>(0,Qe.jsxs)("div",{className:"text-gray-900",children:[e," \u0648\u062d\u062f\u0629"]})},{header:"\u0627\u0644\u062a\u0633\u0644\u0633\u0644",accessor:"sequence",render:e=>(0,Qe.jsx)("div",{className:"text-center",children:(0,Qe.jsx)("span",{className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:e})})},{header:"\u0627\u0644\u0645\u062f\u0629 \u0627\u0644\u0645\u0642\u062f\u0631\u0629",accessor:"estimatedDuration",render:e=>(0,Qe.jsxs)("div",{className:"text-gray-600",children:[e," \u0633\u0627\u0639\u0629"]})},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0621",accessor:"plannedStartDate",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?new Date(e).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621",accessor:"plannedEndDate",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?new Date(e).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629",accessor:"priority",render:e=>(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Urgent"===e?"bg-red-100 text-red-800":"High"===e?"bg-orange-100 text-orange-800":"Medium"===e?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e})}];return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center",children:(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u062a\u062e\u0637\u064a\u0637 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f \u0648\u0627\u0644\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629"})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u062e\u0637\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0645\u0631\u0627\u0643\u0632 \u0627\u0644\u0639\u0645\u0644"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:l.filter(e=>"Scheduled"===e.status).length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0623\u0648\u0627\u0645\u0631 \u0645\u062c\u062f\u0648\u0644\u0629"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:i.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0645\u0648\u0627\u062f BOM"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u062a\u062e\u0637\u064a\u0637 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f (MRP)"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0627\u062d\u0633\u0628 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 \u0644\u0645\u0646\u062a\u062c \u0645\u0639\u064a\u0646 \u0648\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"}),(0,Qe.jsx)(ra,{onClick:()=>{w({productId:"",quantity:"",requiredDate:""}),f([]),x(!0)},className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"\u062d\u0633\u0627\u0628 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f"})]}),(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u062c\u062f\u0648\u0644\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0639\u0644\u0649 \u0645\u0631\u0627\u0643\u0632 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0645\u062e\u062a\u0644\u0641\u0629"}),(0,Qe.jsx)(ra,{onClick:()=>k(),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]})]}),(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u0625\u0646\u0634\u0627\u0621 \u062e\u0637\u0629 \u0625\u0646\u062a\u0627\u062c \u062c\u062f\u064a\u062f\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Qe.jsx)(da,{placeholder:"\u0627\u0633\u0645 \u0627\u0644\u062e\u0637\u0629",value:j.name,onChange:e=>y(Be(Be({},j),{},{name:e.target.value}))}),(0,Qe.jsx)(ma,{value:j.period,onChange:e=>y(Be(Be({},j),{},{period:e.target.value})),children:S.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Qe.jsx)(da,{type:"date",placeholder:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629",value:j.startDate,onChange:e=>y(Be(Be({},j),{},{startDate:e.target.value}))}),(0,Qe.jsx)(da,{type:"date",placeholder:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629",value:j.endDate,onChange:e=>y(Be(Be({},j),{},{endDate:e.target.value}))})]}),(0,Qe.jsx)("div",{className:"mt-4",children:(0,Qe.jsx)("textarea",{placeholder:"\u0648\u0635\u0641 \u0627\u0644\u062e\u0637\u0629",value:j.description,onChange:e=>y(Be(Be({},j),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,Qe.jsx)("div",{className:"mt-4",children:(0,Qe.jsx)(ra,{onClick:()=>{j.name&&j.startDate&&j.endDate?(t(j),y({name:"",description:"",period:"Monthly",startDate:"",endDate:""})):alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-purple-600 hover:bg-purple-700 text-white",children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062e\u0637\u0629"})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u062e\u0637\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),0===e.length?(0,Qe.jsx)("p",{className:"text-gray-500 text-center py-8",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062e\u0637\u0637 \u0625\u0646\u062a\u0627\u062c \u0628\u0639\u062f"}):(0,Qe.jsx)("div",{className:"space-y-4",children:e.map(e=>{var t;return(0,Qe.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,Qe.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.description}),(0,Qe.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,Qe.jsxs)("span",{children:["\u0627\u0644\u0641\u062a\u0631\u0629: ",null===(t=S.find(t=>t.value===e.period))||void 0===t?void 0:t.label]}),(0,Qe.jsxs)("span",{children:["\u0645\u0646: ",e.startDate?new Date(e.startDate).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),(0,Qe.jsxs)("span",{children:["\u0625\u0644\u0649: ",e.endDate?new Date(e.endDate).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]})]}),(0,Qe.jsx)("div",{className:"flex space-x-2",children:(0,Qe.jsx)(ra,{onClick:()=>k(e),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:"\u062c\u062f\u0648\u0644\u0629"})})]})},e.id)})})]})}),(0,Qe.jsx)(ga,{isOpen:d,onClose:()=>x(!1),title:"\u062a\u062e\u0637\u064a\u0637 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f (MRP)",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c *"}),(0,Qe.jsxs)(ma,{value:N.productId,onChange:e=>w(Be(Be({},N),{},{productId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0646\u062a\u062c"}),a.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 *"}),(0,Qe.jsx)(da,{type:"number",value:N.quantity,onChange:e=>w(Be(Be({},N),{},{quantity:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u0637\u0644\u0648\u0628"}),(0,Qe.jsx)(da,{type:"date",value:N.requiredDate,onChange:e=>w(Be(Be({},N),{},{requiredDate:e.target.value}))})]})]}),(0,Qe.jsx)("div",{className:"flex justify-end",children:(0,Qe.jsx)(ra,{onClick:()=>{if(!N.productId||!N.quantity)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=o(N.productId,parseInt(N.quantity)).map(e=>{const t=a.find(t=>t.id===e.materialId);return Be(Be({},e),{},{materialName:(null===t||void 0===t?void 0:t.name)||"\u0645\u0627\u062f\u0629 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f\u0629",unit:(null===t||void 0===t?void 0:t.unit)||"",currentStock:Math.floor(100*Math.random())+20,reorderPoint:Math.floor(50*Math.random())+10,leadTime:Math.floor(7*Math.random())+1})});f(e)},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"\u062d\u0633\u0627\u0628 \u0627\u0644\u0645\u062a\u0637\u0644\u0628\u0627\u062a"})}),g.length>0&&(0,Qe.jsxs)("div",{className:"mt-6",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"\u0646\u062a\u0627\u0626\u062c \u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0645\u062a\u0637\u0644\u0628\u0627\u062a:"}),(0,Qe.jsx)(ja,{columns:C,data:g,className:"min-w-full"})]})]})}),(0,Qe.jsx)(ga,{isOpen:u,onClose:()=>m(!1),title:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",size:"xl",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)("div",{className:"flex justify-end",children:(0,Qe.jsx)(ra,{onClick:()=>{if(!h)return;const e=l.filter(e=>{const t=new Date(e.plannedStartDate),s=new Date(h.startDate),a=new Date(h.endDate);return t>=s&&t<=a}),t={};e.forEach(e=>{const s=e.workCenterId||"unassigned";t[s]||(t[s]=[]),t[s].push(e)});const s=[];Object.entries(t).forEach(e=>{let[t,r]=e;const l=n.find(e=>e.id===parseInt(t)),i=(null===l||void 0===l?void 0:l.name)||("unassigned"===t?"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f":"\u0645\u0631\u0643\u0632 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641");r.forEach((e,r)=>{const n=a.find(t=>t.id===e.productId);s.push({id:"".concat(t,"_").concat(e.id),workCenterId:t,workCenterName:i,orderId:e.id,productName:(null===n||void 0===n?void 0:n.name)||"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f",quantity:e.quantity,plannedStartDate:e.plannedStartDate,plannedEndDate:e.plannedEndDate,priority:e.priority,sequence:r+1,estimatedDuration:Math.floor(8*Math.random())+2})})}),v(s.sort((e,t)=>new Date(e.plannedStartDate)-new Date(t.plannedStartDate)))},className:"bg-green-600 hover:bg-green-700 text-white",children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062c\u062f\u0648\u0644"})}),b.length>0&&(0,Qe.jsxs)("div",{className:"mt-6",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"\u062c\u062f\u0648\u0644 \u0627\u0644\u0625\u0646\u062a\u0627\u062c:"}),(0,Qe.jsx)(ja,{columns:I,data:b,className:"min-w-full"})]}),0===b.length&&(0,Qe.jsx)("div",{className:"text-center py-8 text-gray-500",children:'\u0627\u0636\u063a\u0637 "\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062c\u062f\u0648\u0644" \u0644\u0639\u0631\u0636 \u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c'})]})})]})},qr=()=>{const{materialConsumption:e,productionWaste:t,addMaterialConsumption:s,addProductionWaste:a,getMaterialConsumptionByOrder:n,getWasteByOrder:l,productionOrders:i,products:o,warehouses:c}=Ye(),[d,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)("consumption"),[b,v]=(0,r.useState)({orderId:"",materialId:"",warehouseId:"",quantity:"",unit:"",consumptionDate:(new Date).toISOString().split("T")[0],notes:""}),[j,y]=(0,r.useState)({orderId:"",materialId:"",wasteType:"",quantity:"",unit:"",wasteDate:(new Date).toISOString().split("T")[0],reason:"",cost:""}),N=[{value:"Material",label:"\u0647\u062f\u0631 \u0645\u0648\u0627\u062f \u062e\u0627\u0645"},{value:"Production",label:"\u0647\u062f\u0631 \u0625\u0646\u062a\u0627\u062c\u064a"},{value:"Quality",label:"\u0647\u062f\u0631 \u062c\u0648\u062f\u0629"},{value:"Equipment",label:"\u0647\u062f\u0631 \u0645\u0639\u062f\u0627\u062a"},{value:"Process",label:"\u0647\u062f\u0631 \u0639\u0645\u0644\u064a\u0627\u062a"}],w=function(){v({orderId:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||"",materialId:"",warehouseId:"",quantity:"",unit:"",consumptionDate:(new Date).toISOString().split("T")[0],notes:""}),x(!0)},S=function(){y({orderId:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||"",materialId:"",wasteType:"",quantity:"",unit:"",wasteDate:(new Date).toISOString().split("T")[0],reason:"",cost:""}),m(!0)},k=e=>{const t=o.find(t=>t.id===e);return t?t.name:"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},C=e=>{const t=c.find(t=>t.id===e);return t?t.name:"\u0645\u062e\u0632\u0646 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},I=e=>n(e).reduce((e,t)=>e+parseFloat(t.quantity||0),0),D=e=>l(e).reduce((e,t)=>e+parseFloat(t.quantity||0),0),_=[{header:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",accessor:"orderId",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-blue-600",children:["#",e]})},{header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"materialId",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:k(e)})},{header:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0633\u062a\u0647\u0644\u0643\u0629",accessor:"quantity",render:e=>(0,Qe.jsxs)("div",{className:"text-gray-900",children:[e," ",(null===e||void 0===e?void 0:e.unit)||""]})},{header:"\u0627\u0644\u0645\u062e\u0632\u0646",accessor:"warehouseId",render:e=>(0,Qe.jsx)("div",{className:"text-gray-600",children:C(e)})},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u0647\u0644\u0627\u0643",accessor:"consumptionDate",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?new Date(e).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0627\u062a",accessor:"notes",render:e=>(0,Qe.jsx)("div",{className:"text-gray-600 max-w-xs truncate",children:e||"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0644\u0627\u062d\u0638\u0627\u062a"})}],L=[{header:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",accessor:"orderId",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-blue-600",children:["#",e]})},{header:"\u0627\u0644\u0645\u0627\u062f\u0629",accessor:"materialId",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:k(e)})},{header:"\u0646\u0648\u0639 \u0627\u0644\u0647\u062f\u0631",accessor:"wasteType",render:e=>{var t;return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Material"===e?"bg-red-100 text-red-800":"Production"===e?"bg-orange-100 text-orange-800":"Quality"===e?"bg-yellow-100 text-yellow-800":"Equipment"===e?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:(null===(t=N.find(t=>t.value===e))||void 0===t?void 0:t.label)||e})}},{header:"\u0643\u0645\u064a\u0629 \u0627\u0644\u0647\u062f\u0631",accessor:"quantity",render:e=>(0,Qe.jsxs)("div",{className:"text-red-600 font-medium",children:[e," ",(null===e||void 0===e?void 0:e.unit)||""]})},{header:"\u0627\u0644\u062a\u0643\u0644\u0641\u0629",accessor:"cost",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?"".concat(parseFloat(e).toFixed(2)," \u0631.\u0633"):"0.00 \u0631.\u0633"})},{header:"\u0627\u0644\u0633\u0628\u0628",accessor:"reason",render:e=>(0,Qe.jsx)("div",{className:"text-gray-600 max-w-xs truncate",children:e||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",accessor:"wasteDate",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?new Date(e).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}],E=e.reduce((e,t)=>e+parseFloat(t.quantity||0),0),M=t.reduce((e,t)=>e+parseFloat(t.quantity||0),0),P=E>0?(M/E*100).toFixed(2):0;return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 \u0648\u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u062a\u062a\u0628\u0639 \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0645\u0648\u0627\u062f \u0648\u0627\u0644\u0647\u062f\u0631 \u0641\u064a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]}),(0,Qe.jsxs)("div",{className:"flex space-x-3",children:[(0,Qe.jsx)(ra,{onClick:()=>w(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0645\u0648\u0627\u062f"}),(0,Qe.jsx)(ra,{onClick:()=>S(),className:"bg-red-600 hover:bg-red-700 text-white",children:"\u062a\u0633\u062c\u064a\u0644 \u0647\u062f\u0631"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u0627\u0633\u062a\u0647\u0644\u0627\u0643"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:t.length}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u0647\u062f\u0631"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:E.toFixed(2)}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0627\u0633\u062a\u0647\u0644\u0627\u0643"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsxs)("div",{className:"text-2xl font-bold text-yellow-600",children:[P,"%"]}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0647\u062f\u0631"})]})]}),(0,Qe.jsx)(aa,{className:"p-4",children:(0,Qe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Qe.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u0639\u0631\u0636 \u0628\u064a\u0627\u0646\u0627\u062a \u0623\u0645\u0631 \u0625\u0646\u062a\u0627\u062c:"}),(0,Qe.jsxs)(ma,{value:h,onChange:e=>p(e.target.value),className:"w-64",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0648\u0627\u0645\u0631"}),i.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:["#",e.id," - ",k(e.productId)," (",e.quantity,")"]},e.id))]})]})}),(0,Qe.jsx)("div",{className:"border-b border-gray-200",children:(0,Qe.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,Qe.jsx)("button",{onClick:()=>f("consumption"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("consumption"===g?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0645\u0648\u0627\u062f"}),(0,Qe.jsx)("button",{onClick:()=>f("waste"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("waste"===g?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\u0627\u0644\u0647\u062f\u0631 \u0641\u064a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]})}),"consumption"===g&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u0633\u062c\u0644\u0627\u062a \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0645\u0648\u0627\u062f"}),(0,Qe.jsx)(ra,{onClick:()=>w(h),size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0633\u062a\u0647\u0644\u0627\u0643"})]}),(0,Qe.jsx)(ja,{columns:_,data:h?n(h):e,className:"min-w-full"})]})}),"waste"===g&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u0647\u062f\u0631 \u0641\u064a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)(ra,{onClick:()=>S(h),size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:"\u0625\u0636\u0627\u0641\u0629 \u0647\u062f\u0631"})]}),(0,Qe.jsx)(ja,{columns:L,data:h?l(h):t,className:"min-w-full"})]})}),h&&(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["\u0645\u0644\u062e\u0635 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c #",h]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-sm text-blue-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0627\u0633\u062a\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:I(h).toFixed(2)})]}),(0,Qe.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-sm text-red-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0647\u062f\u0631"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-700",children:D(h).toFixed(2)})]}),(0,Qe.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-sm text-green-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0643\u0641\u0627\u0621\u0629"}),(0,Qe.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:[I(h)>0?(100-D(h)/I(h)*100).toFixed(1):0,"%"]})]})]})]}),(0,Qe.jsx)(ga,{isOpen:d,onClose:()=>x(!1),title:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0645\u0648\u0627\u062f",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c *"}),(0,Qe.jsxs)(ma,{value:b.orderId,onChange:e=>v(Be(Be({},b),{},{orderId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),i.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:["#",e.id," - ",k(e.productId)," (",e.quantity,")"]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0627\u062f\u0629 *"}),(0,Qe.jsxs)(ma,{value:b.materialId,onChange:e=>v(Be(Be({},b),{},{materialId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0627\u062f\u0629"}),o.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.name," - ",e.unit]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsxs)(ma,{value:b.warehouseId,onChange:e=>v(Be(Be({},b),{},{warehouseId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646"}),c.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 *"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:b.quantity,onChange:e=>v(Be(Be({},b),{},{quantity:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Qe.jsx)(da,{value:b.unit,onChange:e=>v(Be(Be({},b),{},{unit:e.target.value})),placeholder:"\u0645\u062b\u0644: \u0643\u063a\u060c \u0644\u062a\u0631\u060c \u0642\u0637\u0639\u0629"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u062a\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)(da,{type:"date",value:b.consumptionDate,onChange:e=>v(Be(Be({},b),{},{consumptionDate:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:b.notes,onChange:e=>v(Be(Be({},b),{},{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u062d\u0648\u0644 \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0645\u0627\u062f\u0629"})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,Qe.jsx)(ra,{onClick:()=>x(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{b.orderId&&b.materialId&&b.quantity?(s(b),x(!1),v({orderId:"",materialId:"",warehouseId:"",quantity:"",unit:"",consumptionDate:(new Date).toISOString().split("T")[0],notes:""})):alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-blue-600 hover:bg-blue-700 text-white",children:"\u062d\u0641\u0638"})]})]})}),(0,Qe.jsx)(ga,{isOpen:u,onClose:()=>m(!1),title:"\u062a\u0633\u062c\u064a\u0644 \u0647\u062f\u0631 \u0641\u064a \u0627\u0644\u0625\u0646\u062a\u0627\u062c",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c *"}),(0,Qe.jsxs)(ma,{value:j.orderId,onChange:e=>y(Be(Be({},j),{},{orderId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),i.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:["#",e.id," - ",k(e.productId)," (",e.quantity,")"]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0627\u062f\u0629 *"}),(0,Qe.jsxs)(ma,{value:j.materialId,onChange:e=>y(Be(Be({},j),{},{materialId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0627\u062f\u0629"}),o.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:[e.name," - ",e.unit]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0647\u062f\u0631 *"}),(0,Qe.jsxs)(ma,{value:j.wasteType,onChange:e=>y(Be(Be({},j),{},{wasteType:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0647\u062f\u0631"}),N.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 *"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:j.quantity,onChange:e=>y(Be(Be({},j),{},{quantity:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0645\u064a\u0629 \u0627\u0644\u0647\u062f\u0631"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0648\u062d\u062f\u0629"}),(0,Qe.jsx)(da,{value:j.unit,onChange:e=>y(Be(Be({},j),{},{unit:e.target.value})),placeholder:"\u0645\u062b\u0644: \u0643\u063a\u060c \u0644\u062a\u0631\u060c \u0642\u0637\u0639\u0629"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0647\u062f\u0631 (\u0631.\u0633)"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:j.cost,onChange:e=>y(Be(Be({},j),{},{cost:e.target.value})),placeholder:"\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0647\u062f\u0631"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0647\u062f\u0631"}),(0,Qe.jsx)(da,{type:"date",value:j.wasteDate,onChange:e=>y(Be(Be({},j),{},{wasteDate:e.target.value}))})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0633\u0628\u0628 \u0627\u0644\u0647\u062f\u0631"}),(0,Qe.jsx)("textarea",{value:j.reason,onChange:e=>y(Be(Be({},j),{},{reason:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"\u0648\u0636\u062d \u0633\u0628\u0628 \u062d\u062f\u0648\u062b \u0627\u0644\u0647\u062f\u0631"})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,Qe.jsx)(ra,{onClick:()=>m(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{j.orderId&&j.materialId&&j.wasteType&&j.quantity?(a(j),m(!1),y({orderId:"",materialId:"",wasteType:"",quantity:"",unit:"",wasteDate:(new Date).toISOString().split("T")[0],reason:"",cost:""})):alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629")},className:"bg-red-600 hover:bg-red-700 text-white",children:"\u062d\u0641\u0638"})]})]})})]})},Qr=()=>{const{qualityControls:e,addQualityControl:t,updateQualityControl:s,getQualityControlsByOrder:a,productionOrders:n,products:l,employees:i}=Ye(),[o,c]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)("All"),[g,f]=(0,r.useState)("controls"),[b,v]=(0,r.useState)({orderId:"",productId:"",inspectorId:"",controlType:"",checkDate:(new Date).toISOString().split("T")[0],testResults:"",status:"Pending",standardValue:"",actualValue:"",deviation:"",action:"",notes:""}),j=[{value:"Incoming",label:"\u0641\u062d\u0635 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u0648\u0627\u0631\u062f\u0629"},{value:"InProcess",label:"\u0641\u062d\u0635 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"},{value:"Final",label:"\u0641\u062d\u0635 \u0646\u0647\u0627\u0626\u064a"},{value:"Random",label:"\u0641\u062d\u0635 \u0639\u0634\u0648\u0627\u0626\u064a"},{value:"Customer",label:"\u0641\u062d\u0635 \u0627\u0644\u0639\u0645\u064a\u0644"}],y=[{value:"Pending",label:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"},{value:"Passed",label:"\u0646\u062c\u062d"},{value:"Failed",label:"\u0641\u0634\u0644"},{value:"Conditional",label:"\u0645\u0634\u0631\u0648\u0637"},{value:"Rework",label:"\u0625\u0639\u0627\u062f\u0629 \u0639\u0645\u0644"}],N=[{value:"None",label:"\u0644\u0627 \u064a\u0648\u062c\u062f"},{value:"Accept",label:"\u0642\u0628\u0648\u0644"},{value:"Reject",label:"\u0631\u0641\u0636"},{value:"Rework",label:"\u0625\u0639\u0627\u062f\u0629 \u0639\u0645\u0644"},{value:"Repair",label:"\u0625\u0635\u0644\u0627\u062d"},{value:"Sort",label:"\u0641\u0631\u0632"},{value:"UseAsIs",label:"\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0643\u0645\u0627 \u0647\u0648"}],w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(x(e),v({orderId:e.orderId||"",productId:e.productId||"",inspectorId:e.inspectorId||"",controlType:e.controlType||"",checkDate:e.checkDate||(new Date).toISOString().split("T")[0],testResults:e.testResults||"",status:e.status||"Pending",standardValue:e.standardValue||"",actualValue:e.actualValue||"",deviation:e.deviation||"",action:e.action||"None",notes:e.notes||""})):(x(null),v({orderId:"",productId:"",inspectorId:"",controlType:"",checkDate:(new Date).toISOString().split("T")[0],testResults:"",status:"Pending",standardValue:"",actualValue:"",deviation:"",action:"None",notes:""})),c(!0)},S=(e,t)=>{if(v(Be(Be({},b),{},{[e]:t})),("standardValue"===e||"actualValue"===e)&&(b.standardValue||b.actualValue)){const s="standardValue"===e?parseFloat(t):parseFloat(b.standardValue)||0,a="actualValue"===e?parseFloat(t):parseFloat(b.actualValue)||0;if(s>0){const e=((a-s)/s*100).toFixed(2);v(t=>Be(Be({},t),{},{deviation:e.toString()}))}}},k=e=>{const t=l.find(t=>t.id===e);return t?t.name:"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},C=e=>{if(!e)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";const t=i.find(t=>t.id===e);return t?t.name:"\u0645\u0648\u0638\u0641 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},I=e=>{const t=n.find(t=>t.id===e);return t?"#".concat(t.id," - ").concat(k(t.productId)," (").concat(t.quantity,")"):"\u0623\u0645\u0631 \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"},D="All"===h?e:e.filter(e=>e.status===h),_=()=>u?a(u):D,L=[{header:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",accessor:"orderId",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-blue-600",children:I(e)})},{header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"productId",render:e=>(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:k(e)})},{header:"\u0646\u0648\u0639 \u0627\u0644\u0641\u062d\u0635",accessor:"controlType",render:e=>{var t;return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Incoming"===e?"bg-blue-100 text-blue-800":"InProcess"===e?"bg-yellow-100 text-yellow-800":"Final"===e?"bg-green-100 text-green-800":"Random"===e?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:(null===(t=j.find(t=>t.value===e))||void 0===t?void 0:t.label)||e})}},{header:"\u0627\u0644\u0645\u0641\u062a\u0634",accessor:"inspectorId",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:C(e)})},{header:"\u0627\u0644\u0642\u064a\u0645",accessor:"values",render:(e,t)=>(0,Qe.jsxs)("div",{className:"text-sm",children:[(0,Qe.jsxs)("div",{children:["\u0627\u0644\u0645\u0639\u064a\u0627\u0631: ",t.standardValue||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),(0,Qe.jsxs)("div",{children:["\u0627\u0644\u0641\u0639\u0644\u064a: ",t.actualValue||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),(0,Qe.jsxs)("div",{className:"font-medium ".concat(parseFloat(t.deviation)>5||parseFloat(t.deviation)<-5?"text-red-600":"text-green-600"),children:["\u0627\u0644\u0627\u0646\u062d\u0631\u0627\u0641: ",t.deviation||0,"%"]})]})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>{var t;return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Passed"===e?"bg-green-100 text-green-800":"Failed"===e?"bg-red-100 text-red-800":"Conditional"===e?"bg-yellow-100 text-yellow-800":"Rework"===e?"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-800"),children:(null===(t=y.find(t=>t.value===e))||void 0===t?void 0:t.label)||e})}},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621",accessor:"action",render:e=>{var t;return(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Accept"===e?"bg-green-100 text-green-800":"Reject"===e?"bg-red-100 text-red-800":"Rework"===e?"bg-orange-100 text-orange-800":"Repair"===e?"bg-blue-100 text-blue-800":"Sort"===e?"bg-yellow-100 text-yellow-800":"UseAsIs"===e?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"),children:(null===(t=N.find(t=>t.value===e))||void 0===t?void 0:t.label)||e})}},{header:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e",accessor:"checkDate",render:e=>(0,Qe.jsx)("div",{className:"text-gray-900",children:e?new Date(e).toLocaleDateString("ar"):"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"actions",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)("button",{onClick:()=>w(t),className:"text-blue-600 hover:text-blue-800 text-sm",children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Qe.jsx)("button",{onClick:()=>{window.confirm&&window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0641\u062d\u0635 \u0627\u0644\u062c\u0648\u062f\u0629 \u0647\u0630\u0627\u061f")&&console.log("\u062d\u0630\u0641 \u0641\u062d\u0635 \u0627\u0644\u062c\u0648\u062f\u0629:",t.id)},className:"text-red-600 hover:text-red-800 text-sm",children:"\u062d\u0630\u0641"})]})}],E=e.length,M=e.filter(e=>"Passed"===e.status).length,P=e.filter(e=>"Failed"===e.status).length,T=E>0?(M/E*100).toFixed(1):0,z=j.map(t=>{const s=e.filter(e=>e.controlType===t.value),a=s.filter(e=>"Failed"===e.status).length,r=s.length>0?(a/s.length*100).toFixed(1):0;return{type:t.label,total:s.length,failures:a,rate:r}});return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u062c\u0648\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0641\u062d\u0648\u0635\u0627\u062a \u0627\u0644\u062c\u0648\u062f\u0629 \u0648\u0639\u0645\u0644\u064a\u0627\u062a \u0639\u062f\u0645 \u0627\u0644\u0645\u0637\u0627\u0628\u0642\u0629"})]}),(0,Qe.jsx)(ra,{onClick:()=>w(),className:"bg-green-600 hover:bg-green-700 text-white",children:"\u0641\u062d\u0635 \u062c\u0648\u062f\u0629 \u062c\u062f\u064a\u062f"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:E}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0641\u062d\u0648\u0635\u0627\u062a"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:M}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0641\u062d\u0648\u0635\u0627\u062a \u0646\u0627\u062c\u062d\u0629"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:P}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0641\u062d\u0648\u0635\u0627\u062a \u0641\u0627\u0634\u0644\u0629"})]}),(0,Qe.jsxs)(aa,{className:"p-4",children:[(0,Qe.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[T,"%"]}),(0,Qe.jsx)("div",{className:"text-gray-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0646\u062c\u0627\u062d"})]})]}),(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0639\u064a\u0648\u0628 \u062d\u0633\u0628 \u0646\u0648\u0639 \u0627\u0644\u0641\u062d\u0635"}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:z.map((e,t)=>(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:e.type}),(0,Qe.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[e.failures,"/",e.total]}),(0,Qe.jsxs)("div",{className:"text-sm font-medium ".concat(parseFloat(e.rate)>10?"text-red-600":parseFloat(e.rate)>5?"text-yellow-600":"text-green-600"),children:[e.rate,"% \u0639\u064a\u0648\u0628"]})]},t))})]}),(0,Qe.jsx)(aa,{className:"p-4",children:(0,Qe.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,Qe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qe.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u0641\u0644\u062a\u0631\u0629 \u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Qe.jsxs)(ma,{value:h,onChange:e=>p(e.target.value),className:"w-48",children:[(0,Qe.jsx)("option",{value:"All",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),y.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qe.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\u0639\u0631\u0636 \u0628\u064a\u0627\u0646\u0627\u062a \u0623\u0645\u0631 \u0625\u0646\u062a\u0627\u062c:"}),(0,Qe.jsxs)(ma,{value:u,onChange:e=>m(e.target.value),className:"w-64",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0648\u0627\u0645\u0631"}),n.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:["#",e.id," - ",k(e.productId)," (",e.quantity,")"]},e.id))]})]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0639\u0631\u0636 ",_().length," \u0645\u0646 ",E," \u0641\u062d\u0635"]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)(ja,{columns:L,data:_(),className:"min-w-full"})}),(0,Qe.jsx)(ga,{isOpen:o,onClose:()=>c(!1),title:d?"\u062a\u0639\u062f\u064a\u0644 \u0641\u062d\u0635 \u0627\u0644\u062c\u0648\u062f\u0629":"\u0641\u062d\u0635 \u062c\u0648\u062f\u0629 \u062c\u062f\u064a\u062f",size:"xl",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c *"}),(0,Qe.jsxs)(ma,{value:b.orderId,onChange:e=>v(Be(Be({},b),{},{orderId:e.target.value})),required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0623\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),n.map(e=>(0,Qe.jsxs)("option",{value:e.id,children:["#",e.id," - ",k(e.productId)," (",e.quantity,")"]},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u0641\u062d\u0635 *"}),(0,Qe.jsxs)(ma,{value:b.controlType,onChange:e=>v(Be(Be({},b),{},{controlType:e.target.value})),required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0641\u062d\u0635"}),j.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0645\u0641\u062a\u0634"}),(0,Qe.jsxs)(ma,{value:b.inspectorId,onChange:e=>v(Be(Be({},b),{},{inspectorId:e.target.value})),children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0641\u062a\u0634"}),i.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0641\u062d\u0635"}),(0,Qe.jsx)(da,{type:"date",value:b.checkDate,onChange:e=>v(Be(Be({},b),{},{checkDate:e.target.value}))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0639\u064a\u0627\u0631\u064a\u0629"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:b.standardValue,onChange:e=>S("standardValue",e.target.value),placeholder:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0639\u064a\u0627\u0631\u064a\u0629 \u0623\u0648 \u0627\u0644\u0645\u0642\u0628\u0648\u0644\u0629"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0639\u0644\u064a\u0629"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:b.actualValue,onChange:e=>S("actualValue",e.target.value),placeholder:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u0642\u0627\u0633\u0629 \u0641\u0639\u0644\u064a\u0627\u064b"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0627\u0646\u062d\u0631\u0627\u0641 (%)"}),(0,Qe.jsx)(da,{type:"number",step:"0.01",value:b.deviation,onChange:e=>v(Be(Be({},b),{},{deviation:e.target.value})),placeholder:"\u0633\u064a\u062a\u0645 \u062d\u0633\u0627\u0628\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b",readOnly:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)(ma,{value:b.status,onChange:e=>v(Be(Be({},b),{},{status:e.target.value})),children:y.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0627\u0644\u0645\u0637\u0644\u0648\u0628"}),(0,Qe.jsx)(ma,{value:b.action,onChange:e=>v(Be(Be({},b),{},{action:e.target.value})),children:N.map(e=>(0,Qe.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0641\u062d\u0635"}),(0,Qe.jsx)("textarea",{value:b.testResults,onChange:e=>v(Be(Be({},b),{},{testResults:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0641\u062d\u0635 \u0648\u0627\u0644\u0642\u064a\u0627\u0633\u0627\u062a"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:b.notes,onChange:e=>v(Be(Be({},b),{},{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u062d\u0648\u0644 \u0627\u0644\u0641\u062d\u0635"})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,Qe.jsx)(ra,{onClick:()=>c(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-700",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!b.orderId||!b.controlType)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=parseFloat(b.standardValue)||0,a=parseFloat(b.actualValue)||0,r=e>0?((a-e)/e*100).toFixed(2):0,n=Be(Be({},b),{},{deviation:r.toString(),calculatedAt:(new Date).toISOString()});d?s(d.id,n):t(n),c(!1)},className:"bg-green-600 hover:bg-green-700 text-white",children:"\u062d\u0641\u0638"})]})]})})]})},Hr=()=>{const{productionOrders:e,productionKPIs:t,getProductionDashboardData:s,calculateOEE:a,calculateOnTimeDelivery:n,calculateMaterialEfficiency:l,products:i,workCenters:o,materialConsumption:c,productionWaste:d,qualityControls:x}=Ye(),[u,m]=(0,r.useState)(null),[h,p]=(0,r.useState)("month"),[g,f]=(0,r.useState)(!1),b=()=>{f(!0);try{const e=s();m(e)}catch(e){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0644\u0648\u062d\u0629:",e)}finally{f(!1)}};(0,r.useEffect)(()=>{b()},[h]);const v=(()=>{const t=(new Date).toISOString().slice(0,7),s=Math.ceil(((new Date).getMonth()+1)/3),a=(new Date).getFullYear();let r=e;new Date;"month"===h?r=e.filter(e=>{var s;return null===(s=e.createdAt)||void 0===s?void 0:s.startsWith(t)}):"quarter"===h?r=e.filter(e=>{const t=new Date(e.createdAt),r=Math.ceil((t.getMonth()+1)/3);return t.getFullYear()===a&&r===s}):"year"===h&&(r=e.filter(e=>{var t;return null===(t=e.createdAt)||void 0===t?void 0:t.startsWith(a.toString())}));const n=r.length,l=r.filter(e=>"Completed"===e.status).length,i=r.filter(e=>"In Progress"===e.status).length,o=r.filter(e=>"Scheduled"===e.status).length,u=r.filter(e=>e.actualEndDate&&e.actualEndDate<=e.plannedEndDate).length,m=n>0?(u/n*100).toFixed(1):0,p=c.length,g=d.length,f=p>0?(g/p*100).toFixed(1):0,b=x.length,v=x.filter(e=>"Passed"===e.status).length,j=b>0?(v/b*100).toFixed(1):0,y=r.filter(e=>e.actualStartDate&&e.actualEndDate);return{totalOrders:n,completedOrders:l,inProgressOrders:i,scheduledOrders:o,onTimeDeliveryRate:m,wasteRate:f,qualityRate:j,avgProductionTime:(y.length>0?y.reduce((e,t)=>{const s=new Date(t.actualStartDate);return e+(new Date(t.actualEndDate)-s)},0)/y.length/864e5:0).toFixed(1)}})(),j=()=>{const t=new Date;return e.filter(e=>("In Progress"===e.status||"Scheduled"===e.status)&&e.plannedEndDate&&new Date(e.plannedEndDate)<=new Date(t.getTime()+864e5)).sort((e,t)=>new Date(e.plannedEndDate)-new Date(t.plannedEndDate)).slice(0,5)},y=[{header:"\u0631\u0642\u0645 \u0627\u0644\u0623\u0645\u0631",accessor:"id",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-red-600",children:["#",e]})},{header:"\u0627\u0644\u0645\u0646\u062a\u062c",accessor:"productId",render:e=>{const t=i.find(t=>t.id===e);return(0,Qe.jsx)("div",{className:"font-medium",children:(null===t||void 0===t?void 0:t.name)||"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u0627\u0644\u0643\u0645\u064a\u0629",accessor:"quantity",render:e=>(0,Qe.jsxs)("div",{children:[e," \u0648\u062d\u062f\u0629"]})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("In Progress"===e?"bg-green-100 text-green-800":"Scheduled"===e?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e})},{header:"\u0627\u0644\u0645\u0648\u0639\u062f \u0627\u0644\u0646\u0647\u0627\u0626\u064a",accessor:"plannedEndDate",render:e=>{const t=new Date(e),s=new Date,a=Math.ceil((t-s)/36e5);return(0,Qe.jsxs)("div",{className:"font-medium ".concat(a<0?"text-red-600":a<8?"text-orange-600":"text-gray-900"),children:[t.toLocaleDateString("ar")," (",a,"\u0633\u0627\u0639\u0629)"]})}},{header:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629",accessor:"priority",render:e=>(0,Qe.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("Urgent"===e?"bg-red-100 text-red-800":"High"===e?"bg-orange-100 text-orange-800":"Medium"===e?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:e})}];return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-600",children:"\u0646\u0638\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0639\u0644\u0649 \u0623\u062f\u0627\u0621 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u0627\u0644\u0645\u0624\u0634\u0631\u0627\u062a \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"})]}),(0,Qe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Qe.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Qe.jsx)("option",{value:"month",children:"\u0627\u0644\u0634\u0647\u0631 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsx)("option",{value:"quarter",children:"\u0627\u0644\u0631\u0628\u0639 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsx)("option",{value:"year",children:"\u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u062a\u0631\u0627\u062a"})]}),(0,Qe.jsx)(ra,{onClick:b,disabled:g,className:"bg-blue-600 hover:bg-blue-700 text-white",children:g?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b...":"\u062a\u062d\u062f\u064a\u062b"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631"}),(0,Qe.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:v.totalOrders}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["\u0645\u0643\u062a\u0645\u0644\u0629: ",v.completedOrders," | \u0642\u064a\u062f \u0627\u0644\u062a\u0634\u063a\u064a\u0644: ",v.inProgressOrders]})]}),(0,Qe.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"\u0627\u0644\u0625\u0646\u062c\u0627\u0632 \u0641\u064a \u0627\u0644\u0648\u0642\u062a"}),(0,Qe.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[v.onTimeDeliveryRate,"%"]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["\u0647\u062f\u0641: 95% | \u0627\u0644\u062d\u0627\u0644\u064a: ",v.onTimeDeliveryRate,"%"]})]}),(0,Qe.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0647\u062f\u0631"}),(0,Qe.jsxs)("div",{className:"text-3xl font-bold text-red-600",children:[v.wasteRate,"%"]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["\u0647\u062f\u0641: \u0623\u0642\u0644 \u0645\u0646 2% | \u0627\u0644\u062d\u0627\u0644\u064a: ",v.wasteRate,"%"]})]}),(0,Qe.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})})]})}),(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u062c\u0648\u062f\u0629"}),(0,Qe.jsxs)("div",{className:"text-3xl font-bold text-purple-600",children:[v.qualityRate,"%"]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["\u0647\u062f\u0641: 99% | \u0627\u0644\u062d\u0627\u0644\u064a: ",v.qualityRate,"%"]})]}),(0,Qe.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0645\u062f\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0627\u0644\u0645\u062a\u0648\u0633\u0637\u0629"}),(0,Qe.jsx)("div",{className:"text-4xl font-bold text-blue-600",children:v.avgProductionTime}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0623\u064a\u0627\u0645 \u0644\u0643\u0644 \u0623\u0645\u0631"})]})}),(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0623\u0648\u0627\u0645\u0631 \u0645\u062c\u062f\u0648\u0644\u0629"}),(0,Qe.jsx)("div",{className:"text-4xl font-bold text-yellow-600",children:v.scheduledOrders}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0623\u0645\u0631 \u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"})]})}),(0,Qe.jsx)(aa,{className:"p-6",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0625\u0646\u062c\u0627\u0632"}),(0,Qe.jsxs)("div",{className:"text-4xl font-bold text-green-600",children:[v.totalOrders>0?(v.completedOrders/v.totalOrders*100).toFixed(1):0,"%"]}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0645\u0646 \u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631"})]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Qe.jsx)("svg",{className:"w-5 h-5 text-red-500 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})}),"\u0623\u0648\u0627\u0645\u0631 \u062d\u0631\u062c\u0629 (\u062a\u0646\u062a\u0647\u064a \u062e\u0644\u0627\u0644 24 \u0633\u0627\u0639\u0629)"]}),0===j().length?(0,Qe.jsx)("p",{className:"text-gray-500 text-center py-8",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0648\u0627\u0645\u0631 \u062d\u0631\u062c\u0629 \u062d\u0627\u0644\u064a\u0627\u064b"}):(0,Qe.jsx)(ja,{columns:y,data:j(),className:"min-w-full"})]}),(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Qe.jsx)("svg",{className:"w-5 h-5 text-green-500 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),"\u0623\u0641\u0636\u0644 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0625\u0646\u062a\u0627\u062c\u0627\u064b"]}),(0,Qe.jsx)("div",{className:"space-y-4",children:(()=>{const t={};return e.filter(e=>"Completed"===e.status).forEach(e=>{const s=e.productId;var a;t[s]||(t[s]={productId:s,name:(null===(a=i.find(e=>e.id===s))||void 0===a?void 0:a.name)||"\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u062d\u062f\u062f",totalQuantity:0,ordersCount:0});t[s].totalQuantity+=parseFloat(e.quantity)||0,t[s].ordersCount+=1}),Object.values(t).sort((e,t)=>t.totalQuantity-e.totalQuantity).slice(0,5)})().map((e,t)=>(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:t+1}),(0,Qe.jsxs)("div",{className:"mr-3",children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:[e.ordersCount," \u0623\u0645\u0631"]})]})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("div",{className:"font-bold text-gray-900",children:e.totalQuantity.toFixed(0)}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0648\u062d\u062f\u0629"})]})]},e.productId))})]})]}),(0,Qe.jsxs)(aa,{className:"p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Qe.jsx)("svg",{className:"w-5 h-5 text-blue-500 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),"\u0623\u062f\u0627\u0621 \u0645\u0631\u0627\u0643\u0632 \u0627\u0644\u0639\u0645\u0644"]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(()=>{const t={};return o.forEach(e=>{t[e.id]={id:e.id,name:e.name,totalOrders:0,completedOrders:0,utilization:0}}),e.forEach(e=>{e.workCenterId&&t[e.workCenterId]&&(t[e.workCenterId].totalOrders+=1,"Completed"===e.status&&(t[e.workCenterId].completedOrders+=1))}),Object.values(t).map(e=>Be(Be({},e),{},{completionRate:e.totalOrders>0?(e.completedOrders/e.totalOrders*100).toFixed(1):0})).sort((e,t)=>t.completedOrders-e.completedOrders)})().map(e=>(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,Qe.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(parseFloat(e.completionRate)>=90?"bg-green-100 text-green-800":parseFloat(e.completionRate)>=70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.completionRate,"%"]})]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Qe.jsxs)("div",{children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631: ",e.totalOrders]}),(0,Qe.jsxs)("div",{children:["\u0623\u0648\u0627\u0645\u0631 \u0645\u0643\u062a\u0645\u0644\u0629: ",e.completedOrders]})]}),(0,Qe.jsx)("div",{className:"mt-2",children:(0,Qe.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qe.jsx)("div",{className:"h-2 rounded-full ".concat(parseFloat(e.completionRate)>=90?"bg-green-500":parseFloat(e.completionRate)>=70?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(e.completionRate,"%")}})})})]},e.id))})]})]})},Wr=()=>{const[e,t]=(0,r.useState)("dashboard"),{getProductionDashboardData:s}=Ye(),a=[{id:"dashboard",label:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"orders",label:"\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",icon:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"planning",label:"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",icon:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 12a4 4 0 00-4 4v-1M4 12a8 8 0 0016 0M4 12v1"})})},{id:"materials",label:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f",icon:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})},{id:"quality",label:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u062c\u0648\u062f\u0629",icon:(0,Qe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}],n=(()=>{try{return s()||{totalOrders:0,completedOrders:0,inProgressOrders:0}}catch(e){return{totalOrders:0,completedOrders:0,inProgressOrders:0}}})();return(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Qe.jsx)("div",{className:"py-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("p",{className:"mt-1 text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u0627\u0644\u062a\u062e\u0637\u064a\u0637 \u0648\u0627\u0644\u062c\u0648\u062f\u0629"})]}),(0,Qe.jsxs)("div",{className:"hidden lg:flex items-center space-x-6",children:[(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:n.totalOrders}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631"})]}),(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:n.inProgressOrders}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0642\u064a\u062f \u0627\u0644\u062a\u0634\u063a\u064a\u0644"})]}),(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:n.completedOrders}),(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0645\u0643\u062a\u0645\u0644\u0629"})]})]})]})})})}),(0,Qe.jsx)("div",{className:"bg-white border-b",children:(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Qe.jsx)("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:a.map(s=>(0,Qe.jsxs)("button",{onClick:()=>t(s.id),className:"group inline-flex items-center py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ".concat(e===s.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Qe.jsx)("span",{className:"ml-2 ".concat(e===s.id?"text-blue-500":"text-gray-400 group-hover:text-gray-500"),children:s.icon}),s.label]},s.id))})})}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(()=>{switch(e){case"dashboard":default:return(0,Qe.jsx)(Hr,{});case"orders":return(0,Qe.jsx)(Vr,{});case"planning":return(0,Qe.jsx)(Br,{});case"materials":return(0,Qe.jsx)(qr,{});case"quality":return(0,Qe.jsx)(Qr,{})}})()}),"dashboard"===e&&(0,Qe.jsx)("div",{className:"fixed bottom-4 right-4 max-w-sm",children:(0,Qe.jsx)(aa,{className:"p-4 bg-blue-50 border-blue-200",children:(0,Qe.jsxs)("div",{className:"flex",children:[(0,Qe.jsx)("div",{className:"flex-shrink-0",children:(0,Qe.jsx)("svg",{className:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{className:"ml-3",children:[(0,Qe.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629"}),(0,Qe.jsx)("div",{className:"mt-2 text-sm text-blue-700",children:(0,Qe.jsx)("p",{children:"\u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0644\u0648\u062d\u0629 \u0644\u0645\u0631\u0627\u0642\u0628\u0629 \u0623\u062f\u0627\u0621 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u0645\u0624\u0634\u0631\u0627\u062a \u0627\u0644\u0623\u062f\u0627\u0621 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629. \u0627\u0646\u062a\u0642\u0644 \u0625\u0644\u0649 \u062a\u0628\u0648\u064a\u0628\u0627\u062a \u0623\u062e\u0631\u0649 \u0644\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0648\u0627\u0644\u062c\u0648\u062f\u0629."})})]})]})})}),"orders"===e&&(0,Qe.jsx)("div",{className:"fixed bottom-4 right-4 max-w-sm",children:(0,Qe.jsx)(aa,{className:"p-4 bg-green-50 border-green-200",children:(0,Qe.jsxs)("div",{className:"flex",children:[(0,Qe.jsx)("div",{className:"flex-shrink-0",children:(0,Qe.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{className:"ml-3",children:[(0,Qe.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("div",{className:"mt-2 text-sm text-green-700",children:(0,Qe.jsx)("p",{children:"\u0625\u0646\u0634\u0627\u0621 \u0623\u0648\u0627\u0645\u0631 \u0625\u0646\u062a\u0627\u062c \u062c\u062f\u064a\u062f\u0629\u060c \u062a\u062d\u062f\u064a\u062b \u062d\u0627\u0644\u062a\u0647\u0627\u060c \u0648\u062a\u062a\u0628\u0639 \u062a\u0642\u062f\u0645\u0647\u0627. \u064a\u0645\u0643\u0646\u0643 \u0623\u064a\u0636\u0627\u064b \u062d\u0633\u0627\u0628 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 BOM."})})]})]})})}),"planning"===e&&(0,Qe.jsx)("div",{className:"fixed bottom-4 right-4 max-w-sm",children:(0,Qe.jsx)(aa,{className:"p-4 bg-yellow-50 border-yellow-200",children:(0,Qe.jsxs)("div",{className:"flex",children:[(0,Qe.jsx)("div",{className:"flex-shrink-0",children:(0,Qe.jsx)("svg",{className:"h-5 w-5 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{className:"ml-3",children:[(0,Qe.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,Qe.jsx)("p",{children:"\u0627\u062d\u0633\u0628 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 MRP\u060c \u0648\u062e\u0637\u0637 \u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0639\u0644\u0649 \u0645\u0631\u0627\u0643\u0632 \u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0645\u062e\u062a\u0644\u0641\u0629."})})]})]})})})]})},Ur=()=>(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)(Ja,{title:"\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",subtitle:"\u0625\u0646\u0634\u0627\u0621 \u0648\u0625\u062f\u0627\u0631\u0629 \u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u062a\u062a\u0628\u0639 \u062d\u0627\u0644\u062a\u0647\u0627"}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Qe.jsx)(Vr,{})})]}),Xr=()=>(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0625\u0646\u062a\u0627\u062c",subtitle:"\u062a\u062e\u0637\u064a\u0637 \u0645\u062a\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0627\u062f \u0648\u0627\u0644\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629"}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Qe.jsx)(Br,{})})]}),Kr=()=>(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)(Ja,{title:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u0648\u0627\u062f \u0627\u0644\u062e\u0627\u0645 \u0648\u0627\u0644\u0625\u0646\u062a\u0627\u062c",subtitle:"\u062a\u062a\u0628\u0639 \u0627\u0633\u062a\u0647\u0644\u0627\u0643 \u0627\u0644\u0645\u0648\u0627\u062f \u0648\u0627\u0644\u0647\u062f\u0631 \u0641\u064a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Qe.jsx)(qr,{})})]}),$r=()=>(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)(Ja,{title:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u062c\u0648\u062f\u0629",subtitle:"\u0625\u062f\u0627\u0631\u0629 \u0641\u062d\u0648\u0635\u0627\u062a \u0627\u0644\u062c\u0648\u062f\u0629 \u0648\u0639\u0645\u0644\u064a\u0627\u062a \u0639\u062f\u0645 \u0627\u0644\u0645\u0637\u0627\u0628\u0642\u0629"}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Qe.jsx)(Qr,{})})]}),Gr=()=>(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)(Ja,{title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0625\u0646\u062a\u0627\u062c\u064a\u0629",subtitle:"\u0646\u0638\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0639\u0644\u0649 \u0623\u062f\u0627\u0621 \u0627\u0644\u0625\u0646\u062a\u0627\u062c \u0648\u0627\u0644\u0645\u0624\u0634\u0631\u0627\u062a \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"}),(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,Qe.jsx)(Hr,{})})]}),Yr=()=>{const{openTab:e}=et(),t=[{id:"fixed-assets-dashboard",title:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",description:"\u0639\u0631\u0636 \u0634\u0627\u0645\u0644 \u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0648\u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),path:"/fixed-assets/dashboard"},{id:"asset-management",title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0635\u0648\u0644",description:"\u0625\u0636\u0627\u0641\u0629 \u0648\u062a\u0639\u062f\u064a\u0644 \u0648\u062d\u0630\u0641 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),path:"/fixed-assets/management"},{id:"depreciation-management",title:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643",description:"\u062d\u0633\u0627\u0628 \u0648\u0625\u062f\u0627\u0631\u0629 \u0625\u0647\u0644\u0627\u0643 \u0627\u0644\u0623\u0635\u0648\u0644 \u0628\u0637\u0631\u0642 \u0645\u062e\u062a\u0644\u0641\u0629",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),path:"/fixed-assets/depreciation"},{id:"maintenance-scheduling",title:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0635\u064a\u0627\u0646\u0629",description:"\u062c\u062f\u0648\u0644\u0629 \u0648\u062a\u062a\u0628\u0639 \u0635\u064a\u0627\u0646\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),path:"/fixed-assets/maintenance"},{id:"asset-inventory",title:"\u062c\u0631\u062f \u0648\u062a\u0642\u064a\u064a\u0645",description:"\u062c\u0631\u062f \u062f\u0648\u0631\u064a \u0648\u062a\u0642\u064a\u064a\u0645 \u062d\u0627\u0644\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),path:"/fixed-assets/inventory"},{id:"asset-disposal",title:"\u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644",description:"\u0628\u064a\u0639 \u0623\u0648 \u0646\u0642\u0644 \u0623\u0648 \u0634\u0637\u0628 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629",icon:(0,Qe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),path:"/fixed-assets/disposal"}];return(0,Qe.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Qe.jsx)("div",{className:"bg-white shadow",children:(0,Qe.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Qe.jsx)("div",{className:"py-8",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100 mr-4",children:(0,Qe.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u0646\u0638\u0627\u0645 \u0634\u0627\u0645\u0644 \u0644\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0641\u064a \u0627\u0644\u0645\u0624\u0633\u0633\u0629"})]})]})})})}),(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(t=>(0,Qe.jsx)("div",{onClick:()=>e(t.title,t.path),className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow duration-200 cursor-pointer group",children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Qe.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600 group-hover:bg-blue-200 transition-colors",children:t.icon}),(0,Qe.jsx)("h3",{className:"mr-3 text-lg font-medium text-gray-900",children:t.title})]}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:t.description}),(0,Qe.jsxs)("div",{className:"mt-4 flex items-center text-blue-600 text-sm font-medium",children:[(0,Qe.jsx)("span",{children:"\u0628\u062f\u0621 \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}),(0,Qe.jsx)("svg",{className:"w-4 h-4 mr-1 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},t.id))}),(0,Qe.jsx)("div",{className:"mt-12 bg-blue-50 rounded-lg p-6",children:(0,Qe.jsxs)("div",{className:"flex items-start",children:[(0,Qe.jsx)("div",{className:"p-2 bg-blue-200 rounded-lg mr-4",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"}),(0,Qe.jsxs)("div",{className:"text-sm text-blue-800 space-y-2",children:[(0,Qe.jsx)("p",{children:"\u064a\u0648\u0641\u0631 \u0646\u0638\u0627\u0645 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u062c\u0645\u064a\u0639 \u0623\u0635\u0648\u0644 \u0627\u0644\u0634\u0631\u0643\u0629\u060c \u0628\u0645\u0627 \u0641\u064a \u0630\u0644\u0643:"}),(0,Qe.jsxs)("ul",{className:"list-disc list-inside space-y-1 mr-4",children:[(0,Qe.jsx)("li",{children:"\u062a\u0633\u062c\u064a\u0644 \u0648\u062a\u062a\u0628\u0639 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"}),(0,Qe.jsx)("li",{children:"\u062d\u0633\u0627\u0628 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 \u0628\u0637\u0631\u0642 \u0645\u062e\u062a\u0644\u0641\u0629 (\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a\u060c \u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635\u060c \u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c)"}),(0,Qe.jsx)("li",{children:"\u062c\u062f\u0648\u0644\u0629 \u0648\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u064a\u0627\u0646\u0629 \u0627\u0644\u062f\u0648\u0631\u064a\u0629 \u0648\u0627\u0644\u0637\u0627\u0631\u0626\u0629"}),(0,Qe.jsx)("li",{children:"\u0625\u062c\u0631\u0627\u0621 \u0627\u0644\u062c\u0631\u062f \u0627\u0644\u062f\u0648\u0631\u064a \u0648\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0641\u0639\u0644\u064a\u0629 \u0644\u0644\u0623\u0635\u0648\u0644"}),(0,Qe.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644 (\u0628\u064a\u0639\u060c \u062a\u0628\u0631\u0639\u060c \u0646\u0642\u0644\u060c \u0634\u0637\u0628)"}),(0,Qe.jsx)("li",{children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0634\u0627\u0645\u0644\u0629 \u0639\u0646 \u062d\u0627\u0644\u0629 \u0648\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0648\u0644"})]})]})]})]})})]})]})},Jr=()=>{const{fixedAssets:e,assetCategories:t,assetLocations:s,depreciationEntries:a,assetMaintenance:n,assetInventory:l,assetDisposals:i,calculateDepreciation:o,getAssetReport:c,getAssetValuation:d,getDepreciationSummary:x,getUpcomingMaintenance:u,getInventoryStatus:m,addMaintenanceSchedule:h,performAssetInventory:p}=Ye(),[g,f]=(0,r.useState)(null),[b,v]=(0,r.useState)("month"),[j,y]=(0,r.useState)(!1),N=()=>{y(!0);try{const e={totalDepreciation:(a||[]).reduce((e,t)=>e+(t.depreciationAmount||0),0),entriesCount:(a||[]).length,lastUpdate:(new Date).toISOString()},t=u?u(30):[],s=m?m():{};f({depreciation:e,maintenance:t,inventory:s,lastUpdated:(new Date).toISOString()})}catch(e){console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0644\u0648\u062d\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629:",e)}finally{y(!1)}};(0,r.useEffect)(()=>{N()},[b,e,a]);const w=(()=>{const t=new Date,s=e||[],r=n||[],l=a||[],i=s.length,c=s.filter(e=>"Active"===e.status).length,d=s.filter(e=>r.some(t=>t.assetId===e.id&&"Scheduled"===t.status)).length,x=s.reduce((e,t)=>e+(t.originalValue||0),0),u=s.reduce((e,t)=>{const s=o(t.id,t.depreciationMethod||"straight-line");return e+((t.originalValue||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0))},0);return{totalAssets:i,activeAssets:c,underMaintenanceAssets:d,totalOriginalValue:x,totalCurrentValue:u,totalDepreciationValue:l.reduce((e,t)=>e+(t.depreciationAmount||0),0),upcomingMaintenance:r.filter(e=>e.nextDate&&new Date(e.nextDate)<=new Date(t.getTime()+2592e6)).length,overdueMaintenance:r.filter(e=>e.nextDate&&new Date(e.nextDate)<t&&"Scheduled"===e.status).length,utilizationRate:i>0?(c/i*100).toFixed(1):0,valueDropRate:x>0?((x-u)/x*100).toFixed(1):0}})(),S=(()=>{const s=e||[];return(t||[]).map(e=>{const t=s.filter(t=>t.categoryId===e.id),a=t.reduce((e,t)=>e+(t.originalValue||0),0),r=t.reduce((e,t)=>{const s=o(t.id,t.depreciationMethod||"straight-line");return e+((t.originalValue||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0))},0);return Be(Be({},e),{},{assetCount:t.length,totalValue:a,currentValue:r,depreciationValue:a-r})}).sort((e,t)=>t.totalValue-e.totalValue)})(),k=(()=>{const t=new Date,s=n||[];return(e||[]).filter(e=>{const a=(e.originalValue||0)>1e5,r=s.some(s=>s.assetId===e.id&&s.nextDate&&new Date(s.nextDate)<t&&"Scheduled"===s.status);return a||r}).slice(0,5)})(),C=[{header:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644",accessor:"name",render:e=>(0,Qe.jsx)("div",{className:"font-medium",children:e})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",accessor:"originalValue",render:(e,t)=>{const s=o(t.id,t.depreciationMethod||"straight-line"),a=(e||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0);return(0,Qe.jsxs)("div",{className:"text-green-600 font-medium",children:[a.toLocaleString()," \u0631\u064a\u0627\u0644"]})}},{header:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641",accessor:"categoryId",render:e=>{const s=t.find(t=>t.id===e);return(0,Qe.jsx)("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:(null===s||void 0===s?void 0:s.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({Active:"bg-green-100 text-green-800","Under Maintenance":"bg-yellow-100 text-yellow-800",Disposed:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:"Active"===e?"\u0646\u0634\u0637":"Under Maintenance"===e?"\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629":"Disposed"===e?"\u062a\u0645 \u0627\u0644\u062a\u0635\u0631\u0641":e})}],I=[{header:"\u0627\u0633\u0645 \u0627\u0644\u0641\u0626\u0629",accessor:"name",render:e=>(0,Qe.jsx)("div",{className:"font-medium",children:e})},{header:"\u0639\u062f\u062f \u0627\u0644\u0623\u0635\u0648\u0644",accessor:"assetCount",render:e=>(0,Qe.jsx)("div",{className:"text-blue-600 font-medium",children:e})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629",accessor:"totalValue",render:e=>(0,Qe.jsxs)("div",{className:"text-green-600 font-medium",children:[e.toLocaleString()," \u0631\u064a\u0627\u0644"]})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",accessor:"currentValue",render:e=>(0,Qe.jsxs)("div",{className:"text-green-600 font-medium",children:[e.toLocaleString()," \u0631\u064a\u0627\u0644"]})},{header:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643",accessor:"depreciationValue",render:e=>(0,Qe.jsxs)("div",{className:"text-red-600 font-medium",children:[e.toLocaleString()," \u0631\u064a\u0627\u0644"]})}];return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0644\u0648\u062d\u0629 \u062a\u062d\u0643\u0645 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0648\u0627\u0644\u0625\u0647\u0644\u0627\u0643 \u0648\u0627\u0644\u0635\u064a\u0627\u0646\u0629"})]}),(0,Qe.jsxs)("div",{className:"flex space-x-3",children:[(0,Qe.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"month",children:"\u0634\u0647\u0631\u064a"}),(0,Qe.jsx)("option",{value:"quarter",children:"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a"}),(0,Qe.jsx)("option",{value:"year",children:"\u0633\u0646\u0648\u064a"})]}),(0,Qe.jsx)(ra,{onClick:N,disabled:j,variant:"outline",children:j?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u062f\u064a\u062b...":"\u062a\u062d\u062f\u064a\u062b"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0635\u0648\u0644"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.totalAssets})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0646\u0634\u0637: ",(0,Qe.jsx)("span",{className:"font-medium text-green-600",children:w.activeAssets})]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629: ",(0,Qe.jsx)("span",{className:"font-medium text-yellow-600",children:w.underMaintenanceAssets})]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.totalCurrentValue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]})]}),(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629: ",(0,Qe.jsxs)("span",{className:"font-medium",children:[w.totalOriginalValue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0645\u0639\u062f\u0644 \u0627\u0644\u0647\u0628\u0648\u0637: ",(0,Qe.jsxs)("span",{className:"font-medium text-red-600",children:[w.valueDropRate,"%"]})]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[w.totalDepreciationValue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]})]}),(0,Qe.jsx)("div",{className:"mt-4",children:(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0645\u0639\u062f\u0644 \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645: ",(0,Qe.jsxs)("span",{className:"font-medium text-green-600",children:[w.utilizationRate,"%"]})]})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0627\u0644\u0635\u064a\u0627\u0646\u0629 \u0627\u0644\u0642\u0627\u062f\u0645\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w.upcomingMaintenance})]})]}),(0,Qe.jsx)("div",{className:"mt-4",children:(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:["\u0645\u062a\u0623\u062e\u0631\u0629: ",(0,Qe.jsx)("span",{className:"font-medium text-red-600",children:w.overdueMaintenance})]})})]})})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062d\u0631\u062c\u0629"}),k.length>0?(0,Qe.jsx)(ja,{columns:C,data:k,maxHeight:"300px"}):(0,Qe.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0635\u0648\u0644 \u062d\u0631\u062c\u0629"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0641\u0626\u0629"}),S.length>0?(0,Qe.jsx)(ja,{columns:I,data:S,maxHeight:"300px"}):(0,Qe.jsx)("div",{className:"text-center py-8 text-gray-500",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0641\u0626\u0627\u062a \u0645\u0633\u062c\u0644\u0629"})]})})]})]})},Zr=()=>(0,Qe.jsx)(Jr,{}),en=()=>{const{fixedAssets:e,assetCategories:t,assetLocations:s,addFixedAsset:a,updateFixedAsset:n,deleteFixedAsset:l,calculateDepreciation:i,getAssetValuation:o}=Ye(),[c,d]=(0,r.useState)([]),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[f,b]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)({name:"",description:"",categoryId:"",locationId:"",originalValue:"",currentValue:"",purchaseDate:"",depreciationMethod:"straight-line",usefulLife:"",salvageValue:"",status:"Active",serialNumber:"",vendor:"",warrantyExpiry:"",notes:""}),I=e.filter(e=>{var t,s,a;const r=(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(f.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(f.toLowerCase()))||(null===(a=e.serialNumber)||void 0===a?void 0:a.toLowerCase().includes(f.toLowerCase())),n=!v||e.categoryId===v,l=!y||e.locationId===y,i=!w||e.status===w;return r&&n&&l&&i}),D=()=>{C({name:"",description:"",categoryId:"",locationId:"",originalValue:"",currentValue:"",purchaseDate:"",depreciationMethod:"straight-line",usefulLife:"",salvageValue:"",status:"Active",serialNumber:"",vendor:"",warrantyExpiry:"",notes:""})},_=()=>{const e=Be(Be({},k),{},{originalValue:parseFloat(k.originalValue)||0,currentValue:parseFloat(k.currentValue)||parseFloat(k.originalValue)||0,usefulLife:parseInt(k.usefulLife)||0,salvageValue:parseFloat(k.salvageValue)||0});p?(n(p.id,e),h(!1),g(null)):(a(e),u(!1)),D()},L=[{header:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644",accessor:"name",render:(e,t)=>(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e}),t.description&&(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:t.description})]})},{header:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641",accessor:"categoryId",render:e=>{const s=t.find(t=>t.id===e);return(0,Qe.jsx)("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:(null===s||void 0===s?void 0:s.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u0627\u0644\u0645\u0648\u0642\u0639",accessor:"locationId",render:e=>{const t=s.find(t=>t.id===e);return(0,Qe.jsx)("div",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",children:(null===t||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629",accessor:"originalValue",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-green-600",children:[e?e.toLocaleString():0," \u0631\u064a\u0627\u0644"]})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",accessor:"currentValue",render:(e,t)=>{const s=i(t.id,t.depreciationMethod||"straight-line"),a=e||t.originalValue-((null===s||void 0===s?void 0:s.totalDepreciation)||0);return(0,Qe.jsxs)("div",{className:"font-medium text-blue-600",children:[a.toLocaleString()," \u0631\u064a\u0627\u0644"]})}},{header:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0623\u0635\u0644",accessor:"status",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({Active:"bg-green-100 text-green-800","Under Maintenance":"bg-yellow-100 text-yellow-800",Disposed:"bg-red-100 text-red-800","In Use":"bg-blue-100 text-blue-800"}[e]||"bg-gray-100 text-gray-800"),children:{Active:"\u0646\u0634\u0637","Under Maintenance":"\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629",Disposed:"\u062a\u0645 \u0627\u0644\u062a\u0635\u0631\u0641","In Use":"\u0642\u064a\u062f \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}[e]||e})},{header:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a",accessor:"serialNumber",render:e=>(0,Qe.jsx)("div",{className:"font-mono text-sm text-gray-600",children:e||"-"})},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0634\u0631\u0627\u0621",accessor:"purchaseDate",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:e?new Date(e).toLocaleDateString("ar-SA"):"-"})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"id",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{return g(e=t),C({name:e.name||"",description:e.description||"",categoryId:e.categoryId||"",locationId:e.locationId||"",originalValue:e.originalValue||"",currentValue:e.currentValue||"",purchaseDate:e.purchaseDate||"",depreciationMethod:e.depreciationMethod||"straight-line",usefulLife:e.usefulLife||"",salvageValue:e.salvageValue||"",status:e.status||"Active",serialNumber:e.serialNumber||"",vendor:e.vendor||"",warrantyExpiry:e.warrantyExpiry||"",notes:e.notes||""}),void h(!0);var e},children:"\u062a\u0639\u062f\u064a\u0644"}),(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{return t=e,void(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0623\u0635\u0644\u061f")&&(l(t),d(c.filter(e=>e!==t))));var t},className:"text-red-600 hover:text-red-700",children:"\u062d\u0630\u0641"})]})}];return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u0625\u062f\u0627\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0641\u064a \u0627\u0644\u0645\u0624\u0633\u0633\u0629"})]}),(0,Qe.jsx)(ra,{onClick:()=>{D(),u(!0)},children:"\u0625\u0636\u0627\u0641\u0629 \u0623\u0635\u0644 \u062c\u062f\u064a\u062f"})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644...",value:f,onChange:e=>b(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641"}),(0,Qe.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0635\u0646\u064a\u0641\u0627\u062a"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,Qe.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0627\u0642\u0639"}),s.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"Active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"Under Maintenance",children:"\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629"}),(0,Qe.jsx)("option",{value:"In Use",children:"\u0642\u064a\u062f \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}),(0,Qe.jsx)("option",{value:"Disposed",children:"\u062a\u0645 \u0627\u0644\u062a\u0635\u0631\u0641"})]})]}),(0,Qe.jsx)("div",{className:"flex items-end",children:(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>{b(""),j(""),N(""),S("")},children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4 text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0635\u0648\u0644"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4 text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"Active"===e.status).length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u0646\u0634\u0637\u0629"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4 text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.filter(e=>"Disposed"===e.status).length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u0645\u062a\u0635\u0631\u0641\u0629"})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4 text-center",children:[(0,Qe.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.filter(e=>"Under Maintenance"===e.status).length}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:"\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629"})]})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Qe.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0635\u0648\u0644 (",I.length,")"]})}),(0,Qe.jsx)(ja,{columns:L,data:I,searchable:!1,maxHeight:"600px"})]})}),(0,Qe.jsx)(ga,{isOpen:x,onClose:()=>u(!1),title:"\u0625\u0636\u0627\u0641\u0629 \u0623\u0635\u0644 \u062c\u062f\u064a\u062f",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsx)("input",{type:"text",value:k.name,onChange:e=>C(Be(Be({},k),{},{name:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641 *"}),(0,Qe.jsxs)("select",{value:k.categoryId,onChange:e=>C(Be(Be({},k),{},{categoryId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062a\u0635\u0646\u064a\u0641"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639 *"}),(0,Qe.jsxs)("select",{value:k.locationId,onChange:e=>C(Be(Be({},k),{},{locationId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0642\u0639"}),s.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"number",value:k.originalValue,onChange:e=>C(Be(Be({},k),{},{originalValue:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0634\u0631\u0627\u0621 *"}),(0,Qe.jsx)("input",{type:"date",value:k.purchaseDate,onChange:e=>C(Be(Be({},k),{},{purchaseDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsxs)("select",{value:k.depreciationMethod,onChange:e=>C(Be(Be({},k),{},{depreciationMethod:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"straight-line",children:"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a"}),(0,Qe.jsx)("option",{value:"declining-balance",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635"}),(0,Qe.jsx)("option",{value:"units-of-production",children:"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0639\u0645\u0631 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a (\u0628\u0627\u0644\u0633\u0646\u0648\u0627\u062a)"}),(0,Qe.jsx)("input",{type:"number",value:k.usefulLife,onChange:e=>C(Be(Be({},k),{},{usefulLife:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062a\u0628\u0642\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",value:k.salvageValue,onChange:e=>C(Be(Be({},k),{},{salvageValue:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("textarea",{value:k.description,onChange:e=>C(Be(Be({},k),{},{description:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u062a\u0633\u0644\u0633\u0644\u064a"}),(0,Qe.jsx)("input",{type:"text",value:k.serialNumber,onChange:e=>C(Be(Be({},k),{},{serialNumber:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("input",{type:"text",value:k.vendor,onChange:e=>C(Be(Be({},k),{},{vendor:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0636\u0645\u0627\u0646"}),(0,Qe.jsx)("input",{type:"date",value:k.warrantyExpiry,onChange:e=>C(Be(Be({},k),{},{warrantyExpiry:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:k.notes,onChange:e=>C(Be(Be({},k),{},{notes:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:_,children:"\u062d\u0641\u0638 \u0627\u0644\u0623\u0635\u0644"})]})]})}),(0,Qe.jsx)(ga,{isOpen:m,onClose:()=>h(!1),title:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0623\u0635\u0644",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsx)("input",{type:"text",value:k.name,onChange:e=>C(Be(Be({},k),{},{name:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:k.status,onChange:e=>C(Be(Be({},k),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"Active",children:"\u0646\u0634\u0637"}),(0,Qe.jsx)("option",{value:"Under Maintenance",children:"\u062a\u062d\u062a \u0627\u0644\u0635\u064a\u0627\u0646\u0629"}),(0,Qe.jsx)("option",{value:"In Use",children:"\u0642\u064a\u062f \u0627\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}),(0,Qe.jsx)("option",{value:"Disposed",children:"\u062a\u0645 \u0627\u0644\u062a\u0635\u0631\u0641"})]})]})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>h(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:_,children:"\u062d\u0641\u0638 \u0627\u0644\u062a\u0639\u062f\u064a\u0644\u0627\u062a"})]})]})})]})},tn=()=>(0,Qe.jsx)(en,{}),sn=()=>{var e;const{fixedAssets:t,assetCategories:s,depreciationEntries:a,calculateDepreciation:n,addDepreciationSchedule:l,getDepreciationSummary:i,getAssetReport:o}=Ye(),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[v,j]=(0,r.useState)("monthly"),[y,N]=(0,r.useState)({assetId:"",method:"straight-line",startDate:"",endDate:"",depreciationRate:""}),w=t.filter(e=>{var t;const s=null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()),a=!f||e.depreciationMethod===f;return s&&a}),S=[{header:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644",accessor:"name",render:(e,t)=>(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:t.serialNumber||"-"})]})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629",accessor:"originalValue",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-green-600",children:[e?e.toLocaleString():0," \u0631\u064a\u0627\u0644"]})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",accessor:"originalValue",render:(e,t)=>{const s=n(t.id,t.depreciationMethod||"straight-line"),a=(e||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0);return(0,Qe.jsxs)("div",{className:"font-medium text-blue-600",children:[a.toLocaleString()," \u0631\u064a\u0627\u0644"]})}},{header:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u0647\u0644\u0627\u0643",accessor:"originalValue",render:(e,t)=>{const s=n(t.id,t.depreciationMethod||"straight-line"),a=(null===s||void 0===s?void 0:s.totalDepreciation)||0;return(0,Qe.jsxs)("div",{className:"font-medium text-red-600",children:[a.toLocaleString()," \u0631\u064a\u0627\u0644"]})}},{header:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643",accessor:"depreciationMethod",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({"straight-line":"bg-blue-100 text-blue-800","declining-balance":"bg-green-100 text-green-800","units-of-production":"bg-purple-100 text-purple-800"}[e]||"bg-gray-100 text-gray-800"),children:{"straight-line":"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a","declining-balance":"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635","units-of-production":"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}[e]||e||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})},{header:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0625\u0647\u0644\u0627\u0643",accessor:"usefulLife",render:(e,t)=>{if(!e||!t.originalValue)return"-";const s=((t.originalValue-(t.salvageValue||0))/e/t.originalValue*100).toFixed(1);return(0,Qe.jsxs)("div",{className:"text-sm text-gray-600",children:[s,"% \u0633\u0646\u0648\u064a\u0627\u064b"]})}},{header:"\u0627\u0644\u0639\u0645\u0631 \u0627\u0644\u0645\u062a\u0628\u0642\u064a",accessor:"usefulLife",render:(e,t)=>{if(!e||!t.purchaseDate)return"-";const s=new Date(t.purchaseDate).getFullYear(),a=e-((new Date).getFullYear()-s);return(0,Qe.jsx)("div",{className:"text-sm font-medium ".concat(a>0?"text-green-600":"text-red-600"),children:a>0?"".concat(a," \u0633\u0646\u0629"):"\u0645\u0646\u062a\u0647\u064a"})}},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"id",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{d(t),h(!0)},children:"\u062a\u0642\u0631\u064a\u0631"}),(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{d(t),N(Be(Be({},y),{},{assetId:e,method:t.depreciationMethod||"straight-line",startDate:t.purchaseDate||""})),u(!0)},children:"\u062c\u062f\u0648\u0644"})]})}],k={totalAssets:t.length,assetsWithDepreciation:t.filter(e=>e.depreciationMethod&&e.usefulLife).length,totalDepreciationValue:a.reduce((e,t)=>e+(t.depreciationAmount||0),0),methodDistribution:t.reduce((e,t)=>{const s=t.depreciationMethod||"Not Set";return e[s]=(e[s]||0)+1,e},{})},C=t.map(e=>{const t=n(e.id,e.depreciationMethod||"straight-line");return Be(Be({},e),{},{depreciationInfo:t,currentValue:(e.originalValue||0)-((null===t||void 0===t?void 0:t.totalDepreciation)||0)})}).filter(e=>{var t;return(null===(t=e.depreciationInfo)||void 0===t?void 0:t.totalDepreciation)>0}).sort((e,t)=>{var s,a;return((null===(s=t.depreciationInfo)||void 0===s?void 0:s.totalDepreciation)||0)-((null===(a=e.depreciationInfo)||void 0===a?void 0:a.totalDepreciation)||0)}).slice(0,10);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u062d\u0633\u0627\u0628 \u0648\u0625\u062f\u0627\u0631\u0629 \u0625\u0647\u0644\u0627\u0643 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0628\u0637\u0631\u0642 \u0645\u062e\u062a\u0644\u0641\u0629"})]}),(0,Qe.jsx)(ra,{onClick:()=>u(!0),children:"\u0625\u0646\u0634\u0627\u0621 \u062c\u062f\u0648\u0644 \u0625\u0647\u0644\u0627\u0643"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h3M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0635\u0648\u0644"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.totalAssets})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0623\u0635\u0648\u0644 \u0628\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:k.assetsWithDepreciation})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[k.totalDepreciationValue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0637\u0631\u0642 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Object.keys(k.methodDistribution).length})]})]})})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u062a\u0648\u0632\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(k.methodDistribution).map(e=>{let[t,s]=e;const a=(s/k.totalAssets*100).toFixed(1);return(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:{"straight-line":"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a","declining-balance":"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635","units-of-production":"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"}[t]||t}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:s}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:[a,"% \u0645\u0646 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"]})]},t)})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644...",value:p,onChange:e=>g(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),(0,Qe.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0631\u0642"}),(0,Qe.jsx)("option",{value:"straight-line",children:"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a"}),(0,Qe.jsx)("option",{value:"declining-balance",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635"}),(0,Qe.jsx)("option",{value:"units-of-production",children:"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]})]}),(0,Qe.jsx)("div",{className:"flex items-end",children:(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>{g(""),b("")},children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})})}),C.length>0&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u0623\u0643\u062b\u0631 \u0625\u0647\u0644\u0627\u0643\u0627\u064b"}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.slice(0,6).map(e=>{var t,s,a;return(0,Qe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["\u0625\u0647\u0644\u0627\u0643: ",e.depreciationInfo.totalDepreciation.toLocaleString()," \u0631\u064a\u0627\u0644"]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-600",children:["\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629: ",e.currentValue.toLocaleString()," \u0631\u064a\u0627\u0644"]}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:"straight-line"===(null===(t=e.depreciationInfo)||void 0===t?void 0:t.method)?"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a":"declining-balance"===(null===(s=e.depreciationInfo)||void 0===s?void 0:s.method)?"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635":"units-of-production"===(null===(a=e.depreciationInfo)||void 0===a?void 0:a.method)?"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c":"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]},e.id)})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Qe.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\u062c\u062f\u0648\u0644 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 (",w.length,")"]})}),(0,Qe.jsx)(ja,{columns:S,data:w,searchable:!1,maxHeight:"600px"})]})}),(0,Qe.jsx)(ga,{isOpen:x,onClose:()=>u(!1),title:"\u0625\u0646\u0634\u0627\u0621 \u062c\u062f\u0648\u0644 \u0625\u0647\u0644\u0627\u0643",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsxs)("select",{value:y.assetId,onChange:e=>N(Be(Be({},y),{},{assetId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 *"}),(0,Qe.jsxs)("select",{value:y.method,onChange:e=>N(Be(Be({},y),{},{method:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"straight-line",children:"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a"}),(0,Qe.jsx)("option",{value:"declining-balance",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635"}),(0,Qe.jsx)("option",{value:"units-of-production",children:"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629 *"}),(0,Qe.jsx)("input",{type:"date",value:y.startDate,onChange:e=>N(Be(Be({},y),{},{startDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629"}),(0,Qe.jsx)("input",{type:"date",value:y.endDate,onChange:e=>N(Be(Be({},y),{},{endDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,Qe.jsx)("input",{type:"number",step:"0.01",placeholder:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0625\u0647\u0644\u0627\u0643 \u0627\u0644\u0633\u0646\u0648\u064a",value:y.depreciationRate,onChange:e=>N(Be(Be({},y),{},{depreciationRate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!y.assetId||!y.startDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=Be(Be({},y),{},{id:Date.now().toString(),depreciationRate:parseFloat(y.depreciationRate)||0,status:"Active"});l(e),u(!1),N({assetId:"",method:"straight-line",startDate:"",endDate:"",depreciationRate:""})},children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062c\u062f\u0648\u0644"})]})]})}),(0,Qe.jsx)(ga,{isOpen:m,onClose:()=>h(!1),title:"\u062a\u0642\u0631\u064a\u0631 \u0625\u0647\u0644\u0627\u0643 \u0627\u0644\u0623\u0635\u0644: ".concat((null===c||void 0===c?void 0:c.name)||""),size:"xl",children:c&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u0635\u0644"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0633\u0645 \u0627\u0644\u0623\u0635\u0644:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:c.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0623\u0635\u0644\u064a\u0629:"}),(0,Qe.jsxs)("span",{className:"mr-2 font-medium",children:[null===(e=c.originalValue)||void 0===e?void 0:e.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0625\u0647\u0644\u0627\u0643:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"straight-line"===c.depreciationMethod?"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a":"declining-balance"===c.depreciationMethod?"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635":"units-of-production"===c.depreciationMethod?"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c":"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0639\u0645\u0631 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a:"}),(0,Qe.jsxs)("span",{className:"mr-2 font-medium",children:[c.usefulLife," \u0633\u0646\u0629"]})]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u0625\u0647\u0644\u0627\u0643"}),((e,t)=>{const s=n(c.id,c.depreciationMethod||"straight-line");return(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u0647\u0644\u0627\u0643:"}),(0,Qe.jsxs)("span",{className:"font-medium text-red-600",children:[null===s||void 0===s||null===(e=s.totalDepreciation)||void 0===e?void 0:e.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629:"}),(0,Qe.jsxs)("span",{className:"font-medium text-green-600",children:[((c.originalValue||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0)).toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0625\u0647\u0644\u0627\u0643:"}),(0,Qe.jsxs)("span",{className:"font-medium",children:[c.usefulLife?((c.originalValue-(c.salvageValue||0))/c.usefulLife/c.originalValue*100).toFixed(2):0,"%"]})]}),(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062a\u0628\u0642\u064a\u0629:"}),(0,Qe.jsxs)("span",{className:"font-medium",children:[(null===(t=c.salvageValue)||void 0===t?void 0:t.toLocaleString())||0," \u0631\u064a\u0627\u0644"]})]})]})})()]})}),(0,Qe.jsx)("div",{className:"flex justify-end pt-4",children:(0,Qe.jsx)(ra,{onClick:()=>h(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},an=()=>(0,Qe.jsx)(sn,{}),rn=()=>{var e,t;const{fixedAssets:s,assetMaintenance:a,addMaintenanceSchedule:n,recordMaintenance:l,getUpcomingMaintenance:i,updateMaintenanceRecord:o}=Ye(),[c,d]=(0,r.useState)(null),[x,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[w,S]=(0,r.useState)(""),[k,C]=(0,r.useState)({assetId:"",maintenanceType:"preventive",frequency:"monthly",nextDate:"",estimatedCost:"",description:"",assignedTo:"",priority:"medium"}),[I,D]=(0,r.useState)({scheduleId:"",actualDate:"",actualCost:"",status:"completed",notes:"",technician:""}),_=s||[],L=(a||[]).filter(e=>{var t,s;const a=_.find(t=>t.id===e.assetId),r=(null===a||void 0===a||null===(t=a.name)||void 0===t?void 0:t.toLowerCase().includes(v.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(v.toLowerCase())),n=!y||e.status===y,l=!w||e.maintenanceType===w;return r&&n&&l}),E=[{header:"\u0627\u0644\u0623\u0635\u0644",accessor:"assetId",render:e=>{const t=s.find(t=>t.id===e);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:(null===t||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:(null===t||void 0===t?void 0:t.serialNumber)||"-"})]})}},{header:"\u0646\u0648\u0639 \u0627\u0644\u0635\u064a\u0627\u0646\u0629",accessor:"maintenanceType",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({preventive:"bg-green-100 text-green-800",corrective:"bg-yellow-100 text-yellow-800",emergency:"bg-red-100 text-red-800",inspection:"bg-blue-100 text-blue-800"}[e]||"bg-gray-100 text-gray-800"),children:{preventive:"\u0648\u0642\u0627\u0626\u064a\u0629",corrective:"\u062a\u0635\u062d\u064a\u062d\u064a\u0629",emergency:"\u0637\u0627\u0631\u0626\u0629",inspection:"\u0641\u062d\u0635"}[e]||e})},{header:"\u0627\u0644\u062a\u0643\u0631\u0627\u0631",accessor:"frequency",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:{daily:"\u064a\u0648\u0645\u064a",weekly:"\u0623\u0633\u0628\u0648\u0639\u064a",monthly:"\u0634\u0647\u0631\u064a",quarterly:"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a",yearly:"\u0633\u0646\u0648\u064a","as-needed":"\u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u062c\u0629"}[e]||e})},{header:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u062c\u062f\u0648\u0644",accessor:"nextDate",render:e=>{if(!e)return"-";const t=new Date(e),s=new Date,a=t<s,r=t<=new Date(s.getTime()+6048e5);return(0,Qe.jsxs)("div",{className:"text-sm font-medium ".concat(a?"text-red-600":r?"text-yellow-600":"text-green-600"),children:[t.toLocaleDateString("ar-SA"),a&&(0,Qe.jsx)("div",{className:"text-xs",children:"(\u0645\u062a\u0623\u062e\u0631)"}),r&&!a&&(0,Qe.jsx)("div",{className:"text-xs",children:"(\u0642\u0631\u064a\u0628)"})]})}},{header:"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u0642\u062f\u0631\u0629",accessor:"estimatedCost",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-green-600",children:[e?e.toLocaleString():0," \u0631\u064a\u0627\u0644"]})},{header:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629",accessor:"priority",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({low:"bg-gray-100 text-gray-800",medium:"bg-yellow-100 text-yellow-800",high:"bg-orange-100 text-orange-800",critical:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:{low:"\u0645\u0646\u062e\u0641\u0636\u0629",medium:"\u0645\u062a\u0648\u0633\u0637\u0629",high:"\u0639\u0627\u0644\u064a\u0629",critical:"\u062d\u0631\u062c\u0629"}[e]||e})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({Scheduled:"bg-blue-100 text-blue-800","In Progress":"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:{Scheduled:"\u0645\u062c\u062f\u0648\u0644","In Progress":"\u062c\u0627\u0631\u064a",Completed:"\u0645\u0643\u062a\u0645\u0644",Cancelled:"\u0645\u0644\u063a\u064a"}[e]||e})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"id",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{b(t),D(Be(Be({},I),{},{scheduleId:e,actualDate:(new Date).toISOString().split("T")[0]})),h(!0)},children:"\u062a\u0633\u062c\u064a\u0644"}),(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{b(t),g(!0)},children:"\u062a\u0641\u0627\u0635\u064a\u0644"})]})}],M=(()=>{const e=new Date,t=i?i(30):[],s=a||[],r=s.filter(t=>t.nextDate&&new Date(t.nextDate)<e&&"Scheduled"===t.status),n=s.filter(e=>"Completed"===e.status),l=n.reduce((e,t)=>e+(t.actualCost||0),0);return{totalSchedules:a.length,upcomingMaintenance:t.length,overdueMaintenance:r.length,completedMaintenance:n.length,totalCost:l}})(),P=(()=>{const e=new Date,t=new Date(e.getTime()+6048e5);return a.filter(e=>{if(!e.nextDate||"Scheduled"!==e.status)return!1;return new Date(e.nextDate)<=t}).sort((e,t)=>new Date(e.nextDate)-new Date(t.nextDate)).slice(0,10)})();return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0635\u064a\u0627\u0646\u0629"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u0625\u062f\u0627\u0631\u0629 \u0648\u062a\u0646\u0638\u064a\u0645 \u062c\u062f\u0648\u0644\u0629 \u0635\u064a\u0627\u0646\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"})]}),(0,Qe.jsx)(ra,{onClick:()=>u(!0),children:"\u062c\u062f\u0648\u0644\u0629 \u0635\u064a\u0627\u0646\u0629 \u062c\u062f\u064a\u062f\u0629"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 12v4m-4 4h.01M16 4h.01M20 8h-6a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2V10a2 2 0 00-2-2z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062c\u062f\u0627\u0648\u0644"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.totalSchedules})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0642\u0627\u062f\u0645\u0629 (30 \u064a\u0648\u0645)"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.upcomingMaintenance})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 17.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0645\u062a\u0623\u062e\u0631\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.overdueMaintenance})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0645\u0643\u062a\u0645\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.completedMaintenance})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-purple-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0643\u0644\u0641\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.totalCost.toLocaleString()})]})]})})})]}),P.length>0&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Qe.jsx)("div",{className:"p-2 bg-red-100 rounded-full mr-3",children:(0,Qe.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 17.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-red-600",children:"\u0627\u0644\u0635\u064a\u0627\u0646\u0629 \u0627\u0644\u062d\u0631\u062c\u0629 (\u062e\u0644\u0627\u0644 7 \u0623\u064a\u0627\u0645)"})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(e=>{var t;const a=s.find(t=>t.id===e.assetId);return(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"font-medium text-red-900",children:(null===a||void 0===a?void 0:a.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-sm text-red-700 mt-1",children:"preventive"===e.maintenanceType?"\u0648\u0642\u0627\u0626\u064a\u0629":"corrective"===e.maintenanceType?"\u062a\u0635\u062d\u064a\u062d\u064a\u0629":"emergency"===e.maintenanceType?"\u0637\u0627\u0631\u0626\u0629":"inspection"===e.maintenanceType?"\u0641\u062d\u0635":e.maintenanceType}),(0,Qe.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["\u062a\u0627\u0631\u064a\u062e: ",new Date(e.nextDate).toLocaleDateString("ar-SA")]}),(0,Qe.jsxs)("div",{className:"text-xs text-red-500 mt-1",children:[null===(t=e.estimatedCost)||void 0===t?void 0:t.toLocaleString()," \u0631\u064a\u0627\u0644"]})]},e.id)})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644...",value:v,onChange:e=>j(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"Scheduled",children:"\u0645\u062c\u062f\u0648\u0644"}),(0,Qe.jsx)("option",{value:"In Progress",children:"\u062c\u0627\u0631\u064a"}),(0,Qe.jsx)("option",{value:"Completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,Qe.jsx)("option",{value:"Cancelled",children:"\u0645\u0644\u063a\u064a"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,Qe.jsx)("option",{value:"preventive",children:"\u0648\u0642\u0627\u0626\u064a\u0629"}),(0,Qe.jsx)("option",{value:"corrective",children:"\u062a\u0635\u062d\u064a\u062d\u064a\u0629"}),(0,Qe.jsx)("option",{value:"emergency",children:"\u0637\u0627\u0631\u0626\u0629"}),(0,Qe.jsx)("option",{value:"inspection",children:"\u0641\u062d\u0635"})]})]}),(0,Qe.jsx)("div",{className:"flex items-end",children:(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>{j(""),N(""),S("")},children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Qe.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\u062c\u062f\u0648\u0644 \u0627\u0644\u0635\u064a\u0627\u0646\u0629 (",L.length,")"]})}),(0,Qe.jsx)(ja,{columns:E,data:L,searchable:!1,maxHeight:"600px"})]})}),(0,Qe.jsx)(ga,{isOpen:x,onClose:()=>u(!1),title:"\u062c\u062f\u0648\u0644\u0629 \u0635\u064a\u0627\u0646\u0629 \u062c\u062f\u064a\u062f\u0629",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsxs)("select",{value:k.assetId,onChange:e=>C(Be(Be({},k),{},{assetId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644"}),(s||[]).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0646\u0648\u0639 \u0627\u0644\u0635\u064a\u0627\u0646\u0629 *"}),(0,Qe.jsxs)("select",{value:k.maintenanceType,onChange:e=>C(Be(Be({},k),{},{maintenanceType:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"preventive",children:"\u0648\u0642\u0627\u0626\u064a\u0629"}),(0,Qe.jsx)("option",{value:"corrective",children:"\u062a\u0635\u062d\u064a\u062d\u064a\u0629"}),(0,Qe.jsx)("option",{value:"emergency",children:"\u0637\u0627\u0631\u0626\u0629"}),(0,Qe.jsx)("option",{value:"inspection",children:"\u0641\u062d\u0635"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0643\u0631\u0627\u0631"}),(0,Qe.jsxs)("select",{value:k.frequency,onChange:e=>C(Be(Be({},k),{},{frequency:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"daily",children:"\u064a\u0648\u0645\u064a"}),(0,Qe.jsx)("option",{value:"weekly",children:"\u0623\u0633\u0628\u0648\u0639\u064a"}),(0,Qe.jsx)("option",{value:"monthly",children:"\u0634\u0647\u0631\u064a"}),(0,Qe.jsx)("option",{value:"quarterly",children:"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a"}),(0,Qe.jsx)("option",{value:"yearly",children:"\u0633\u0646\u0648\u064a"}),(0,Qe.jsx)("option",{value:"as-needed",children:"\u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u062c\u0629"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u062c\u062f\u0648\u0644 *"}),(0,Qe.jsx)("input",{type:"date",value:k.nextDate,onChange:e=>C(Be(Be({},k),{},{nextDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u0642\u062f\u0631\u0629"}),(0,Qe.jsx)("input",{type:"number",value:k.estimatedCost,onChange:e=>C(Be(Be({},k),{},{estimatedCost:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0631\u064a\u0627\u0644"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,Qe.jsxs)("select",{value:k.priority,onChange:e=>C(Be(Be({},k),{},{priority:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"low",children:"\u0645\u0646\u062e\u0641\u0636\u0629"}),(0,Qe.jsx)("option",{value:"medium",children:"\u0645\u062a\u0648\u0633\u0637\u0629"}),(0,Qe.jsx)("option",{value:"high",children:"\u0639\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("option",{value:"critical",children:"\u062d\u0631\u062c\u0629"})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0648\u0635\u0641"}),(0,Qe.jsx)("textarea",{value:k.description,onChange:e=>C(Be(Be({},k),{},{description:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"\u0648\u0635\u0641 \u062a\u0641\u0635\u064a\u0644\u064a \u0644\u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u0635\u064a\u0627\u0646\u0629..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0639\u0646 \u0627\u0644\u062a\u0646\u0641\u064a\u0630"}),(0,Qe.jsx)("input",{type:"text",value:k.assignedTo,onChange:e=>C(Be(Be({},k),{},{assignedTo:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0641\u0646\u064a \u0623\u0648 \u0627\u0644\u0634\u0631\u0643\u0629 \u0627\u0644\u0645\u0633\u0624\u0648\u0644\u0629..."})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!k.assetId||!k.maintenanceType||!k.nextDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=Be(Be({},k),{},{id:Date.now().toString(),estimatedCost:parseFloat(k.estimatedCost)||0,status:"Scheduled",createdAt:(new Date).toISOString()});n(e),u(!1),C({assetId:"",maintenanceType:"preventive",frequency:"monthly",nextDate:"",estimatedCost:"",description:"",assignedTo:"",priority:"medium"})},children:"\u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u062c\u062f\u0648\u0644\u0629"})]})]})}),(0,Qe.jsx)(ga,{isOpen:m,onClose:()=>h(!1),title:"\u062a\u0633\u062c\u064a\u0644 \u0635\u064a\u0627\u0646\u0629",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0646\u0641\u064a\u0630 *"}),(0,Qe.jsx)("input",{type:"date",value:I.actualDate,onChange:e=>D(Be(Be({},I),{},{actualDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0641\u0639\u0644\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",value:I.actualCost,onChange:e=>D(Be(Be({},I),{},{actualCost:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0631\u064a\u0627\u0644"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:I.status,onChange:e=>D(Be(Be({},I),{},{status:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,Qe.jsx)("option",{value:"partially-completed",children:"\u0645\u0643\u062a\u0645\u0644 \u062c\u0632\u0626\u064a\u0627\u064b"}),(0,Qe.jsx)("option",{value:"failed",children:"\u0641\u0634\u0644"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0641\u0646\u064a \u0627\u0644\u0645\u0646\u0641\u0630"}),(0,Qe.jsx)("input",{type:"text",value:I.technician,onChange:e=>D(Be(Be({},I),{},{technician:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0641\u0646\u064a \u0623\u0648 \u0627\u0644\u0634\u0631\u0643\u0629..."})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:I.notes,onChange:e=>D(Be(Be({},I),{},{notes:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:4,placeholder:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u0635\u064a\u0627\u0646\u0629 \u0627\u0644\u0645\u0646\u0641\u0630\u0629..."})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>h(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!I.scheduleId||!I.actualDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=Be(Be({},I),{},{id:Date.now().toString(),actualCost:parseFloat(I.actualCost)||0,recordedAt:(new Date).toISOString()});l(e),h(!1),D({scheduleId:"",actualDate:"",actualCost:"",status:"completed",notes:"",technician:""})},children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0635\u064a\u0627\u0646\u0629"})]})]})}),(0,Qe.jsx)(ga,{isOpen:p,onClose:()=>g(!1),title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0635\u064a\u0627\u0646\u0629",size:"lg",children:f&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062c\u062f\u0648\u0644\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0623\u0635\u0644:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:(null===(e=s.find(e=>e.id===f.assetId))||void 0===e?void 0:e.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0646\u0648\u0639 \u0627\u0644\u0635\u064a\u0627\u0646\u0629:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"preventive"===f.maintenanceType?"\u0648\u0642\u0627\u0626\u064a\u0629":"corrective"===f.maintenanceType?"\u062a\u0635\u062d\u064a\u062d\u064a\u0629":"emergency"===f.maintenanceType?"\u0637\u0627\u0631\u0626\u0629":"inspection"===f.maintenanceType?"\u0641\u062d\u0635":f.maintenanceType})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062a\u0643\u0631\u0627\u0631:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"daily"===f.frequency?"\u064a\u0648\u0645\u064a":"weekly"===f.frequency?"\u0623\u0633\u0628\u0648\u0639\u064a":"monthly"===f.frequency?"\u0634\u0647\u0631\u064a":"quarterly"===f.frequency?"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a":"yearly"===f.frequency?"\u0633\u0646\u0648\u064a":"as-needed"===f.frequency?"\u062d\u0633\u0628 \u0627\u0644\u062d\u0627\u062c\u0629":f.frequency})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u062c\u062f\u0648\u0644:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:f.nextDate?new Date(f.nextDate).toLocaleDateString("ar-SA"):"-"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u0645\u0642\u062f\u0631\u0629:"}),(0,Qe.jsxs)("span",{className:"mr-2 font-medium",children:[(null===(t=f.estimatedCost)||void 0===t?void 0:t.toLocaleString())||0," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"Scheduled"===f.status?"\u0645\u062c\u062f\u0648\u0644":"In Progress"===f.status?"\u062c\u0627\u0631\u064a":"Completed"===f.status?"\u0645\u0643\u062a\u0645\u0644":"Cancelled"===f.status?"\u0645\u0644\u063a\u064a":f.status})]})]}),f.description&&(0,Qe.jsxs)("div",{className:"mt-4",children:[(0,Qe.jsx)("span",{className:"text-gray-600 text-sm",children:"\u0627\u0644\u0648\u0635\u0641:"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:f.description})]})]})}),(0,Qe.jsx)("div",{className:"flex justify-end pt-4",children:(0,Qe.jsx)(ra,{onClick:()=>g(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},nn=()=>(0,Qe.jsx)(rn,{}),ln=()=>{var e;const{fixedAssets:t,assetCategories:s,assetLocations:a,assetInventory:n,performAssetInventory:l,calculateDepreciation:i}=Ye(),[o,c]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(""),[b,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,k]=(0,r.useState)({assetId:"",inventoryDate:(new Date).toISOString().split("T")[0],physicalCondition:"good",functionalStatus:"operational",locationVerified:!0,currentValue:"",conditionNotes:"",discrepancies:"",recommendedActions:"",inspectedBy:"",verifiedBy:""}),C=n.filter(e=>{var s,a;const r=t.find(t=>t.id===e.assetId),n=(null===r||void 0===r||null===(s=r.name)||void 0===s?void 0:s.toLowerCase().includes(g.toLowerCase()))||(null===(a=e.conditionNotes)||void 0===a?void 0:a.toLowerCase().includes(g.toLowerCase())),l=!b||(null===r||void 0===r?void 0:r.categoryId)===b,i=!j||(null===r||void 0===r?void 0:r.locationId)===j,o=!N||e.functionalStatus===N;return n&&l&&i&&o}),I=[{header:"\u0627\u0644\u0623\u0635\u0644",accessor:"assetId",render:e=>{const s=t.find(t=>t.id===e);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:(null===s||void 0===s?void 0:s.serialNumber)||"-"})]})}},{header:"\u062a\u0635\u0646\u064a\u0641",accessor:"assetId",render:e=>{const a=t.find(t=>t.id===e),r=s.find(e=>e.id===(null===a||void 0===a?void 0:a.categoryId));return(0,Qe.jsx)("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-sm",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u0645\u0648\u0642\u0639",accessor:"assetId",render:e=>{const s=t.find(t=>t.id===e),r=a.find(e=>e.id===(null===s||void 0===s?void 0:s.locationId));return(0,Qe.jsx)("div",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-sm",children:(null===r||void 0===r?void 0:r.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})}},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062c\u0631\u062f",accessor:"inventoryDate",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:new Date(e).toLocaleDateString("ar-SA")})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0627\u062f\u064a\u0629",accessor:"physicalCondition",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",damaged:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:{excellent:"\u0645\u0645\u062a\u0627\u0632",good:"\u062c\u064a\u062f",fair:"\u0645\u062a\u0648\u0633\u0637",poor:"\u0636\u0639\u064a\u0641",damaged:"\u062a\u0627\u0644\u0641"}[e]||e})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629",accessor:"functionalStatus",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({operational:"bg-green-100 text-green-800",partial:"bg-yellow-100 text-yellow-800","non-operational":"bg-red-100 text-red-800","maintenance-required":"bg-orange-100 text-orange-800"}[e]||"bg-gray-100 text-gray-800"),children:{operational:"\u064a\u0639\u0645\u0644",partial:"\u064a\u0639\u0645\u0644 \u062c\u0632\u0626\u064a\u0627\u064b","non-operational":"\u0644\u0627 \u064a\u0639\u0645\u0644","maintenance-required":"\u064a\u062d\u062a\u0627\u062c \u0635\u064a\u0627\u0646\u0629"}[e]||e})},{header:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",accessor:"currentValue",render:(e,s)=>{const a=t.find(e=>e.id===s.assetId),r=i(a.id,(null===a||void 0===a?void 0:a.depreciationMethod)||"straight-line"),n=((null===a||void 0===a?void 0:a.originalValue)||0)-((null===r||void 0===r?void 0:r.totalDepreciation)||0);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("div",{className:"font-medium text-green-600",children:[e?e.toLocaleString():n.toLocaleString()," \u0631\u064a\u0627\u0644"]}),e&&Math.abs(e-n)>100&&(0,Qe.jsxs)("div",{className:"text-xs text-red-600",children:["\u062a\u0628\u0627\u064a\u0646: ",((e-n)/n*100).toFixed(1),"%"]})]})}},{header:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642",accessor:"locationVerified",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat(e?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e?"\u0646\u0639\u0645":"\u0644\u0627"})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"id",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{c(t),k(Be(Be({},S),{},{assetId:t.assetId,currentValue:t.currentValue||""})),m(!0)},children:"\u0645\u0642\u0627\u0631\u0646\u0629"}),(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{c(t),p(!0)},children:"\u062a\u0641\u0627\u0635\u064a\u0644"})]})}],D={totalInventories:n.length,thisMonthInventories:n.filter(e=>{const t=new Date(e.inventoryDate),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()}).length,conditionDistribution:n.reduce((e,t)=>(e[t.physicalCondition]=(e[t.physicalCondition]||0)+1,e),{}),totalValue:n.reduce((e,t)=>e+(t.currentValue||0),0)},_=(()=>{const e=new Date;return e.setDate(e.getDate()-30),t.filter(t=>{const s=n.filter(e=>e.assetId===t.id).sort((e,t)=>new Date(t.inventoryDate)-new Date(e.inventoryDate))[0];return!s||new Date(s.inventoryDate)<e})})();return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u062c\u0631\u062f \u0648\u062a\u0642\u064a\u064a\u0645 \u0627\u0644\u0623\u0635\u0648\u0644"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u062c\u0631\u062f \u062f\u0648\u0631\u064a \u0648\u062a\u0642\u064a\u064a\u0645 \u062d\u0627\u0644\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629"})]}),(0,Qe.jsx)(ra,{onClick:()=>x(!0),children:"\u0625\u062c\u0631\u0627\u0621 \u062c\u0631\u062f \u062c\u062f\u064a\u062f"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062c\u0631\u062f"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.totalInventories})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 12v4m-4 4h.01M16 4h.01M20 8h-6a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2V10a2 2 0 00-2-2z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.thisMonthInventories})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-purple-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:D.totalValue.toLocaleString()})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 17.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u063a\u064a\u0631 \u0645\u0642\u064a\u062f\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a \u0627\u0644\u0645\u0627\u062f\u064a\u0629"}),(0,Qe.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(D.conditionDistribution).map(e=>{let[t,s]=e;const a=D.totalInventories>0?(s/D.totalInventories*100).toFixed(1):0;return(0,Qe.jsxs)("div",{className:"p-4 rounded-lg ".concat({excellent:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",damaged:"bg-red-100 text-red-800"}[t]||"bg-gray-100"),children:[(0,Qe.jsx)("div",{className:"text-sm font-medium",children:{excellent:"\u0645\u0645\u062a\u0627\u0632",good:"\u062c\u064a\u062f",fair:"\u0645\u062a\u0648\u0633\u0637",poor:"\u0636\u0639\u064a\u0641",damaged:"\u062a\u0627\u0644\u0641"}[t]||t}),(0,Qe.jsx)("div",{className:"text-2xl font-bold",children:s}),(0,Qe.jsxs)("div",{className:"text-xs",children:[a,"%"]})]},t)})})]})}),_.length>0&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Qe.jsx)("div",{className:"p-2 bg-red-100 rounded-full mr-3",children:(0,Qe.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 17.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-red-600",children:"\u0623\u0635\u0648\u0644 \u062a\u062d\u062a\u0627\u062c \u062c\u0631\u062f (\u0644\u0645 \u062a\u064f\u0642\u064a\u062f \u0645\u0646\u0630 30 \u064a\u0648\u0645)"})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.slice(0,6).map(e=>{var t;const s=n.filter(t=>t.assetId===e.id).sort((e,t)=>new Date(t.inventoryDate)-new Date(e.inventoryDate))[0];return(0,Qe.jsxs)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"font-medium text-red-900",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-red-700 mt-1",children:["\u0627\u0644\u0642\u064a\u0645\u0629: ",null===(t=e.originalValue)||void 0===t?void 0:t.toLocaleString()," \u0631\u064a\u0627\u0644"]}),s&&(0,Qe.jsxs)("div",{className:"text-xs text-red-600 mt-1",children:["\u0622\u062e\u0631 \u062c\u0631\u062f: ",new Date(s.inventoryDate).toLocaleDateString("ar-SA")]})]},e.id)})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644...",value:g,onChange:e=>f(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062a\u0635\u0646\u064a\u0641"}),(0,Qe.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0635\u0646\u064a\u0641\u0627\u062a"}),s.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639"}),(0,Qe.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0627\u0642\u0639"}),a.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsx)("div",{className:"flex items-end",children:(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>{f(""),v(""),y(""),w("")},children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Qe.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\u0633\u062c\u0644 \u0627\u0644\u062c\u0631\u062f (",C.length,")"]})}),(0,Qe.jsx)(ja,{columns:I,data:C,searchable:!1,maxHeight:"600px"})]})}),(0,Qe.jsx)(ga,{isOpen:d,onClose:()=>x(!1),title:"\u0625\u062c\u0631\u0627\u0621 \u062c\u0631\u062f \u062c\u062f\u064a\u062f",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsxs)("select",{value:S.assetId,onChange:e=>k(Be(Be({},S),{},{assetId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062c\u0631\u062f *"}),(0,Qe.jsx)("input",{type:"date",value:S.inventoryDate,onChange:e=>k(Be(Be({},S),{},{inventoryDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0627\u062f\u064a\u0629 *"}),(0,Qe.jsxs)("select",{value:S.physicalCondition,onChange:e=>k(Be(Be({},S),{},{physicalCondition:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"excellent",children:"\u0645\u0645\u062a\u0627\u0632"}),(0,Qe.jsx)("option",{value:"good",children:"\u062c\u064a\u062f"}),(0,Qe.jsx)("option",{value:"fair",children:"\u0645\u062a\u0648\u0633\u0637"}),(0,Qe.jsx)("option",{value:"poor",children:"\u0636\u0639\u064a\u0641"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u062a\u0627\u0644\u0641"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629 *"}),(0,Qe.jsxs)("select",{value:S.functionalStatus,onChange:e=>k(Be(Be({},S),{},{functionalStatus:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"operational",children:"\u064a\u0639\u0645\u0644"}),(0,Qe.jsx)("option",{value:"partial",children:"\u064a\u0639\u0645\u0644 \u062c\u0632\u0626\u064a\u0627\u064b"}),(0,Qe.jsx)("option",{value:"non-operational",children:"\u0644\u0627 \u064a\u0639\u0645\u0644"}),(0,Qe.jsx)("option",{value:"maintenance-required",children:"\u064a\u062d\u062a\u0627\u062c \u0635\u064a\u0627\u0646\u0629"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("input",{type:"number",value:S.currentValue,onChange:e=>k(Be(Be({},S),{},{currentValue:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0631\u064a\u0627\u0644"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0645\u0648\u0642\u0639"}),(0,Qe.jsxs)("select",{value:S.locationVerified,onChange:e=>k(Be(Be({},S),{},{locationVerified:"true"===e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",children:[(0,Qe.jsx)("option",{value:"true",children:"\u0646\u0639\u0645"}),(0,Qe.jsx)("option",{value:"false",children:"\u0644\u0627"})]})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0641\u062a\u0634"}),(0,Qe.jsx)("input",{type:"text",value:S.inspectedBy,onChange:e=>k(Be(Be({},S),{},{inspectedBy:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0641\u062a\u0634..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0631\u0627\u062c\u0639"}),(0,Qe.jsx)("input",{type:"text",value:S.verifiedBy,onChange:e=>k(Be(Be({},S),{},{verifiedBy:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0631\u0627\u062c\u0639..."})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("textarea",{value:S.conditionNotes,onChange:e=>k(Be(Be({},S),{},{conditionNotes:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:3,placeholder:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062d\u0648\u0644 \u062d\u0627\u0644\u0629 \u0627\u0644\u0623\u0635\u0644..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0641\u0631\u0648\u0642\u0627\u062a \u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0629"}),(0,Qe.jsx)("textarea",{value:S.discrepancies,onChange:e=>k(Be(Be({},S),{},{discrepancies:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0623\u064a \u0641\u0631\u0648\u0642\u0627\u062a \u0623\u0648 \u0645\u0634\u0627\u0643\u0644 \u0645\u0644\u0627\u062d\u0638\u0629..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u0645\u0642\u062a\u0631\u062d\u0629"}),(0,Qe.jsx)("textarea",{value:S.recommendedActions,onChange:e=>k(Be(Be({},S),{},{recommendedActions:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0645\u0642\u062a\u0631\u062d\u0629 \u0644\u0644\u0635\u064a\u0627\u0646\u0629 \u0623\u0648 \u0627\u0644\u0625\u0635\u0644\u0627\u062d..."})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>x(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!S.assetId||!S.inventoryDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=Be(Be({},S),{},{id:Date.now().toString(),currentValue:parseFloat(S.currentValue)||0,createdAt:(new Date).toISOString()});l(e),x(!1),k({assetId:"",inventoryDate:(new Date).toISOString().split("T")[0],physicalCondition:"good",functionalStatus:"operational",locationVerified:!0,currentValue:"",conditionNotes:"",discrepancies:"",recommendedActions:"",inspectedBy:"",verifiedBy:""})},children:"\u062d\u0641\u0638 \u0627\u0644\u062c\u0631\u062f"})]})]})}),(0,Qe.jsx)(ga,{isOpen:u,onClose:()=>m(!1),title:"\u0645\u0642\u0627\u0631\u0646\u0629 \u0627\u0644\u0642\u064a\u0645",size:"lg",children:o&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u0645\u0642\u0627\u0631\u0646\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062d\u0627\u0633\u0628\u064a\u0629 \u0648\u0627\u0644\u0641\u0639\u0644\u064a\u0629"}),(()=>{const e=t.find(e=>e.id===o.assetId);if(!e)return null;const s=i(e.id,e.depreciationMethod||"straight-line"),a=(e.originalValue||0)-((null===s||void 0===s?void 0:s.totalDepreciation)||0),r=o.currentValue||a,n=r-a;return(0,Qe.jsxs)("div",{className:"space-y-3",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{className:"text-center p-3 bg-gray-50 rounded",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0645\u062d\u0627\u0633\u0628\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[a.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0639\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"text-lg font-bold text-blue-600",children:[r.toLocaleString()," \u0631\u064a\u0627\u0644"]})]})]}),(0,Qe.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0627\u0644\u062a\u0628\u0627\u064a\u0646"}),(0,Qe.jsxs)("div",{className:"text-lg font-bold ".concat(n>0?"text-green-600":n<0?"text-red-600":"text-gray-600"),children:[n>0?"+":"",n.toLocaleString()," \u0631\u064a\u0627\u0644",(0,Qe.jsxs)("div",{className:"text-xs mt-1",children:["(",n>0?"+":"",0!==a?(n/a*100).toFixed(1):0,"%)"]})]})]}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Qe.jsxs)("div",{children:["\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062c\u0631\u062f: ",new Date(o.inventoryDate).toLocaleDateString("ar-SA")]}),(0,Qe.jsxs)("div",{children:["\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0627\u062f\u064a\u0629: ","excellent"===o.physicalCondition?"\u0645\u0645\u062a\u0627\u0632":"good"===o.physicalCondition?"\u062c\u064a\u062f":"fair"===o.physicalCondition?"\u0645\u062a\u0648\u0633\u0637":"poor"===o.physicalCondition?"\u0636\u0639\u064a\u0641":"damaged"===o.physicalCondition?"\u062a\u0627\u0644\u0641":o.physicalCondition]})]})]})})()]})}),(0,Qe.jsx)("div",{className:"flex justify-end pt-4",children:(0,Qe.jsx)(ra,{onClick:()=>m(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})}),(0,Qe.jsx)(ga,{isOpen:h,onClose:()=>p(!1),title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062c\u0631\u062f",size:"lg",children:o&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062c\u0631\u062f"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062c\u0631\u062f:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:new Date(o.inventoryDate).toLocaleDateString("ar-SA")})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0645\u0627\u062f\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"excellent"===o.physicalCondition?"\u0645\u0645\u062a\u0627\u0632":"good"===o.physicalCondition?"\u062c\u064a\u062f":"fair"===o.physicalCondition?"\u0645\u062a\u0648\u0633\u0637":"poor"===o.physicalCondition?"\u0636\u0639\u064a\u0641":"damaged"===o.physicalCondition?"\u062a\u0627\u0644\u0641":o.physicalCondition})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"operational"===o.functionalStatus?"\u064a\u0639\u0645\u0644":"partial"===o.functionalStatus?"\u064a\u0639\u0645\u0644 \u062c\u0632\u0626\u064a\u0627\u064b":"non-operational"===o.functionalStatus?"\u0644\u0627 \u064a\u0639\u0645\u0644":"maintenance-required"===o.functionalStatus?"\u064a\u062d\u062a\u0627\u062c \u0635\u064a\u0627\u0646\u0629":o.functionalStatus})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u062a\u0645 \u0627\u0644\u062a\u062d\u0642\u0642:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:o.locationVerified?"\u0646\u0639\u0645":"\u0644\u0627"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629:"}),(0,Qe.jsxs)("span",{className:"mr-2 font-medium",children:[(null===(e=o.currentValue)||void 0===e?void 0:e.toLocaleString())||0," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0641\u062a\u0634:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:o.inspectedBy||"-"})]})]})]})}),o.conditionNotes&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:o.conditionNotes})]})}),o.discrepancies&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0627\u0644\u0641\u0631\u0648\u0642\u0627\u062a \u0627\u0644\u0645\u0644\u0627\u062d\u0638\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:o.discrepancies})]})}),o.recommendedActions&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u0645\u0642\u062a\u0631\u062d\u0629"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:o.recommendedActions})]})}),(0,Qe.jsx)("div",{className:"flex justify-end pt-4",children:(0,Qe.jsx)(ra,{onClick:()=>p(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},on=()=>(0,Qe.jsx)(ln,{}),cn=()=>{var e,t;const{fixedAssets:s,assetLocations:a,assetDisposals:n,disposeAsset:l,transferAsset:i,calculateDepreciation:o,updateFixedAsset:c}=Ye(),[d,x]=(0,r.useState)(null),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[S,k]=(0,r.useState)({assetId:"",disposalMethod:"sale",disposalDate:(new Date).toISOString().split("T")[0],disposalValue:"",disposalReason:"",buyerName:"",buyerContact:"",disposalNotes:"",approvedBy:"",approvalDate:""}),[C,I]=(0,r.useState)({assetId:"",fromLocationId:"",toLocationId:"",transferDate:(new Date).toISOString().split("T")[0],transferReason:"",transferredBy:"",receivedBy:"",transferNotes:""}),D=n.filter(e=>{var t,a,r;const n=s.find(t=>t.id===e.assetId),l=(null===n||void 0===n||null===(t=n.name)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))||(null===(a=e.buyerName)||void 0===a?void 0:a.toLowerCase().includes(b.toLowerCase()))||(null===(r=e.disposalReason)||void 0===r?void 0:r.toLowerCase().includes(b.toLowerCase())),i=!j||e.disposalMethod===j,o=!N||e.status===N;return l&&i&&o}),_=[{header:"\u0627\u0644\u0623\u0635\u0644",accessor:"assetId",render:e=>{const t=s.find(t=>t.id===e);return(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-medium text-gray-900",children:(null===t||void 0===t?void 0:t.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:(null===t||void 0===t?void 0:t.serialNumber)||"-"})]})}},{header:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u0635\u0631\u0641",accessor:"disposalMethod",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({sale:"bg-green-100 text-green-800",donation:"bg-blue-100 text-blue-800",scrap:"bg-gray-100 text-gray-800",transfer:"bg-yellow-100 text-yellow-800","write-off":"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:{sale:"\u0628\u064a\u0639",donation:"\u062a\u0628\u0631\u0639",scrap:"\u062e\u0631\u062f\u0629",transfer:"\u0646\u0642\u0644","write-off":"\u0634\u0637\u0628"}[e]||e})},{header:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0635\u0631\u0641",accessor:"disposalDate",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:new Date(e).toLocaleDateString("ar-SA")})},{header:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0635\u0631\u0641",accessor:"disposalValue",render:e=>(0,Qe.jsxs)("div",{className:"font-medium text-green-600",children:[e?e.toLocaleString():0," \u0631\u064a\u0627\u0644"]})},{header:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a",accessor:"buyerName",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-900",children:e||"-"})},{header:"\u0627\u0644\u0633\u0628\u0628",accessor:"disposalReason",render:e=>(0,Qe.jsx)("div",{className:"text-sm text-gray-600 max-w-xs truncate",title:e,children:e||"-"})},{header:"\u0627\u0644\u062d\u0627\u0644\u0629",accessor:"status",render:e=>(0,Qe.jsx)("div",{className:"px-2 py-1 rounded text-sm ".concat({pending:"bg-yellow-100 text-yellow-800",approved:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-800"),children:{pending:"\u0645\u0639\u0644\u0642",approved:"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647",completed:"\u0645\u0643\u062a\u0645\u0644",cancelled:"\u0645\u0644\u063a\u064a"}[e]||e})},{header:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a",accessor:"id",render:(e,t)=>(0,Qe.jsxs)("div",{className:"flex space-x-2",children:[(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>{x(t),f(!0)},children:"\u062a\u0641\u0627\u0635\u064a\u0644"}),"pending"===t.status&&(0,Qe.jsx)(ra,{variant:"outline",size:"sm",onClick:()=>L(e),className:"text-blue-600 hover:text-blue-700",children:"\u0645\u0648\u0627\u0641\u0642\u0629"})]})}],L=e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u062a\u0635\u0631\u0641\u061f")){const t=n.map(t=>t.id===e?Be(Be({},t),{},{status:"approved",approvalDate:(new Date).toISOString()}):t);localStorage.setItem("assetDisposals",JSON.stringify(t)),alert("\u062a\u0645 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u062a\u0635\u0631\u0641 \u0628\u0646\u062c\u0627\u062d")}},E={totalDisposals:n.length,thisYearDisposals:n.filter(e=>new Date(e.disposalDate).getFullYear()===(new Date).getFullYear()).length,totalValue:n.reduce((e,t)=>e+(t.disposalValue||0),0),thisYearValue:n.filter(e=>new Date(e.disposalDate).getFullYear()===(new Date).getFullYear()).reduce((e,t)=>e+(t.disposalValue||0),0),methodDistribution:n.reduce((e,t)=>(e[t.disposalMethod]=(e[t.disposalMethod]||0)+1,e),{})},M=s.filter(e=>{if(!e.purchaseDate||!e.usefulLife)return!1;const t=new Date(e.purchaseDate);return(new Date).getFullYear()-t.getFullYear()>=e.usefulLife&&"Active"===e.status}).slice(0,10);return(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644"}),(0,Qe.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\u0625\u062f\u0627\u0631\u0629 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0627\u0644\u0623\u0635\u0648\u0644 \u0627\u0644\u062b\u0627\u0628\u062a\u0629 \u0627\u0644\u0645\u0646\u062a\u0647\u064a\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"})]}),(0,Qe.jsxs)("div",{className:"flex space-x-3",children:[(0,Qe.jsx)(ra,{onClick:()=>p(!0),variant:"outline",children:"\u0646\u0642\u0644 \u0623\u0635\u0644"}),(0,Qe.jsx)(ra,{onClick:()=>m(!0),children:"\u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0623\u0635\u0644"})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-blue-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0635\u0631\u0641\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.totalDisposals})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-green-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 12v4m-4 4h.01M16 4h.01M20 8h-6a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2V10a2 2 0 00-2-2z"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0647\u0630\u0627 \u0627\u0644\u0639\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.thisYearDisposals})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-purple-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.totalValue.toLocaleString()})]})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"flex items-center",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-full bg-yellow-100",children:(0,Qe.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,Qe.jsxs)("div",{className:"mr-4",children:[(0,Qe.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"\u0647\u0630\u0627 \u0627\u0644\u0639\u0627\u0645"}),(0,Qe.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.thisYearValue.toLocaleString()})]})]})})})]}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\u062a\u0648\u0632\u064a\u0639 \u0637\u0631\u0642 \u0627\u0644\u062a\u0635\u0631\u0641"}),(0,Qe.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:Object.entries(E.methodDistribution).map(e=>{let[t,s]=e;const a=E.totalDisposals>0?(s/E.totalDisposals*100).toFixed(1):0;return(0,Qe.jsxs)("div",{className:"p-4 rounded-lg ".concat({sale:"bg-green-100 text-green-800",donation:"bg-blue-100 text-blue-800",scrap:"bg-gray-100 text-gray-800",transfer:"bg-yellow-100 text-yellow-800","write-off":"bg-red-100 text-red-800"}[t]||"bg-gray-100"),children:[(0,Qe.jsx)("div",{className:"text-sm font-medium",children:{sale:"\u0628\u064a\u0639",donation:"\u062a\u0628\u0631\u0639",scrap:"\u062e\u0631\u062f\u0629",transfer:"\u0646\u0642\u0644","write-off":"\u0634\u0637\u0628"}[t]||t}),(0,Qe.jsx)("div",{className:"text-2xl font-bold",children:s}),(0,Qe.jsxs)("div",{className:"text-xs",children:[a,"%"]})]},t)})})]})}),M.length>0&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Qe.jsx)("div",{className:"p-2 bg-orange-100 rounded-full mr-3",children:(0,Qe.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 17.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-orange-600",children:"\u0623\u0635\u0648\u0644 \u0645\u0642\u062a\u0631\u062d\u0629 \u0644\u0644\u062a\u0635\u0631\u0641 (\u0639\u0645\u0631\u0647\u0627 \u0627\u0641\u062a\u0631\u0627\u0636\u064a \u0645\u0646\u062a\u0647\u064a)"})]}),(0,Qe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(e=>{const t=new Date(e.purchaseDate).getFullYear(),s=(new Date).getFullYear()-t,a=o(e.id,e.depreciationMethod||"straight-line"),r=(e.originalValue||0)-((null===a||void 0===a?void 0:a.totalDepreciation)||0);return(0,Qe.jsxs)("div",{className:"bg-orange-50 border border-orange-200 p-4 rounded-lg",children:[(0,Qe.jsx)("div",{className:"font-medium text-orange-900",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-orange-700 mt-1",children:["\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: ",s," \u0633\u0646\u0629 \u0645\u0646 ",e.usefulLife]}),(0,Qe.jsxs)("div",{className:"text-sm text-orange-600 mt-1",children:["\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629: ",r.toLocaleString()," \u0631\u064a\u0627\u0644"]}),(0,Qe.jsx)("div",{className:"text-xs text-orange-500 mt-1",children:"straight-line"===e.depreciationMethod?"\u0627\u0644\u0642\u0633\u0637 \u0627\u0644\u062b\u0627\u0628\u062a":"declining-balance"===e.depreciationMethod?"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0645\u062a\u0646\u0627\u0642\u0635":"units-of-production"===e.depreciationMethod?"\u0648\u062d\u062f\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0627\u062c":"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]},e.id)})})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsx)("div",{className:"p-6",children:(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0628\u062d\u062b"}),(0,Qe.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u062a\u0635\u0631\u0641\u0627\u062a...",value:b,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u0635\u0631\u0641"}),(0,Qe.jsxs)("select",{value:j,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0631\u0642"}),(0,Qe.jsx)("option",{value:"sale",children:"\u0628\u064a\u0639"}),(0,Qe.jsx)("option",{value:"donation",children:"\u062a\u0628\u0631\u0639"}),(0,Qe.jsx)("option",{value:"scrap",children:"\u062e\u0631\u062f\u0629"}),(0,Qe.jsx)("option",{value:"transfer",children:"\u0646\u0642\u0644"}),(0,Qe.jsx)("option",{value:"write-off",children:"\u0634\u0637\u0628"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,Qe.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,Qe.jsx)("option",{value:"pending",children:"\u0645\u0639\u0644\u0642"}),(0,Qe.jsx)("option",{value:"approved",children:"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647"}),(0,Qe.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,Qe.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a"})]})]}),(0,Qe.jsx)("div",{className:"flex items-end",children:(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>{v(""),y(""),w("")},children:"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"})})]})})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-6",children:[(0,Qe.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,Qe.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\u0633\u062c\u0644 \u0627\u0644\u062a\u0635\u0631\u0641\u0627\u062a (",D.length,")"]})}),(0,Qe.jsx)(ja,{columns:_,data:D,searchable:!1,maxHeight:"600px"})]})}),(0,Qe.jsx)(ga,{isOpen:u,onClose:()=>m(!1),title:"\u0627\u0644\u062a\u0635\u0631\u0641 \u0641\u064a \u0623\u0635\u0644",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsxs)("select",{value:S.assetId,onChange:e=>{k(Be(Be({},S),{},{assetId:e.target.value}));const t=s.find(t=>t.id===e.target.value);t&&I(Be(Be({},C),{},{fromLocationId:t.locationId||""}))},className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644"}),s.filter(e=>"Active"===e.status).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u0635\u0631\u0641 *"}),(0,Qe.jsxs)("select",{value:S.disposalMethod,onChange:e=>k(Be(Be({},S),{},{disposalMethod:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"sale",children:"\u0628\u064a\u0639"}),(0,Qe.jsx)("option",{value:"donation",children:"\u062a\u0628\u0631\u0639"}),(0,Qe.jsx)("option",{value:"scrap",children:"\u062e\u0631\u062f\u0629"}),(0,Qe.jsx)("option",{value:"write-off",children:"\u0634\u0637\u0628"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0635\u0631\u0641 *"}),(0,Qe.jsx)("input",{type:"date",value:S.disposalDate,onChange:e=>k(Be(Be({},S),{},{disposalDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0635\u0631\u0641"}),(0,Qe.jsx)("input",{type:"number",value:S.disposalValue,onChange:e=>k(Be(Be({},S),{},{disposalValue:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0631\u064a\u0627\u0644"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0633\u0628\u0628 \u0627\u0644\u062a\u0635\u0631\u0641 *"}),(0,Qe.jsx)("textarea",{value:S.disposalReason,onChange:e=>k(Be(Be({},S),{},{disposalReason:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0627\u0644\u0633\u0628\u0628 \u0641\u064a \u0627\u0644\u062a\u0635\u0631\u0641...",required:!0})]}),"sale"===S.disposalMethod&&(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u062a\u0631\u064a"}),(0,Qe.jsx)("input",{type:"text",value:S.buyerName,onChange:e=>k(Be(Be({},S),{},{buyerName:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u062a\u0631\u064a \u0623\u0648 \u0627\u0644\u0634\u0631\u0643\u0629..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u062a\u0635\u0627\u0644"}),(0,Qe.jsx)("input",{type:"text",value:S.buyerContact,onChange:e=>k(Be(Be({},S),{},{buyerContact:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0623\u0648 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a..."})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647 \u0645\u0646"}),(0,Qe.jsx)("input",{type:"text",value:S.approvedBy,onChange:e=>k(Be(Be({},S),{},{approvedBy:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0624\u0648\u0644..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:S.disposalNotes,onChange:e=>k(Be(Be({},S),{},{disposalNotes:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>m(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!S.assetId||!S.disposalMethod||!S.disposalDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const e=s.find(e=>e.id===S.assetId);if(!e)return void alert("\u0627\u0644\u0623\u0635\u0644 \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const t=Be(Be({},S),{},{id:Date.now().toString(),disposalValue:parseFloat(S.disposalValue)||0,status:"pending",createdAt:(new Date).toISOString()});l(t),c(e.id,{status:"transfer"===S.disposalMethod?"Transferred":"Disposed"}),m(!1),k({assetId:"",disposalMethod:"sale",disposalDate:(new Date).toISOString().split("T")[0],disposalValue:"",disposalReason:"",buyerName:"",buyerContact:"",disposalNotes:"",approvedBy:"",approvalDate:""})},children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062a\u0635\u0631\u0641"})]})]})}),(0,Qe.jsx)(ga,{isOpen:h,onClose:()=>p(!1),title:"\u0646\u0642\u0644 \u0623\u0635\u0644",size:"lg",children:(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0623\u0635\u0644 *"}),(0,Qe.jsxs)("select",{value:C.assetId,onChange:e=>{I(Be(Be({},C),{},{assetId:e.target.value}));const t=s.find(t=>t.id===e.target.value);t&&I(Be(Be({},C),{},{assetId:e.target.value,fromLocationId:t.locationId||""}))},className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644"}),s.filter(e=>"Active"===e.status).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0642\u0644 *"}),(0,Qe.jsx)("input",{type:"date",value:C.transferDate,onChange:e=>I(Be(Be({},C),{},{transferDate:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsxs)("select",{value:C.fromLocationId,onChange:e=>I(Be(Be({},C),{},{fromLocationId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 bg-gray-50",disabled:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0623\u0635\u0644 \u0623\u0648\u0644\u0627\u064b"}),a.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062c\u062f\u064a\u062f *"}),(0,Qe.jsxs)("select",{value:C.toLocationId,onChange:e=>I(Be(Be({},C),{},{toLocationId:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0648\u0642\u0639"}),a.filter(e=>e.id!==C.fromLocationId).map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0633\u0628\u0628 \u0627\u0644\u0646\u0642\u0644 *"}),(0,Qe.jsx)("textarea",{value:C.transferReason,onChange:e=>I(Be(Be({},C),{},{transferReason:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0627\u0644\u0633\u0628\u0628 \u0641\u064a \u0646\u0642\u0644 \u0627\u0644\u0623\u0635\u0644...",required:!0})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0646\u0642\u0648\u0644 \u0628\u0648\u0627\u0633\u0637\u0629"}),(0,Qe.jsx)("input",{type:"text",value:C.transferredBy,onChange:e=>I(Be(Be({},C),{},{transferredBy:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0639\u0646 \u0627\u0644\u0646\u0642\u0644..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0633\u062a\u0644\u0645 \u0628\u0648\u0627\u0633\u0637\u0629"}),(0,Qe.jsx)("input",{type:"text",value:C.receivedBy,onChange:e=>I(Be(Be({},C),{},{receivedBy:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644..."})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0627\u0644\u0646\u0642\u0644"}),(0,Qe.jsx)("textarea",{value:C.transferNotes,onChange:e=>I(Be(Be({},C),{},{transferNotes:e.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2",rows:2,placeholder:"\u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062d\u0648\u0644 \u0627\u0644\u0646\u0642\u0644..."})]}),(0,Qe.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Qe.jsx)(ra,{variant:"outline",onClick:()=>p(!1),children:"\u0625\u0644\u063a\u0627\u0621"}),(0,Qe.jsx)(ra,{onClick:()=>{if(!C.assetId||!C.fromLocationId||!C.toLocationId||!C.transferDate)return void alert("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");if(C.fromLocationId===C.toLocationId)return void alert("\u0627\u0644\u0645\u0648\u0642\u0639 \u0627\u0644\u062d\u0627\u0644\u064a \u0648\u0627\u0644\u0648\u062c\u0647\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646\u0627 \u0645\u062e\u062a\u0644\u0641\u064a\u0646");const e=Be(Be({},C),{},{id:Date.now().toString(),status:"completed",createdAt:(new Date).toISOString()});i(e),c(C.assetId,{locationId:C.toLocationId}),p(!1),I({assetId:"",fromLocationId:"",toLocationId:"",transferDate:(new Date).toISOString().split("T")[0],transferReason:"",transferredBy:"",receivedBy:"",transferNotes:""})},children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0646\u0642\u0644"})]})]})}),(0,Qe.jsx)(ga,{isOpen:g,onClose:()=>f(!1),title:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0635\u0631\u0641",size:"lg",children:d&&(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062a\u0635\u0631\u0641"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0623\u0635\u0644:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:(null===(e=s.find(e=>e.id===d.assetId))||void 0===e?void 0:e.name)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062a\u0635\u0631\u0641:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"sale"===d.disposalMethod?"\u0628\u064a\u0639":"donation"===d.disposalMethod?"\u062a\u0628\u0631\u0639":"scrap"===d.disposalMethod?"\u062e\u0631\u062f\u0629":"write-off"===d.disposalMethod?"\u0634\u0637\u0628":d.disposalMethod})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0635\u0631\u0641:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:new Date(d.disposalDate).toLocaleDateString("ar-SA")})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0642\u064a\u0645\u0629 \u0627\u0644\u062a\u0635\u0631\u0641:"}),(0,Qe.jsxs)("span",{className:"mr-2 font-medium",children:[(null===(t=d.disposalValue)||void 0===t?void 0:t.toLocaleString())||0," \u0631\u064a\u0627\u0644"]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:"pending"===d.status?"\u0645\u0639\u0644\u0642":"approved"===d.status?"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647":"completed"===d.status?"\u0645\u0643\u062a\u0645\u0644":"cancelled"===d.status?"\u0645\u0644\u063a\u064a":d.status})]}),d.buyerName&&(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0634\u062a\u0631\u064a:"}),(0,Qe.jsx)("span",{className:"mr-2 font-medium",children:d.buyerName})]})]})]})}),(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0633\u0628\u0628 \u0627\u0644\u062a\u0635\u0631\u0641"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:d.disposalReason})]})}),d.disposalNotes&&(0,Qe.jsx)(aa,{children:(0,Qe.jsxs)("div",{className:"p-4",children:[(0,Qe.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-sm text-gray-600",children:d.disposalNotes})]})}),(0,Qe.jsx)("div",{className:"flex justify-end pt-4",children:(0,Qe.jsx)(ra,{onClick:()=>f(!1),children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})},dn=()=>(0,Qe.jsx)(cn,{}),xn=()=>{const{products:e,warehouses:t}=Ye(),{showWarning:s,showSuccess:a}=Ke(),[n,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),v=e.filter(e=>{var t;return e.name.toLowerCase().includes(c.toLowerCase())||(null===(t=e.barcode)||void 0===t?void 0:t.includes(c))});return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-emerald-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(Bt,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0642\u064a\u064a\u0645 \u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(ks,{className:"text-green-500"}),"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c"]}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none transition-all"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),c&&(0,Qe.jsx)("div",{className:"mt-4 max-h-64 overflow-y-auto border-2 border-gray-200 rounded-xl",children:v.length>0?v.map(e=>(0,Qe.jsxs)("button",{onClick:()=>(e=>{l(e),u(e.costPrice||""),h(e.salePrice||""),d("")})(e),className:"w-full p-4 hover:bg-green-50 transition-colors text-right border-b last:border-b-0 flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,Qe.jsxs)("div",{className:"text-sm text-gray-500",children:["\u062a\u0643\u0644\u0641\u0629: ",e.costPrice," | \u0628\u064a\u0639: ",e.salePrice]})]}),(0,Qe.jsx)(js,{className:"text-green-500"})]},e.id)):(0,Qe.jsx)("div",{className:"p-8 text-center text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})})]}),n&&(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n||!p)return void s("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const t={type:"value_adjustment",productId:n.id,warehouseId:i,oldCostPrice:n.costPrice,newCostPrice:parseFloat(x),oldSalePrice:n.salePrice,newSalePrice:parseFloat(m),reason:p,notes:f,date:(new Date).toISOString()};console.log("\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629:",t),a("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629 \u0628\u0646\u062c\u0627\u062d"),l(null),o(""),u(""),h(""),g(""),b("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-3",children:"\u0627\u0644\u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0633\u0639\u0631 \u0627\u0644\u062a\u0643\u0644\u0641\u0629:"}),(0,Qe.jsx)("div",{className:"text-xl font-bold text-blue-600",children:n.costPrice})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639:"}),(0,Qe.jsx)("div",{className:"text-xl font-bold text-blue-600",children:n.salePrice})]})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0633\u0639\u0631 \u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("input",{type:"number",value:x,onChange:e=>u(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0633\u0639\u0631 \u0627\u0644\u062a\u0643\u0644\u0641\u0629 \u0627\u0644\u062c\u062f\u064a\u062f..."})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 \u0627\u0644\u062c\u062f\u064a\u062f"}),(0,Qe.jsx)("input",{type:"number",value:m,onChange:e=>h(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0633\u0639\u0631 \u0627\u0644\u0628\u064a\u0639 \u0627\u0644\u062c\u062f\u064a\u062f..."})]}),x&&m&&(0,Qe.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d \u0627\u0644\u062c\u062f\u064a\u062f:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:[((parseFloat(m)-parseFloat(x))/parseFloat(x)*100).toFixed(2),"%"]})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Xs,{className:"inline ml-2 text-green-500"}),"\u0627\u0644\u0645\u062e\u0632\u0646 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"]}),(0,Qe.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none",children:[(0,Qe.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0633\u0628\u0628 *"}),(0,Qe.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"\u0625\u0639\u0627\u062f\u0629_\u062a\u0642\u064a\u064a\u0645",children:"\u0625\u0639\u0627\u062f\u0629 \u062a\u0642\u064a\u064a\u0645"}),(0,Qe.jsx)("option",{value:"\u062a\u063a\u064a\u0631_\u0633\u0639\u0631_\u0627\u0644\u0633\u0648\u0642",children:"\u062a\u063a\u064a\u0631 \u0633\u0639\u0631 \u0627\u0644\u0633\u0648\u0642"}),(0,Qe.jsx)("option",{value:"\u062a\u0635\u062d\u064a\u062d_\u062e\u0637\u0623",children:"\u062a\u0635\u062d\u064a\u062d \u062e\u0637\u0623"}),(0,Qe.jsx)("option",{value:"\u0639\u0631\u0636_\u062e\u0627\u0635",children:"\u0639\u0631\u0636 \u062e\u0627\u0635"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:f,onChange:e=>b(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-4 rounded-xl font-bold hover:from-green-600 hover:to-green-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})]}),(0,Qe.jsx)("div",{className:"space-y-6",children:(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcdd \u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0633\u062a\u062e\u062f\u0645 \u0644\u0625\u0639\u0627\u062f\u0629 \u062a\u0642\u064a\u064a\u0645 \u0623\u0633\u0639\u0627\u0631 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u0645\u0643\u0646 \u062a\u0637\u0628\u064a\u0642\u0647\u0627 \u0639\u0644\u0649 \u0645\u062e\u0632\u0646 \u0645\u062d\u062f\u062f \u0623\u0648 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062e\u0627\u0632\u0646"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062d\u0633\u0627\u0628 \u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b"})]})]})]})})]})]})})},un=()=>{const{products:e,warehouses:t}=Ye(),{showWarning:s,showSuccess:a}=Ke(),[n,l]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[x,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),f=e.filter(e=>{var t;return e.name.toLowerCase().includes(c.toLowerCase())||(null===(t=e.barcode)||void 0===t?void 0:t.includes(c))}),b=()=>{var e;return n&&i&&(null===(e=n.stock)||void 0===e?void 0:e[i])||0};return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-orange-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(Os,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u0634\u0637\u0628 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u0641\u0629 \u0623\u0648 \u0627\u0644\u0645\u0646\u062a\u0647\u064a\u0629 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(ks,{className:"text-red-500"}),"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c"]}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0627\u0644\u0628\u0627\u0631\u0643\u0648\u062f...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none transition-all"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),c&&(0,Qe.jsx)("div",{className:"mt-4 max-h-64 overflow-y-auto border-2 border-gray-200 rounded-xl",children:f.length>0?f.map(e=>(0,Qe.jsxs)("button",{onClick:()=>(e=>{l(e),d("")})(e),className:"w-full p-4 hover:bg-red-50 transition-colors text-right border-b last:border-b-0 flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.barcode})]}),(0,Qe.jsx)(js,{className:"text-red-500"})]},e.id)):(0,Qe.jsx)("div",{className:"p-8 text-center text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})})]}),n&&(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n||!i||!x||!m)return void s("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const t=parseFloat(x);if(t<=0)return void s("\u0627\u0644\u0643\u0645\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0635\u0641\u0631");if(t>b())return void s("\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0634\u0637\u0628\u0647\u0627 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629");const r={type:"damaged_writeoff",productId:n.id,warehouseId:i,quantity:t,damageType:m,notes:p,date:(new Date).toISOString()};console.log("\u0634\u0637\u0628 \u062a\u0627\u0644\u0641:",r),a("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u0634\u0637\u0628 \u0627\u0644\u062a\u0627\u0644\u0641 \u0628\u0646\u062c\u0627\u062d"),l(null),o(""),u(""),h(""),g("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0634\u0637\u0628"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-2",children:"\u0627\u0644\u0645\u0646\u062a\u062c \u0627\u0644\u0645\u062d\u062f\u062f"}),(0,Qe.jsx)("div",{className:"text-gray-700",children:n.name})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Xs,{className:"inline ml-2 text-red-500"}),"\u0627\u0644\u0645\u062e\u0632\u0646 *"]}),(0,Qe.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062e\u0632\u0646..."}),t.map(e=>(0,Qe.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),i&&(0,Qe.jsx)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629:"}),(0,Qe.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:b()})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0634\u0637\u0628\u0647\u0627 *"}),(0,Qe.jsx)("input",{type:"number",value:x,onChange:e=>u(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0645\u064a\u0629...",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0644\u0641 *"}),(0,Qe.jsxs)("select",{value:m,onChange:e=>h(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u062a\u0644\u0641..."}),(0,Qe.jsx)("option",{value:"\u0645\u0646\u062a\u0647\u064a_\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",children:"\u0645\u0646\u062a\u0647\u064a \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629"}),(0,Qe.jsx)("option",{value:"\u062a\u0644\u0641_\u0623\u062b\u0646\u0627\u0621_\u0627\u0644\u062a\u062e\u0632\u064a\u0646",children:"\u062a\u0644\u0641 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u062a\u062e\u0632\u064a\u0646"}),(0,Qe.jsx)("option",{value:"\u062a\u0644\u0641_\u0623\u062b\u0646\u0627\u0621_\u0627\u0644\u0646\u0642\u0644",children:"\u062a\u0644\u0641 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u0646\u0642\u0644"}),(0,Qe.jsx)("option",{value:"\u0639\u0637\u0628_\u0641\u064a_\u0627\u0644\u062a\u0635\u0646\u064a\u0639",children:"\u0639\u0637\u0628 \u0641\u064a \u0627\u0644\u062a\u0635\u0646\u064a\u0639"}),(0,Qe.jsx)("option",{value:"\u062a\u0644\u0641_\u062c\u0632\u0626\u064a",children:"\u062a\u0644\u0641 \u062c\u0632\u0626\u064a"}),(0,Qe.jsx)("option",{value:"\u063a\u064a\u0631_\u0635\u0627\u0644\u062d_\u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645",children:"\u063a\u064a\u0631 \u0635\u0627\u0644\u062d \u0644\u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),i&&x&&parseFloat(x)>b()&&(0,Qe.jsxs)("div",{className:"bg-red-100 border-2 border-red-300 rounded-xl p-4 flex items-center gap-2 text-red-700",children:[(0,Qe.jsx)(Ut,{className:"text-xl"}),(0,Qe.jsx)("span",{className:"font-semibold",children:"\u062a\u062d\u0630\u064a\u0631: \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 \u0634\u0637\u0628\u0647\u0627 \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0643\u0645\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0641\u0631\u0629!"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:p,onChange:e=>g(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-red-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u062d\u0648\u0644 \u0627\u0644\u062a\u0644\u0641..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-red-500 to-red-600 text-white py-4 rounded-xl font-bold hover:from-red-600 hover:to-red-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0634\u0637\u0628"]})]})]})]}),(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-2xl shadow-lg p-6 border-2 border-amber-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u26a0\ufe0f \u062a\u0646\u0628\u064a\u0647\u0627\u062a \u0645\u0647\u0645\u0629"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0634\u0637\u0628 \u0646\u0647\u0627\u0626\u064a\u0629 \u0648\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647\u0627"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0623\u0643\u062f \u0645\u0646 \u0641\u062d\u0635 \u0627\u0644\u0645\u0646\u062a\u062c \u0642\u0628\u0644 \u0627\u0644\u0634\u0637\u0628"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062d\u062f\u062f \u0646\u0648\u0639 \u0627\u0644\u062a\u0644\u0641 \u0628\u062f\u0642\u0629 \u0644\u0644\u062a\u0642\u0627\u0631\u064a\u0631"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062e\u0635\u0645 \u0627\u0644\u0643\u0645\u064a\u0629 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b \u0645\u0646 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udccb \u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062c\u0645\u064a\u0639 \u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u0634\u0637\u0628 \u0641\u064a \u0627\u0644\u0633\u062c\u0644"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u0645\u0643\u0646 \u0639\u0631\u0636 \u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0634\u0637\u0628 \u0644\u0627\u062d\u0642\u0627\u064b"})]})]})]})]})]})]})})},mn=()=>{const{customers:e}=Ye(),{showWarning:t,showSuccess:s}=Ke(),[a,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("add"),[d,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),g=e.filter(e=>{var t;return e.name.toLowerCase().includes(l.toLowerCase())||(null===(t=e.phone)||void 0===t?void 0:t.includes(l))}),f=()=>(null===a||void 0===a?void 0:a.balance)||0,b=()=>{const e=f(),t=parseFloat(d)||0;return"add"===o?e+t:e-t};return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-cyan-50 via-white to-blue-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(Ws,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u062a\u0635\u062d\u064a\u062d \u0623\u0631\u0635\u062f\u0629 \u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(ks,{className:"text-cyan-500"}),"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0639\u0645\u064a\u0644"]}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:outline-none transition-all"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),l&&(0,Qe.jsx)("div",{className:"mt-4 max-h-64 overflow-y-auto border-2 border-gray-200 rounded-xl",children:g.length>0?g.map(e=>(0,Qe.jsx)("button",{onClick:()=>(e=>{n(e),i("")})(e),className:"w-full p-4 hover:bg-cyan-50 transition-colors text-right border-b last:border-b-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsxs)("div",{className:"font-bold ".concat(e.balance>=0?"text-green-600":"text-red-600"),children:[e.balance," \u0631.\u0633"]})]})]})},e.id)):(0,Qe.jsx)("div",{className:"p-8 text-center text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})})]}),a&&(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a||!d||!u)return void t("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const r={type:"customer_balance_adjustment",customerId:a.id,adjustmentType:o,amount:parseFloat(d),oldBalance:f(),newBalance:b(),reason:u,notes:h,date:(new Date).toISOString()};console.log("\u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0639\u0645\u064a\u0644:",r),s("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0627\u0644\u0639\u0645\u064a\u0644 \u0628\u0646\u062c\u0627\u062d"),n(null),x(""),m(""),p("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-cyan-50 border-2 border-cyan-200 rounded-xl p-4",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u064a\u0644"}),(0,Qe.jsxs)("div",{className:"space-y-2",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("span",{className:"font-semibold",children:a.name})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("span",{className:"font-semibold",children:a.phone})]})]})]}),(0,Qe.jsx)("div",{className:"border-2 rounded-xl p-4 ".concat(f()>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold ".concat(f()>=0?"text-green-600":"text-red-600"),children:[f()," \u0631.\u0633"]})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 *"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>c("add"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("add"===o?"bg-green-500 border-green-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-green-500"),children:"\u0625\u0636\u0627\u0641\u0629 (+)"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>c("deduct"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("deduct"===o?"bg-red-500 border-red-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-red-500"),children:"\u062e\u0635\u0645 (-)"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Bt,{className:"inline ml-2 text-cyan-500"}),"\u0627\u0644\u0645\u0628\u0644\u063a *"]}),(0,Qe.jsx)("input",{type:"number",value:d,onChange:e=>x(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0628\u0644\u063a...",required:!0})]}),d&&(0,Qe.jsx)("div",{className:"rounded-xl p-4 border-2 ".concat(b()>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062c\u062f\u064a\u062f:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold ".concat(b()>=0?"text-green-600":"text-red-600"),children:[b()," \u0631.\u0633"]})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0633\u0628\u0628 *"}),(0,Qe.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"\u062a\u0635\u062d\u064a\u062d_\u062e\u0637\u0623",children:"\u062a\u0635\u062d\u064a\u062d \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("option",{value:"\u062f\u064a\u0648\u0646_\u0645\u0639\u062f\u0648\u0645\u0629",children:"\u0634\u0637\u0628 \u062f\u064a\u0648\u0646 \u0645\u0639\u062f\u0648\u0645\u0629"}),(0,Qe.jsx)("option",{value:"\u062e\u0635\u0645_\u062e\u0627\u0635",children:"\u062e\u0635\u0645 \u062e\u0627\u0635"}),(0,Qe.jsx)("option",{value:"\u0645\u0643\u0627\u0641\u0623\u0629",children:"\u0645\u0643\u0627\u0641\u0623\u0629 \u0623\u0648 \u062d\u0627\u0641\u0632"}),(0,Qe.jsx)("option",{value:"\u062a\u0633\u0648\u064a\u0629_\u0646\u0632\u0627\u0639",children:"\u062a\u0633\u0648\u064a\u0629 \u0646\u0632\u0627\u0639"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-cyan-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-cyan-500 to-cyan-600 text-white py-4 rounded-xl font-bold hover:from-cyan-600 hover:to-cyan-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})]}),(0,Qe.jsx)("div",{className:"space-y-6",children:(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcdd \u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0633\u062a\u062e\u062f\u0645 \u0644\u062a\u0635\u062d\u064a\u062d \u0623\u0631\u0635\u062f\u0629 \u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0639\u0645\u0644\u0627\u0621"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a \u0641\u064a \u0627\u0644\u0633\u062c\u0644"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0625\u064a\u062c\u0627\u0628\u064a \u064a\u0639\u0646\u064a \u062f\u064a\u0646 \u0644\u0644\u0639\u0645\u064a\u0644"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0633\u0644\u0628\u064a \u064a\u0639\u0646\u064a \u062f\u064a\u0646 \u0639\u0644\u0649 \u0627\u0644\u0639\u0645\u064a\u0644"})]})]})]})})]})]})})},hn=()=>{const{suppliers:e}=Ye(),{showWarning:t,showSuccess:s}=Ke(),[a,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(""),[o,c]=(0,r.useState)("add"),[d,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),g=e.filter(e=>{var t;return e.name.toLowerCase().includes(l.toLowerCase())||(null===(t=e.phone)||void 0===t?void 0:t.includes(l))}),f=()=>(null===a||void 0===a?void 0:a.balance)||0,b=()=>{const e=f(),t=parseFloat(d)||0;return"add"===o?e+t:e-t};return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(Fs,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u0633\u0648\u064a\u0629 \u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u062a\u0635\u062d\u064a\u062d \u0623\u0631\u0635\u062f\u0629 \u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(ks,{className:"text-indigo-500"}),"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0648\u0631\u062f"]}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none transition-all"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]}),l&&(0,Qe.jsx)("div",{className:"mt-4 max-h-64 overflow-y-auto border-2 border-gray-200 rounded-xl",children:g.length>0?g.map(e=>(0,Qe.jsx)("button",{onClick:()=>(e=>{n(e),i("")})(e),className:"w-full p-4 hover:bg-indigo-50 transition-colors text-right border-b last:border-b-0",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"font-semibold text-gray-800",children:e.name}),(0,Qe.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})]}),(0,Qe.jsxs)("div",{className:"text-right",children:[(0,Qe.jsx)("div",{className:"text-xs text-gray-500",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsxs)("div",{className:"font-bold ".concat(e.balance>=0?"text-red-600":"text-green-600"),children:[e.balance," \u0631.\u0633"]})]})]})},e.id)):(0,Qe.jsx)("div",{className:"p-8 text-center text-gray-400",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})})]}),a&&(0,Qe.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a||!d||!u)return void t("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const r={type:"supplier_balance_adjustment",supplierId:a.id,adjustmentType:o,amount:parseFloat(d),oldBalance:f(),newBalance:b(),reason:u,notes:h,date:(new Date).toISOString()};console.log("\u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0645\u0648\u0631\u062f:",r),s("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0627\u0644\u0645\u0648\u0631\u062f \u0628\u0646\u062c\u0627\u062d"),n(null),x(""),m(""),p("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsxs)("div",{className:"bg-indigo-50 border-2 border-indigo-200 rounded-xl p-4",children:[(0,Qe.jsx)("h4",{className:"font-bold text-gray-800 mb-3",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f"}),(0,Qe.jsxs)("div",{className:"space-y-2",children:[(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,Qe.jsx)("span",{className:"font-semibold",children:a.name})]}),(0,Qe.jsxs)("div",{className:"flex justify-between",children:[(0,Qe.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,Qe.jsx)("span",{className:"font-semibold",children:a.phone})]})]})]}),(0,Qe.jsxs)("div",{className:"border-2 rounded-xl p-4 ".concat(f()>=0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold ".concat(f()>=0?"text-red-600":"text-green-600"),children:[f()," \u0631.\u0633"]})]}),(0,Qe.jsx)("div",{className:"text-xs text-gray-500 mt-2",children:f()>=0?"\u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627 \u0644\u0644\u0645\u0648\u0631\u062f":"\u062f\u064a\u0646 \u0644\u0646\u0627 \u0639\u0644\u0649 \u0627\u0644\u0645\u0648\u0631\u062f"})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 *"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>c("add"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("add"===o?"bg-green-500 border-green-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-green-500"),children:"\u0625\u0636\u0627\u0641\u0629 (+)"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>c("deduct"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("deduct"===o?"bg-red-500 border-red-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-red-500"),children:"\u062e\u0635\u0645 (-)"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Bt,{className:"inline ml-2 text-indigo-500"}),"\u0627\u0644\u0645\u0628\u0644\u063a *"]}),(0,Qe.jsx)("input",{type:"number",value:d,onChange:e=>x(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0628\u0644\u063a...",required:!0})]}),d&&(0,Qe.jsx)("div",{className:"rounded-xl p-4 border-2 ".concat(b()>=0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"),children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062c\u062f\u064a\u062f:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold ".concat(b()>=0?"text-red-600":"text-green-600"),children:[b()," \u0631.\u0633"]})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0633\u0628\u0628 *"}),(0,Qe.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"\u062a\u0635\u062d\u064a\u062d_\u062e\u0637\u0623",children:"\u062a\u0635\u062d\u064a\u062d \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0631\u0635\u064a\u062f"}),(0,Qe.jsx)("option",{value:"\u062f\u064a\u0648\u0646_\u0645\u0639\u062f\u0648\u0645\u0629",children:"\u0634\u0637\u0628 \u062f\u064a\u0648\u0646 \u0645\u0639\u062f\u0648\u0645\u0629"}),(0,Qe.jsx)("option",{value:"\u062e\u0635\u0645_\u062e\u0627\u0635",children:"\u062e\u0635\u0645 \u062e\u0627\u0635"}),(0,Qe.jsx)("option",{value:"\u0645\u0643\u0627\u0641\u0623\u0629",children:"\u0645\u0643\u0627\u0641\u0623\u0629 \u0623\u0648 \u062d\u0627\u0641\u0632"}),(0,Qe.jsx)("option",{value:"\u062a\u0633\u0648\u064a\u0629_\u0646\u0632\u0627\u0639",children:"\u062a\u0633\u0648\u064a\u0629 \u0646\u0632\u0627\u0639"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:h,onChange:e=>p(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-500 to-indigo-600 text-white py-4 rounded-xl font-bold hover:from-indigo-600 hover:to-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})]}),(0,Qe.jsx)("div",{className:"space-y-6",children:(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcdd \u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0633\u062a\u062e\u062f\u0645 \u0644\u062a\u0635\u062d\u064a\u062d \u0623\u0631\u0635\u062f\u0629 \u062d\u0633\u0627\u0628\u0627\u062a \u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0625\u064a\u062c\u0627\u0628\u064a \u064a\u0639\u0646\u064a \u062f\u064a\u0646 \u0639\u0644\u064a\u0646\u0627"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0633\u0644\u0628\u064a \u064a\u0639\u0646\u064a \u062f\u064a\u0646 \u0644\u0646\u0627"})]})]})]})})]})]})})},pn=()=>{const{showWarning:e,showSuccess:t}=Ke(),[s,a]=(0,r.useState)("add"),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[x]=(0,r.useState)(5e4),u=()=>{const e=parseFloat(n)||0;return"add"===s?x+e:x-e};return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 via-white to-amber-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(hs,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u062e\u0632\u064a\u0646\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u062a\u0635\u062d\u064a\u062d \u0631\u0635\u064a\u062f \u0627\u0644\u062e\u0632\u064a\u0646\u0629"})]})]})}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qe.jsx)("div",{className:"lg:col-span-2",children:(0,Qe.jsxs)("form",{onSubmit:a=>{if(a.preventDefault(),!n||!i)return void e("\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629");const r={type:"treasury_adjustment",adjustmentType:s,amount:parseFloat(n),oldBalance:x,newBalance:u(),reason:i,notes:c,date:(new Date).toISOString()};console.log("\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629:",r),t("\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0628\u0646\u062c\u0627\u062d"),l(""),o(""),d("")},className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-6",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsxs)("div",{className:"space-y-4",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-2 border-blue-200 rounded-xl p-6",children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"\u0631\u0635\u064a\u062f \u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,Qe.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[x.toLocaleString()," \u0631.\u0633"]})]}),(0,Qe.jsx)(hs,{className:"text-5xl text-blue-300"})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0629 *"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qe.jsx)("button",{type:"button",onClick:()=>a("add"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("add"===s?"bg-green-500 border-green-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-green-500"),children:"\u0625\u0636\u0627\u0641\u0629 (+)"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>a("deduct"),className:"p-4 rounded-xl border-2 font-semibold transition-all ".concat("deduct"===s?"bg-red-500 border-red-500 text-white shadow-lg":"bg-white border-gray-200 text-gray-700 hover:border-red-500"),children:"\u062e\u0635\u0645 (-)"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsxs)("label",{className:"block text-gray-700 font-semibold mb-2",children:[(0,Qe.jsx)(Bt,{className:"inline ml-2 text-yellow-500"}),"\u0627\u0644\u0645\u0628\u0644\u063a *"]}),(0,Qe.jsx)("input",{type:"number",value:n,onChange:e=>l(e.target.value),min:"0",step:"0.01",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0628\u0644\u063a...",required:!0})]}),n&&(0,Qe.jsx)("div",{className:"rounded-xl p-4 border-2 ".concat(u()>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:(0,Qe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qe.jsx)("span",{className:"text-gray-700 font-semibold",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0628\u0639\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629:"}),(0,Qe.jsxs)("span",{className:"text-2xl font-bold ".concat(u()>=0?"text-green-600":"text-red-600"),children:[u().toLocaleString()," \u0631.\u0633"]})]})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u0633\u0628\u0628 *"}),(0,Qe.jsxs)("select",{value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none",required:!0,children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0633\u0628\u0628..."}),(0,Qe.jsx)("option",{value:"\u062c\u0631\u062f_\u064a\u0648\u0645\u064a",children:"\u062c\u0631\u062f \u064a\u0648\u0645\u064a"}),(0,Qe.jsx)("option",{value:"\u0641\u0631\u0642_\u0639\u062f",children:"\u0641\u0631\u0642 \u0641\u064a \u0627\u0644\u0639\u062f"}),(0,Qe.jsx)("option",{value:"\u0645\u0635\u0631\u0648\u0641\u0627\u062a_\u063a\u064a\u0631_\u0645\u0633\u062c\u0644\u0629",children:"\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u063a\u064a\u0631 \u0645\u0633\u062c\u0644\u0629"}),(0,Qe.jsx)("option",{value:"\u0625\u064a\u0631\u0627\u062f\u0627\u062a_\u063a\u064a\u0631_\u0645\u0633\u062c\u0644\u0629",children:"\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u063a\u064a\u0631 \u0645\u0633\u062c\u0644\u0629"}),(0,Qe.jsx)("option",{value:"\u062a\u0635\u062d\u064a\u062d_\u062e\u0637\u0623_\u0625\u062f\u062e\u0627\u0644",children:"\u062a\u0635\u062d\u064a\u062d \u062e\u0637\u0623 \u0625\u062f\u062e\u0627\u0644"}),(0,Qe.jsx)("option",{value:"\u0641\u0642\u062f\u0627\u0646_\u0623\u0648_\u0633\u0631\u0642\u0629",children:"\u0641\u0642\u062f\u0627\u0646 \u0623\u0648 \u0633\u0631\u0642\u0629"}),(0,Qe.jsx)("option",{value:"\u0631\u0623\u0633_\u0645\u0627\u0644_\u0625\u0636\u0627\u0641\u064a",children:"\u0631\u0623\u0633 \u0645\u0627\u0644 \u0625\u0636\u0627\u0641\u064a"}),(0,Qe.jsx)("option",{value:"\u0622\u062e\u0631",children:"\u0633\u0628\u0628 \u0622\u062e\u0631"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062a\u0641\u0635\u064a\u0644\u064a\u0629"}),(0,Qe.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:"4",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-yellow-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062a\u0641\u0635\u064a\u0644\u064a\u0629 \u062d\u0648\u0644 \u0633\u0628\u0628 \u0627\u0644\u062a\u0633\u0648\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",className:"w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white py-4 rounded-xl font-bold hover:from-yellow-600 hover:to-yellow-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})}),(0,Qe.jsxs)("div",{className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-white rounded-2xl shadow-lg p-6 border-2 border-amber-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u26a0\ufe0f \u062a\u0646\u0628\u064a\u0647\u0627\u062a \u0645\u0647\u0645\u0629"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062c\u0628 \u0639\u0645\u0644 \u062c\u0631\u062f \u064a\u0648\u0645\u064a \u0644\u0644\u062e\u0632\u064a\u0646\u0629"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u0641\u0639\u0644\u064a \u0642\u0628\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0629"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0627\u0644\u062a\u0633\u0648\u064a\u0629 \u0646\u0647\u0627\u0626\u064a\u0629 \u0648\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647\u0627"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-amber-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u062a\u0641\u0635\u064a\u0644\u064a\u0629 \u0644\u0644\u062a\u0648\u062b\u064a\u0642"})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-white rounded-2xl shadow-lg p-6 border-2 border-blue-200",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcdd \u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,Qe.jsxs)("ul",{className:"space-y-3 text-sm text-gray-600",children:[(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u062a\u0645 \u062a\u0633\u062c\u064a\u0644 \u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a \u0641\u064a \u0627\u0644\u0633\u062c\u0644"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u064a\u0645\u0643\u0646 \u0639\u0631\u0636 \u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"})]}),(0,Qe.jsxs)("li",{className:"flex items-start gap-2",children:[(0,Qe.jsx)("span",{className:"text-blue-500 mt-1",children:"\u2022"}),(0,Qe.jsx)("span",{children:"\u062a\u0638\u0647\u0631 \u0641\u064a \u062a\u0642\u0631\u064a\u0631 \u062d\u0631\u0643\u0629 \u0627\u0644\u062e\u0632\u064a\u0646\u0629"})]})]})]})]})]})]})})},gn=()=>{const{showWarning:e,showSuccess:t}=Ke(),[s,a]=(0,r.useState)([{id:1,account:"",debit:"",credit:"",description:""}]),[n,l]=(0,r.useState)((new Date).toISOString().split("T")[0]),[i,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),x=(e,t,r)=>{a(s.map(s=>s.id===e?Be(Be({},s),{},{[t]:r}):s))},u=()=>s.reduce((e,t)=>e+(parseFloat(t.debit)||0),0),m=()=>s.reduce((e,t)=>e+(parseFloat(t.credit)||0),0),h=()=>Math.abs(u()-m())<.01;return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-gray-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-slate-600 to-slate-700 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(Zt,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0642\u064a\u0648\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u0642\u064a\u0648\u062f \u0645\u062d\u0627\u0633\u0628\u064a\u0629 \u0644\u0644\u062a\u0633\u0648\u064a\u0627\u062a"})]})]})}),(0,Qe.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),!h())return void e("\u0627\u0644\u0642\u064a\u062f \u063a\u064a\u0631 \u0645\u062a\u0648\u0627\u0632\u0646! \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u0645\u062f\u064a\u0646 \u0645\u0633\u0627\u0648\u064a\u0627\u064b \u0644\u0645\u062c\u0645\u0648\u0639 \u0627\u0644\u062f\u0627\u0626\u0646");const l={type:"adjustment_entry",date:n,description:i,notes:c,entries:s.filter(e=>e.account&&(e.debit||e.credit)),totalDebit:u(),totalCredit:m(),createdAt:(new Date).toISOString()};console.log("\u0642\u064a\u062f \u062a\u0633\u0648\u064a\u0629:",l),t("\u062a\u0645 \u062d\u0641\u0638 \u0642\u064a\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629 \u0628\u0646\u062c\u0627\u062d"),a([{id:1,account:"",debit:"",credit:"",description:""}]),o(""),d("")},className:"space-y-6",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0642\u064a\u062f"}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e *"}),(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-slate-500 focus:outline-none",required:!0})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0648\u0635\u0641 \u0627\u0644\u0642\u064a\u062f *"}),(0,Qe.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-slate-500 focus:outline-none",placeholder:"\u0623\u062f\u062e\u0644 \u0648\u0635\u0641 \u0627\u0644\u0642\u064a\u062f...",required:!0})]})]})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0642\u064a\u062f"}),(0,Qe.jsxs)("button",{type:"button",onClick:()=>{const e={id:s.length+1,account:"",debit:"",credit:"",description:""};a([...s,e])},className:"flex items-center gap-2 px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:[(0,Qe.jsx)(js,{}),"\u0625\u0636\u0627\u0641\u0629 \u0633\u0637\u0631"]})]}),(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{children:(0,Qe.jsxs)("tr",{className:"bg-slate-100 text-gray-700",children:[(0,Qe.jsx)("th",{className:"px-4 py-3 text-center rounded-tr-lg",children:"#"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right",children:"\u0627\u0644\u062d\u0633\u0627\u0628"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right",children:"\u0627\u0644\u0628\u064a\u0627\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right",children:"\u0645\u062f\u064a\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-right",children:"\u062f\u0627\u0626\u0646"}),(0,Qe.jsx)("th",{className:"px-4 py-3 text-center rounded-tl-lg",children:"\u0625\u062c\u0631\u0627\u0621"})]})}),(0,Qe.jsx)("tbody",{children:s.map((e,t)=>(0,Qe.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,Qe.jsx)("td",{className:"px-4 py-3 text-center text-gray-600",children:t+1}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsxs)("select",{value:e.account,onChange:t=>x(e.id,"account",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-slate-500 focus:outline-none",children:[(0,Qe.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062d\u0633\u0627\u0628..."}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u0628\u0636\u0627\u0626\u0639",children:"\u0627\u0644\u0628\u0636\u0627\u0626\u0639"}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621",children:"\u0627\u0644\u0639\u0645\u0644\u0627\u0621"}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646",children:"\u0627\u0644\u0645\u0648\u0631\u062f\u064a\u0646"}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629",children:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629"}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",children:"\u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,Qe.jsx)("option",{value:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a",children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,Qe.jsx)("option",{value:"\u0623\u0631\u0628\u0627\u062d_\u0648\u062e\u0633\u0627\u0626\u0631",children:"\u0623\u0631\u0628\u0627\u062d \u0648\u062e\u0633\u0627\u0626\u0631"})]})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("input",{type:"text",value:e.description,onChange:t=>x(e.id,"description",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-slate-500 focus:outline-none",placeholder:"\u0627\u0644\u0628\u064a\u0627\u0646..."})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("input",{type:"number",value:e.debit,onChange:t=>x(e.id,"debit",t.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-slate-500 focus:outline-none text-right",placeholder:"0.00"})}),(0,Qe.jsx)("td",{className:"px-4 py-3",children:(0,Qe.jsx)("input",{type:"number",value:e.credit,onChange:t=>x(e.id,"credit",t.target.value),min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-slate-500 focus:outline-none text-right",placeholder:"0.00"})}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qe.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void(s.length>1&&a(s.filter(e=>e.id!==t)));var t},disabled:1===s.length,className:"p-2 rounded-lg transition-colors ".concat(1===s.length?"text-gray-300 cursor-not-allowed":"text-red-500 hover:bg-red-50"),children:(0,Qe.jsx)(Os,{})})})]},e.id))}),(0,Qe.jsx)("tfoot",{children:(0,Qe.jsxs)("tr",{className:"bg-slate-100 font-bold",children:[(0,Qe.jsx)("td",{colSpan:"3",className:"px-4 py-3 text-right rounded-br-lg",children:"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-right text-blue-600",children:u().toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-right text-green-600",children:m().toFixed(2)}),(0,Qe.jsx)("td",{className:"px-4 py-3 text-center rounded-bl-lg",children:h()?(0,Qe.jsx)("span",{className:"text-green-600",children:"\u2714"}):(0,Qe.jsx)("span",{className:"text-red-600",children:"\u2716"})})]})})]})}),!h()&&u()>0&&m()>0&&(0,Qe.jsxs)("div",{className:"mt-4 bg-red-50 border-2 border-red-200 rounded-xl p-4 flex items-center gap-2 text-red-700",children:[(0,Qe.jsx)("span",{className:"font-semibold",children:"\u26a0\ufe0f \u0627\u0644\u0642\u064a\u062f \u063a\u064a\u0631 \u0645\u062a\u0648\u0627\u0632\u0646!"}),(0,Qe.jsxs)("span",{children:["\u0627\u0644\u0641\u0631\u0642: ",Math.abs(u()-m()).toFixed(2)," \u0631.\u0633"]})]}),h()&&u()>0&&(0,Qe.jsx)("div",{className:"mt-4 bg-green-50 border-2 border-green-200 rounded-xl p-4 text-green-700 text-center font-semibold",children:"\u2705 \u0627\u0644\u0642\u064a\u062f \u0645\u062a\u0648\u0627\u0632\u0646"})]}),(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,Qe.jsx)("label",{className:"block text-gray-700 font-semibold mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,Qe.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:"3",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-slate-500 focus:outline-none resize-none",placeholder:"\u0623\u0636\u0641 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,Qe.jsxs)("button",{type:"submit",disabled:!h()||0===u(),className:"w-full py-4 rounded-xl font-bold transition-all shadow-lg flex items-center justify-center gap-2 ".concat(h()&&u()>0?"bg-gradient-to-r from-slate-600 to-slate-700 text-white hover:from-slate-700 hover:to-slate-800":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,Qe.jsx)(Ss,{}),"\u062d\u0641\u0638 \u0642\u064a\u062f \u0627\u0644\u062a\u0633\u0648\u064a\u0629"]})]})]})})},fn=()=>{const[e,t]=(0,r.useState)(""),[s,a]=(0,r.useState)("all"),[n,l]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[c]=(0,r.useState)([{id:1,type:"quantity",typeName:"\u062a\u0633\u0648\u064a\u0629 \u0643\u0645\u064a\u0627\u062a",date:"2025-01-15",product:"\u0645\u0646\u062a\u062c A",warehouse:"\u0627\u0644\u0645\u062e\u0632\u0646 \u0627\u0644\u0631\u0626\u064a\u0633\u064a",oldValue:100,newValue:95,reason:"\u062c\u0631\u062f \u062f\u0648\u0631\u064a",user:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f"},{id:2,type:"value",typeName:"\u062a\u0633\u0648\u064a\u0629 \u0642\u064a\u0645\u0629",date:"2025-01-14",product:"\u0645\u0646\u062a\u062c B",warehouse:"-",oldValue:50,newValue:55,reason:"\u062a\u063a\u064a\u0631 \u0633\u0639\u0631 \u0627\u0644\u0633\u0648\u0642",user:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0644\u064a"},{id:3,type:"damaged",typeName:"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641",date:"2025-01-13",product:"\u0645\u0646\u062a\u062c C",warehouse:"\u0627\u0644\u0645\u062e\u0632\u0646 \u0627\u0644\u0641\u0631\u0639\u064a",oldValue:50,newValue:45,reason:"\u0645\u0646\u062a\u0647\u064a \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629",user:"\u0645\u062d\u0645\u062f \u0639\u0628\u062f\u0627\u0644\u0644\u0647"},{id:4,type:"customer_balance",typeName:"\u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0639\u0645\u064a\u0644",date:"2025-01-12",product:"\u0639\u0645\u064a\u0644: \u062e\u0627\u0644\u062f \u0623\u062d\u0645\u062f",warehouse:"-",oldValue:5e3,newValue:4500,reason:"\u062a\u0635\u062d\u064a\u062d \u062e\u0637\u0623",user:"\u0633\u0627\u0631\u0629 \u062d\u0633\u0646"},{id:5,type:"treasury",typeName:"\u062a\u0633\u0648\u064a\u0629 \u062e\u0632\u064a\u0646\u0629",date:"2025-01-11",product:"\u0627\u0644\u062e\u0632\u064a\u0646\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629",warehouse:"-",oldValue:5e4,newValue:50500,reason:"\u062c\u0631\u062f \u064a\u0648\u0645\u064a",user:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f"}]),d=c.filter(t=>{const a=t.product.toLowerCase().includes(e.toLowerCase())||t.reason.toLowerCase().includes(e.toLowerCase())||t.user.toLowerCase().includes(e.toLowerCase()),r="all"===s||t.type===s,l=(!n||t.date>=n)&&(!i||t.date<=i);return a&&r&&l});return(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-slate-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-gray-600 to-gray-700 rounded-xl flex items-center justify-center shadow-lg",children:(0,Qe.jsx)(rs,{className:"text-white text-2xl"})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"\u0633\u062c\u0644 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-gray-500 mt-1",children:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0628\u0642\u0629"})]})]}),(0,Qe.jsxs)("button",{className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors shadow-lg",children:[(0,Qe.jsx)(Yt,{}),"\u062a\u0635\u062f\u064a\u0631 Excel"]})]})}),(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 mb-6",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Qe.jsx)(es,{className:"text-gray-600"}),(0,Qe.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"\u0627\u0644\u0628\u062d\u062b \u0648\u0627\u0644\u062a\u0635\u0641\u064a\u0629"})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Qe.jsx)("div",{className:"md:col-span-2",children:(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"\u0627\u0628\u062d\u062b...",className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:outline-none"}),(0,Qe.jsx)(ks,{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400"})]})}),(0,Qe.jsx)("div",{children:(0,Qe.jsxs)("select",{value:s,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:outline-none",children:[(0,Qe.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,Qe.jsx)("option",{value:"quantity",children:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0643\u0645\u064a\u0627\u062a"}),(0,Qe.jsx)("option",{value:"value",children:"\u062a\u0633\u0648\u064a\u0629 \u0627\u0644\u0642\u064a\u0645\u0629"}),(0,Qe.jsx)("option",{value:"damaged",children:"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("option",{value:"customer_balance",children:"\u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0639\u0645\u064a\u0644"}),(0,Qe.jsx)("option",{value:"supplier_balance",children:"\u062a\u0633\u0648\u064a\u0629 \u0631\u0635\u064a\u062f \u0645\u0648\u0631\u062f"}),(0,Qe.jsx)("option",{value:"treasury",children:"\u062a\u0633\u0648\u064a\u0629 \u062e\u0632\u064a\u0646\u0629"}),(0,Qe.jsx)("option",{value:"entry",children:"\u0642\u064a\u0648\u062f \u062a\u0633\u0648\u064a\u0629"})]})}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsx)("input",{type:"date",value:n,onChange:e=>l(e.target.value),className:"w-1/2 px-3 py-3 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:outline-none",placeholder:"\u0645\u0646"}),(0,Qe.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"w-1/2 px-3 py-3 border-2 border-gray-200 rounded-xl focus:border-gray-500 focus:outline-none",placeholder:"\u0625\u0644\u0649"})]})]}),(0,Qe.jsxs)("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border-2 border-blue-200",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u062a\u0633\u0648\u064a\u0627\u062a"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:d.length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border-2 border-purple-200",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u0643\u0645\u064a\u0627\u062a"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-purple-600 mt-1",children:d.filter(e=>"quantity"===e.type).length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border-2 border-green-200",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u062a\u0633\u0648\u064a\u0627\u062a \u0627\u0644\u0642\u064a\u0645\u0629"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-green-600 mt-1",children:d.filter(e=>"value"===e.type).length})]}),(0,Qe.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100 rounded-xl p-4 border-2 border-red-200",children:[(0,Qe.jsx)("div",{className:"text-sm text-gray-600",children:"\u0634\u0637\u0628 \u062a\u0627\u0644\u0641"}),(0,Qe.jsx)("div",{className:"text-2xl font-bold text-red-600 mt-1",children:d.filter(e=>"damaged"===e.type).length})]})]})]}),(0,Qe.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:(0,Qe.jsx)("div",{className:"overflow-x-auto",children:(0,Qe.jsxs)("table",{className:"w-full",children:[(0,Qe.jsx)("thead",{className:"bg-gradient-to-r from-gray-100 to-gray-200",children:(0,Qe.jsxs)("tr",{children:[(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"#"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0639\u0646\u0635\u0631"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0645\u062e\u0632\u0646"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u0633\u0627\u0628\u0642\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0642\u064a\u0645\u0629 \u0627\u0644\u062c\u062f\u064a\u062f\u0629"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0633\u0628\u0628"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-right text-sm font-bold text-gray-700",children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Qe.jsx)("th",{className:"px-6 py-4 text-center text-sm font-bold text-gray-700",children:"\u0625\u062c\u0631\u0627\u0621"})]})}),(0,Qe.jsx)("tbody",{children:d.length>0?d.map((e,t)=>{return(0,Qe.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors",children:[(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-600",children:t+1}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-700 font-medium",children:e.date}),(0,Qe.jsx)("td",{className:"px-6 py-4",children:(0,Qe.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat((s=e.type,{quantity:"bg-purple-100 text-purple-700 border-purple-300",value:"bg-green-100 text-green-700 border-green-300",damaged:"bg-red-100 text-red-700 border-red-300",customer_balance:"bg-cyan-100 text-cyan-700 border-cyan-300",supplier_balance:"bg-indigo-100 text-indigo-700 border-indigo-300",treasury:"bg-yellow-100 text-yellow-700 border-yellow-300",entry:"bg-gray-100 text-gray-700 border-gray-300"}[s]||"bg-gray-100 text-gray-700")),children:e.typeName})}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-800 font-semibold",children:e.product}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.warehouse}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-700",children:e.oldValue}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-700 font-bold",children:e.newValue}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.reason}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.user}),(0,Qe.jsx)("td",{className:"px-6 py-4 text-center",children:(0,Qe.jsx)("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,Qe.jsx)($t,{})})})]},e.id);var s}):(0,Qe.jsx)("tr",{children:(0,Qe.jsx)("td",{colSpan:"10",className:"px-6 py-12 text-center text-gray-400",children:(0,Qe.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,Qe.jsx)(rs,{className:"text-5xl"}),(0,Qe.jsx)("div",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u062a\u0633\u0648\u064a\u0627\u062a \u0645\u0637\u0627\u0628\u0642\u0629 \u0644\u0644\u0641\u0644\u0627\u062a\u0631"})]})})})})]})})})]})})},bn=()=>{const{products:e,updateProduct:t}=Ye(),{showSuccess:s,showError:a,showWarning:n}=Ke(),[l,i]=(0,r.useState)(!0),[o,c]=(0,r.useState)([]),[d,x]=(0,r.useState)([]),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[g,f]=(0,r.useState)("severity"),[b,v]=(0,r.useState)(!1),[j,y]=(0,r.useState)([]);(0,r.useEffect)(()=>{N()},[]);const N=()=>{i(!0),setTimeout(()=>{const t=e.filter(e=>(e.mainQuantity||0)<0);c(t),0===t.length?s("\ud83c\udf89 \u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629 - \u0627\u0644\u0646\u0638\u0627\u0645 \u0633\u0644\u064a\u0645!"):n("\u26a0\ufe0f \u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 ".concat(t.length," \u0645\u0646\u062a\u062c \u0628\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629")),i(!1)},1500)},w=o.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.category.toLowerCase().includes(h.toLowerCase())).sort((e,t)=>{switch(g){case"severity":case"quantity":return(e.mainQuantity||0)-(t.mainQuantity||0);case"name":return e.name.localeCompare(t.name);default:return 0}}),S=e=>{const t=Math.abs(e);return e<0?"-".concat(t.toLocaleString()):t.toLocaleString()};return l?(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 flex items-center justify-center",children:(0,Qe.jsxs)("div",{className:"text-center",children:[(0,Qe.jsx)("div",{className:"animate-spin w-16 h-16 border-4 border-orange-200 border-t-orange-600 rounded-full mx-auto mb-4"}),(0,Qe.jsx)("h2",{className:"text-2xl font-bold text-orange-800 mb-2",children:"\ud83d\udd0d \u062c\u0627\u0631\u064a \u0641\u062d\u0635 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-orange-600",children:"\u064a\u062a\u0645 \u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0630\u0627\u062a \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0644\u0628\u0629..."})]})}):(0,Qe.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-red-50 p-6",children:(0,Qe.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent mb-2",children:"\ud83d\udd27 \u0623\u062f\u0627\u0629 \u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0644\u0628\u0629"}),(0,Qe.jsx)("p",{className:"text-gray-600 text-lg",children:"\u0641\u062d\u0635 \u0648\u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0630\u0627\u062a \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0644\u0628\u0629 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"})]}),(0,Qe.jsxs)("div",{className:"flex gap-4",children:[(0,Qe.jsxs)("button",{onClick:()=>v(!b),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,Qe.jsx)(rs,{}),"\u0633\u062c\u0644 \u0627\u0644\u0625\u0635\u0644\u0627\u062d\u0627\u062a"]}),(0,Qe.jsxs)("button",{onClick:N,className:"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors flex items-center gap-2",children:[(0,Qe.jsx)(ks,{}),"\u0641\u062d\u0635 \u062c\u062f\u064a\u062f"]})]})]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white p-6 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-red-100 text-sm",children:"\u0645\u0646\u062a\u062c\u0627\u062a \u0633\u0627\u0644\u0628\u0629"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:o.length})]}),(0,Qe.jsx)(Xt,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white p-6 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-green-100 text-sm",children:"\u062a\u0645 \u0625\u0635\u0644\u0627\u062d\u0647\u0627"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:d.length})]}),(0,Qe.jsx)(_t,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-6 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-blue-100 text-sm",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:e.length})]}),(0,Qe.jsx)(ft,{className:"text-4xl opacity-80"})]})}),(0,Qe.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white p-6 rounded-xl",children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"text-purple-100 text-sm",children:"\u0633\u062c\u0644 \u0627\u0644\u0625\u0635\u0644\u0627\u062d\u0627\u062a"}),(0,Qe.jsx)("p",{className:"text-3xl font-bold",children:j.length})]}),(0,Qe.jsx)(Gt,{className:"text-4xl opacity-80"})]})})]})]}),0===o.length&&!l&&(0,Qe.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-8 text-center",children:[(0,Qe.jsx)(_t,{className:"text-6xl text-green-500 mx-auto mb-4"}),(0,Qe.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"\ud83c\udf89 \u0627\u0644\u0646\u0638\u0627\u0645 \u0633\u0644\u064a\u0645!"}),(0,Qe.jsx)("p",{className:"text-green-700 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u0628\u0643\u0645\u064a\u0627\u062a \u0633\u0627\u0644\u0628\u0629. \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a \u0644\u0647\u0627 \u0643\u0645\u064a\u0627\u062a \u0635\u062d\u064a\u062d\u0629."})]}),o.length>0&&(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,Qe.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,Qe.jsx)("div",{className:"flex-1",children:(0,Qe.jsx)("input",{type:"text",placeholder:"\ud83d\udd0d \u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})}),(0,Qe.jsxs)("div",{className:"flex gap-2",children:[(0,Qe.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[(0,Qe.jsx)("option",{value:"severity",children:"\u062a\u0631\u062a\u064a\u0628 \u062d\u0633\u0628 \u0627\u0644\u062e\u0637\u0648\u0631\u0629"}),(0,Qe.jsx)("option",{value:"name",children:"\u062a\u0631\u062a\u064a\u0628 \u0623\u0628\u062c\u062f\u064a"}),(0,Qe.jsx)("option",{value:"quantity",children:"\u062a\u0631\u062a\u064a\u0628 \u062d\u0633\u0628 \u0627\u0644\u0643\u0645\u064a\u0629"})]}),(0,Qe.jsxs)("button",{onClick:async()=>{if(0===o.length)return;m(!0);const e=[],r=[];for(const s of o)try{const a=Math.abs(s.mainQuantity||0);await t(s.id,{mainQuantity:a});const r={productId:s.id,productName:s.name,oldQuantity:s.mainQuantity||0,newQuantity:a,timestamp:new Date,action:"bulk_fixed"};y(e=>[r,...e]),e.push(s.id)}catch(n){r.push({productName:s.name,error:n.message})}x(t=>[...t,...e]),c(t=>t.filter(t=>!e.includes(t.id))),e.length>0&&s("\u2705 \u062a\u0645 \u0625\u0635\u0644\u0627\u062d ".concat(e.length," \u0645\u0646\u062a\u062c \u0628\u0646\u062c\u0627\u062d")),r.length>0&&a("\u274c \u0641\u0634\u0644 \u0641\u064a \u0625\u0635\u0644\u0627\u062d ".concat(r.length," \u0645\u0646\u062a\u062c")),m(!1)},disabled:u||0===o.length,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,Qe.jsx)(Ks,{}),"\u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0643\u0644 (",o.length,")"]})]})]}),(0,Qe.jsx)("div",{className:"space-y-4",children:w.map(r=>{const n=(e=>{const t=Math.abs(e);return t>=100?{level:"critical",color:"text-red-700",bg:"bg-red-100"}:t>=50?{level:"high",color:"text-orange-700",bg:"bg-orange-100"}:t>=10?{level:"medium",color:"text-yellow-700",bg:"bg-yellow-100"}:{level:"low",color:"text-blue-700",bg:"bg-blue-100"}})(r.mainQuantity||0),l=d.includes(r.id);return(0,Qe.jsx)("div",{className:"border-2 rounded-xl p-6 transition-all ".concat(l?"border-green-200 bg-green-50":"border-red-200 ".concat(n.bg)),children:(0,Qe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)("div",{className:"p-3 rounded-xl ".concat(l?"bg-green-500":"bg-red-500"," text-white"),children:l?(0,Qe.jsx)(_t,{}):(0,Qe.jsx)(Xt,{})}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:r.name}),(0,Qe.jsxs)("p",{className:"text-gray-600",children:["\u0627\u0644\u0641\u0626\u0629: ",r.category," | \u0627\u0644\u0643\u0648\u062f: ",r.code]}),(0,Qe.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,Qe.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold ".concat(n.color," ").concat(n.bg),children:["\u0627\u0644\u0643\u0645\u064a\u0629: ",S(r.mainQuantity||0)]}),(0,Qe.jsxs)("span",{className:"text-sm text-gray-500",children:["\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u062e\u0637\u0648\u0631\u0629: ",n.level]})]})]})]}),(0,Qe.jsxs)("div",{className:"flex items-center gap-3",children:[!l&&(0,Qe.jsxs)("button",{onClick:()=>(async r=>{m(!0);try{const n=e.find(e=>e.id===r);if(!n)return void a("\u0627\u0644\u0645\u0646\u062a\u062c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f");const l=n.mainQuantity||0,i=Math.abs(l);await t(r,{mainQuantity:i});const o={productId:r,productName:n.name,oldQuantity:l,newQuantity:i,timestamp:new Date,action:"fixed_negative"};y(e=>[o,...e]),x(e=>[...e,r]),s('\u2705 \u062a\u0645 \u0625\u0635\u0644\u0627\u062d "'.concat(n.name,'" - \u0627\u0644\u0643\u0645\u064a\u0629: ').concat(l," \u2192 ").concat(i)),c(e=>e.filter(e=>e.id!==r))}catch(n){a("\u274c \u0641\u0634\u0644 \u0641\u064a \u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0645\u0646\u062a\u062c: ".concat(n.message))}finally{m(!1)}})(r.id),disabled:u,className:"bg-orange-600 text-white px-6 py-3 rounded-lg hover:bg-orange-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,Qe.jsx)(Ks,{}),"\u0625\u0635\u0644\u0627\u062d"]}),l&&(0,Qe.jsxs)("div",{className:"flex items-center gap-2 text-green-600 font-semibold",children:[(0,Qe.jsx)(_t,{}),"\u062a\u0645 \u0627\u0644\u0625\u0635\u0644\u0627\u062d"]})]})]})},r.id)})}),0===w.length&&h&&(0,Qe.jsxs)("div",{className:"text-center py-12",children:[(0,Qe.jsx)(ks,{className:"text-6xl text-gray-300 mx-auto mb-4"}),(0,Qe.jsx)("p",{className:"text-gray-500 text-lg",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0646\u062a\u062c\u0627\u062a \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0628\u062d\u062b"})]})]}),b&&j.length>0&&(0,Qe.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,Qe.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[(0,Qe.jsx)(rs,{}),"\u0633\u062c\u0644 \u0627\u0644\u0625\u0635\u0644\u0627\u062d\u0627\u062a"]}),(0,Qe.jsx)("div",{className:"space-y-3",children:j.slice(0,10).map((e,t)=>(0,Qe.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,Qe.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qe.jsx)(jt,{className:"text-blue-500"}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("p",{className:"font-semibold",children:e.productName}),(0,Qe.jsxs)("p",{className:"text-sm text-gray-600",children:[e.oldQuantity," \u2192 ",e.newQuantity," | ",new Date(e.timestamp).toLocaleString()]})]})]}),(0,Qe.jsx)("span",{className:"text-sm text-gray-500",children:e.action})]},t))})]}),(0,Qe.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-8 mt-8",children:[(0,Qe.jsxs)("h3",{className:"text-xl font-bold text-blue-800 mb-4 flex items-center gap-2",children:[(0,Qe.jsx)(Cs,{}),"\u0625\u0631\u0634\u0627\u062f\u0627\u062a \u0644\u0645\u0646\u0639 \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0644\u0628\u0629"]}),(0,Qe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h4",{className:"font-semibold text-blue-700 mb-2",children:"\ud83d\udd0d \u0641\u062d\u0635 \u0645\u0633\u062a\u0645\u0631:"}),(0,Qe.jsxs)("ul",{className:"text-blue-600 space-y-1",children:[(0,Qe.jsx)("li",{children:"\u2022 \u0641\u062d\u0635 \u0627\u0644\u0645\u062e\u0632\u0648\u0646 \u064a\u0648\u0645\u064a\u0627\u064b"}),(0,Qe.jsx)("li",{children:"\u2022 \u0645\u0631\u0627\u0642\u0628\u0629 \u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062e\u0632\u0648\u0646"}),(0,Qe.jsx)("li",{children:"\u2022 \u062a\u062a\u0628\u0639 \u0627\u0644\u062a\u0646\u0628\u064a\u0647\u0627\u062a \u0627\u0644\u0645\u0628\u0643\u0631\u0629"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("h4",{className:"font-semibold text-blue-700 mb-2",children:"\u26a1 \u0625\u0635\u0644\u0627\u062d \u0641\u0648\u0631\u064a:"}),(0,Qe.jsxs)("ul",{className:"text-blue-600 space-y-1",children:[(0,Qe.jsx)("li",{children:"\u2022 \u0625\u0635\u0644\u0627\u062d \u0627\u0644\u0643\u0645\u064a\u0627\u062a \u0627\u0644\u0633\u0627\u0644\u0628\u0629 \u0641\u0648\u0631\u0627\u064b"}),(0,Qe.jsx)("li",{children:"\u2022 \u0645\u0631\u0627\u062c\u0639\u0629 \u0633\u062c\u0644 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"}),(0,Qe.jsx)("li",{children:"\u2022 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a"})]})]})]})]})]})})},vn=()=>{var e;const{tabs:t,activeTabId:s}=et(),{isAdmin:a}=We();return r=(null===(e=t.find(e=>e.id===s))||void 0===e?void 0:e.path)||"",["/settings/system","/settings/users","/settings/add-user","/settings/permissions","/settings/integrations","/settings/support","/settings/backup"].some(e=>r.startsWith(e))&&!a()?(0,Qe.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,Qe.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Qe.jsx)("div",{className:"text-red-500 mb-4",children:(0,Qe.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Qe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m0 0v2m0-2h2m-2 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Qe.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0645\u062f\u064a\u0631 \u0641\u0642\u0637"}),(0,Qe.jsx)("p",{className:"text-gray-600 mb-4",children:"\u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0645\u062e\u0635\u0635\u0629 \u0644\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645 \u0641\u0642\u0637. \u0644\u0627 \u064a\u0645\u0643\u0646 \u0644\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0627\u0644\u0622\u062e\u0631\u064a\u0646 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u064a\u0647\u0627."}),(0,Qe.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"\u062f\u0648\u0631\u0643 \u0627\u0644\u062d\u0627\u0644\u064a: \u063a\u064a\u0631 \u0645\u062f\u064a\u0631 - \u0645\u0637\u0644\u0648\u0628: admin"}),(0,Qe.jsx)("button",{onClick:()=>window.location.href="#/dashboard",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]})}):(0,Qe.jsx)(Qe.Fragment,{children:t.map(e=>{const t=e.id===s,a=(e=>{const t={"/dashboard":sa,"/notifications":na,"/warehouses/add-product":la,"/warehouses/manage-products":ia,"/warehouses/add-warehouse":xa,"/warehouses/manage-categories":ua,"/warehouses/transfer":ha,"/warehouses/inventory":pa,"/warehouses/manage":fa,"/purchases/new-invoice":va,"/purchases/invoices":ya,"/purchases/manage":wa,"/purchases/returns":ka,"/sales/new-invoice":Ca,"/sales/invoices":Ia,"/sales/manage":_a,"/sales/returns":Ea,"/sales/external":Xa,"/suppliers/add":Ka,"/suppliers/manage":$a,"/customers/add":Ga,"/customers/manage":Ya,"/treasury/receipt/new":Za,"/treasury/receipts":er,"/treasury/disbursement/new":tr,"/treasury/disbursements":sr,"/treasury/movement":ar,"/treasury/customer-balances":rr,"/treasury/supplier-balances":nr,"/integrations/external-platforms":gr,"/integrations/whatsapp-business":fr,"/settings/add-user":ir,"/settings/permissions":cr,"/settings/support":xr,"/settings/system":mr,"/settings/integrations":pr,"/adjustments/quantity":Lr,"/adjustments/value":xn,"/adjustments/damaged":un,"/adjustments/customer-balance":mn,"/adjustments/supplier-balance":hn,"/adjustments/treasury":pn,"/adjustments/entries":gn,"/adjustments/history":fn,"/tools/fix-negative-quantities":bn,"/accounting/chart-of-accounts":Mr,"/accounting/journal-entry":Tr,"/hr/employees":zr,"/hr/organization":Or,"/hr/attendance":Ar,"/hr/leaves":Fr,"/hr/payroll":Rr,"/production":Wr,"/production/orders":Ur,"/production/planning":Xr,"/production/materials":Kr,"/production/quality":$r,"/production/dashboard":Gr,"/fixed-assets":Yr,"/fixed-assets/dashboard":Zr,"/fixed-assets/management":tn,"/fixed-assets/depreciation":an,"/fixed-assets/maintenance":nn,"/fixed-assets/inventory":on,"/fixed-assets/disposal":dn,"/reports":br,"/reports/inventory":vr,"/reports/product-movement":jr,"/reports/low-stock":yr,"/reports/sales":Nr,"/reports/sales-by-customer":wr,"/reports/top-selling":Sr,"/reports/purchases":kr,"/reports/purchases-by-supplier":Cr,"/reports/treasury":Ir,"/reports/cash-flow":Dr,"/reports/profit-loss":_r};return e.startsWith("/purchases/return/")?Sa:e.startsWith("/sales/return/")?La:t[e]||sa})(e.path);return(0,Qe.jsx)("div",{style:{display:t?"block":"none"},className:"tab-content-wrapper",children:(0,Qe.jsx)(a,{})},e.id)})});var r},jn=()=>{const[e,t]=(0,r.useState)(!1);return(0,Qe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-orange-50/30 to-gray-50",children:[(0,Qe.jsx)(Ys,{toggleSidebar:()=>{t(!e)}}),(0,Qe.jsx)(Js,{isOpen:e,closeSidebar:()=>{t(!1)}}),(0,Qe.jsxs)("main",{className:"pt-[84px] pr-14 lg:pr-14 transition-all duration-300",children:[(0,Qe.jsx)("div",{className:"container mx-auto px-3 py-4",children:(0,Qe.jsx)(vn,{})}),(0,Qe.jsx)(Zs,{})]})]})},yn=e=>{let{notification:t,onClose:s}=e;(0,r.useEffect)(()=>{const e=setTimeout(()=>{s()},5e3);return()=>clearTimeout(e)},[s]);return(0,Qe.jsxs)("div",{className:"".concat((()=>{switch(t.type){case"success":return"bg-white border-r-4 border-green-500";case"error":return"bg-white border-r-4 border-red-500";case"warning":return"bg-white border-r-4 border-yellow-500";case"info":return"bg-white border-r-4 border-blue-500";default:return"bg-white border-r-4 border-gray-500"}})()," rounded-lg shadow-2xl p-4 min-w-[320px] max-w-md animate-slideIn flex items-start gap-3"),style:{animation:"slideIn 0.3s ease-out"},children:[(0,Qe.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(()=>{switch(t.type){case"success":return(0,Qe.jsx)(_t,{className:"text-2xl text-green-500"});case"error":return(0,Qe.jsx)(Ut,{className:"text-2xl text-red-500"});case"warning":return(0,Qe.jsx)(Xt,{className:"text-2xl text-yellow-500"});case"info":return(0,Qe.jsx)(os,{className:"text-2xl text-blue-500"});default:return(0,Qe.jsx)(os,{className:"text-2xl text-gray-500"})}})()}),(0,Qe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qe.jsx)("h4",{className:"text-sm font-bold text-gray-900 mb-1",children:t.title}),(0,Qe.jsx)("p",{className:"text-sm text-gray-700",children:t.message})]}),(0,Qe.jsx)("button",{onClick:s,className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors p-1 rounded hover:bg-gray-100",children:(0,Qe.jsx)(Ts,{})})]})},Nn=()=>{const{notifications:e,removeNotification:t}=Ke(),s=e.slice(0,3);return(0,Qe.jsx)("div",{className:"fixed top-4 left-4 z-[9999] space-y-3",children:s.map(e=>(0,Qe.jsx)(yn,{notification:e,onClose:()=>t(e.id)},e.id))})},wn=()=>{try{const e={id:1,username:"admin",password:(0,qe.hashPassword)("admin123"),name:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645",email:"admin@berosystem.com",phone:"+20 XXX XXX XXXX",role:"admin",status:"active",createdAt:(new Date).toISOString()};return localStorage.setItem("bero_system_users",JSON.stringify([e])),localStorage.removeItem("bero_user"),console.log("\u2705 \u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0628\u0646\u062c\u0627\u062d"),console.log("\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062f\u062e\u0648\u0644 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a\u0629:"),console.log("\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: admin"),console.log("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631: admin123"),{success:!0,message:"\u062a\u0645 \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0646\u0638\u0627\u0645 \u0628\u0646\u062c\u0627\u062d",credentials:{username:"admin",password:"admin123"}}}catch(e){return console.error("\u062e\u0637\u0623 \u0641\u064a \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0646\u0638\u0627\u0645:",e),{success:!1,message:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u062a\u0639\u064a\u064a\u0646"}}},Sn=()=>{try{const e=localStorage.getItem("bero_system_users");if(!e)return{valid:!1,message:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",needsReset:!0};const t=JSON.parse(e);return Array.isArray(t)&&0!==t.length?{valid:!0,message:"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0633\u0644\u064a\u0645\u0629",usersCount:t.length,needsReset:!1}:{valid:!1,message:"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u062a\u0627\u0644\u0641\u0629",needsReset:!0}}catch(e){return{valid:!1,message:"\u062e\u0637\u0623 \u0641\u064a \u0642\u0631\u0627\u0621\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",needsReset:!0,error:e.message}}},kn=()=>{try{const e=localStorage.getItem("bero_system_users");if(!e)return{success:!1,message:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"};const t=JSON.parse(e);let s=0;const a=t.map(e=>e.password&&e.password.length<15?(console.log("\u062a\u062d\u062f\u064a\u062b \u062a\u0634\u0641\u064a\u0631 \u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645: ".concat(e.username)),s++,Be(Be({},e),{},{password:(0,qe.hashPassword)(e.password)})):e);return s>0?(localStorage.setItem("bero_system_users",JSON.stringify(a)),{success:!0,message:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b ".concat(s," \u0645\u0633\u062a\u062e\u062f\u0645"),migratedCount:s}):{success:!0,message:"\u062c\u0645\u064a\u0639 \u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0634\u0641\u0631\u0629 \u0628\u0627\u0644\u0641\u0639\u0644",migratedCount:0}}catch(e){return console.error("\u062e\u0637\u0623 \u0641\u064a \u062a\u0631\u062d\u064a\u0644 \u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631:",e),{success:!1,message:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u062a\u0631\u062d\u064a\u0644"}}};"undefined"!==typeof window&&(window.resetSystemUsers=wn,window.checkUsersIntegrity=Sn,window.migratePasswordsToHashed=kn);const Cn=()=>{const e=ee(),{login:t}=We(),{showSuccess:s,showError:a}=Ke(),[n,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)({username:"",password:""});(0,r.useEffect)(()=>{if("undefined"!==typeof window){window.resetSystemUsers=wn,window.checkUsersIntegrity=Sn;const e=Sn();console.log("\ud83d\udd0d \u0641\u062d\u0635 \u0633\u0644\u0627\u0645\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a:",e),e.needsReset&&(console.warn("\u26a0\ufe0f \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u062a\u062d\u062a\u0627\u062c \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646!"),console.log("\ud83d\udd27 \u0644\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u062a\u0639\u064a\u064a\u0646\u060c \u0627\u0643\u062a\u0628 \u0641\u064a Console: resetSystemUsers()")),console.log("\ud83d\udee0\ufe0f \u062f\u0648\u0627\u0644 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0645\u062a\u0627\u062d\u0629:"),console.log("  - resetSystemUsers() - \u0625\u0639\u0627\u062f\u0629 \u062a\u0639\u064a\u064a\u0646 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"),console.log("  - checkUsersIntegrity() - \u0641\u062d\u0635 \u0633\u0644\u0627\u0645\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},[]);const x=e=>{d(Be(Be({},c),{},{[e.target.name]:e.target.value}))};return(0,Qe.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-white to-orange-50 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,Qe.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Qe.jsx)("div",{className:"absolute w-96 h-96 bg-gradient-to-br from-orange-200 to-orange-300 rounded-full -top-48 -right-48 opacity-20 animate-pulse"}),(0,Qe.jsx)("div",{className:"absolute w-80 h-80 bg-gradient-to-br from-orange-300 to-orange-400 rounded-full -bottom-40 -left-40 opacity-15 animate-pulse",style:{animationDelay:"1s"}}),(0,Qe.jsx)("div",{className:"absolute top-20 left-20 w-16 h-16 bg-orange-200 rounded-lg opacity-20 transform rotate-45 animate-bounce",style:{animationDelay:"0.5s"}}),(0,Qe.jsx)("div",{className:"absolute bottom-32 right-32 w-20 h-20 bg-orange-300 rounded-full opacity-15 animate-bounce",style:{animationDelay:"1.5s"}}),(0,Qe.jsx)("div",{className:"absolute top-1/4 right-1/4 opacity-5",children:(0,Qe.jsx)(Xs,{className:"text-orange-600",size:100})}),(0,Qe.jsx)("div",{className:"absolute bottom-1/4 left-1/4 opacity-5",children:(0,Qe.jsx)(It,{className:"text-orange-600",size:80})})]}),(0,Qe.jsxs)("div",{className:"w-full max-w-md relative z-10",children:[(0,Qe.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 md:p-10 backdrop-blur-sm border border-orange-100",children:[(0,Qe.jsxs)("div",{className:"text-center mb-8",children:[(0,Qe.jsxs)("div",{className:"relative inline-block mb-6",children:[(0,Qe.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-400 to-orange-600 rounded-3xl blur-xl opacity-30 animate-pulse"}),(0,Qe.jsx)("div",{className:"relative w-24 h-24 bg-gradient-to-br from-orange-500 to-orange-600 rounded-3xl flex items-center justify-center text-white shadow-2xl transform hover:scale-105 transition-transform duration-300",children:(0,Qe.jsx)(ft,{className:"text-5xl"})})]}),(0,Qe.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-3",children:(0,Qe.jsx)("span",{className:"bg-gradient-to-r from-orange-600 via-orange-500 to-orange-600 bg-clip-text text-transparent",children:"Bero System"})}),(0,Qe.jsx)("p",{className:"text-gray-600 font-medium text-lg",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u062e\u0627\u0632\u0646 \u0627\u0644\u0645\u062a\u0643\u0627\u0645\u0644"}),(0,Qe.jsxs)("div",{className:"flex justify-center gap-6 mt-6",children:[(0,Qe.jsxs)("div",{className:"flex flex-col items-center group cursor-pointer",children:[(0,Qe.jsx)("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center text-orange-600 group-hover:bg-orange-100 transition-colors",children:(0,Qe.jsx)(Xs,{className:"text-xl"})}),(0,Qe.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"\u0627\u0644\u0645\u062e\u0627\u0632\u0646"})]}),(0,Qe.jsxs)("div",{className:"flex flex-col items-center group cursor-pointer",children:[(0,Qe.jsx)("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center text-orange-600 group-hover:bg-orange-100 transition-colors",children:(0,Qe.jsx)(It,{className:"text-xl"})}),(0,Qe.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"})]}),(0,Qe.jsxs)("div",{className:"flex flex-col items-center group cursor-pointer",children:[(0,Qe.jsx)("div",{className:"w-12 h-12 bg-orange-50 rounded-xl flex items-center justify-center text-orange-600 group-hover:bg-orange-100 transition-colors",children:(0,Qe.jsx)(Cs,{className:"text-xl"})}),(0,Qe.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"\u0627\u0644\u0623\u0645\u0627\u0646"})]})]})]}),(0,Qe.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),l(!0),console.log("\ud83d\udd10 \u0645\u062d\u0627\u0648\u0644\u0629 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644...",{username:c.username});try{const r=await t(c.username,c.password);console.log("\ud83d\udcca \u0646\u062a\u064a\u062c\u0629 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644:",r),r.success?(s(r.message),console.log("\u2705 \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644 \u0646\u0627\u062c\u062d!"),setTimeout(()=>{e("/dashboard")},500)):(a(r.message),console.log("\u274c \u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644:",r.message))}catch(n){console.error("\ud83d\udca5 \u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644:",n),a("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644")}finally{l(!1)}},className:"space-y-5",children:[(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:(0,Qe.jsx)(Hs,{})}),(0,Qe.jsx)("input",{type:"text",name:"username",value:c.username,onChange:x,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",required:!0,className:"w-full pr-12 pl-4 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all outline-none bg-gray-50 hover:bg-white"})]})]}),(0,Qe.jsxs)("div",{children:[(0,Qe.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,Qe.jsxs)("div",{className:"relative",children:[(0,Qe.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400",children:(0,Qe.jsx)(us,{})}),(0,Qe.jsx)("input",{type:i?"text":"password",name:"password",value:c.password,onChange:x,placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",required:!0,className:"w-full pr-12 pl-12 py-3.5 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all outline-none bg-gray-50 hover:bg-white"}),(0,Qe.jsx)("button",{type:"button",onClick:()=>o(!i),className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:i?(0,Qe.jsx)(Kt,{}):(0,Qe.jsx)($t,{})})]})]}),(0,Qe.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:shadow-xl hover:from-orange-600 hover:to-orange-700 transition-all duration-300 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none mt-6",children:n?(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,Qe.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,Qe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,Qe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"\u062c\u0627\u0631\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644..."]}):(0,Qe.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,Qe.jsx)(Cs,{}),"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"]})})]}),(0,Qe.jsxs)("div",{className:"mt-8 p-4 rounded-xl border-2 border-orange-100 bg-gradient-to-r from-orange-50 to-orange-100/50",children:[(0,Qe.jsxs)("div",{className:"flex items-center justify-center gap-2 text-orange-700",children:[(0,Qe.jsx)(Cs,{className:"text-xl"}),(0,Qe.jsx)("p",{className:"text-sm font-semibold",children:"\u0646\u0638\u0627\u0645 \u0622\u0645\u0646 \u0648\u0645\u062d\u0645\u064a \u0628\u0627\u0644\u0643\u0627\u0645\u0644"})]}),(0,Qe.jsx)("p",{className:"text-xs text-gray-600 text-center mt-2",children:"\u064a\u0631\u062c\u0649 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643 \u0644\u0644\u062f\u062e\u0648\u0644"})]})]}),(0,Qe.jsxs)("div",{className:"mt-8 text-center text-sm text-gray-600",children:[(0,Qe.jsxs)("p",{className:"flex items-center justify-center gap-2",children:["\u062a\u0645 \u0627\u0644\u062a\u0637\u0648\u064a\u0631 \u0628\u0648\u0627\u0633\u0637\u0629",(0,Qe.jsx)("span",{className:"font-bold bg-gradient-to-r from-orange-600 to-orange-500 bg-clip-text text-transparent",children:"Biruni Soft"})]}),(0,Qe.jsx)("p",{className:"mt-2 text-gray-500",children:"\xa9 2025 Biruni Soft - \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629"})]})]})]})},In=e=>{let{children:t}=e;const{isAuthenticated:s,loading:a}=We();return a?(0,Qe.jsx)(ta,{fullScreen:!0,message:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."}):s?(0,Qe.jsx)(jn,{}):(0,Qe.jsx)(ge,{to:"/login",replace:!0})},Dn=e=>{let{children:t}=e;const{isAuthenticated:s,loading:a}=We();return a?(0,Qe.jsx)(ta,{fullScreen:!0,message:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."}):s?(0,Qe.jsx)(ge,{to:"/dashboard",replace:!0}):t};const _n=function(){return(0,Qe.jsx)(_e,{children:(0,Qe.jsx)(Ue,{children:(0,Qe.jsx)($e,{children:(0,Qe.jsx)(Je,{children:(0,Qe.jsxs)(tt,{children:[(0,Qe.jsx)(Nn,{}),(0,Qe.jsxs)(ve,{children:[(0,Qe.jsx)(fe,{path:"/login",element:(0,Qe.jsx)(Dn,{children:(0,Qe.jsx)(Cn,{})})}),(0,Qe.jsx)(fe,{path:"/*",element:(0,Qe.jsx)(In,{})})]})]})})})})})};l.createRoot(document.getElementById("root")).render((0,Qe.jsx)(r.StrictMode,{children:(0,Qe.jsx)(_n,{})}))})();
//# sourceMappingURL=main.6200ca85.js.map